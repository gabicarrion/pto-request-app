/*! For license information please see main-68bc7a7c.7339365eed415d24a1ab.js.LICENSE.txt */
"use strict";(self.webpackChunkpto_request_app=self.webpackChunkpto_request_app||[]).push([[64],{808:(e,t,r)=>{r.d(t,{S0:()=>a});var n={vacation:{id:"vacation",label:"ðŸ–ï¸ Vacation",emoji:"ðŸ–ï¸",color:"bg-blue-100 text-blue-800"},sick:{id:"sick",label:"ðŸ¤’ Sick Leave",emoji:"ðŸ¤’",color:"bg-red-100 text-red-800"},personal:{id:"personal",label:"ðŸ‘¤ Personal Day",emoji:"ðŸ‘¤",color:"bg-purple-100 text-purple-800"},holiday:{id:"holiday",label:"ðŸŽ‰ Holiday",emoji:"ðŸŽ‰",color:"bg-green-100 text-green-800"},"other leave type":{id:"other leave type",label:"ðŸ“ Other Leave Type",emoji:"ðŸ“",color:"bg-gray-100 text-gray-800"}},a=function(e){var t;return(null===(t=n[null==e?void 0:e.toLowerCase()])||void 0===t?void 0:t.emoji)||"ðŸ“…"}},3245:(e,t,r)=>{r.d(t,{A:()=>c});r(6540);var n=r(7946),a=r(4471),s=r(180),i=r(4848);const c=function(e){var t=function(e){var t={pending:{bg:"bg-yellow-100",text:"text-yellow-800",icon:n.A,label:"Pending"},approved:{bg:"bg-green-100",text:"text-green-800",icon:a.A,label:"Approved"},declined:{bg:"bg-red-100",text:"text-red-800",icon:s.A,label:"Declined"}};return t[e.toLowerCase()]||t.pending}(e.status),r=t.icon;return(0,i.jsxs)("span",{className:"inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ".concat(t.bg," ").concat(t.text),children:[(0,i.jsx)(r,{size:12}),(0,i.jsx)("span",{children:t.label})]})}},4143:(e,t,r)=>{r.d(t,{A:()=>w});var n=r(6540),a=r(2307),s=r(4471),i=r(7235),c=r(4934),o=r(2708),l=r(7946),u=r(2321),m=r(5143),d=r(9618),f=r(4848);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function s(r,n,a,s){var o=n&&n.prototype instanceof c?n:c,l=Object.create(o.prototype);return g(l,"_invoke",function(r,n,a){var s,c,o,l=0,u=a||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return s=t,c=0,o=e,d.n=r,i}};function f(r,n){for(c=r,o=n,t=0;!m&&l&&!a&&t<u.length;t++){var a,s=u[t],f=d.p,p=s[2];r>3?(a=p===n)&&(o=s[(c=s[4])?5:(c=3,3)],s[4]=s[5]=e):s[0]<=f&&((a=r<2&&f<s[1])?(c=0,d.v=n,d.n=s[1]):f<p&&(a=r<3||s[0]>n||n>p)&&(s[4]=r,s[5]=n,d.n=p,c=0))}if(a||r>1)return i;throw m=!0,n}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),c=u,o=p;(t=c<2?e:o)||!m;){s||(c?c<3?(c>1&&(d.n=-1),f(c,o)):d.n=o:d.v=o);try{if(l=2,s){if(c||(a="next"),t=s[a]){if(!(t=t.call(s,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,c<2&&(c=0)}else 1===c&&(t=s.return)&&t.call(s),c<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),c=1);s=e}else if((t=(m=d.n<0)?o:r.call(n,d))!==i)break}catch(t){s=e,c=1,o=t}finally{l=1}}return{value:t,done:m}}}(r,a,s),!0),l}var i={};function c(){}function o(){}function l(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(g(t={},n,(function(){return this})),t),m=l.prototype=c.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,g(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return o.prototype=l,g(m,"constructor",l),g(l,"constructor",o),o.displayName="GeneratorFunction",g(l,a,"GeneratorFunction"),g(m),g(m,a,"Generator"),g(m,n,(function(){return this})),g(m,"toString",(function(){return"[object Generator]"})),(b=function(){return{w:s,m:d}})()}function g(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}g=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var s=function(t,r){g(e,t,(function(e){return this._invoke(t,r,e)}))};s("next",0),s("throw",1),s("return",2)}},g(e,t,r,n)}function j(e,t,r,n,a,s,i){try{var c=e[s](i),o=c.value}catch(e){return void r(e)}c.done?t(o):Promise.resolve(o).then(n,a)}function x(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function i(e){j(s,n,a,i,c,"next",e)}function c(e){j(s,n,a,i,c,"throw",e)}i(void 0)}))}}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,c=[],o=!0,l=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;o=!1}else for(;!(o=(n=s.call(r)).done)&&(c.push(n.value),c.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{if(!o&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const w=function(e){var t=e.currentUser,r=e.showNotification,p=e.isAdmin,h=N((0,n.useState)(null),2),v=h[0],g=h[1],j=N((0,n.useState)({startDate:new Date((new Date).getFullYear(),0,1).toISOString().split("T")[0],endDate:new Date((new Date).getFullYear(),11,31).toISOString().split("T")[0]}),2),k=j[0],w=j[1],_=N((0,n.useState)([]),2),T=_[0],S=_[1],A=N((0,n.useState)(!1),2),D=(A[0],A[1]),O=N((0,n.useState)(null),2),C=O[0],P=O[1];(0,n.useEffect)((function(){v&&I()}),[v,k]);var I=function(){var e=x(b().m((function e(){var t;return b().w((function(e){for(;;)switch(e.n){case 0:return D(!0),e.p=1,e.n=2,(0,u.invoke)("getPTORequests",{requester_id:v.accountId,startDate:k.startDate,endDate:k.endDate});case 2:(t=e.v).success&&S(t.data||[]),e.n=4;break;case 3:e.p=3,e.v,r("Failed to load PTO requests","error");case 4:return e.p=4,D(!1),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=x(b().m((function e(t){return b().w((function(e){for(;;)switch(e.n){case 0:r("PTO request updated successfully"),I();case 1:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=x(b().m((function e(n){var a;return b().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm("Are you sure you want to delete this PTO request?")){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,(0,u.invoke)("adminDeletePTORequest",{requestId:n.id,adminId:t.accountId,reason:"Admin deletion"});case 2:(a=e.v).success?(r("PTO request deleted successfully"),I()):r(a.message||"Failed to delete request","error"),e.n=4;break;case 3:e.p=3,e.v,r("Failed to delete PTO request","error");case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}(),M={totalDays:T.reduce((function(e,t){return e+(t.total_days||0)}),0),approved:T.filter((function(e){return"approved"===e.status})).length,pending:T.filter((function(e){return"pending"===e.status})).length,declined:T.filter((function(e){return"declined"===e.status})).length};return(0,f.jsxs)("div",{className:"user-pto-management",children:[(0,f.jsxs)("div",{className:"user-pto-header",children:[(0,f.jsx)("h2",{children:"User PTO Management"}),(0,f.jsxs)("div",{className:"user-pto-controls",children:[(0,f.jsx)(m.A,{selectedUser:v,onSelect:g,placeholder:"Search and select user",useBackendSearch:!0}),(0,f.jsxs)("div",{className:"date-range-filter",children:[(0,f.jsx)("input",{type:"date",value:k.startDate,onChange:function(e){return w((function(t){return y(y({},t),{},{startDate:e.target.value})}))},className:"form-control"}),(0,f.jsx)("span",{children:"to"}),(0,f.jsx)("input",{type:"date",value:k.endDate,onChange:function(e){return w((function(t){return y(y({},t),{},{endDate:e.target.value})}))},className:"form-control"})]})]})]}),v&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"summary-cards",children:[(0,f.jsxs)("div",{className:"summary-card",children:[(0,f.jsx)("div",{className:"card-icon",children:(0,f.jsx)(a.A,{size:24})}),(0,f.jsxs)("div",{className:"card-content",children:[(0,f.jsx)("div",{className:"card-value",children:M.totalDays}),(0,f.jsx)("div",{className:"card-label",children:"Total PTO Days"})]})]}),(0,f.jsxs)("div",{className:"summary-card approved",children:[(0,f.jsx)("div",{className:"card-icon",children:(0,f.jsx)(s.A,{size:24})}),(0,f.jsxs)("div",{className:"card-content",children:[(0,f.jsx)("div",{className:"card-value",children:M.approved}),(0,f.jsx)("div",{className:"card-label",children:"Approved"})]})]}),(0,f.jsxs)("div",{className:"summary-card pending",children:[(0,f.jsx)("div",{className:"card-icon",children:(0,f.jsx)(i.A,{size:24})}),(0,f.jsxs)("div",{className:"card-content",children:[(0,f.jsx)("div",{className:"card-value",children:M.pending}),(0,f.jsx)("div",{className:"card-label",children:"Pending"})]})]})]}),(0,f.jsx)("div",{className:"requests-table-container",children:(0,f.jsxs)("table",{className:"requests-table",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{children:"PTO Date"}),(0,f.jsx)("th",{children:"Leave Type"}),(0,f.jsx)("th",{children:"Period"}),(0,f.jsx)("th",{children:"Days"}),(0,f.jsx)("th",{children:"Reason"}),(0,f.jsx)("th",{children:"Status"}),p&&(0,f.jsx)("th",{children:"Actions"})]})}),(0,f.jsxs)("tbody",{children:[T.map((function(e){return(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{children:new Date(e.start_date).toLocaleDateString()}),(0,f.jsx)("td",{children:(0,f.jsx)("span",{className:"leave-type ".concat(e.leave_type),children:e.leave_type})}),(0,f.jsx)("td",{children:e.start_date===e.end_date?new Date(e.start_date).toLocaleDateString():"".concat(new Date(e.start_date).toLocaleDateString()," - ").concat(new Date(e.end_date).toLocaleDateString())}),(0,f.jsx)("td",{children:e.total_days}),(0,f.jsx)("td",{children:e.reason}),(0,f.jsx)("td",{children:(0,f.jsx)("span",{className:"status-badge status-".concat(e.status),children:e.status})}),p&&(0,f.jsxs)("td",{className:"actions",children:[(0,f.jsx)("button",{onClick:function(){return function(e){P(e)}(e)},className:"action-btn edit",title:"Edit request",children:(0,f.jsx)(c.A,{size:16})}),(0,f.jsx)("button",{onClick:function(){return E(e)},className:"action-btn delete",title:"Delete request",children:(0,f.jsx)(o.A,{size:16})})]})]},e.id)})),0===T.length&&(0,f.jsx)("tr",{children:(0,f.jsx)("td",{colSpan:p?7:6,className:"empty-state",children:(0,f.jsxs)("div",{className:"empty-content",children:[(0,f.jsx)(a.A,{size:24}),(0,f.jsx)("p",{children:"No PTO requests found for this period"})]})})})]})]})})]}),!v&&(0,f.jsx)("div",{className:"empty-state",children:(0,f.jsxs)("div",{className:"empty-content",children:[(0,f.jsx)(l.A,{size:32}),(0,f.jsx)("p",{children:"Select a user to view their PTO requests"})]})}),C&&(0,f.jsx)(d.A,{request:C,onClose:function(){return P(null)},onSave:U,currentUser:t})]})}},5143:(e,t,r)=>{r.d(t,{A:()=>b});var n=r(6540),a=r(8686),s=r(8697),i=r(8445),c=r(2321),o=r(4848);function l(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function s(r,n,a,s){var o=n&&n.prototype instanceof c?n:c,l=Object.create(o.prototype);return m(l,"_invoke",function(r,n,a){var s,c,o,l=0,u=a||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return s=t,c=0,o=e,d.n=r,i}};function f(r,n){for(c=r,o=n,t=0;!m&&l&&!a&&t<u.length;t++){var a,s=u[t],f=d.p,p=s[2];r>3?(a=p===n)&&(o=s[(c=s[4])?5:(c=3,3)],s[4]=s[5]=e):s[0]<=f&&((a=r<2&&f<s[1])?(c=0,d.v=n,d.n=s[1]):f<p&&(a=r<3||s[0]>n||n>p)&&(s[4]=r,s[5]=n,d.n=p,c=0))}if(a||r>1)return i;throw m=!0,n}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),c=u,o=p;(t=c<2?e:o)||!m;){s||(c?c<3?(c>1&&(d.n=-1),f(c,o)):d.n=o:d.v=o);try{if(l=2,s){if(c||(a="next"),t=s[a]){if(!(t=t.call(s,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,c<2&&(c=0)}else 1===c&&(t=s.return)&&t.call(s),c<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),c=1);s=e}else if((t=(m=d.n<0)?o:r.call(n,d))!==i)break}catch(t){s=e,c=1,o=t}finally{l=1}}return{value:t,done:m}}}(r,a,s),!0),l}var i={};function c(){}function o(){}function l(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(m(t={},n,(function(){return this})),t),f=l.prototype=c.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,m(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return o.prototype=l,m(f,"constructor",l),m(l,"constructor",o),o.displayName="GeneratorFunction",m(l,a,"GeneratorFunction"),m(f),m(f,a,"Generator"),m(f,n,(function(){return this})),m(f,"toString",(function(){return"[object Generator]"})),(u=function(){return{w:s,m:p}})()}function m(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}m=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var s=function(t,r){m(e,t,(function(e){return this._invoke(t,r,e)}))};s("next",0),s("throw",1),s("return",2)}},m(e,t,r,n)}function d(e,t,r,n,a,s,i){try{var c=e[s](i),o=c.value}catch(e){return void r(e)}c.done?t(o):Promise.resolve(o).then(n,a)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function i(e){d(s,n,a,i,c,"next",e)}function c(e){d(s,n,a,i,c,"throw",e)}i(void 0)}))}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,c=[],o=!0,l=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;o=!1}else for(;!(o=(n=s.call(r)).done)&&(c.push(n.value),c.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{if(!o&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){var r;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];clearTimeout(r),r=setTimeout((function(){clearTimeout(r),e.apply(void 0,a)}),t)}}const b=function(e){var t,r=e.selectedUser,m=e.onSelect,d=e.placeholder,h=void 0===d?"Search for a user":d,y=e.disabled,b=void 0!==y&&y,g=e.required,j=void 0!==g&&g,x=e.error,N=void 0===x?null:x,k=e.allUsers,w=void 0===k?[]:k,_=e.filterBy,T=void 0===_?"all":_,S=e.useBackendSearch,A=void 0!==S&&S,D=p((0,n.useState)(!1),2),O=D[0],C=D[1],P=p((0,n.useState)(""),2),I=P[0],U=P[1],E=p((0,n.useState)([]),2),M=E[0],F=E[1],L=p((0,n.useState)(!1),2),W=L[0],q=L[1],R=p((0,n.useState)(null),2),z=R[0],G=R[1],B=(0,n.useRef)(null),J=(0,n.useRef)(null),V=(0,n.useCallback)(v(function(){var e=f(u().m((function e(t){var r,n;return u().w((function(e){for(;;)switch(e.n){case 0:if(!(t.length<1)){e.n=1;break}return F([]),e.a(2);case 1:return q(!0),G(null),e.p=2,e.n=3,(0,c.invoke)("searchDatabaseUsers",{query:t,filterBy:T,startAt:0,maxResults:50});case 3:if(!(r=e.v).success||!r.data){e.n=4;break}F(r.data.users||[]),e.n=5;break;case 4:throw new Error(r.message||"Failed to search users");case 5:e.n=7;break;case 6:e.p=6,n=e.v,console.error("âŒ Error searching users:",n),G(n.message),F([]);case 7:return e.p=7,q(!1),e.f(7);case 8:return e.a(2)}}),e,null,[[2,6,7,8]])})));return function(t){return e.apply(this,arguments)}}(),300),[T]),H=(0,n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=l(w);if("withTeam"===T?t=t.filter((function(e){return(e.team_ids||[]).length>0})):"withoutTeam"===T&&(t=t.filter((function(e){return!(e.team_ids&&e.team_ids.length>0)}))),e.length>=1){var r=e.toLowerCase();t=t.filter((function(e){var t=(e.display_name||e.displayName||"").toLowerCase(),n=(e.email_address||e.emailAddress||"").toLowerCase(),a=(e.first_name||e.firstName||"").toLowerCase(),s=(e.last_name||e.lastName||"").toLowerCase();return t.includes(r)||n.includes(r)||a.includes(r)||s.includes(r)}))}t.sort((function(e,t){var r=(e.display_name||e.displayName||"").toLowerCase(),n=(t.display_name||t.displayName||"").toLowerCase();return r.localeCompare(n)})),F(t.slice(0,50))}),[w,T]);(0,n.useEffect)((function(){A||H(I)}),[H,I,A]);(0,n.useEffect)((function(){var e=function(e){B.current&&!B.current.contains(e.target)&&(C(!1),U(""),A||F([]))};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[A]),(0,n.useEffect)((function(){var e=function(e){"Escape"===e.key&&O&&(C(!1),U(""),A||F([]))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[O,A]);var $=function(e){return e.team_name||""},Y=(0,n.useCallback)(v(function(){var e=f(u().m((function e(t){var r,n;return u().w((function(e){for(;;)switch(e.n){case 0:if(t){e.n=1;break}return F([]),e.a(2);case 1:if(e.p=1,!A){e.n=3;break}return e.n=2,(0,c.invoke)("searchDatabaseUsers",{query:t,filterBy:T,startAt:0,maxResults:50});case 2:r=e.v,e.n=5;break;case 3:return e.n=4,(0,c.invoke)("getInternalJiraUsers",{startAt:0,maxResults:50});case 4:r=e.v;case 5:r.success?F(r.data.users||[]):F([]),e.n=7;break;case 6:e.p=6,n=e.v,console.error("Error searching users:",n),F([]);case 7:return e.a(2)}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),300),[A,T]);return(0,n.useEffect)((function(){I?Y(I):F([])}),[I,Y]),(0,o.jsxs)("div",{className:"user-picker-container",ref:B,children:[(0,o.jsx)("div",{onClick:function(){b||(C(!0),setTimeout((function(){var e;null===(e=J.current)||void 0===e||e.focus()}),100))},className:"user-picker-input ".concat(b?"user-picker-input-disabled":""," ").concat(O?"user-picker-input-focused":""," ").concat(N?"user-picker-input-error":""),children:r?(0,o.jsxs)("div",{className:"user-picker-selected",children:[(0,o.jsx)("div",{className:"user-picker-avatar",children:r.avatarUrl||r.avatar_url?(0,o.jsx)("img",{src:r.avatarUrl||r.avatar_url,alt:r.displayName||r.display_name,className:"user-picker-avatar-img"}):(0,o.jsx)("span",{className:"user-picker-avatar-text",children:(null===(t=r.displayName||r.display_name)||void 0===t?void 0:t.charAt(0))||(0,o.jsx)(a.A,{size:16})})}),(0,o.jsxs)("div",{className:"user-picker-user-info",children:[(0,o.jsx)("div",{className:"user-picker-user-name",children:r.displayName||r.display_name}),(0,o.jsx)("div",{className:"user-picker-user-email",children:r.emailAddress||r.email_address})]}),!b&&(0,o.jsx)("button",{onClick:function(e){e.stopPropagation(),m(null)},className:"user-picker-clear-btn",type:"button",children:(0,o.jsx)(s.A,{size:16})})]}):(0,o.jsxs)("div",{className:"user-picker-placeholder",children:[(0,o.jsx)(i.A,{size:16}),(0,o.jsx)("span",{children:h}),j&&(0,o.jsx)("span",{className:"user-picker-required",children:"*"})]})}),N&&(0,o.jsx)("div",{className:"user-picker-error",children:N}),O&&(0,o.jsxs)("div",{className:"user-picker-dropdown",children:[(0,o.jsx)("div",{className:"user-picker-search-container",children:(0,o.jsxs)("div",{className:"user-picker-search-input-wrapper",children:[(0,o.jsx)(i.A,{size:16,className:"user-picker-search-icon"}),(0,o.jsx)("input",{ref:J,type:"text",value:I,onChange:function(e){var t=e.target.value;U(t),A?V(t):H(t)},placeholder:"Type to search users...",className:"user-picker-search-input"})]})}),(0,o.jsx)("div",{className:"user-picker-results",children:W?(0,o.jsxs)("div",{className:"user-picker-loading",children:[(0,o.jsx)("div",{className:"user-picker-loading-spinner"}),(0,o.jsx)("div",{className:"user-picker-loading-text",children:"Searching..."})]}):z?(0,o.jsx)("div",{className:"user-picker-empty",children:(0,o.jsxs)("div",{className:"user-picker-empty-text",children:["Error: ",z]})}):0!==w.length||A?I.length>=1&&0===M.length?(0,o.jsx)("div",{className:"user-picker-empty",children:(0,o.jsx)("div",{className:"user-picker-empty-text",children:"No users found"})}):I.length<1?(0,o.jsx)("div",{className:"user-picker-empty",children:(0,o.jsx)("div",{className:"user-picker-empty-text",children:"Type to search users..."})}):(0,o.jsxs)("div",{className:"user-picker-user-list",children:[M.map((function(e){var t;return(0,o.jsxs)("div",{onClick:function(){return function(e){m(e),C(!1),U(""),F([])}(e)},className:"user-picker-user-option",children:[(0,o.jsx)("div",{className:"user-picker-avatar",children:e.avatarUrl||e.avatar_url?(0,o.jsx)("img",{src:e.avatarUrl||e.avatar_url,alt:e.displayName||e.display_name,className:"user-picker-avatar-img"}):(0,o.jsx)("span",{className:"user-picker-avatar-text",children:(null===(t=e.displayName||e.display_name)||void 0===t?void 0:t.charAt(0))||(0,o.jsx)(a.A,{size:16})})}),(0,o.jsxs)("div",{className:"user-picker-option-info",children:[(0,o.jsx)("div",{className:"user-picker-option-name",children:e.displayName||e.display_name}),(0,o.jsx)("div",{className:"user-picker-option-email",children:e.emailAddress||e.email_address}),$(e)&&(0,o.jsxs)("div",{className:"user-picker-option-team",children:["Team: ",$(e)]})]})]},e.id)})),50===M.length&&(0,o.jsx)("div",{className:"user-picker-more-results",children:"Showing first 50 results. Narrow your search for more specific results."})]}):(0,o.jsx)("div",{className:"user-picker-empty",children:(0,o.jsx)("div",{className:"user-picker-empty-text",children:"No users available"})})})]})]})}},5839:(e,t,r)=>{r.d(t,{A:()=>A});var n=r(6540),a=r(2321),s=r(5143),i=r(8309),c=r(1999),o=r(5977),l=r(8686),u=r(7677),m=r(4809),d=r.n(m),f=r(4848);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(p(e)+" is not iterable")}function y(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=T(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw s}}}}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function s(r,n,a,s){var o=n&&n.prototype instanceof c?n:c,l=Object.create(o.prototype);return x(l,"_invoke",function(r,n,a){var s,c,o,l=0,u=a||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return s=t,c=0,o=e,d.n=r,i}};function f(r,n){for(c=r,o=n,t=0;!m&&l&&!a&&t<u.length;t++){var a,s=u[t],f=d.p,p=s[2];r>3?(a=p===n)&&(o=s[(c=s[4])?5:(c=3,3)],s[4]=s[5]=e):s[0]<=f&&((a=r<2&&f<s[1])?(c=0,d.v=n,d.n=s[1]):f<p&&(a=r<3||s[0]>n||n>p)&&(s[4]=r,s[5]=n,d.n=p,c=0))}if(a||r>1)return i;throw m=!0,n}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),c=u,o=p;(t=c<2?e:o)||!m;){s||(c?c<3?(c>1&&(d.n=-1),f(c,o)):d.n=o:d.v=o);try{if(l=2,s){if(c||(a="next"),t=s[a]){if(!(t=t.call(s,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,c<2&&(c=0)}else 1===c&&(t=s.return)&&t.call(s),c<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),c=1);s=e}else if((t=(m=d.n<0)?o:r.call(n,d))!==i)break}catch(t){s=e,c=1,o=t}finally{l=1}}return{value:t,done:m}}}(r,a,s),!0),l}var i={};function c(){}function o(){}function l(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(x(t={},n,(function(){return this})),t),m=l.prototype=c.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,x(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return o.prototype=l,x(m,"constructor",l),x(l,"constructor",o),o.displayName="GeneratorFunction",x(l,a,"GeneratorFunction"),x(m),x(m,a,"Generator"),x(m,n,(function(){return this})),x(m,"toString",(function(){return"[object Generator]"})),(j=function(){return{w:s,m:d}})()}function x(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}x=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var s=function(t,r){x(e,t,(function(e){return this._invoke(t,r,e)}))};s("next",0),s("throw",1),s("return",2)}},x(e,t,r,n)}function N(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t,r,n,a,s,i){try{var c=e[s](i),o=c.value}catch(e){return void r(e)}c.done?t(o):Promise.resolve(o).then(n,a)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function i(e){k(s,n,a,i,c,"next",e)}function c(e){k(s,n,a,i,c,"throw",e)}i(void 0)}))}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,c=[],o=!0,l=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;o=!1}else for(;!(o=(n=s.call(r)).done)&&(c.push(n.value),c.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{if(!o&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return c}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"==typeof e)return S(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const A=function(e){var t=e.isOpen,r=e.onClose,m=e.teams,p=e.users,v=e.onSaveTeam,x=e.onDeleteTeam,k=e.onSaveUser,T=e.onDeleteUser,S=e.showNotification,A=e.onRefresh,D=_((0,n.useState)("teams"),2),O=D[0],C=D[1],P=_((0,n.useState)("list"),2),I=P[0],U=P[1],E=_((0,n.useState)(null),2),M=E[0],F=E[1],L=_((0,n.useState)(null),2),W=L[0],q=L[1],R=_((0,n.useState)(!1),2),z=R[0],G=R[1],B=_((0,n.useState)([]),2),J=B[0],V=B[1],H=_((0,n.useState)(!1),2),$=H[0],Y=H[1],K=_((0,n.useState)({startAt:0,maxResults:50,total:0,isLast:!0}),2),Q=K[0],X=K[1],Z=_((0,n.useState)([]),2),ee=Z[0],te=Z[1],re=_((0,n.useState)(!1),2),ne=re[0],ae=re[1],se=_((0,n.useState)({name:"",description:"",manager:null,department:"",color:"#667eea"}),2),ie=se[0],ce=se[1],oe=_((0,n.useState)({firstName:"",lastName:"",displayName:"",emailAddress:"",jiraAccountId:"",employmentType:"full-time",hireDate:"",teamMemberships:[],capacity:40,manager:"",executiveManager:""}),2),le=oe[0],ue=oe[1],me=_((0,n.useState)([{dayOfWeek:1,dayName:"Monday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:2,dayName:"Tuesday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:3,dayName:"Wednesday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:4,dayName:"Thursday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:5,dayName:"Friday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:6,dayName:"Saturday",isWorkingDay:!1,startTime:"",endTime:"",hoursPerDay:0},{dayOfWeek:7,dayName:"Sunday",isWorkingDay:!1,startTime:"",endTime:"",hoursPerDay:0}]),2),de=me[0],fe=me[1],pe=_((0,n.useState)({}),2),he=pe[0],ye=pe[1],ve=_((0,n.useState)("Member"),2),be=ve[0],ge=ve[1];(0,n.useEffect)((function(){"users"===O&&"import"===I&&je(0)}),[O,I]);var je=function(){var e=w(j().m((function e(){var t,r,n,s,i,c,o,l,u=arguments;return j().w((function(e){for(;;)switch(e.n){case 0:return 0===(t=u.length>0&&void 0!==u[0]?u[0]:0)&&(Y(!0),V([])),e.p=1,e.n=2,(0,a.invoke)("getInternalJiraUsers",{startAt:t,maxResults:50});case 2:if(!(r=e.v).success||!r.data){e.n=4;break}if(n=r.data,s=n.users,i=n.total,c=n.isLast,V((function(e){return[].concat(N(e),N(s||[]))})),X({startAt:t,maxResults:50,total:i||0,isLast:!1!==c}),c){e.n=3;break}return o=t+50,e.n=3,je(o);case 3:e.n=5;break;case 4:throw new Error(r.message||"Failed to load Jira users");case 5:e.n=7;break;case 6:e.p=6,l=e.v,0===t&&(S("Failed to load Jira users: "+l.message,"error"),V([]));case 7:return e.p=7,(0===t||$)&&Y(!1),e.f(7);case 8:return e.a(2)}}),e,null,[[1,6,7,8]])})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=w(j().m((function e(){var t,r,n,s,i,c,o;return j().w((function(e){for(;;)switch(e.n){case 0:if(0!==ee.length){e.n=1;break}return S("Please select users to import","error"),e.a(2);case 1:return ae(!0),e.p=2,t=p.map((function(e){return e.jira_account_id||e.email_address})).filter(Boolean),r=ee.filter((function(e){return!t.includes(e.accountId)&&!t.includes(e.emailAddress)})),e.n=3,(0,a.invoke)("bulkImportUsersFromJira",{selectedUserIds:r.map((function(e){return e.accountId})),defaultTeamId:null,defaultDepartment:""});case 3:if(!(n=e.v).success){e.n=4;break}s=n.data,i=s.importedCount,c=s.skippedCount,S("Successfully imported ".concat(i," users. ").concat(c>0?"".concat(c," users were already in the system."):""),"success"),te([]),A&&A(),je(0),e.n=5;break;case 4:throw new Error(n.message||"Failed to import users");case 5:e.n=7;break;case 6:e.p=6,o=e.v,S("Failed to import users: "+o.message,"error");case 7:return e.p=7,ae(!1),e.f(7);case 8:return e.a(2)}}),e,null,[[2,6,7,8]])})));return function(){return e.apply(this,arguments)}}(),Ne=function(){ce({name:"",description:"",manager:null,department:"",color:"#667eea"}),ye({}),F(null)},ke=function(){ue({firstName:"",lastName:"",displayName:"",emailAddress:"",jiraAccountId:"",employmentType:"full-time",hireDate:"",teamMemberships:[],capacity:40,manager:"",executiveManager:""}),fe([{dayOfWeek:1,dayName:"Monday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:2,dayName:"Tuesday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:3,dayName:"Wednesday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:4,dayName:"Thursday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:5,dayName:"Friday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:6,dayName:"Saturday",isWorkingDay:!1,startTime:"",endTime:"",hoursPerDay:0},{dayOfWeek:7,dayName:"Sunday",isWorkingDay:!1,startTime:"",endTime:"",hoursPerDay:0}]),ye({}),q(null)};(0,n.useEffect)((function(){(le.firstName||le.lastName)&&ue((function(e){return b(b({},e),{},{displayName:"".concat(le.firstName," ").concat(le.lastName).trim()})}))}),[le.firstName,le.lastName]),(0,n.useEffect)((function(){var e=de.reduce((function(e,t){return e+(t.isWorkingDay?t.hoursPerDay:0)}),0);ue((function(t){return b(b({},t),{},{capacity:e})}))}),[de]);var we=function(){var e=w(j().m((function e(t){return j().w((function(e){for(;;)switch(e.n){case 0:ce((function(e){return b(b({},e),{},{manager:t})}));case 1:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(e,t){ce((function(r){return b(b({},r),{},g({},e,t))})),he[e]&&ye((function(t){return b(b({},t),{},g({},e,null))}))},Te=function(){var e=w(j().m((function e(t){var r;return j().w((function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),n=void 0,n={},ie.name.trim()||(n.name="Team name is required"),ye(n),0===Object.keys(n).length){e.n=1;break}return e.a(2);case 1:return G(!0),e.p=2,r={id:null==M?void 0:M.id,name:ie.name,description:ie.description,manager:ie.manager&&(ie.manager.jira_account_id||ie.manager.accountId||ie.manager.id)||null,department:ie.department,color:ie.color,members:(null==M?void 0:M.members)||[]},console.log("Submitting team:",r),e.n=3,v(r);case 3:S(M?"Team updated successfully":"Team created successfully"),Ne(),U("list"),A&&A(),e.n=5;break;case 4:e.p=4,e.v,S("Failed to save team","error");case 5:return e.p=5,G(!1),e.f(5);case 6:return e.a(2)}var n}),e,null,[[2,4,5,6]])})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=w(j().m((function e(t,r){return j().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm('Are you sure you want to delete the team "'.concat(r,'"? This action cannot be undone.'))){e.n=1;break}return e.a(2);case 1:return G(!0),e.p=2,e.n=3,x(t);case 3:S("Team deleted successfully"),A&&A(),e.n=5;break;case 4:e.p=4,e.v,S("Failed to delete team","error");case 5:return e.p=5,G(!1),e.f(5);case 6:return e.a(2)}}),e,null,[[2,4,5,6]])})));return function(t,r){return e.apply(this,arguments)}}(),Ae=function(e,t){ue((function(r){return b(b({},r),{},g({},e,t))})),he[e]&&ye((function(t){return b(b({},t),{},g({},e,null))}))},De=function(e,t,r){fe((function(n){var a=N(n);if(a[e]=b(b({},a[e]),{},g({},t,r)),"startTime"===t||"endTime"===t){var s=a[e];if(s.startTime&&s.endTime&&s.isWorkingDay){var i=new Date("2000-01-01T".concat(s.startTime)),c=(new Date("2000-01-01T".concat(s.endTime))-i)/36e5;a[e].hoursPerDay=Math.max(0,c)}}return"isWorkingDay"!==t||r||(a[e].startTime="",a[e].endTime="",a[e].hoursPerDay=0),a}))},Oe=function(){var e=w(j().m((function e(t){var r,n,s,i,c;return j().w((function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),o=void 0,o={},le.firstName.trim()||(o.firstName="First name is required"),le.lastName.trim()||(o.lastName="Last name is required"),ye(o),0===Object.keys(o).length){e.n=1;break}return e.a(2);case 1:return G(!0),e.p=2,r=!0===(null==W?void 0:W.isAdmin),n=!0===le.isAdmin,s={id:null==W?void 0:W.id,first_name:le.firstName,last_name:le.lastName,display_name:le.displayName,email_address:le.emailAddress,jira_account_id:le.jiraAccountId,employment_type:le.employmentType,hire_date:le.hireDate,team_memberships:le.teamMemberships,capacity:le.capacity,availability:de,isAdmin:n,manager:le.manager,executive_manager:le.executiveManager},console.log("Submitting user:",s),e.n=3,k(s);case 3:if(!n||r){e.n=5;break}return e.n=4,(0,a.invoke)("addAdminUser",{accountId:s.jira_account_id||s.id||s.accountId,addedBy:null===(i=currentUser)||void 0===i?void 0:i.accountId});case 4:e.n=6;break;case 5:if(n||!r){e.n=6;break}return e.n=6,(0,a.invoke)("removeAdminUser",{accountId:s.jira_account_id||s.id||s.accountId,removedBy:null===(c=currentUser)||void 0===c?void 0:c.accountId});case 6:S(W?"User updated successfully":"User created successfully"),ke(),U("list"),A&&A(),e.n=8;break;case 7:e.p=7,e.v,S("Failed to save user","error");case 8:return e.p=8,G(!1),e.f(8);case 9:return e.a(2)}var o}),e,null,[[2,7,8,9]])})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=w(j().m((function e(t,r){return j().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm('Are you sure you want to delete the user "'.concat(r,'"? This action cannot be undone.'))){e.n=1;break}return e.a(2);case 1:return G(!0),e.p=2,e.n=3,T(t);case 3:S("User deleted successfully"),A&&A(),e.n=5;break;case 4:e.p=4,e.v,S("Failed to delete user","error");case 5:return e.p=5,G(!1),e.f(5);case 6:return e.a(2)}}),e,null,[[2,4,5,6]])})));return function(t,r){return e.apply(this,arguments)}}(),Pe=_((0,n.useState)([]),2),Ie=Pe[0],Ue=Pe[1],Ee=_((0,n.useState)(!1),2),Me=Ee[0],Fe=Ee[1],Le=_((0,n.useState)(""),2),We=Le[0],qe=Le[1],Re=function(e){return p.some((function(t){return(t.team_memberships||[]).some((function(t){return t.team_id===e&&"Manager"===t.role}))}))},ze=["type","id","name","jira_account_id","first_name","last_name","display_name","email","employment_type","hire_date","team_memberships","capacity","department","description","color","manager","executive_manager","isAdmin"],Ge=function(){var e=w(j().m((function e(t){var r;return j().w((function(e){for(;;)switch(e.n){case 0:if(r=t.target.files[0]){e.n=1;break}return e.a(2);case 1:d().parse(r,{header:!0,skipEmptyLines:!0,complete:function(){var e=w(j().m((function e(r){var n,s,i,c,o,l,u,d,f,p,v,b,g,x,N;return j().w((function(e){for(;;)switch(e.n){case 0:G(!0),e.p=1,n=[],s=[],i=y(r.data);try{for(i.s();!(c=i.n()).done;)"team"===(o=c.value).type?n.push({id:o.id||(window.crypto&&window.crypto.randomUUID?window.crypto.randomUUID():"team-"+Date.now()+"-"+Math.floor(1e4*Math.random())),name:o.name,department:o.department,description:o.description,color:o.color,manager:o.manager}):"user"===o.type&&(l=[],o.team_memberships&&(l=o.team_memberships.split(",").map((function(e){var t=_(e.split(":"),2),r=t[0],n=t[1],a=m.find((function(e){return e.name===r.trim()}));return{team_id:a?a.id:r.trim(),role:(n||"Member").trim()}}))),s.push({id:o.id,name:o.name,jira_account_id:o.jira_account_id,displayName:o.display_name,first_name:o.first_name,last_name:o.last_name,emailAddress:o.email,department:o.department,hireDate:o.hire_date,employmentType:o.employment_type,team_memberships:l,capacity:o.capacity,isAdmin:"TRUE"===o.isAdmin||"true"===o.isAdmin,manager:o.manager||"",executive_manager:o.executive_manager||""}))}catch(e){i.e(e)}finally{i.f()}return e.n=2,(0,a.invoke)("getTeams");case 2:u=e.v,d=u.success?u.data:[],f=j().m((function e(){var t;return j().w((function(e){for(;;)switch(e.n){case 0:if(t=v[p],!d.find((function(e){return e.id===t.id}))){e.n=2;break}return e.n=1,(0,a.invoke)("updateTeam",t);case 1:e.n=3;break;case 2:return e.n=3,(0,a.invoke)("createTeam",t);case 3:return e.a(2)}}),e)})),p=0,v=n;case 3:if(!(p<v.length)){e.n=5;break}return e.d(h(f()),4);case 4:p++,e.n=3;break;case 5:b=0,g=s;case 6:if(!(b<g.length)){e.n=8;break}return x=g[b],e.n=7,k(x);case 7:b++,e.n=6;break;case 8:S("CSV import completed successfully"),A&&A(),e.n=10;break;case 9:e.p=9,N=e.v,S("Failed to import CSV: "+N.message,"error");case 10:return e.p=10,G(!1),t.target.value="",e.f(10);case 11:return e.a(2)}}),e,null,[[1,9,10,11]])})));return function(t){return e.apply(this,arguments)}}()});case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=w(j().m((function e(){var t,r,n,a,s;return j().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm("Are you sure you want to delete ".concat(Ie.length," users? This action cannot be undone."))){e.n=1;break}return e.a(2);case 1:G(!0),e.p=2,t=y(Ie),e.p=3,t.s();case 4:if((r=t.n()).done){e.n=6;break}return n=r.value,e.n=5,T(n);case 5:e.n=4;break;case 6:e.n=8;break;case 7:e.p=7,a=e.v,t.e(a);case 8:return e.p=8,t.f(),e.f(8);case 9:S("".concat(Ie.length," users deleted successfully")),Ue([]),A&&A(),e.n=11;break;case 10:e.p=10,s=e.v,S("Failed to delete users: "+s.message,"error");case 11:return e.p=11,G(!1),e.f(11);case 12:return e.a(2)}}),e,null,[[3,7,8,9],[2,10,11,12]])})));return function(){return e.apply(this,arguments)}}();if(!t)return null;var Je,Ve=(Je=new Set,p.forEach((function(e){e.jira_account_id&&Je.add(e.jira_account_id),e.accountId&&Je.add(e.accountId),e.email_address&&Je.add(e.email_address.toLowerCase()),e.emailAddress&&Je.add(e.emailAddress.toLowerCase())})),J.filter((function(e){var t;if(!1===e.active)return!1;var r=e.accountId,n=null===(t=e.emailAddress)||void 0===t?void 0:t.toLowerCase();return!(Je.has(r)||n&&Je.has(n))}))),He=function(e){if(!e)return"-";var t=p.find((function(t){return t.jira_account_id===e||t.accountId===e||t.id===e}));return t?t.display_name||t.displayName||t.name:e};return(0,f.jsx)("div",{className:"modal-overlay",children:(0,f.jsxs)("div",{className:"modal-content team-management-modal",children:[(0,f.jsxs)("div",{className:"modal-header",children:[(0,f.jsx)("h3",{children:"Team & User Management"}),(0,f.jsxs)("div",{className:"header-actions",children:[(0,f.jsxs)("button",{className:"btn btn-secondary",onClick:function(){var e=m.map((function(e){return{type:"team",id:e.id,name:e.name,jira_account_id:"",first_name:"",last_name:"",display_name:"",email:"",employment_type:"",hire_date:"",team_memberships:"",capacity:"",department:e.department||"",description:e.description||"",color:e.color||"",manager:e.manager||"",executive_manager:"",isAdmin:""}})),t=p.map((function(e){return{type:"user",id:e.id,name:e.name||e.display_name||"",jira_account_id:e.jira_account_id||"",first_name:e.first_name||"",last_name:e.last_name||"",display_name:e.display_name||"",email:e.email_address||"",employment_type:e.employment_type||"",hire_date:e.hire_date||"",team_memberships:(e.team_memberships||[]).map((function(e){var t;return"".concat((null===(t=m.find((function(t){return t.id===e.team_id})))||void 0===t?void 0:t.name)||e.team_id,":").concat(e.role)})).join(","),capacity:e.capacity||"",department:e.department||"",description:"",color:"",manager:e.manager||"",executive_manager:e.executive_manager||"",isAdmin:!0===e.isAdmin?"TRUE":"FALSE"}})),r=[].concat(N(e),N(t)),n=d().unparse(r,{columns:ze}),a=new Blob([n],{type:"text/csv"}),s=URL.createObjectURL(a),i=document.createElement("a");i.href=s,i.download="teams-and-users-".concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s)},disabled:z,children:[(0,f.jsx)(i.A,{size:16})," Export CSV"]}),(0,f.jsxs)("label",{className:"btn btn-secondary",style:{marginLeft:8},children:[(0,f.jsx)("input",{type:"file",accept:".csv",onChange:Ge,style:{display:"none"},disabled:z}),(0,f.jsx)(c.A,{size:16})," Import CSV"]}),(0,f.jsx)("button",{className:"modal-close",onClick:r,children:"Ã—"})]})]}),(0,f.jsxs)("div",{className:"modal-body",children:[(0,f.jsxs)("div",{className:"team-management-main-tabs",children:[(0,f.jsxs)("button",{className:"team-management-main-tab ".concat("teams"===O?"team-management-main-tab-active":""),onClick:function(){C("teams"),U("list"),Ne(),ke()},children:["ðŸ‘¥ Teams (",m.length,")"]}),(0,f.jsxs)("button",{className:"team-management-main-tab ".concat("users"===O?"team-management-main-tab-active":""),onClick:function(){C("users"),U("list"),Ne(),ke()},children:["ðŸ‘¤ Users (",p.length,")"]})]}),"teams"===O&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"team-management-sub-tabs",children:[(0,f.jsx)("button",{className:"team-management-sub-tab ".concat("list"===I?"team-management-sub-tab-active":""),onClick:function(){return U("list")},children:"Teams List"}),(0,f.jsx)("button",{className:"team-management-sub-tab ".concat("form"===I?"team-management-sub-tab-active":""),onClick:function(){U("form"),Ne()},children:M?"Edit Team":"Add New Team"})]}),"list"===I&&(0,f.jsx)("div",{className:"team-management-teams-section",children:0===m.length?(0,f.jsxs)("div",{className:"team-management-empty-state",children:[(0,f.jsx)("div",{className:"team-management-empty-icon",children:"ðŸ‘¥"}),(0,f.jsx)("h4",{children:"No Teams Created"}),(0,f.jsx)("p",{children:"Create your first team to organize your resources"}),(0,f.jsx)("button",{className:"btn btn-primary",onClick:function(){Ne(),U("form")},children:"Create First Team"})]}):(0,f.jsx)("div",{className:"requests-table-wrapper",children:(0,f.jsxs)("table",{className:"requests-table",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{children:"Team Name"}),(0,f.jsx)("th",{children:"Department"}),(0,f.jsx)("th",{children:"Manager"}),(0,f.jsx)("th",{children:"Members"}),(0,f.jsx)("th",{children:"Actions"})]})}),(0,f.jsx)("tbody",{children:m.map((function(e){var t,r=(t=e.id,p.filter((function(e){return(e.team_memberships||[]).some((function(e){return e.team_id===t}))})));return(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{children:e.name}),(0,f.jsx)("td",{children:e.department||"-"}),(0,f.jsx)("td",{children:He(e.manager)}),(0,f.jsx)("td",{children:r.length}),(0,f.jsxs)("td",{children:[(0,f.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:function(){return function(e){F(e);var t=null;e.manager&&(t=p.find((function(t){return t.jira_account_id===e.manager||t.accountId===e.manager||t.id===e.manager}))||null),ce({name:e.name||"",description:e.description||"",manager:t,department:e.department||"",color:e.color||"#667eea"}),U("form")}(e)},disabled:z,children:"Edit"}),(0,f.jsx)("button",{className:"btn btn-sm btn-danger",onClick:function(){return Se(e.id,e.name)},disabled:z,children:"Delete"})]})]},e.id)}))})]})})}),"form"===I&&(0,f.jsxs)("form",{onSubmit:Te,className:"team-management-team-form",children:[(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{htmlFor:"team-name",children:"Team Name *"}),(0,f.jsx)("input",{type:"text",id:"team-name",className:"form-control ".concat(he.name?"form-control-error":""),value:ie.name,onChange:function(e){return _e("name",e.target.value)},placeholder:"Enter team name",disabled:z}),he.name&&(0,f.jsx)("span",{className:"form-error-text",children:he.name})]}),(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{htmlFor:"team-description",children:"Description"}),(0,f.jsx)("textarea",{id:"team-description",className:"form-control",value:ie.description,onChange:function(e){return _e("description",e.target.value)},placeholder:"Brief description of the team's purpose",rows:"3",disabled:z})]}),(0,f.jsxs)("div",{className:"form-row",children:[(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{htmlFor:"team-manager",children:"Manager"}),(0,f.jsx)(s.A,{selectedUser:ie.manager&&p.find((function(e){return e.id===ie.manager}))||null,onSelect:function(e){return we(e?e.id:"")},placeholder:"Search and select manager",disabled:z,error:he.manager,useBackendSearch:!1,allUsers:p}),he.manager&&(0,f.jsx)("span",{className:"form-error-text",children:he.manager})]}),(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{htmlFor:"department",children:"Department"}),(0,f.jsxs)("select",{id:"department",className:"form-control",value:ie.department,onChange:function(e){return _e("department",e.target.value)},disabled:z,children:[(0,f.jsx)("option",{value:"",children:"Select Department"}),["Product","Devops","RebelCare","Strategy","Service Delivery","Client Services","Sales","Marketing","Operations","Finance","HR"].map((function(e){return(0,f.jsx)("option",{value:e,children:e},e)}))]})]})]}),(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{children:"Team Color"}),(0,f.jsx)("div",{className:"team-management-color-options",children:["#667eea","#764ba2","#f093fb","#f5576c","#4facfe","#00f2fe","#43e97b","#38f9d7","#ffecd2","#fcb69f"].map((function(e){return(0,f.jsx)("div",{className:"team-management-color-option ".concat(ie.color===e?"team-management-color-option-selected":""),style:{backgroundColor:e},onClick:function(){return!z&&_e("color",e)}},e)}))})]}),(0,f.jsxs)("div",{className:"form-actions",children:[(0,f.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:z,children:z?"Saving...":M?"Update Team":"Create Team"}),(0,f.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){Ne(),U("list")},disabled:z,children:"Cancel"})]})]})]}),"users"===O&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"team-management-sub-tabs",children:[(0,f.jsx)("button",{className:"team-management-sub-tab ".concat("list"===I?"team-management-sub-tab-active":""),onClick:function(){return U("list")},children:"Users List"}),(0,f.jsx)("button",{className:"team-management-sub-tab ".concat("form"===I?"team-management-sub-tab-active":""),onClick:function(){U("form"),ke()},children:W?"Edit User":"Add New User"}),(0,f.jsxs)("button",{className:"team-management-sub-tab ".concat("import"===I?"team-management-sub-tab-active":""),onClick:function(){return U("import")},children:["Import from Jira (",Ve.length,")"]})]}),"list"===I&&(0,f.jsxs)("div",{className:"team-management-users-section",children:[(0,f.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,f.jsx)("h4",{children:"Users"}),(0,f.jsx)("button",{className:"btn btn-primary",disabled:Ie.length===p.length&&p.length>0,onClick:function(){return Fe(!0)},children:"Bulk Add to Team"})]}),Ie.length>0&&(0,f.jsxs)("button",{className:"btn btn-danger",onClick:Be,disabled:z,style:{marginBottom:16},children:["Delete Selected Users (",Ie.length,")"]}),(0,f.jsx)("div",{className:"requests-table-wrapper",children:(0,f.jsxs)("table",{className:"requests-table",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{children:(0,f.jsx)("input",{type:"checkbox",checked:Ie.length===p.length&&p.length>0,onChange:function(e){return Ue(e.target.checked?p.map((function(e){return e.id})):[])}})}),(0,f.jsx)("th",{children:"Name"}),(0,f.jsx)("th",{children:"Email"}),(0,f.jsx)("th",{children:"Teams"}),(0,f.jsx)("th",{children:"Actions"})]})}),(0,f.jsx)("tbody",{children:p.map((function(e){return(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{children:(0,f.jsx)("input",{type:"checkbox",checked:Ie.includes(e.id),onChange:function(t){return Ue(t.target.checked?[].concat(N(Ie),[e.id]):Ie.filter((function(t){return t!==e.id})))}})}),(0,f.jsx)("td",{children:e.display_name||e.displayName||e.name}),(0,f.jsx)("td",{children:e.email_address||e.emailAddress||"-"}),(0,f.jsx)("td",{children:(e.team_memberships||[]).map((function(e){var t=m.find((function(t){return t.id===e.team_id}));return t?"".concat(t.name," (").concat(e.role,")"):e.team_id})).join(", ")}),(0,f.jsxs)("td",{children:[(0,f.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:function(){return function(e){q(e),ue({firstName:e.first_name||e.firstName||"",lastName:e.last_name||e.lastName||"",displayName:e.display_name||e.displayName||"",emailAddress:e.email_address||e.emailAddress||"",jiraAccountId:e.jira_account_id||e.accountId||"",employmentType:e.employment_type||e.employmentType||"full-time",hireDate:e.hire_date||e.hireDate||"",teamMemberships:e.team_memberships||[],capacity:e.capacity||40,isAdmin:!0===e.isAdmin,manager:e.manager||"",executiveManager:e.executive_manager||""}),e.availability&&Array.isArray(e.availability)&&fe(e.availability),C("users"),U("form")}(e)},disabled:z,children:"Edit"}),(0,f.jsx)("button",{className:"btn btn-sm btn-danger",onClick:function(){return Ce(e.id,e.display_name||e.displayName||e.name)},disabled:z,children:"Delete"})]})]},e.id)}))})]})}),Me&&(0,f.jsx)("div",{className:"modal-overlay",children:(0,f.jsxs)("div",{className:"modal-content",style:{maxWidth:400,margin:"auto",padding:24},children:[(0,f.jsx)("h4",{children:"Add Selected Users to Team"}),(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{children:"Team"}),(0,f.jsxs)("select",{className:"form-control",value:We,onChange:function(e){qe(e.target.value),Re(e.target.value)&&ge("Member")},children:[(0,f.jsx)("option",{value:"",children:"Select a team"}),m.map((function(e){return(0,f.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]}),(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{children:"Role"}),(0,f.jsxs)("select",{className:"form-control",value:be,onChange:function(e){return ge(e.target.value)},disabled:We&&Re(We),children:[(0,f.jsx)("option",{value:"Member",children:"Member"}),(0,f.jsxs)("option",{value:"Manager",disabled:We&&Re(We),children:["Manager ",We&&Re(We)?"(Team already has a manager)":""]})]})]}),(0,f.jsxs)("div",{className:"form-actions",style:{marginTop:24},children:[(0,f.jsx)("button",{className:"btn btn-secondary",onClick:function(){return Fe(!1)},children:"Cancel"}),(0,f.jsx)("button",{className:"btn btn-primary",disabled:!We,onClick:w(j().m((function e(){var t,r,n,a;return j().w((function(e){for(;;)switch(e.n){case 0:G(!0),t=y(Ie),e.p=1,n=j().m((function e(){var t,n;return j().w((function(e){for(;;)switch(e.n){case 0:if(t=r.value,!(n=p.find((function(e){return e.id===t})))||(n.team_memberships||[]).some((function(e){return e.team_id===We}))){e.n=1;break}return e.n=1,k(b(b({},n),{},{team_memberships:[].concat(N(n.team_memberships||[]),[{team_id:We,role:be}])}));case 1:return e.a(2)}}),e)})),t.s();case 2:if((r=t.n()).done){e.n=4;break}return e.d(h(n()),3);case 3:e.n=2;break;case 4:e.n=6;break;case 5:e.p=5,a=e.v,t.e(a);case 6:return e.p=6,t.f(),e.f(6);case 7:G(!1),Fe(!1),Ue([]),qe(""),ge("Member"),A&&A();case 8:return e.a(2)}}),e,null,[[1,5,6,7]])}))),children:"Add to Team"})]})]})})]}),"form"===I&&(0,f.jsxs)("form",{onSubmit:Oe,className:"team-management-user-form",children:[(0,f.jsxs)("div",{className:"form-row",children:[(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{htmlFor:"firstName",children:"First Name *"}),(0,f.jsx)("input",{type:"text",id:"firstName",className:"form-control ".concat(he.firstName?"form-control-error":""),value:le.firstName,onChange:function(e){return Ae("firstName",e.target.value)},placeholder:"Enter first name",disabled:z}),he.firstName&&(0,f.jsx)("span",{className:"form-error-text",children:he.firstName})]}),(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{htmlFor:"lastName",children:"Last Name *"}),(0,f.jsx)("input",{type:"text",id:"lastName",className:"form-control ".concat(he.lastName?"form-control-error":""),value:le.lastName,onChange:function(e){return Ae("lastName",e.target.value)},placeholder:"Enter last name",disabled:z}),he.lastName&&(0,f.jsx)("span",{className:"form-error-text",children:he.lastName})]})]}),(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{htmlFor:"emailAddress",children:"Email Address"}),(0,f.jsx)("input",{type:"email",id:"emailAddress",className:"form-control ".concat(he.emailAddress?"form-control-error":""),value:le.emailAddress,onChange:function(e){return Ae("emailAddress",e.target.value)},placeholder:"Enter email address",disabled:z}),he.emailAddress&&(0,f.jsx)("span",{className:"form-error-text",children:he.emailAddress})]}),(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{htmlFor:"displayName",children:"Display Name"}),(0,f.jsx)("input",{type:"text",id:"displayName",className:"form-control",value:le.displayName,onChange:function(e){return Ae("displayName",e.target.value)},placeholder:"Display name (auto-generated from first/last name)",disabled:z})]}),(0,f.jsxs)("div",{className:"form-row",children:[(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{htmlFor:"employmentType",children:"Employment Type"}),(0,f.jsxs)("select",{id:"employmentType",className:"form-control",value:le.employmentType,onChange:function(e){return Ae("employmentType",e.target.value)},disabled:z,children:[(0,f.jsx)("option",{value:"full-time",children:"Full-time"}),(0,f.jsx)("option",{value:"part-time",children:"Part-time"}),(0,f.jsx)("option",{value:"contractor",children:"Contractor"})]})]}),(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{htmlFor:"hireDate",children:"Hire Date"}),(0,f.jsx)("input",{type:"date",id:"hireDate",className:"form-control",value:le.hireDate,onChange:function(e){return Ae("hireDate",e.target.value)},disabled:z})]})]}),(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{children:"Teams & Roles"}),m.map((function(e){var t=le.teamMemberships.find((function(t){return t.team_id===e.id})),r=p.some((function(t){return(t.team_memberships||[]).some((function(t){return t.team_id===e.id&&"Manager"===t.role}))}));return(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:8},children:[(0,f.jsx)("input",{type:"checkbox",checked:!!t,onChange:function(t){t.target.checked?ue((function(t){return b(b({},t),{},{teamMemberships:[].concat(N(t.teamMemberships),[{team_id:e.id,role:r?"Member":"Manager"}])})})):ue((function(t){return b(b({},t),{},{teamMemberships:t.teamMemberships.filter((function(t){return t.team_id!==e.id}))})}))},disabled:z}),(0,f.jsx)("span",{style:{marginLeft:8,marginRight:8},children:e.name}),t&&(0,f.jsxs)("select",{value:t.role,onChange:function(t){"Manager"===t.target.value&&r?S("This team already has a manager","error"):ue((function(r){return b(b({},r),{},{teamMemberships:r.teamMemberships.map((function(r){return r.team_id===e.id?b(b({},r),{},{role:t.target.value}):r}))})}))},style:{marginLeft:8},disabled:z||r&&"Manager"!==t.role,children:[(0,f.jsx)("option",{value:"Member",children:"Member"}),(0,f.jsxs)("option",{value:"Manager",disabled:r,children:["Manager ",r?"(Team already has a manager)":""]})]})]},e.id)}))]}),(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{htmlFor:"jiraAccountId",children:"Jira Account ID"}),(0,f.jsx)("input",{type:"text",id:"jiraAccountId",className:"form-control",value:le.jiraAccountId,onChange:function(e){return Ae("jiraAccountId",e.target.value)},placeholder:"Optional: Link to Jira account",disabled:z})]}),(0,f.jsx)("div",{className:"form-group",children:(0,f.jsxs)("label",{children:[(0,f.jsx)("input",{type:"checkbox",checked:!0===le.isAdmin,onChange:function(e){return ue((function(t){return b(b({},t),{},{isAdmin:e.target.checked})}))},disabled:z})," ","Admin User"]})}),(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{htmlFor:"manager",children:"Manager"}),(0,f.jsx)(s.A,{selectedUser:le.manager&&p.find((function(e){return e.id===le.manager}))||null,onSelect:function(e){return ue((function(t){return b(b({},t),{},{manager:e?e.id:""})}))},placeholder:"Select manager",users:p,allUsers:p,disabled:z})]}),(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{htmlFor:"executiveManager",children:"Executive Manager"}),(0,f.jsx)(s.A,{selectedUser:le.executiveManager&&p.find((function(e){return e.id===le.executiveManager}))||null,onSelect:function(e){return ue((function(t){return b(b({},t),{},{executiveManager:e?e.id:""})}))},placeholder:"Select executive manager",users:p,allUsers:p,disabled:z})]}),(0,f.jsxs)("div",{className:"team-management-availability-section",children:[(0,f.jsx)("h4",{children:"Working Schedule"}),(0,f.jsx)("p",{className:"team-management-help-text",children:"Set the default working hours for this team member."}),(0,f.jsx)("div",{className:"team-management-availability-grid",children:de.map((function(e,t){return(0,f.jsxs)("div",{className:"team-management-availability-day",children:[(0,f.jsx)("div",{className:"team-management-day-header",children:(0,f.jsxs)("label",{className:"team-management-checkbox-label",children:[(0,f.jsx)("input",{type:"checkbox",checked:e.isWorkingDay,onChange:function(e){return De(t,"isWorkingDay",e.target.checked)},disabled:z}),(0,f.jsx)("span",{className:"team-management-day-name",children:e.dayName})]})}),e.isWorkingDay&&(0,f.jsxs)("div",{className:"team-management-day-details",children:[(0,f.jsxs)("div",{className:"team-management-time-inputs",children:[(0,f.jsx)("input",{type:"time",value:e.startTime,onChange:function(e){return De(t,"startTime",e.target.value)},className:"form-control team-management-input-small",disabled:z}),(0,f.jsx)("span",{children:"to"}),(0,f.jsx)("input",{type:"time",value:e.endTime,onChange:function(e){return De(t,"endTime",e.target.value)},className:"form-control team-management-input-small",disabled:z})]}),(0,f.jsxs)("div",{className:"team-management-hours-display",children:[e.hoursPerDay.toFixed(1)," hours"]})]})]},e.dayOfWeek)}))}),(0,f.jsxs)("div",{className:"team-management-availability-summary",children:[(0,f.jsx)("strong",{children:"Total weekly capacity: "}),de.reduce((function(e,t){return e+(t.isWorkingDay?t.hoursPerDay:0)}),0).toFixed(1)," hours"]})]}),(0,f.jsxs)("div",{className:"form-actions",children:[(0,f.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:z,children:z?"Saving...":W?"Update User":"Create User"}),(0,f.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){ke(),U("list")},disabled:z,children:"Cancel"})]})]}),"import"===I&&(0,f.jsxs)("div",{className:"team-management-import-section",children:[(0,f.jsxs)("div",{className:"team-management-import-header",children:[(0,f.jsxs)("div",{className:"team-management-import-title",children:[(0,f.jsx)("h4",{children:"Import Users from Jira"}),(0,f.jsx)("p",{children:"Select Jira users to import into the PTO system. Users already in the system will not be shown."})]}),(0,f.jsxs)("div",{className:"team-management-import-actions",children:[(0,f.jsxs)("button",{onClick:function(){return je(0)},disabled:$,className:"btn btn-secondary",children:[(0,f.jsx)(o.A,{size:16,className:$?"team-management-spin":""}),"Refresh"]}),ee.length>0&&(0,f.jsxs)("button",{onClick:xe,disabled:ne,className:"btn btn-primary",children:[(0,f.jsx)(c.A,{size:16}),"Import ",ee.length," Selected",ne&&" (Importing...)"]})]})]}),$&&0===J.length?(0,f.jsxs)("div",{className:"team-management-loading-state",children:[(0,f.jsx)("div",{className:"team-management-loading-spinner"}),(0,f.jsx)("p",{children:"Loading Jira users..."})]}):0===Ve.length?(0,f.jsxs)("div",{className:"team-management-empty-state",children:[(0,f.jsx)("div",{className:"team-management-empty-icon",children:"âœ…"}),(0,f.jsx)("h4",{children:"All Jira Users Imported"}),(0,f.jsx)("p",{children:"All available Jira users from your organization are already in the system."})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"team-management-import-stats",children:[(0,f.jsxs)("div",{className:"team-management-import-stat",children:[(0,f.jsx)("span",{className:"team-management-import-stat-label",children:"Total Jira Users:"}),(0,f.jsx)("span",{className:"team-management-import-stat-value",children:Q.total})]}),(0,f.jsxs)("div",{className:"team-management-import-stat",children:[(0,f.jsx)("span",{className:"team-management-import-stat-label",children:"Available to Import:"}),(0,f.jsx)("span",{className:"team-management-import-stat-value",children:Ve.length})]}),(0,f.jsxs)("div",{className:"team-management-import-stat",children:[(0,f.jsx)("span",{className:"team-management-import-stat-label",children:"Selected:"}),(0,f.jsx)("span",{className:"team-management-import-stat-value",children:ee.length})]})]}),(0,f.jsx)("div",{className:"team-management-jira-users-grid",children:Ve.map((function(e){var t,r=ee.some((function(t){return t.accountId===e.accountId}));return(0,f.jsxs)("div",{className:"team-management-jira-user-card",children:[(0,f.jsxs)("div",{className:"team-management-jira-user-header",children:[(0,f.jsxs)("label",{className:"team-management-jira-user-checkbox",children:[(0,f.jsx)("input",{type:"checkbox",checked:r,onChange:function(t){return function(e,t){te((function(r){return t?[].concat(N(r),[e]):r.filter((function(t){return t.accountId!==e.accountId}))}))}(e,t.target.checked)},disabled:ne}),(0,f.jsx)("span",{className:"team-management-checkbox-custom"})]}),(0,f.jsx)("div",{className:"team-management-jira-user-avatar",children:e.avatarUrl?(0,f.jsx)("img",{src:e.avatarUrl,alt:e.displayName}):(0,f.jsx)("div",{className:"team-management-avatar-placeholder",children:(null===(t=e.displayName)||void 0===t?void 0:t.charAt(0))||"?"})})]}),(0,f.jsxs)("div",{className:"team-management-jira-user-info",children:[(0,f.jsx)("h5",{className:"team-management-jira-user-name",children:e.displayName}),(0,f.jsx)("div",{className:"team-management-jira-user-email",children:e.emailAddress}),(0,f.jsx)("div",{className:"team-management-jira-user-active",children:e.active?"âœ… Active":"âŒ Inactive"})]}),(0,f.jsx)("div",{className:"team-management-jira-user-actions",children:(0,f.jsxs)("button",{onClick:function(){return function(e){var t,r;ue({firstName:(null===(t=e.displayName)||void 0===t?void 0:t.split(" ")[0])||"",lastName:(null===(r=e.displayName)||void 0===r?void 0:r.split(" ").slice(1).join(" "))||"",displayName:e.displayName||"",emailAddress:e.emailAddress||"",jiraAccountId:e.accountId||"",employmentType:"full-time",hireDate:"",teamMemberships:[],capacity:40,manager:"",executiveManager:""}),q(null),U("form")}(e)},className:"btn btn-sm btn-secondary",disabled:ne,children:[(0,f.jsx)(l.A,{size:14}),"Create User"]})})]},e.accountId)}))}),!Q.isLast&&(0,f.jsxs)("div",{className:"team-management-pagination",children:[(0,f.jsxs)("button",{onClick:function(){return je(Q.startAt+Q.maxResults)},disabled:$,className:"btn btn-secondary",children:[(0,f.jsx)(u.A,{size:16}),"Load More Users",$&&" (Loading...)"]}),(0,f.jsxs)("div",{className:"team-management-pagination-info",children:["Showing ",J.length," of ",Q.total," Jira users"]})]})]})]})]})]})]})})}}}]);