/*! For license information please see main-fa968b87.b6da407be9f6ab9a382e.js.LICENSE.txt */
"use strict";(this.webpackChunkpto_request_app=this.webpackChunkpto_request_app||[]).push([[286],{99:(e,t,a)=>{a.d(t,{A:()=>c});var r=a(6540);function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,l,o,c=[],i=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;i=!1}else for(;!(i=(r=l.call(a)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){s=!0,n=e}finally{try{if(!i&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(s)throw n}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var o=[{value:"all",label:"All Time"},{value:"current_year",label:"Current Year"},{value:"last_90_days",label:"Last 90 Days"},{value:"last_30_days",label:"Last 30 Days"},{value:"custom",label:"Custom Range"}];const c=function(e){var t=e.value,a=void 0===t?{preset:"all",from:"",to:""}:t,l=e.onChange,c=n((0,r.useState)(a.preset||"all"),2),i=c[0],s=c[1],u=n((0,r.useState)(a.from||""),2),m=u[0],d=u[1],f=n((0,r.useState)(a.to||""),2),p=f[0],v=f[1];return(0,r.useEffect)((function(){l("custom"!==i?{preset:i,from:"",to:""}:{preset:i,from:m,to:p})}),[i,m,p]),r.createElement("div",{className:"date-range-filter"},r.createElement("select",{className:"form-control",value:i,onChange:function(e){return s(e.target.value)}},o.map((function(e){return r.createElement("option",{key:e.value,value:e.value},e.label)}))),"custom"===i&&r.createElement("div",{className:"custom-range-fields",style:{display:"flex",gap:8,marginTop:8}},r.createElement("input",{type:"date",className:"form-control",value:m,onChange:function(e){return d(e.target.value)},max:p||void 0,placeholder:"From"}),r.createElement("span",{style:{alignSelf:"center"}},"to"),r.createElement("input",{type:"date",className:"form-control",value:p,onChange:function(e){return v(e.target.value)},min:m||void 0,placeholder:"To"})))}},808:(e,t,a)=>{a.d(t,{S0:()=>n});var r={vacation:{id:"vacation",label:"🏖️ Vacation",emoji:"🏖️",color:"bg-blue-100 text-blue-800"},sick:{id:"sick",label:"🤒 Sick Leave",emoji:"🤒",color:"bg-red-100 text-red-800"},personal:{id:"personal",label:"👤 Personal Day",emoji:"👤",color:"bg-purple-100 text-purple-800"},holiday:{id:"holiday",label:"🎉 Holiday",emoji:"🎉",color:"bg-green-100 text-green-800"},"other leave type":{id:"other leave type",label:"📝 Other Leave Type",emoji:"📝",color:"bg-gray-100 text-gray-800"}},n=function(e){var t;return(null===(t=r[null==e?void 0:e.toLowerCase()])||void 0===t?void 0:t.emoji)||"📅"}},1098:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(6540);const n=function(e){var t=e.message,a=e.type,n=e.onClose;return r.createElement("div",{className:"fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ".concat("success"===a?"bg-green-500 text-white":"bg-red-500 text-white")},r.createElement("div",{className:"flex items-center justify-between"},r.createElement("span",null,t),r.createElement("button",{onClick:n,className:"ml-4 text-white hover:text-gray-200"},"×")))}},2435:(e,t,a)=>{a.d(t,{A:()=>h});var r=a(6540),n=a(2321),l=a(8697),o=a(4471),c=a(418);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function m(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],a=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}}}throw new TypeError(p(e)+" is not iterable")}function d(){var e,t,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",n=a.toStringTag||"@@toStringTag";function l(a,r,n,l){var i=r&&r.prototype instanceof c?r:c,s=Object.create(i.prototype);return f(s,"_invoke",function(a,r,n){var l,c,i,s=0,u=n||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return l=t,c=0,i=e,d.n=a,o}};function f(a,r){for(c=a,i=r,t=0;!m&&s&&!n&&t<u.length;t++){var n,l=u[t],f=d.p,p=l[2];a>3?(n=p===r)&&(i=l[(c=l[4])?5:(c=3,3)],l[4]=l[5]=e):l[0]<=f&&((n=a<2&&f<l[1])?(c=0,d.v=r,d.n=l[1]):f<p&&(n=a<3||l[0]>r||r>p)&&(l[4]=a,l[5]=r,d.n=p,c=0))}if(n||a>1)return o;throw m=!0,r}return function(n,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),c=u,i=p;(t=c<2?e:i)||!m;){l||(c?c<3?(c>1&&(d.n=-1),f(c,i)):d.n=i:d.v=i);try{if(s=2,l){if(c||(n="next"),t=l[n]){if(!(t=t.call(l,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,c<2&&(c=0)}else 1===c&&(t=l.return)&&t.call(l),c<2&&(i=TypeError("The iterator does not provide a '"+n+"' method"),c=1);l=e}else if((t=(m=d.n<0)?i:a.call(r,d))!==o)break}catch(t){l=e,c=1,i=t}finally{s=1}}return{value:t,done:m}}}(a,n,l),!0),s}var o={};function c(){}function i(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(f(t={},r,(function(){return this})),t),m=s.prototype=c.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,f(e,n,"GeneratorFunction")),e.prototype=Object.create(m),e}return i.prototype=s,f(m,"constructor",s),f(s,"constructor",i),i.displayName="GeneratorFunction",f(s,n,"GeneratorFunction"),f(m),f(m,n,"Generator"),f(m,r,(function(){return this})),f(m,"toString",(function(){return"[object Generator]"})),(d=function(){return{w:l,m:p}})()}function f(e,t,a,r){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}f=function(e,t,a,r){if(t)n?n(e,t,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[t]=a;else{var l=function(t,a){f(e,t,(function(e){return this._invoke(t,a,e)}))};l("next",0),l("throw",1),l("return",2)}},f(e,t,a,r)}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(e,t,a,r,n,l,o){try{var c=e[l](o),i=c.value}catch(e){return void a(e)}c.done?t(i):Promise.resolve(i).then(r,n)}function y(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var l=e.apply(t,a);function o(e){v(l,r,n,o,c,"next",e)}function c(e){v(l,r,n,o,c,"throw",e)}o(void 0)}))}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,l,o,c=[],i=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;i=!1}else for(;!(i=(r=l.call(a)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){s=!0,n=e}finally{try{if(!i&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(s)throw n}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}const h=function(e){var t,a,i,u,f,v,g,h,E,N=e.isOpen,k=e.onClose,w=e.currentUser,S=e.showNotification,D=e.onImportSuccess,_=b((0,r.useState)(null),2),A=_[0],O=_[1],T=b((0,r.useState)([]),2),j=T[0],C=T[1],P=b((0,r.useState)(null),2),U=P[0],I=P[1],x=b((0,r.useState)(!1),2),F=x[0],L=x[1],R=b((0,r.useState)(!1),2),M=R[0],q=R[1],G=b((0,r.useState)(null),2),B=G[0],z=G[1],W=b((0,r.useState)(!1),2),V=W[0],Y=W[1],H=function(){var e=y(d().m((function e(t){var a,r;return d().w((function(e){for(;;)switch(e.n){case 0:if(a=t.target.files[0],console.log("🔍 DEBUG: File selected:",a),a){e.n=1;break}return console.log("🔍 DEBUG: No file selected, resetting state"),O(null),C([]),I(null),e.a(2);case 1:O(a),I(null);try{(r=new FileReader).onload=function(){var e=y(d().m((function e(t){var a,r,n,l,o,c,i,s;return d().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,a=t.target.result,console.log("🔍 DEBUG: CSV data type:",p(a)),console.log("🔍 DEBUG: CSV data length:",a?a.length:"undefined"),a){e.n=1;break}throw new Error("No data read from file");case 1:if(r=a.split("\n"),console.log("🔍 DEBUG: Rows after split:",r),console.log("🔍 DEBUG: Rows length:",r?r.length:"undefined"),r&&0!==r.length){e.n=2;break}throw new Error("No rows found in CSV");case 2:if(n=r[0]?r[0].split(",").map((function(e){return e?e.trim():""})):[],console.log("🔍 DEBUG: Headers:",n),console.log("🔍 DEBUG: Headers length:",n?n.length:"undefined"),n&&0!==n.length){e.n=3;break}throw new Error("No headers found in CSV");case 3:if(l=[],!(r.length>1)){e.n=7;break}o=r.slice(1),console.log("🔍 DEBUG: Data rows:",o),console.log("🔍 DEBUG: Data rows length:",o?o.length:"undefined"),c=d().m((function e(){var t,a,r;return d().w((function(e){for(;;)switch(e.n){case 0:if(t=o[i],console.log("🔍 DEBUG: Processing row ".concat(i,":"),t),t&&0!==t.trim().length){e.n=1;break}return console.log("🔍 DEBUG: Skipping empty row ".concat(i)),e.a(2,1);case 1:try{a=t.split(",").map((function(e){return e?e.trim().replace(/^"|"$/g,""):""})),console.log("🔍 DEBUG: Values for row ".concat(i,":"),a),r={},n.forEach((function(e,t){r[e]=t<a.length?a[t]:""})),console.log("🔍 DEBUG: Record for row ".concat(i,":"),r),l.push(r)}catch(e){console.warn("🔍 DEBUG: Error parsing row ".concat(i+2,":"),e)}case 2:return e.a(2)}}),e)})),i=0;case 4:if(!(i<o.length)){e.n=7;break}return e.d(m(c()),5);case 5:if(!e.v){e.n=6;break}return e.a(3,6);case 6:i++,e.n=4;break;case 7:if(console.log("🔍 DEBUG: Final parsed data:",l),console.log("🔍 DEBUG: Final parsed data length:",l?l.length:"undefined"),l&&0!==l.length){e.n=8;break}return S("No valid data found in CSV file","error"),C([]),e.a(2);case 8:C(l),S("CSV file loaded with ".concat(l.length,' records. Click "Validate Data" to proceed.')),e.n=10;break;case 9:e.p=9,s=e.v,console.error("🔍 DEBUG: CSV parsing error:",s),S("Failed to parse CSV file: "+s.message,"error"),C([]);case 10:return e.a(2)}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),r.onerror=function(e){console.error("🔍 DEBUG: FileReader error:",e),S("Failed to read file","error"),O(null),C([])},r.readAsText(a)}catch(e){console.error("🔍 DEBUG: File reading error:",e),S("Failed to read file: "+e.message,"error"),O(null),C([])}case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=y(d().m((function e(){var t,a,r,l,o,c,i;return d().w((function(e){for(;;)switch(e.n){case 0:if(j&&Array.isArray(j)&&0!==j.length){e.n=1;break}return S("No data to validate","error"),e.a(2);case 1:if(!(j.length>50)){e.n=2;break}return S("Import size too large: ".concat(j.length," records. Please split into batches of 50 or fewer records."),"error"),e.a(2);case 2:return console.log("🔍 Starting database validation process..."),L(!0),I({success:!0,data:{isComplete:!1,validationInProgress:!0},message:"Validating data format and looking up users in database..."}),e.p=3,e.n=4,(0,n.invoke)("validatePTOImportData",{importData:j,adminId:w.accountId,checkJiraUsers:!0,batchIndex:0,batchSize:50});case 4:a=e.v,I(a),L(!1),a.success&&null!==(t=a.data)&&void 0!==t&&t.validationComplete?(o=(null===(r=a.data.validation)||void 0===r||null===(r=r.validRecords)||void 0===r?void 0:r.length)||0,c=(null===(l=a.data.validation)||void 0===l?void 0:l.invalidRecords)||0,S("Database validation complete! ".concat(o," records ready for import. ").concat(c>0?"".concat(c," records have errors."):""))):S(a.message||"Validation failed","error"),e.n=6;break;case 5:e.p=5,i=e.v,console.error("Validation error:",i),I({success:!1,message:"Validation failed: "+i.message}),L(!1),S("Validation failed: "+i.message,"error");case 6:return e.a(2)}}),e,null,[[3,5]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=y(d().m((function e(){var t,a,r,l,o,c,i,u,m,f,p,v,y;return d().w((function(e){for(;;)switch(e.n){case 0:if(null!=U&&U.success&&null!=U&&null!==(t=U.data)&&void 0!==t&&t.validationComplete){e.n=1;break}return S("Please complete validation before importing","error"),e.a(2);case 1:return q(!0),z({success:!0,inProgress:!0,message:"Starting import process...",data:{importedRecords:0,totalRecords:(null===(a=U.data.validation)||void 0===a?void 0:a.validRecordsCount)||0}}),e.p=2,S("Starting import process..."),console.log("🧹 Clearing any old stored validation data..."),e.n=3,(0,n.invoke)("clearImportValidationData",{adminId:w.accountId});case 3:return o=(null===(r=U.data.validation)||void 0===r?void 0:r.validRecords)||[],c=(null===(l=U.data.validation)||void 0===l?void 0:l.validRecordsCount)||o.length,console.log("📥 Importing ".concat(c," records directly (bypassing stored validation)")),e.n=4,(0,n.invoke)("importPTODailySchedules",{adminId:w.accountId,importData:o,skipValidation:!0,useStoredValidation:!1});case 4:i=e.v,z(s(s({},i),{},{inProgress:!1})),i.success?(p="Successfully imported ".concat((null===(u=i.data)||void 0===u?void 0:u.importedRecords)||0," PTO records"),S(p),D&&D(),(null===(m=i.data)||void 0===m?void 0:m.importedRecords)===(null===(f=i.data)||void 0===f?void 0:f.totalRecords)&&setTimeout((function(){k(),K()}),3e3)):S(i.message||"Import failed","error"),e.n=6;break;case 5:e.p=5,y=e.v,console.error("Import error:",y),v="Import failed: "+y.message,S(v,"error"),z({success:!1,inProgress:!1,message:v});case 6:return e.p=6,q(!1),e.f(6);case 7:return e.a(2)}}),e,null,[[2,5,6,7]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=y(d().m((function e(){var t,a;return d().w((function(e){for(;;)switch(e.n){case 0:if(O(null),C([]),I(null),z(null),L(!1),q(!1),e.p=1,!w||!w.accountId){e.n=3;break}return e.n=2,(0,n.invoke)("clearImportValidationData",{adminId:w.accountId});case 2:t=e.v,console.log("✅ Backend validation data cleared:",t),e.n=4;break;case 3:return console.warn("⚠️ No current user available for cleanup"),e.n=4,(0,n.invoke)("clearImportValidationData",{});case 4:e.n=6;break;case 5:e.p=5,a=e.v,console.error("❌ Error clearing validation data:",a);case 6:return e.a(2)}}),e,null,[[1,5]])})));return function(){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){N||K()}),[N]),N?r.createElement("div",{className:"modal-overlay"},r.createElement("div",{className:"modal-content"},r.createElement("div",{className:"modal-header"},r.createElement("h3",{className:"modal-title"},"Import PTO Requests"),r.createElement("button",{className:"modal-close",onClick:y(d().m((function e(){var t;return d().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,!(U&&U.success&&null!=w&&w.accountId)){e.n=1;break}return console.log("🧹 Cleaning up validation data from modal close"),e.n=1,(0,n.invoke)("clearImportValidationData",{adminId:w.accountId});case 1:e.n=3;break;case 2:e.p=2,t=e.v,console.error("❌ Error clearing data on close:",t);case 3:return k(),e.n=4,K();case 4:return e.a(2)}}),e,null,[[0,2]])})))},r.createElement(l.A,{size:20}))),r.createElement("div",{className:"modal-body"},r.createElement("div",{className:"import-pto-content"},r.createElement("p",null,"Import PTO daily schedules from a CSV file. The CSV should have the following columns:"),r.createElement("ul",{className:"csv-columns-list"},r.createElement("li",null,r.createElement("strong",null,"requester_email")," - Email address of the employee"),r.createElement("li",null,r.createElement("strong",null,"manager_email")," - Email address of the manager"),r.createElement("li",null,r.createElement("strong",null,"leave_type")," - Type of leave (vacation, sick, personal, etc.)"),r.createElement("li",null,r.createElement("strong",null,"date")," - Date of PTO in YYYY-MM-DD format"),r.createElement("li",null,r.createElement("strong",null,"status")," - Status of the PTO (approved, pending, declined, cancelled)"),r.createElement("li",null,"schedule_type - Optional: FULL_DAY or HALF_DAY (defaults to FULL_DAY)"),r.createElement("li",null,"hours - Optional: Number of hours (defaults to 8 for FULL_DAY, 4 for HALF_DAY)"),r.createElement("li",null,"created_at - Optional: Creation timestamp (defaults to current time)")),r.createElement("div",{className:"alert alert-info"},r.createElement("p",null,r.createElement("strong",null,"Note:")," The system will look up user account IDs from your existing user database based on email addresses."),r.createElement("p",null,"Valid leave types: vacation, sick, personal, holiday, other leave type"),r.createElement("p",null,r.createElement("strong",null,"Make sure the email addresses in your CSV match the emails in your user database!"))),r.createElement("div",{className:"import-step"},r.createElement("h4",null,"Step 1: Select CSV File"),r.createElement("div",{className:"form-group"},r.createElement("input",{type:"file",accept:".csv",onChange:H,className:"form-control",disabled:F||M}),A&&r.createElement("div",{className:"file-info"},r.createElement("p",null,"Selected file: ",A.name),r.createElement("p",null,"Records found: ",j&&Array.isArray(j)?j.length:0)))),r.createElement("div",{className:"import-step"},r.createElement("h4",null,"Step 2: Validate Data"),r.createElement("button",{onClick:J,className:"btn btn-secondary",disabled:!j||!Array.isArray(j)||0===j.length||F||M},F?"Validating...":"Validate Data"),F&&r.createElement("div",{className:"validation-progress"},r.createElement("div",{className:"validation-spinner-container"},r.createElement("div",{className:"validation-spinner"}),r.createElement("div",{className:"validation-message"},r.createElement("h5",null,"Validating Import Data"),r.createElement("p",null,"Checking format and user database..."),r.createElement("div",{className:"validation-stats"},r.createElement("span",null,"📄 ",j.length," records to process"))))),U&&!F&&r.createElement("div",{className:"validation-result ".concat(U.success?"success":"error")},r.createElement("div",{className:"validation-header"},U.success?r.createElement(o.A,{size:20,className:"success-icon"}):r.createElement(c.A,{size:20,className:"error-icon"}),r.createElement("span",null,U.message)),(null===(t=U.data)||void 0===t?void 0:t.validation)&&r.createElement("div",{className:"validation-summary"},r.createElement("div",{className:"summary-grid"},r.createElement("div",{className:"summary-item"},r.createElement("span",{className:"summary-label"},"Total:"),r.createElement("span",{className:"summary-value"},U.data.validation.totalRecords)),r.createElement("div",{className:"summary-item"},r.createElement("span",{className:"summary-label"},"Ready:"),r.createElement("span",{className:"summary-value success"},U.data.validation.validRecordsCount||(null===(a=U.data.validation.validRecords)||void 0===a?void 0:a.length)||0)),r.createElement("div",{className:"summary-item"},r.createElement("span",{className:"summary-label"},"Errors:"),r.createElement("span",{className:"summary-value error"},U.data.validation.invalidRecords||(null===(i=U.data.validation.errors)||void 0===i?void 0:i.length)||0))),(null===(u=U.data.validation.errors)||void 0===u?void 0:u.length)>0&&r.createElement("div",{className:"validation-errors"},r.createElement("h5",null,"Issues Found (",U.data.validation.errors.length,"):"),r.createElement("div",{className:"error-list"},U.data.validation.errors.slice(0,5).map((function(e,t){var a;return r.createElement("div",{key:t,className:"error-item"},r.createElement("span",{className:"error-record"},"Row ",e.record,":"),r.createElement("span",{className:"error-message"},e.errors.join(", ")),(null===(a=e.data)||void 0===a?void 0:a.requester_email)&&r.createElement("span",{className:"error-email"},"(",e.data.requester_email,")"))})),U.data.validation.errors.length>5&&r.createElement("div",{className:"error-more"},"+",U.data.validation.errors.length-5," more errors")))))),r.createElement("div",{className:"import-step"},r.createElement("div",{className:"import-warning"},r.createElement("div",{className:"alert alert-warning"},r.createElement("strong",null,"Important:")," This import will REPLACE all existing daily schedules. Current database contains ",(null==U||null===(f=U.data)||void 0===f||null===(f=f.validation)||void 0===f?void 0:f.totalRecords)||0," records."),r.createElement("label",{className:"checkbox-container"},r.createElement("input",{type:"checkbox",checked:V,onChange:function(e){return Y(e.target.checked)}}),"I understand this will replace existing daily schedule data")),r.createElement("h4",null,"Step 3: Import Data"),r.createElement("button",{onClick:$,className:"btn btn-primary",disabled:!(null!=U&&U.success)||M||!V},M?"IMPORTING...":"Import Data"),M&&(null==B?void 0:B.inProgress)&&r.createElement("div",{className:"import-progress"},r.createElement("div",{className:"progress-bar"},r.createElement("div",{className:"progress-fill",style:{width:"".concat(Math.round(((null==B?void 0:B.recordsProcessed)||0)/((null==B?void 0:B.totalRecords)||1)*100),"%")}})),r.createElement("div",{className:"progress-stats"},r.createElement("span",null,"Processing batch ",(null==B?void 0:B.batchNumber)||1," of ",(null==B?void 0:B.totalBatches)||1),r.createElement("span",null,(null==B?void 0:B.recordsProcessed)||0," of ",(null==B?void 0:B.totalRecords)||0," records processed"),r.createElement("span",null,(null==B?void 0:B.importedRecords)||0," imported, ",(null==B?void 0:B.failedRecords)||0," failed"))),B&&!B.inProgress&&r.createElement("div",{className:"import-result ".concat(B.success?"success":"error")},r.createElement("div",{className:"import-result-header"},B.success?r.createElement(o.A,{size:20,className:"success-icon"}):r.createElement(c.A,{size:20,className:"error-icon"}),r.createElement("span",null,B.message)),B.data&&r.createElement("div",{className:"import-result-details"},r.createElement("div",{className:"import-stats"},r.createElement("div",{className:"stat-item"},r.createElement("span",{className:"stat-label"},"Total Records:"),r.createElement("span",{className:"stat-value"},(null==B||null===(v=B.data)||void 0===v?void 0:v.totalRecords)||0)),r.createElement("div",{className:"stat-item"},r.createElement("span",{className:"stat-label"},"Imported:"),r.createElement("span",{className:"stat-value success"},(null==B||null===(g=B.data)||void 0===g?void 0:g.importedRecords)||0)),r.createElement("div",{className:"stat-item"},r.createElement("span",{className:"stat-label"},"Failed:"),r.createElement("span",{className:"stat-value error"},(null==B||null===(h=B.data)||void 0===h?void 0:h.failedRecords)||0))),B.data.errors&&B.data.errors.length>0&&r.createElement("div",{className:"import-errors"},r.createElement("h5",null,"Failed Records:"),r.createElement("div",{className:"error-table-container"},r.createElement("table",{className:"error-table"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Record #"),r.createElement("th",null,"Error"),r.createElement("th",null,"Email"))),r.createElement("tbody",null,B.data.errors.slice(0,10).map((function(e,t){return r.createElement("tr",{key:t,className:"error-row"},r.createElement("td",null,e.record),r.createElement("td",{className:"error-message"},e.batch?"Batch ".concat(e.batch,": ").concat(e.error):e.error||e.errors&&e.errors.join(", ")),r.createElement("td",null,e.data&&r.createElement("div",{className:"error-data"},e.data.requester_email&&r.createElement("div",null,"Requester: ",e.data.requester_email),e.data.manager_email&&r.createElement("div",null,"Manager: ",e.data.manager_email))))})))),B.data.errors.length>10&&r.createElement("div",{className:"more-errors"},"...and ",B.data.errors.length-10," more errors")))),B.success&&(null===(E=B.data)||void 0===E?void 0:E.importedRecords)>0&&r.createElement("div",{className:"import-success-message"},r.createElement("p",null,"✅ PTO records have been successfully imported."),r.createElement("p",null,"The modal will close automatically in a few seconds, or you can close it manually."))),r.createElement("div",{className:"form-actions"},r.createElement("button",{onClick:function(){k(),K()},className:"btn btn-secondary",disabled:M},B&&B.success?"Close":"Cancel"),r.createElement("button",{onClick:$,className:"btn btn-primary",disabled:!U||!U.success||M||B&&B.success},M?r.createElement(r.Fragment,null,r.createElement("span",{className:"spinner"}),"Importing..."):B&&B.success?"Imported Successfully":"Import Data"))))))):null}},3245:(e,t,a)=>{a.d(t,{A:()=>c});var r=a(6540),n=a(7946),l=a(4471),o=a(180);const c=function(e){var t=function(e){var t={pending:{bg:"bg-yellow-100",text:"text-yellow-800",icon:n.A,label:"Pending"},approved:{bg:"bg-green-100",text:"text-green-800",icon:l.A,label:"Approved"},declined:{bg:"bg-red-100",text:"text-red-800",icon:o.A,label:"Declined"}};return t[e.toLowerCase()]||t.pending}(e.status),a=t.icon;return r.createElement("span",{className:"inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ".concat(t.bg," ").concat(t.text)},r.createElement(a,{size:12}),r.createElement("span",null,t.label))}},4143:(e,t,a)=>{a.d(t,{A:()=>w});var r=a(6540),n=a(2307),l=a(4471),o=a(7235),c=a(4934),i=a(2708),s=a(7946),u=a(2321),m=a(5143),d=a(9618);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(){var e,t,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",n=a.toStringTag||"@@toStringTag";function l(a,r,n,l){var i=r&&r.prototype instanceof c?r:c,s=Object.create(i.prototype);return g(s,"_invoke",function(a,r,n){var l,c,i,s=0,u=n||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return l=t,c=0,i=e,d.n=a,o}};function f(a,r){for(c=a,i=r,t=0;!m&&s&&!n&&t<u.length;t++){var n,l=u[t],f=d.p,p=l[2];a>3?(n=p===r)&&(i=l[(c=l[4])?5:(c=3,3)],l[4]=l[5]=e):l[0]<=f&&((n=a<2&&f<l[1])?(c=0,d.v=r,d.n=l[1]):f<p&&(n=a<3||l[0]>r||r>p)&&(l[4]=a,l[5]=r,d.n=p,c=0))}if(n||a>1)return o;throw m=!0,r}return function(n,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),c=u,i=p;(t=c<2?e:i)||!m;){l||(c?c<3?(c>1&&(d.n=-1),f(c,i)):d.n=i:d.v=i);try{if(s=2,l){if(c||(n="next"),t=l[n]){if(!(t=t.call(l,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,c<2&&(c=0)}else 1===c&&(t=l.return)&&t.call(l),c<2&&(i=TypeError("The iterator does not provide a '"+n+"' method"),c=1);l=e}else if((t=(m=d.n<0)?i:a.call(r,d))!==o)break}catch(t){l=e,c=1,i=t}finally{s=1}}return{value:t,done:m}}}(a,n,l),!0),s}var o={};function c(){}function i(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(g(t={},r,(function(){return this})),t),m=s.prototype=c.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,g(e,n,"GeneratorFunction")),e.prototype=Object.create(m),e}return i.prototype=s,g(m,"constructor",s),g(s,"constructor",i),i.displayName="GeneratorFunction",g(s,n,"GeneratorFunction"),g(m),g(m,n,"Generator"),g(m,r,(function(){return this})),g(m,"toString",(function(){return"[object Generator]"})),(b=function(){return{w:l,m:d}})()}function g(e,t,a,r){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}g=function(e,t,a,r){if(t)n?n(e,t,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[t]=a;else{var l=function(t,a){g(e,t,(function(e){return this._invoke(t,a,e)}))};l("next",0),l("throw",1),l("return",2)}},g(e,t,a,r)}function h(e,t,a,r,n,l,o){try{var c=e[l](o),i=c.value}catch(e){return void a(e)}c.done?t(i):Promise.resolve(i).then(r,n)}function E(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var l=e.apply(t,a);function o(e){h(l,r,n,o,c,"next",e)}function c(e){h(l,r,n,o,c,"throw",e)}o(void 0)}))}}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,l,o,c=[],i=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;i=!1}else for(;!(i=(r=l.call(a)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){s=!0,n=e}finally{try{if(!i&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(s)throw n}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}const w=function(e){var t=e.currentUser,a=e.showNotification,f=e.isAdmin,p=N((0,r.useState)(null),2),y=p[0],g=p[1],h=N((0,r.useState)({startDate:new Date((new Date).getFullYear(),0,1).toISOString().split("T")[0],endDate:new Date((new Date).getFullYear(),11,31).toISOString().split("T")[0]}),2),k=h[0],w=h[1],S=N((0,r.useState)([]),2),D=S[0],_=S[1],A=N((0,r.useState)(!1),2),O=(A[0],A[1]),T=N((0,r.useState)(null),2),j=T[0],C=T[1];(0,r.useEffect)((function(){y&&P()}),[y,k]);var P=function(){var e=E(b().m((function e(){var t;return b().w((function(e){for(;;)switch(e.n){case 0:return O(!0),e.p=1,e.n=2,(0,u.invoke)("getPTORequests",{requester_id:y.accountId,startDate:k.startDate,endDate:k.endDate});case 2:(t=e.v).success&&_(t.data||[]),e.n=4;break;case 3:e.p=3,e.v,a("Failed to load PTO requests","error");case 4:return e.p=4,O(!1),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=E(b().m((function e(t){return b().w((function(e){for(;;)switch(e.n){case 0:a("PTO request updated successfully"),P();case 1:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=E(b().m((function e(r){var n;return b().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm("Are you sure you want to delete this PTO request?")){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,(0,u.invoke)("adminDeletePTORequest",{requestId:r.id,adminId:t.accountId,reason:"Admin deletion"});case 2:(n=e.v).success?(a("PTO request deleted successfully"),P()):a(n.message||"Failed to delete request","error"),e.n=4;break;case 3:e.p=3,e.v,a("Failed to delete PTO request","error");case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}(),x={totalDays:D.reduce((function(e,t){return e+(t.total_days||0)}),0),approved:D.filter((function(e){return"approved"===e.status})).length,pending:D.filter((function(e){return"pending"===e.status})).length,declined:D.filter((function(e){return"declined"===e.status})).length};return r.createElement("div",{className:"user-pto-management"},r.createElement("div",{className:"user-pto-header"},r.createElement("h2",null,"User PTO Management"),r.createElement("div",{className:"user-pto-controls"},r.createElement(m.A,{selectedUser:y,onSelect:g,placeholder:"Search and select user",useBackendSearch:!0}),r.createElement("div",{className:"date-range-filter"},r.createElement("input",{type:"date",value:k.startDate,onChange:function(e){return w((function(t){return v(v({},t),{},{startDate:e.target.value})}))},className:"form-control"}),r.createElement("span",null,"to"),r.createElement("input",{type:"date",value:k.endDate,onChange:function(e){return w((function(t){return v(v({},t),{},{endDate:e.target.value})}))},className:"form-control"})))),y&&r.createElement(r.Fragment,null,r.createElement("div",{className:"summary-cards"},r.createElement("div",{className:"summary-card"},r.createElement("div",{className:"card-icon"},r.createElement(n.A,{size:24})),r.createElement("div",{className:"card-content"},r.createElement("div",{className:"card-value"},x.totalDays),r.createElement("div",{className:"card-label"},"Total PTO Days"))),r.createElement("div",{className:"summary-card approved"},r.createElement("div",{className:"card-icon"},r.createElement(l.A,{size:24})),r.createElement("div",{className:"card-content"},r.createElement("div",{className:"card-value"},x.approved),r.createElement("div",{className:"card-label"},"Approved"))),r.createElement("div",{className:"summary-card pending"},r.createElement("div",{className:"card-icon"},r.createElement(o.A,{size:24})),r.createElement("div",{className:"card-content"},r.createElement("div",{className:"card-value"},x.pending),r.createElement("div",{className:"card-label"},"Pending")))),r.createElement("div",{className:"requests-table-container"},r.createElement("table",{className:"requests-table"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"PTO Date"),r.createElement("th",null,"Leave Type"),r.createElement("th",null,"Period"),r.createElement("th",null,"Days"),r.createElement("th",null,"Reason"),r.createElement("th",null,"Status"),f&&r.createElement("th",null,"Actions"))),r.createElement("tbody",null,D.map((function(e){return r.createElement("tr",{key:e.id},r.createElement("td",null,new Date(e.start_date).toLocaleDateString()),r.createElement("td",null,r.createElement("span",{className:"leave-type ".concat(e.leave_type)},e.leave_type)),r.createElement("td",null,e.start_date===e.end_date?new Date(e.start_date).toLocaleDateString():"".concat(new Date(e.start_date).toLocaleDateString()," - ").concat(new Date(e.end_date).toLocaleDateString())),r.createElement("td",null,e.total_days),r.createElement("td",null,e.reason),r.createElement("td",null,r.createElement("span",{className:"status-badge status-".concat(e.status)},e.status)),f&&r.createElement("td",{className:"actions"},r.createElement("button",{onClick:function(){return function(e){C(e)}(e)},className:"action-btn edit",title:"Edit request"},r.createElement(c.A,{size:16})),r.createElement("button",{onClick:function(){return I(e)},className:"action-btn delete",title:"Delete request"},r.createElement(i.A,{size:16}))))})),0===D.length&&r.createElement("tr",null,r.createElement("td",{colSpan:f?7:6,className:"empty-state"},r.createElement("div",{className:"empty-content"},r.createElement(n.A,{size:24}),r.createElement("p",null,"No PTO requests found for this period")))))))),!y&&r.createElement("div",{className:"empty-state"},r.createElement("div",{className:"empty-content"},r.createElement(s.A,{size:32}),r.createElement("p",null,"Select a user to view their PTO requests"))),j&&r.createElement(d.A,{request:j,onClose:function(){return C(null)},onSave:U,currentUser:t}))}},4506:(e,t,a)=>{a.d(t,{A:()=>T});var r=a(6540),n=a(2307),l=a(8697),o=a(418),c=a(8686),i=a(3893),s=a(4471),u=a(2708),m=a(7235),d=a(6069),f=a(5143),p=a(808),v=a(2321);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(){var e,t,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",n=a.toStringTag||"@@toStringTag";function l(a,r,n,l){var i=r&&r.prototype instanceof c?r:c,s=Object.create(i.prototype);return g(s,"_invoke",function(a,r,n){var l,c,i,s=0,u=n||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return l=t,c=0,i=e,d.n=a,o}};function f(a,r){for(c=a,i=r,t=0;!m&&s&&!n&&t<u.length;t++){var n,l=u[t],f=d.p,p=l[2];a>3?(n=p===r)&&(i=l[(c=l[4])?5:(c=3,3)],l[4]=l[5]=e):l[0]<=f&&((n=a<2&&f<l[1])?(c=0,d.v=r,d.n=l[1]):f<p&&(n=a<3||l[0]>r||r>p)&&(l[4]=a,l[5]=r,d.n=p,c=0))}if(n||a>1)return o;throw m=!0,r}return function(n,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),c=u,i=p;(t=c<2?e:i)||!m;){l||(c?c<3?(c>1&&(d.n=-1),f(c,i)):d.n=i:d.v=i);try{if(s=2,l){if(c||(n="next"),t=l[n]){if(!(t=t.call(l,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,c<2&&(c=0)}else 1===c&&(t=l.return)&&t.call(l),c<2&&(i=TypeError("The iterator does not provide a '"+n+"' method"),c=1);l=e}else if((t=(m=d.n<0)?i:a.call(r,d))!==o)break}catch(t){l=e,c=1,i=t}finally{s=1}}return{value:t,done:m}}}(a,n,l),!0),s}var o={};function c(){}function i(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(g(t={},r,(function(){return this})),t),m=s.prototype=c.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,g(e,n,"GeneratorFunction")),e.prototype=Object.create(m),e}return i.prototype=s,g(m,"constructor",s),g(s,"constructor",i),i.displayName="GeneratorFunction",g(s,n,"GeneratorFunction"),g(m),g(m,n,"Generator"),g(m,r,(function(){return this})),g(m,"toString",(function(){return"[object Generator]"})),(b=function(){return{w:l,m:d}})()}function g(e,t,a,r){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}g=function(e,t,a,r){if(t)n?n(e,t,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[t]=a;else{var l=function(t,a){g(e,t,(function(e){return this._invoke(t,a,e)}))};l("next",0),l("throw",1),l("return",2)}},g(e,t,a,r)}function h(e,t,a,r,n,l,o){try{var c=e[l](o),i=c.value}catch(e){return void a(e)}c.done?t(i):Promise.resolve(i).then(r,n)}function E(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){w(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,l,o,c=[],i=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;i=!1}else for(;!(i=(r=l.call(a)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){s=!0,n=e}finally{try{if(!i&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(s)throw n}}return c}}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return _(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var A=r.useState,O=r.useEffect;const T=function(e){var t,a,y,g,N,D=e.selectedDates,_=void 0===D?[]:D,T=e.onClose,j=e.onSubmit,C=e.currentUser,P=e.currentUserData,U=e.userManager,I=e.allUsers,x=void 0===I?[]:I,F=e.allTeams,L=void 0===F?[]:F,R=e.allRequests,M=void 0===R?[]:R,q=e.isAdmin,G=void 0!==q&&q,B=(e.isAdminMode,S(A({targetUser:C,manager:U,startDate:_[0]||"",endDate:_[_.length-1]||"",reason:"",dailySchedules:[]}),2)),z=B[0],W=B[1],V=S(A({}),2),Y=V[0],H=V[1],J=S(A(!1),2),$=J[0],K=J[1],Q=S(A(!1),2),X=Q[0],Z=Q[1],ee=S(A(!1),2),te=ee[0],ae=ee[1];O((function(){K(!G&&!P)}),[G,P]);var re=function(e){if(!e)return null;var t=x.find((function(t){return t.jira_account_id===e.accountId||t.email_address===e.emailAddress}));if(null!=t&&t.manager)return x.find((function(e){return e.id===t.manager||e.jira_account_id===t.manager}));if(null!=t&&t.team_id){var a=L.find((function(e){return e.id===t.team_id}));if(null!=a&&a.manager)return x.find((function(e){return e.id===a.manager||e.jira_account_id===a.manager}))}return null};O((function(){!function(){var e=[];if(!X&&_.length>0)e=_.slice().sort();else if((X||0===_.length)&&z.startDate&&z.endDate){var t=new Date(z.startDate),a=new Date(z.endDate);e=[];for(var r=new Date(t);r<=a;r.setDate(r.getDate()+1))e.push(r.toISOString().split("T")[0])}var n=e.map((function(e){return{date:e,type:"FULL_DAY",leaveType:"vacation"}}));W((function(t){return k(k({},t),{},{targetUser:G?t.targetUser:C,manager:re(G?t.targetUser:C)||U||t.manager,startDate:e[0]||"",endDate:e[e.length-1]||"",dailySchedules:n})}))}()}),[_,C,U,G,x,L,X]),O((function(){if(z.startDate&&z.endDate){for(var e=new Date(z.startDate),t=new Date(z.endDate),a=[],r=new Date(e);r<=t;r.setDate(r.getDate()+1))a.push(r.toISOString().split("T")[0]);var n=z.dailySchedules.filter((function(e){return a.includes(e.date)})),l=a.filter((function(e){return!n.find((function(t){return t.date===e}))})).map((function(e){return{date:e,type:"FULL_DAY",leaveType:"vacation"}}));W((function(e){return k(k({},e),{},{dailySchedules:[].concat(E(n),E(l)).sort((function(e,t){return new Date(e.date)-new Date(t.date)}))})}))}}),[z.startDate,z.endDate]);var ne=function(){var e,t=(e=b().m((function e(t){var a,r,n,l;return b().w((function(e){for(;;)switch(e.n){case 0:if(t){e.n=1;break}return W((function(e){return k(k({},e),{},{targetUser:null})})),e.a(2);case 1:return e.p=1,e.n=2,(0,v.invoke)("getUsers");case 2:a=e.v,r=a.success&&a.data||[],n=r.find((function(e){return e.jira_account_id===t.accountId||e.email_address===t.emailAddress})),W(n?function(e){return k(k({},e),{},{targetUser:n,manager:re(n)})}:function(e){return k(k({},e),{},{targetUser:t,manager:null})}),e.n=4;break;case 3:e.p=3,l=e.v,console.error("Failed to get user details:",l),W((function(e){return k(k({},e),{},{targetUser:t})}));case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,a=arguments;return new Promise((function(r,n){var l=e.apply(t,a);function o(e){h(l,r,n,o,c,"next",e)}function c(e){h(l,r,n,o,c,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),le=function(e,t,a){W((function(r){return k(k({},r),{},{dailySchedules:r.dailySchedules.map((function(r,n){return n===e?k(k({},r),{},w({},t,a)):r}))})}))},oe=[{value:"FULL_DAY",label:"Full Day (8h)"},{value:"HALF_DAY_MORNING",label:"Morning Half (4h)"},{value:"HALF_DAY_AFTERNOON",label:"Afternoon Half (4h)"}],ce=[{value:"vacation",label:"🏖️ Vacation",emoji:"🏖️"},{value:"sick",label:"🤒 Sick Leave",emoji:"🤒"},{value:"personal",label:"👤 Personal Day",emoji:"👤"},{value:"holiday",label:"🎉 Holiday",emoji:"🎉"},{value:"other leave type",label:"📝 Other Leave Type",emoji:"📝"}],ie={totalDays:z.dailySchedules.reduce((function(e,t){return e+("FULL_DAY"===t.type?1:.5)}),0),totalHours:z.dailySchedules.reduce((function(e,t){return e+("FULL_DAY"===t.type?8:4)}),0),leaveTypeBreakdown:z.dailySchedules.reduce((function(e,t){return e[t.leaveType]=(e[t.leaveType]||0)+("FULL_DAY"===t.type?1:.5),e}),{}),workingDays:z.dailySchedules.length,dateRange:z.startDate&&z.endDate?"".concat(new Date(z.startDate).toLocaleDateString()," - ").concat(new Date(z.endDate).toLocaleDateString()):""},se=function(e){Z(e);var t=[];if(e&&z.startDate&&z.endDate)for(var a=new Date(z.startDate),r=new Date(z.endDate),n=new Date(a);n<=r;n.setDate(n.getDate()+1))t.push(n.toISOString().split("T")[0]);else t=_.slice().sort();var l=t.map((function(e){return{date:e,type:"FULL_DAY",leaveType:"vacation"}}));W((function(e){return k(k({},e),{},{dailySchedules:l})}))};return O((function(){Z(!1);var e=_.slice().sort(),t=e.map((function(e){return{date:e,type:"FULL_DAY",leaveType:"vacation"}}));W((function(a){return k(k({},a),{},{startDate:e[0]||"",endDate:e[e.length-1]||"",dailySchedules:t})}))}),[_]),r.createElement("div",{className:"modal-overlay"},r.createElement("div",{className:"modal-content pto-submission-modal"},r.createElement("div",{className:"modal-header"},r.createElement("h3",{className:"modal-title"},r.createElement(n.A,{size:20}),G?"Create PTO Request (Admin)":"Submit PTO Request"),r.createElement("button",{onClick:T,className:"modal-close"},r.createElement(l.A,{size:20}))),r.createElement("div",{className:"modal-body"},$&&r.createElement("div",{className:"alert alert-warning"},r.createElement(o.A,{size:20}),r.createElement("div",null,r.createElement("strong",null,"User Not in System"),r.createElement("p",null,"Your user profile is not set up in the team management system. Please contact HR to complete your setup."))),r.createElement("div",{className:"form-section"},r.createElement("label",{className:"form-label"},"Employee ",G?"*":""),G?r.createElement(f.A,{selectedUser:z.targetUser,onSelect:ne,placeholder:"Search and select employee",required:!0,error:Y.targetUser,useBackendSearch:!0}):r.createElement("div",{className:"user-display-card"},r.createElement("div",{className:"user-avatar-large"},null!=C&&C.avatarUrl?r.createElement("img",{src:C.avatarUrl,alt:C.displayName}):r.createElement("div",{className:"avatar-placeholder-large"},(null==C||null===(t=C.displayName)||void 0===t?void 0:t.charAt(0))||r.createElement(c.A,{size:20}))),r.createElement("div",{className:"user-info-detailed"},r.createElement("div",{className:"user-name-large"},null==C?void 0:C.displayName),r.createElement("div",{className:"user-email-large"},null==C?void 0:C.emailAddress),(null==P?void 0:P.team_id)&&r.createElement("div",{className:"user-team"},r.createElement(i.A,{size:14}),(null===(a=L.find((function(e){return e.id===P.team_id})))||void 0===a?void 0:a.name)||"Team Member"))),Y.targetUser&&r.createElement("div",{className:"error-text"},Y.targetUser)),r.createElement("div",{className:"form-section"},r.createElement("label",{className:"form-label"},"Manager *"),z.manager?r.createElement("div",{className:"user-display-card manager-display"},r.createElement("div",{className:"user-avatar-large"},z.manager.avatarUrl?r.createElement("img",{src:z.manager.avatarUrl,alt:z.manager.displayName}):r.createElement("div",{className:"avatar-placeholder-large"},(null===(y=z.manager.displayName)||void 0===y?void 0:y.charAt(0))||r.createElement(c.A,{size:20}))),r.createElement("div",{className:"user-info-detailed"},r.createElement("div",{className:"user-name-large"},z.manager.displayName),r.createElement("div",{className:"user-email-large"},z.manager.emailAddress),r.createElement("div",{className:"manager-badge"},r.createElement(s.A,{size:14}),"Approving Manager")),G&&r.createElement("button",{type:"button",onClick:function(){return W((function(e){return k(k({},e),{},{manager:null})}))},className:"btn btn-sm btn-secondary",title:"Change Manager"},"Change")):r.createElement(f.A,{selectedUser:z.manager,onSelect:function(e){return W((function(t){return k(k({},t),{},{manager:e})}))},placeholder:"Search and select approving manager",required:!0,error:Y.manager,useBackendSearch:!0}),Y.manager&&r.createElement("div",{className:"error-text"},Y.manager)),r.createElement("div",{className:"pto-modal-section pto-modal-row"},r.createElement("div",{className:"pto-modal-col"},r.createElement("label",{className:"form-label"},"Start Date"),r.createElement("input",{type:"text",className:"form-control",value:z.startDate,readOnly:!0,tabIndex:-1})),r.createElement("div",{className:"pto-modal-col"},r.createElement("label",{className:"form-label"},"End Date"),r.createElement("input",{type:"text",className:"form-control",value:z.endDate,readOnly:!0,tabIndex:-1})),r.createElement("div",{className:"pto-modal-col",style:{alignSelf:"end"}},!X&&_.length>1&&r.createElement("button",{type:"button",className:"btn btn-sm btn-secondary",style:{marginTop:24},onClick:function(){return se(!0)}},"Add all dates in range"),X&&r.createElement("button",{type:"button",className:"btn btn-sm btn-secondary",style:{marginTop:24},onClick:function(){return se(!1)}},"Use only selected dates"))),r.createElement("div",{className:"form-section"},r.createElement("label",{className:"form-label"},"Reason (Optional)"),r.createElement("textarea",{value:z.reason,onChange:function(e){return W((function(t){return k(k({},t),{},{reason:e.target.value})}))},className:"form-control",rows:"3",placeholder:"Please provide additional details about your PTO request..."})),z.dailySchedules.length>0&&r.createElement("div",{className:"form-section"},r.createElement("div",{className:"schedule-header"},r.createElement("label",{className:"form-label"},"Schedule Details"),r.createElement("div",{className:"quick-actions"},r.createElement("span",{className:"quick-actions-label"},"Apply to all:"),ce.map((function(e){return r.createElement("button",{key:e.value,type:"button",onClick:function(){return t=e.value,void W((function(e){return k(k({},e),{},{dailySchedules:e.dailySchedules.map((function(e){return k(k({},e),{},{leaveType:t})}))})}));var t},className:"btn btn-sm btn-secondary quick-action-btn",title:"Mark all days as ".concat(e.label)},r.createElement("span",null,e.emoji),r.createElement("span",null,e.value))})))),r.createElement("div",{className:"schedule-list"},z.dailySchedules.map((function(e,t){return r.createElement("div",{key:e.date,className:"schedule-day-row"},r.createElement("div",{className:"schedule-day-info"},r.createElement("div",{className:"day-date"},new Date(e.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}))),r.createElement("div",{className:"schedule-controls"},r.createElement("select",{value:e.leaveType,onChange:function(e){return le(t,"leaveType",e.target.value)},className:"form-control schedule-select"},ce.map((function(e){return r.createElement("option",{key:e.value,value:e.value},e.label)}))),r.createElement("select",{value:e.type,onChange:function(e){return le(t,"type",e.target.value)},className:"form-control schedule-select"},oe.map((function(e){return r.createElement("option",{key:e.value,value:e.value},e.label)}))),r.createElement("button",{type:"button",onClick:function(){return function(e){W((function(t){return k(k({},t),{},{dailySchedules:t.dailySchedules.filter((function(t,a){return a!==e}))})}));var t=z.dailySchedules.filter((function(t,a){return a!==e}));if(t.length>0){var a=t.map((function(e){return e.date})).sort();W((function(e){return k(k({},e),{},{startDate:a[0],endDate:a[a.length-1]})}))}}(t)},className:"btn btn-sm btn-danger",title:"Remove this day"},r.createElement(u.A,{size:14}))))}))),Y.dailySchedules&&r.createElement("div",{className:"error-text"},Y.dailySchedules)),z.dailySchedules.length>0&&r.createElement("div",{className:"form-section"},r.createElement("div",{className:"request-summary-card"},r.createElement("div",{className:"summary-header"},r.createElement("h4",null,"Request Summary"),r.createElement("div",{className:"summary-status"},r.createElement(m.A,{size:16}),"Ready to Submit")),r.createElement("div",{className:"summary-content"},r.createElement("div",{className:"summary-metrics"},r.createElement("div",{className:"metric-item"},r.createElement("div",{className:"metric-value"},ie.totalDays),r.createElement("div",{className:"metric-label"},"Days Off")),r.createElement("div",{className:"metric-item"},r.createElement("div",{className:"metric-value"},ie.totalHours,"h"),r.createElement("div",{className:"metric-label"},"Total Hours")),r.createElement("div",{className:"metric-item"},r.createElement("div",{className:"metric-value"},ie.workingDays),r.createElement("div",{className:"metric-label"},"Scheduled Days"))),r.createElement("div",{className:"summary-details"},r.createElement("div",{className:"detail-row"},r.createElement("span",{className:"detail-label"},r.createElement(d.A,{size:16}),"Date Range:"),r.createElement("span",{className:"detail-value"},ie.dateRange)),r.createElement("div",{className:"detail-row"},r.createElement("span",{className:"detail-label"},r.createElement(c.A,{size:16}),G?"Employee:":"Approver:"),r.createElement("span",{className:"detail-value"},G?(null===(g=z.targetUser)||void 0===g?void 0:g.displayName)||"Not selected":(null===(N=z.manager)||void 0===N?void 0:N.displayName)||"Not selected")),Object.keys(ie.leaveTypeBreakdown).length>0&&r.createElement("div",{className:"detail-row"},r.createElement("span",{className:"detail-label"},r.createElement(n.A,{size:16}),"Leave Types:"),r.createElement("div",{className:"leave-type-tags"},Object.entries(ie.leaveTypeBreakdown).map((function(e){var t=S(e,2),a=t[0],n=t[1];return r.createElement("span",{key:a,className:"leave-type-tag"},(0,p.S0)(a)," ",a,": ",n," day",1!==n?"s":"")})))))))),Y.duplicate&&r.createElement("div",{className:"alert alert-error"},r.createElement(o.A,{size:20}),r.createElement("div",null,r.createElement("strong",null,"Scheduling Conflict"),r.createElement("p",null,Y.duplicate))),r.createElement("div",{className:"form-actions"},r.createElement("button",{type:"button",onClick:T,className:"btn btn-secondary"},"Cancel"),r.createElement("button",{type:"button",onClick:function(){var e;if(function(){var e,t,a={};z.targetUser||(a.targetUser="User is required"),z.manager||(a.manager="Manager is required"),z.startDate||(a.startDate="Start date is required"),z.endDate||(a.endDate="End date is required"),z.startDate&&z.endDate&&new Date(z.startDate)>new Date(z.endDate)&&(a.endDate="End date must be after start date"),0===z.dailySchedules.length&&(a.dailySchedules="Please select at least one day");var r=(null===(e=z.targetUser)||void 0===e?void 0:e.accountId)||(null===(t=z.targetUser)||void 0===t?void 0:t.jira_account_id);if(r){var n=z.dailySchedules.filter((function(e){return M.some((function(t){var a;return(t.requester_id===r||t.requester_email===(null===(a=z.targetUser)||void 0===a?void 0:a.emailAddress))&&"declined"!==t.status&&t.start_date<=e.date&&t.end_date>=e.date}))}));n.length>0&&(a.duplicate="This user already has PTO requests for: ".concat(n.map((function(e){return new Date(e.date).toLocaleDateString()})).join(", ")))}return H(a),0===Object.keys(a).length}()){var t,a=(t=z.targetUser)?k(k({},t),{},{accountId:t.accountId||t.jira_account_id||t.id,displayName:t.displayName||t.display_name||t.name,emailAddress:t.emailAddress||t.email_address,avatarUrl:t.avatarUrl||t.avatar_url}):null;if(a&&a.accountId&&a.displayName&&a.emailAddress){var r,n=z.dailySchedules.reduce((function(e,t){return e+("FULL_DAY"===t.type?1:.5)}),0),l=z.dailySchedules.reduce((function(e,t){return e+("FULL_DAY"===t.type?8:4)}),0),o=k({reporter:a,manager:(r=z.manager,r?k(k({},r),{},{accountId:r.accountId||r.jira_account_id||r.id,displayName:r.displayName||r.display_name||r.name,emailAddress:r.emailAddress||r.email_address,avatarUrl:r.avatarUrl||r.avatar_url}):null),startDate:z.startDate,endDate:z.endDate,leaveType:(null===(e=z.dailySchedules[0])||void 0===e?void 0:e.leaveType)||"vacation",reason:z.reason,dailySchedules:z.dailySchedules,totalDays:n,totalHours:l,isAdmin:te},te&&{targetUser:a});j(o)}else H((function(e){return k(k({},e),{},{targetUser:"Please select a valid user."})}))}},disabled:!z.targetUser||!z.manager||!z.startDate||!z.endDate||0===z.dailySchedules.length||!!Y.duplicate||$,className:"btn btn-primary"},G?"Create PTO Request":"Submit Request")),te&&r.createElement("div",{className:"admin-notice"},r.createElement("strong",null,"Admin Mode:")," This PTO request will be created with admin privileges and may be automatically approved."),0===z.dailySchedules.length&&r.createElement("div",{className:"instructions"},r.createElement("strong",null,"Next Step:")," Select start and end dates to configure your PTO schedule, or return to the calendar to select specific dates."),G&&r.createElement("div",{className:"pto-admin-mode-toggle",style:{display:"flex",gap:"2rem",alignItems:"center",marginBottom:16}},r.createElement("label",{style:{display:"flex",alignItems:"center",gap:6}},r.createElement("input",{type:"radio",checked:!te,onChange:function(){return ae(!1)},style:{marginRight:6}}),"Submit as Standard User"),r.createElement("label",{style:{display:"flex",alignItems:"center",gap:6}},r.createElement("input",{type:"radio",checked:te,onChange:function(){return ae(!0)},style:{marginRight:6}}),"Submit as Admin (auto-approve)")))))}},5143:(e,t,a)=>{a.d(t,{A:()=>b});var r=a(6540),n=a(8686),l=a(8697),o=a(8445),c=a(2321);function i(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(){var e,t,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",n=a.toStringTag||"@@toStringTag";function l(a,r,n,l){var i=r&&r.prototype instanceof c?r:c,s=Object.create(i.prototype);return u(s,"_invoke",function(a,r,n){var l,c,i,s=0,u=n||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return l=t,c=0,i=e,d.n=a,o}};function f(a,r){for(c=a,i=r,t=0;!m&&s&&!n&&t<u.length;t++){var n,l=u[t],f=d.p,p=l[2];a>3?(n=p===r)&&(i=l[(c=l[4])?5:(c=3,3)],l[4]=l[5]=e):l[0]<=f&&((n=a<2&&f<l[1])?(c=0,d.v=r,d.n=l[1]):f<p&&(n=a<3||l[0]>r||r>p)&&(l[4]=a,l[5]=r,d.n=p,c=0))}if(n||a>1)return o;throw m=!0,r}return function(n,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),c=u,i=p;(t=c<2?e:i)||!m;){l||(c?c<3?(c>1&&(d.n=-1),f(c,i)):d.n=i:d.v=i);try{if(s=2,l){if(c||(n="next"),t=l[n]){if(!(t=t.call(l,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,c<2&&(c=0)}else 1===c&&(t=l.return)&&t.call(l),c<2&&(i=TypeError("The iterator does not provide a '"+n+"' method"),c=1);l=e}else if((t=(m=d.n<0)?i:a.call(r,d))!==o)break}catch(t){l=e,c=1,i=t}finally{s=1}}return{value:t,done:m}}}(a,n,l),!0),s}var o={};function c(){}function i(){}function m(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(u(t={},r,(function(){return this})),t),f=m.prototype=c.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,n,"GeneratorFunction")),e.prototype=Object.create(f),e}return i.prototype=m,u(f,"constructor",m),u(m,"constructor",i),i.displayName="GeneratorFunction",u(m,n,"GeneratorFunction"),u(f),u(f,n,"Generator"),u(f,r,(function(){return this})),u(f,"toString",(function(){return"[object Generator]"})),(s=function(){return{w:l,m:p}})()}function u(e,t,a,r){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}u=function(e,t,a,r){if(t)n?n(e,t,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[t]=a;else{var l=function(t,a){u(e,t,(function(e){return this._invoke(t,a,e)}))};l("next",0),l("throw",1),l("return",2)}},u(e,t,a,r)}function m(e,t,a,r,n,l,o){try{var c=e[l](o),i=c.value}catch(e){return void a(e)}c.done?t(i):Promise.resolve(i).then(r,n)}function d(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var l=e.apply(t,a);function o(e){m(l,r,n,o,c,"next",e)}function c(e){m(l,r,n,o,c,"throw",e)}o(void 0)}))}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,l,o,c=[],i=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;i=!1}else for(;!(i=(r=l.call(a)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){s=!0,n=e}finally{try{if(!i&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(s)throw n}}return c}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return v(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}function y(e,t){var a;return function(){for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];clearTimeout(a),a=setTimeout((function(){clearTimeout(a),e.apply(void 0,n)}),t)}}const b=function(e){var t,a=e.selectedUser,u=e.onSelect,m=e.placeholder,p=void 0===m?"Search for a user":m,v=e.disabled,b=void 0!==v&&v,g=e.required,h=void 0!==g&&g,E=e.error,N=void 0===E?null:E,k=e.allUsers,w=void 0===k?[]:k,S=e.filterBy,D=void 0===S?"all":S,_=e.useBackendSearch,A=void 0!==_&&_,O=f((0,r.useState)(!1),2),T=O[0],j=O[1],C=f((0,r.useState)(""),2),P=C[0],U=C[1],I=f((0,r.useState)([]),2),x=I[0],F=I[1],L=f((0,r.useState)(!1),2),R=L[0],M=L[1],q=f((0,r.useState)(null),2),G=q[0],B=q[1],z=(0,r.useRef)(null),W=(0,r.useRef)(null),V=(0,r.useCallback)(y(function(){var e=d(s().m((function e(t){var a,r;return s().w((function(e){for(;;)switch(e.n){case 0:if(!(t.length<1)){e.n=1;break}return F([]),e.a(2);case 1:return M(!0),B(null),e.p=2,e.n=3,(0,c.invoke)("searchDatabaseUsers",{query:t,filterBy:D,startAt:0,maxResults:50});case 3:if(!(a=e.v).success||!a.data){e.n=4;break}F(a.data.users||[]),e.n=5;break;case 4:throw new Error(a.message||"Failed to search users");case 5:e.n=7;break;case 6:e.p=6,r=e.v,console.error("❌ Error searching users:",r),B(r.message),F([]);case 7:return e.p=7,M(!1),e.f(7);case 8:return e.a(2)}}),e,null,[[2,6,7,8]])})));return function(t){return e.apply(this,arguments)}}(),300),[D]),Y=(0,r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=i(w);if("withTeam"===D?t=t.filter((function(e){return(e.team_ids||[]).length>0})):"withoutTeam"===D&&(t=t.filter((function(e){return!(e.team_ids&&e.team_ids.length>0)}))),e.length>=1){var a=e.toLowerCase();t=t.filter((function(e){var t=(e.display_name||e.displayName||"").toLowerCase(),r=(e.email_address||e.emailAddress||"").toLowerCase(),n=(e.first_name||e.firstName||"").toLowerCase(),l=(e.last_name||e.lastName||"").toLowerCase();return t.includes(a)||r.includes(a)||n.includes(a)||l.includes(a)}))}t.sort((function(e,t){var a=(e.display_name||e.displayName||"").toLowerCase(),r=(t.display_name||t.displayName||"").toLowerCase();return a.localeCompare(r)})),F(t.slice(0,50))}),[w,D]);(0,r.useEffect)((function(){A||Y(P)}),[Y,P,A]);(0,r.useEffect)((function(){var e=function(e){z.current&&!z.current.contains(e.target)&&(j(!1),U(""),A||F([]))};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[A]),(0,r.useEffect)((function(){var e=function(e){"Escape"===e.key&&T&&(j(!1),U(""),A||F([]))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[T,A]);var H=function(e){return e.team_name||""},J=(0,r.useCallback)(y(function(){var e=d(s().m((function e(t){var a,r;return s().w((function(e){for(;;)switch(e.n){case 0:if(t){e.n=1;break}return F([]),e.a(2);case 1:if(e.p=1,!A){e.n=3;break}return e.n=2,(0,c.invoke)("searchDatabaseUsers",{query:t,filterBy:D,startAt:0,maxResults:50});case 2:a=e.v,e.n=5;break;case 3:return e.n=4,(0,c.invoke)("getInternalJiraUsers",{startAt:0,maxResults:50});case 4:a=e.v;case 5:a.success?F(a.data.users||[]):F([]),e.n=7;break;case 6:e.p=6,r=e.v,console.error("Error searching users:",r),F([]);case 7:return e.a(2)}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),300),[A,D]);return(0,r.useEffect)((function(){P?J(P):F([])}),[P,J]),r.createElement("div",{className:"user-picker-container",ref:z},r.createElement("div",{onClick:function(){b||(j(!0),setTimeout((function(){var e;null===(e=W.current)||void 0===e||e.focus()}),100))},className:"user-picker-input ".concat(b?"user-picker-input-disabled":""," ").concat(T?"user-picker-input-focused":""," ").concat(N?"user-picker-input-error":"")},a?r.createElement("div",{className:"user-picker-selected"},r.createElement("div",{className:"user-picker-avatar"},a.avatarUrl||a.avatar_url?r.createElement("img",{src:a.avatarUrl||a.avatar_url,alt:a.displayName||a.display_name,className:"user-picker-avatar-img"}):r.createElement("span",{className:"user-picker-avatar-text"},(null===(t=a.displayName||a.display_name)||void 0===t?void 0:t.charAt(0))||r.createElement(n.A,{size:16}))),r.createElement("div",{className:"user-picker-user-info"},r.createElement("div",{className:"user-picker-user-name"},a.displayName||a.display_name),r.createElement("div",{className:"user-picker-user-email"},a.emailAddress||a.email_address)),!b&&r.createElement("button",{onClick:function(e){e.stopPropagation(),u(null)},className:"user-picker-clear-btn",type:"button"},r.createElement(l.A,{size:16}))):r.createElement("div",{className:"user-picker-placeholder"},r.createElement(o.A,{size:16}),r.createElement("span",null,p),h&&r.createElement("span",{className:"user-picker-required"},"*"))),N&&r.createElement("div",{className:"user-picker-error"},N),T&&r.createElement("div",{className:"user-picker-dropdown"},r.createElement("div",{className:"user-picker-search-container"},r.createElement("div",{className:"user-picker-search-input-wrapper"},r.createElement(o.A,{size:16,className:"user-picker-search-icon"}),r.createElement("input",{ref:W,type:"text",value:P,onChange:function(e){var t=e.target.value;U(t),A?V(t):Y(t)},placeholder:"Type to search users...",className:"user-picker-search-input"}))),r.createElement("div",{className:"user-picker-results"},R?r.createElement("div",{className:"user-picker-loading"},r.createElement("div",{className:"user-picker-loading-spinner"}),r.createElement("div",{className:"user-picker-loading-text"},"Searching...")):G?r.createElement("div",{className:"user-picker-empty"},r.createElement("div",{className:"user-picker-empty-text"},"Error: ",G)):0!==w.length||A?P.length>=1&&0===x.length?r.createElement("div",{className:"user-picker-empty"},r.createElement("div",{className:"user-picker-empty-text"},"No users found")):P.length<1?r.createElement("div",{className:"user-picker-empty"},r.createElement("div",{className:"user-picker-empty-text"},"Type to search users...")):r.createElement("div",{className:"user-picker-user-list"},x.map((function(e){var t;return r.createElement("div",{key:e.id,onClick:function(){return function(e){u(e),j(!1),U(""),F([])}(e)},className:"user-picker-user-option"},r.createElement("div",{className:"user-picker-avatar"},e.avatarUrl||e.avatar_url?r.createElement("img",{src:e.avatarUrl||e.avatar_url,alt:e.displayName||e.display_name,className:"user-picker-avatar-img"}):r.createElement("span",{className:"user-picker-avatar-text"},(null===(t=e.displayName||e.display_name)||void 0===t?void 0:t.charAt(0))||r.createElement(n.A,{size:16}))),r.createElement("div",{className:"user-picker-option-info"},r.createElement("div",{className:"user-picker-option-name"},e.displayName||e.display_name),r.createElement("div",{className:"user-picker-option-email"},e.emailAddress||e.email_address),H(e)&&r.createElement("div",{className:"user-picker-option-team"},"Team: ",H(e))))})),50===x.length&&r.createElement("div",{className:"user-picker-more-results"},"Showing first 50 results. Narrow your search for more specific results.")):r.createElement("div",{className:"user-picker-empty"},r.createElement("div",{className:"user-picker-empty-text"},"No users available")))))}},5839:(e,t,a)=>{a.d(t,{A:()=>A});var r=a(6540),n=a(2321),l=a(5143),o=a(8309),c=a(1999),i=a(5977),s=a(8686),u=a(7677),m=a(4809),d=a.n(m);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],a=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}}}throw new TypeError(f(e)+" is not iterable")}function v(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=D(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,c=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,l=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw l}}}}function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){g(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function h(){var e,t,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",n=a.toStringTag||"@@toStringTag";function l(a,r,n,l){var i=r&&r.prototype instanceof c?r:c,s=Object.create(i.prototype);return E(s,"_invoke",function(a,r,n){var l,c,i,s=0,u=n||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return l=t,c=0,i=e,d.n=a,o}};function f(a,r){for(c=a,i=r,t=0;!m&&s&&!n&&t<u.length;t++){var n,l=u[t],f=d.p,p=l[2];a>3?(n=p===r)&&(i=l[(c=l[4])?5:(c=3,3)],l[4]=l[5]=e):l[0]<=f&&((n=a<2&&f<l[1])?(c=0,d.v=r,d.n=l[1]):f<p&&(n=a<3||l[0]>r||r>p)&&(l[4]=a,l[5]=r,d.n=p,c=0))}if(n||a>1)return o;throw m=!0,r}return function(n,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),c=u,i=p;(t=c<2?e:i)||!m;){l||(c?c<3?(c>1&&(d.n=-1),f(c,i)):d.n=i:d.v=i);try{if(s=2,l){if(c||(n="next"),t=l[n]){if(!(t=t.call(l,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,c<2&&(c=0)}else 1===c&&(t=l.return)&&t.call(l),c<2&&(i=TypeError("The iterator does not provide a '"+n+"' method"),c=1);l=e}else if((t=(m=d.n<0)?i:a.call(r,d))!==o)break}catch(t){l=e,c=1,i=t}finally{s=1}}return{value:t,done:m}}}(a,n,l),!0),s}var o={};function c(){}function i(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(E(t={},r,(function(){return this})),t),m=s.prototype=c.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,E(e,n,"GeneratorFunction")),e.prototype=Object.create(m),e}return i.prototype=s,E(m,"constructor",s),E(s,"constructor",i),i.displayName="GeneratorFunction",E(s,n,"GeneratorFunction"),E(m),E(m,n,"Generator"),E(m,r,(function(){return this})),E(m,"toString",(function(){return"[object Generator]"})),(h=function(){return{w:l,m:d}})()}function E(e,t,a,r){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}E=function(e,t,a,r){if(t)n?n(e,t,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[t]=a;else{var l=function(t,a){E(e,t,(function(e){return this._invoke(t,a,e)}))};l("next",0),l("throw",1),l("return",2)}},E(e,t,a,r)}function N(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t,a,r,n,l,o){try{var c=e[l](o),i=c.value}catch(e){return void a(e)}c.done?t(i):Promise.resolve(i).then(r,n)}function w(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var l=e.apply(t,a);function o(e){k(l,r,n,o,c,"next",e)}function c(e){k(l,r,n,o,c,"throw",e)}o(void 0)}))}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,l,o,c=[],i=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;i=!1}else for(;!(i=(r=l.call(a)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){s=!0,n=e}finally{try{if(!i&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(s)throw n}}return c}}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return _(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}const A=function(e){var t=e.isOpen,a=e.onClose,m=e.teams,f=e.users,y=e.onSaveTeam,E=e.onDeleteTeam,k=e.onSaveUser,D=e.onDeleteUser,_=e.showNotification,A=e.onRefresh,O=S((0,r.useState)("teams"),2),T=O[0],j=O[1],C=S((0,r.useState)("list"),2),P=C[0],U=C[1],I=S((0,r.useState)(null),2),x=I[0],F=I[1],L=S((0,r.useState)(null),2),R=L[0],M=L[1],q=S((0,r.useState)(!1),2),G=q[0],B=q[1],z=S((0,r.useState)([]),2),W=z[0],V=z[1],Y=S((0,r.useState)(!1),2),H=Y[0],J=Y[1],$=S((0,r.useState)({startAt:0,maxResults:50,total:0,isLast:!0}),2),K=$[0],Q=$[1],X=S((0,r.useState)([]),2),Z=X[0],ee=X[1],te=S((0,r.useState)(!1),2),ae=te[0],re=te[1],ne=S((0,r.useState)({name:"",description:"",manager:null,department:"",color:"#667eea"}),2),le=ne[0],oe=ne[1],ce=S((0,r.useState)({firstName:"",lastName:"",displayName:"",emailAddress:"",jiraAccountId:"",employmentType:"full-time",hireDate:"",teamMemberships:[],capacity:40,manager:"",executiveManager:""}),2),ie=ce[0],se=ce[1],ue=S((0,r.useState)([{dayOfWeek:1,dayName:"Monday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:2,dayName:"Tuesday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:3,dayName:"Wednesday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:4,dayName:"Thursday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:5,dayName:"Friday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:6,dayName:"Saturday",isWorkingDay:!1,startTime:"",endTime:"",hoursPerDay:0},{dayOfWeek:7,dayName:"Sunday",isWorkingDay:!1,startTime:"",endTime:"",hoursPerDay:0}]),2),me=ue[0],de=ue[1],fe=S((0,r.useState)({}),2),pe=fe[0],ve=fe[1],ye=S((0,r.useState)("Member"),2),be=ye[0],ge=ye[1];(0,r.useEffect)((function(){"users"===T&&"import"===P&&he(0)}),[T,P]);var he=function(){var e=w(h().m((function e(){var t,a,r,l,o,c,i,s,u=arguments;return h().w((function(e){for(;;)switch(e.n){case 0:return 0===(t=u.length>0&&void 0!==u[0]?u[0]:0)&&(J(!0),V([])),e.p=1,e.n=2,(0,n.invoke)("getInternalJiraUsers",{startAt:t,maxResults:50});case 2:if(!(a=e.v).success||!a.data){e.n=4;break}if(r=a.data,l=r.users,o=r.total,c=r.isLast,V((function(e){return[].concat(N(e),N(l||[]))})),Q({startAt:t,maxResults:50,total:o||0,isLast:!1!==c}),c){e.n=3;break}return i=t+50,e.n=3,he(i);case 3:e.n=5;break;case 4:throw new Error(a.message||"Failed to load Jira users");case 5:e.n=7;break;case 6:e.p=6,s=e.v,0===t&&(_("Failed to load Jira users: "+s.message,"error"),V([]));case 7:return e.p=7,(0===t||H)&&J(!1),e.f(7);case 8:return e.a(2)}}),e,null,[[1,6,7,8]])})));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=w(h().m((function e(){var t,a,r,l,o,c,i;return h().w((function(e){for(;;)switch(e.n){case 0:if(0!==Z.length){e.n=1;break}return _("Please select users to import","error"),e.a(2);case 1:return re(!0),e.p=2,t=f.map((function(e){return e.jira_account_id||e.email_address})).filter(Boolean),a=Z.filter((function(e){return!t.includes(e.accountId)&&!t.includes(e.emailAddress)})),e.n=3,(0,n.invoke)("bulkImportUsersFromJira",{selectedUserIds:a.map((function(e){return e.accountId})),defaultTeamId:null,defaultDepartment:""});case 3:if(!(r=e.v).success){e.n=4;break}l=r.data,o=l.importedCount,c=l.skippedCount,_("Successfully imported ".concat(o," users. ").concat(c>0?"".concat(c," users were already in the system."):""),"success"),ee([]),A&&A(),he(0),e.n=5;break;case 4:throw new Error(r.message||"Failed to import users");case 5:e.n=7;break;case 6:e.p=6,i=e.v,_("Failed to import users: "+i.message,"error");case 7:return e.p=7,re(!1),e.f(7);case 8:return e.a(2)}}),e,null,[[2,6,7,8]])})));return function(){return e.apply(this,arguments)}}(),Ne=function(){oe({name:"",description:"",manager:null,department:"",color:"#667eea"}),ve({}),F(null)},ke=function(){se({firstName:"",lastName:"",displayName:"",emailAddress:"",jiraAccountId:"",employmentType:"full-time",hireDate:"",teamMemberships:[],capacity:40,manager:"",executiveManager:""}),de([{dayOfWeek:1,dayName:"Monday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:2,dayName:"Tuesday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:3,dayName:"Wednesday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:4,dayName:"Thursday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:5,dayName:"Friday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:6,dayName:"Saturday",isWorkingDay:!1,startTime:"",endTime:"",hoursPerDay:0},{dayOfWeek:7,dayName:"Sunday",isWorkingDay:!1,startTime:"",endTime:"",hoursPerDay:0}]),ve({}),M(null)};(0,r.useEffect)((function(){(ie.firstName||ie.lastName)&&se((function(e){return b(b({},e),{},{displayName:"".concat(ie.firstName," ").concat(ie.lastName).trim()})}))}),[ie.firstName,ie.lastName]),(0,r.useEffect)((function(){var e=me.reduce((function(e,t){return e+(t.isWorkingDay?t.hoursPerDay:0)}),0);se((function(t){return b(b({},t),{},{capacity:e})}))}),[me]);var we=function(){var e=w(h().m((function e(t){return h().w((function(e){for(;;)switch(e.n){case 0:oe((function(e){return b(b({},e),{},{manager:t})}));case 1:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(e,t){oe((function(a){return b(b({},a),{},g({},e,t))})),pe[e]&&ve((function(t){return b(b({},t),{},g({},e,null))}))},De=function(){var e=w(h().m((function e(t){var a;return h().w((function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),r=void 0,r={},le.name.trim()||(r.name="Team name is required"),ve(r),0===Object.keys(r).length){e.n=1;break}return e.a(2);case 1:return B(!0),e.p=2,a={id:null==x?void 0:x.id,name:le.name,description:le.description,manager:le.manager&&(le.manager.jira_account_id||le.manager.accountId||le.manager.id)||null,department:le.department,color:le.color,members:(null==x?void 0:x.members)||[]},console.log("Submitting team:",a),e.n=3,y(a);case 3:_(x?"Team updated successfully":"Team created successfully"),Ne(),U("list"),A&&A(),e.n=5;break;case 4:e.p=4,e.v,_("Failed to save team","error");case 5:return e.p=5,B(!1),e.f(5);case 6:return e.a(2)}var r}),e,null,[[2,4,5,6]])})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=w(h().m((function e(t,a){return h().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm('Are you sure you want to delete the team "'.concat(a,'"? This action cannot be undone.'))){e.n=1;break}return e.a(2);case 1:return B(!0),e.p=2,e.n=3,E(t);case 3:_("Team deleted successfully"),A&&A(),e.n=5;break;case 4:e.p=4,e.v,_("Failed to delete team","error");case 5:return e.p=5,B(!1),e.f(5);case 6:return e.a(2)}}),e,null,[[2,4,5,6]])})));return function(t,a){return e.apply(this,arguments)}}(),Ae=function(e,t){se((function(a){return b(b({},a),{},g({},e,t))})),pe[e]&&ve((function(t){return b(b({},t),{},g({},e,null))}))},Oe=function(e,t,a){de((function(r){var n=N(r);if(n[e]=b(b({},n[e]),{},g({},t,a)),"startTime"===t||"endTime"===t){var l=n[e];if(l.startTime&&l.endTime&&l.isWorkingDay){var o=new Date("2000-01-01T".concat(l.startTime)),c=(new Date("2000-01-01T".concat(l.endTime))-o)/36e5;n[e].hoursPerDay=Math.max(0,c)}}return"isWorkingDay"!==t||a||(n[e].startTime="",n[e].endTime="",n[e].hoursPerDay=0),n}))},Te=function(){var e=w(h().m((function e(t){var a,r,l,o,c;return h().w((function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),i=void 0,i={},ie.firstName.trim()||(i.firstName="First name is required"),ie.lastName.trim()||(i.lastName="Last name is required"),ve(i),0===Object.keys(i).length){e.n=1;break}return e.a(2);case 1:return B(!0),e.p=2,a=!0===(null==R?void 0:R.isAdmin),r=!0===ie.isAdmin,l={id:null==R?void 0:R.id,first_name:ie.firstName,last_name:ie.lastName,display_name:ie.displayName,email_address:ie.emailAddress,jira_account_id:ie.jiraAccountId,employment_type:ie.employmentType,hire_date:ie.hireDate,team_memberships:ie.teamMemberships,capacity:ie.capacity,availability:me,isAdmin:r,manager:ie.manager,executive_manager:ie.executiveManager},console.log("Submitting user:",l),e.n=3,k(l);case 3:if(!r||a){e.n=5;break}return e.n=4,(0,n.invoke)("addAdminUser",{accountId:l.jira_account_id||l.id||l.accountId,addedBy:null===(o=currentUser)||void 0===o?void 0:o.accountId});case 4:e.n=6;break;case 5:if(r||!a){e.n=6;break}return e.n=6,(0,n.invoke)("removeAdminUser",{accountId:l.jira_account_id||l.id||l.accountId,removedBy:null===(c=currentUser)||void 0===c?void 0:c.accountId});case 6:_(R?"User updated successfully":"User created successfully"),ke(),U("list"),A&&A(),e.n=8;break;case 7:e.p=7,e.v,_("Failed to save user","error");case 8:return e.p=8,B(!1),e.f(8);case 9:return e.a(2)}var i}),e,null,[[2,7,8,9]])})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=w(h().m((function e(t,a){return h().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm('Are you sure you want to delete the user "'.concat(a,'"? This action cannot be undone.'))){e.n=1;break}return e.a(2);case 1:return B(!0),e.p=2,e.n=3,D(t);case 3:_("User deleted successfully"),A&&A(),e.n=5;break;case 4:e.p=4,e.v,_("Failed to delete user","error");case 5:return e.p=5,B(!1),e.f(5);case 6:return e.a(2)}}),e,null,[[2,4,5,6]])})));return function(t,a){return e.apply(this,arguments)}}(),Ce=S((0,r.useState)([]),2),Pe=Ce[0],Ue=Ce[1],Ie=S((0,r.useState)(!1),2),xe=Ie[0],Fe=Ie[1],Le=S((0,r.useState)(""),2),Re=Le[0],Me=Le[1],qe=function(e){return f.some((function(t){return(t.team_memberships||[]).some((function(t){return t.team_id===e&&"Manager"===t.role}))}))},Ge=["type","id","name","jira_account_id","first_name","last_name","display_name","email","employment_type","hire_date","team_memberships","capacity","department","description","color","manager","executive_manager","isAdmin"],Be=function(){var e=w(h().m((function e(t){var a;return h().w((function(e){for(;;)switch(e.n){case 0:if(a=t.target.files[0]){e.n=1;break}return e.a(2);case 1:d().parse(a,{header:!0,skipEmptyLines:!0,complete:function(){var e=w(h().m((function e(a){var r,l,o,c,i,s,u,d,f,y,b,g,E,N,w;return h().w((function(e){for(;;)switch(e.n){case 0:B(!0),e.p=1,r=[],l=[],o=v(a.data);try{for(o.s();!(c=o.n()).done;)"team"===(i=c.value).type?r.push({id:i.id||(window.crypto&&window.crypto.randomUUID?window.crypto.randomUUID():"team-"+Date.now()+"-"+Math.floor(1e4*Math.random())),name:i.name,department:i.department,description:i.description,color:i.color,manager:i.manager}):"user"===i.type&&(s=[],i.team_memberships&&(s=i.team_memberships.split(",").map((function(e){var t=S(e.split(":"),2),a=t[0],r=t[1],n=m.find((function(e){return e.name===a.trim()}));return{team_id:n?n.id:a.trim(),role:(r||"Member").trim()}}))),l.push({id:i.id,name:i.name,jira_account_id:i.jira_account_id,displayName:i.display_name,first_name:i.first_name,last_name:i.last_name,emailAddress:i.email,department:i.department,hireDate:i.hire_date,employmentType:i.employment_type,team_memberships:s,capacity:i.capacity,isAdmin:"TRUE"===i.isAdmin||"true"===i.isAdmin,manager:i.manager||"",executive_manager:i.executive_manager||""}))}catch(e){o.e(e)}finally{o.f()}return e.n=2,(0,n.invoke)("getTeams");case 2:u=e.v,d=u.success?u.data:[],f=h().m((function e(){var t;return h().w((function(e){for(;;)switch(e.n){case 0:if(t=b[y],!d.find((function(e){return e.id===t.id}))){e.n=2;break}return e.n=1,(0,n.invoke)("updateTeam",t);case 1:e.n=3;break;case 2:return e.n=3,(0,n.invoke)("createTeam",t);case 3:return e.a(2)}}),e)})),y=0,b=r;case 3:if(!(y<b.length)){e.n=5;break}return e.d(p(f()),4);case 4:y++,e.n=3;break;case 5:g=0,E=l;case 6:if(!(g<E.length)){e.n=8;break}return N=E[g],e.n=7,k(N);case 7:g++,e.n=6;break;case 8:_("CSV import completed successfully"),A&&A(),e.n=10;break;case 9:e.p=9,w=e.v,_("Failed to import CSV: "+w.message,"error");case 10:return e.p=10,B(!1),t.target.value="",e.f(10);case 11:return e.a(2)}}),e,null,[[1,9,10,11]])})));return function(t){return e.apply(this,arguments)}}()});case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=w(h().m((function e(){var t,a,r,n,l;return h().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm("Are you sure you want to delete ".concat(Pe.length," users? This action cannot be undone."))){e.n=1;break}return e.a(2);case 1:B(!0),e.p=2,t=v(Pe),e.p=3,t.s();case 4:if((a=t.n()).done){e.n=6;break}return r=a.value,e.n=5,D(r);case 5:e.n=4;break;case 6:e.n=8;break;case 7:e.p=7,n=e.v,t.e(n);case 8:return e.p=8,t.f(),e.f(8);case 9:_("".concat(Pe.length," users deleted successfully")),Ue([]),A&&A(),e.n=11;break;case 10:e.p=10,l=e.v,_("Failed to delete users: "+l.message,"error");case 11:return e.p=11,B(!1),e.f(11);case 12:return e.a(2)}}),e,null,[[3,7,8,9],[2,10,11,12]])})));return function(){return e.apply(this,arguments)}}();if(!t)return null;var We,Ve=(We=new Set,f.forEach((function(e){e.jira_account_id&&We.add(e.jira_account_id),e.accountId&&We.add(e.accountId),e.email_address&&We.add(e.email_address.toLowerCase()),e.emailAddress&&We.add(e.emailAddress.toLowerCase())})),W.filter((function(e){var t;if(!1===e.active)return!1;var a=e.accountId,r=null===(t=e.emailAddress)||void 0===t?void 0:t.toLowerCase();return!(We.has(a)||r&&We.has(r))})));return r.createElement("div",{className:"modal-overlay"},r.createElement("div",{className:"modal-content team-management-modal"},r.createElement("div",{className:"modal-header"},r.createElement("h3",null,"Team & User Management"),r.createElement("div",{className:"header-actions"},r.createElement("button",{className:"btn btn-secondary",onClick:function(){var e=m.map((function(e){return{type:"team",id:e.id,name:e.name,jira_account_id:"",first_name:"",last_name:"",display_name:"",email:"",employment_type:"",hire_date:"",team_memberships:"",capacity:"",department:e.department||"",description:e.description||"",color:e.color||"",manager:e.manager||"",executive_manager:"",isAdmin:""}})),t=f.map((function(e){return{type:"user",id:e.id,name:e.name||e.display_name||"",jira_account_id:e.jira_account_id||"",first_name:e.first_name||"",last_name:e.last_name||"",display_name:e.display_name||"",email:e.email_address||"",employment_type:e.employment_type||"",hire_date:e.hire_date||"",team_memberships:(e.team_memberships||[]).map((function(e){var t;return"".concat((null===(t=m.find((function(t){return t.id===e.team_id})))||void 0===t?void 0:t.name)||e.team_id,":").concat(e.role)})).join(","),capacity:e.capacity||"",department:e.department||"",description:"",color:"",manager:e.manager||"",executive_manager:e.executive_manager||"",isAdmin:!0===e.isAdmin?"TRUE":"FALSE"}})),a=[].concat(N(e),N(t)),r=d().unparse(a,{columns:Ge}),n=new Blob([r],{type:"text/csv"}),l=URL.createObjectURL(n),o=document.createElement("a");o.href=l,o.download="teams-and-users-".concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(l)},disabled:G},r.createElement(o.A,{size:16})," Export CSV"),r.createElement("label",{className:"btn btn-secondary",style:{marginLeft:8}},r.createElement("input",{type:"file",accept:".csv",onChange:Be,style:{display:"none"},disabled:G}),r.createElement(c.A,{size:16})," Import CSV"),r.createElement("button",{className:"modal-close",onClick:a},"×"))),r.createElement("div",{className:"modal-body"},r.createElement("div",{className:"team-management-main-tabs"},r.createElement("button",{className:"team-management-main-tab ".concat("teams"===T?"team-management-main-tab-active":""),onClick:function(){j("teams"),U("list"),Ne(),ke()}},"👥 Teams (",m.length,")"),r.createElement("button",{className:"team-management-main-tab ".concat("users"===T?"team-management-main-tab-active":""),onClick:function(){j("users"),U("list"),Ne(),ke()}},"👤 Users (",f.length,")")),"teams"===T&&r.createElement(r.Fragment,null,r.createElement("div",{className:"team-management-sub-tabs"},r.createElement("button",{className:"team-management-sub-tab ".concat("list"===P?"team-management-sub-tab-active":""),onClick:function(){return U("list")}},"Teams List"),r.createElement("button",{className:"team-management-sub-tab ".concat("form"===P?"team-management-sub-tab-active":""),onClick:function(){U("form"),Ne()}},x?"Edit Team":"Add New Team")),"list"===P&&r.createElement("div",{className:"team-management-teams-section"},0===m.length?r.createElement("div",{className:"team-management-empty-state"},r.createElement("div",{className:"team-management-empty-icon"},"👥"),r.createElement("h4",null,"No Teams Created"),r.createElement("p",null,"Create your first team to organize your resources"),r.createElement("button",{className:"btn btn-primary",onClick:function(){Ne(),U("form")}},"Create First Team")):r.createElement("div",{className:"requests-table-wrapper"},r.createElement("table",{className:"requests-table"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Team Name"),r.createElement("th",null,"Department"),r.createElement("th",null,"Manager"),r.createElement("th",null,"Members"),r.createElement("th",null,"Actions"))),r.createElement("tbody",null,m.map((function(e){var t,a=(t=e.id,f.filter((function(e){return(e.team_memberships||[]).some((function(e){return e.team_id===t}))})));return r.createElement("tr",{key:e.id},r.createElement("td",null,e.name),r.createElement("td",null,e.department||"-"),r.createElement("td",null,function(e){if(!e)return"-";var t=f.find((function(t){return t.jira_account_id===e||t.accountId===e||t.id===e}));return t?t.display_name||t.displayName||t.name:e}(e.manager)),r.createElement("td",null,a.length),r.createElement("td",null,r.createElement("button",{className:"btn btn-sm btn-secondary",onClick:function(){return function(e){F(e);var t=null;e.manager&&(t=f.find((function(t){return t.jira_account_id===e.manager||t.accountId===e.manager||t.id===e.manager}))||null),oe({name:e.name||"",description:e.description||"",manager:t,department:e.department||"",color:e.color||"#667eea"}),U("form")}(e)},disabled:G},"Edit"),r.createElement("button",{className:"btn btn-sm btn-danger",onClick:function(){return _e(e.id,e.name)},disabled:G},"Delete")))})))))),"form"===P&&r.createElement("form",{onSubmit:De,className:"team-management-team-form"},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"team-name"},"Team Name *"),r.createElement("input",{type:"text",id:"team-name",className:"form-control ".concat(pe.name?"form-control-error":""),value:le.name,onChange:function(e){return Se("name",e.target.value)},placeholder:"Enter team name",disabled:G}),pe.name&&r.createElement("span",{className:"form-error-text"},pe.name)),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"team-description"},"Description"),r.createElement("textarea",{id:"team-description",className:"form-control",value:le.description,onChange:function(e){return Se("description",e.target.value)},placeholder:"Brief description of the team's purpose",rows:"3",disabled:G})),r.createElement("div",{className:"form-row"},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"team-manager"},"Manager"),r.createElement(l.A,{selectedUser:le.manager&&f.find((function(e){return e.id===le.manager}))||null,onSelect:function(e){return we(e?e.id:"")},placeholder:"Search and select manager",disabled:G,error:pe.manager,useBackendSearch:!1,allUsers:f}),pe.manager&&r.createElement("span",{className:"form-error-text"},pe.manager)),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"department"},"Department"),r.createElement("select",{id:"department",className:"form-control",value:le.department,onChange:function(e){return Se("department",e.target.value)},disabled:G},r.createElement("option",{value:""},"Select Department"),["Product","Devops","RebelCare","Strategy","Service Delivery","Client Services","Sales","Marketing","Operations","Finance","HR"].map((function(e){return r.createElement("option",{key:e,value:e},e)}))))),r.createElement("div",{className:"form-group"},r.createElement("label",null,"Team Color"),r.createElement("div",{className:"team-management-color-options"},["#667eea","#764ba2","#f093fb","#f5576c","#4facfe","#00f2fe","#43e97b","#38f9d7","#ffecd2","#fcb69f"].map((function(e){return r.createElement("div",{key:e,className:"team-management-color-option ".concat(le.color===e?"team-management-color-option-selected":""),style:{backgroundColor:e},onClick:function(){return!G&&Se("color",e)}})})))),r.createElement("div",{className:"form-actions"},r.createElement("button",{type:"submit",className:"btn btn-primary",disabled:G},G?"Saving...":x?"Update Team":"Create Team"),r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){Ne(),U("list")},disabled:G},"Cancel")))),"users"===T&&r.createElement(r.Fragment,null,r.createElement("div",{className:"team-management-sub-tabs"},r.createElement("button",{className:"team-management-sub-tab ".concat("list"===P?"team-management-sub-tab-active":""),onClick:function(){return U("list")}},"Users List"),r.createElement("button",{className:"team-management-sub-tab ".concat("form"===P?"team-management-sub-tab-active":""),onClick:function(){U("form"),ke()}},R?"Edit User":"Add New User"),r.createElement("button",{className:"team-management-sub-tab ".concat("import"===P?"team-management-sub-tab-active":""),onClick:function(){return U("import")}},"Import from Jira (",Ve.length,")")),"list"===P&&r.createElement("div",{className:"team-management-users-section"},r.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16}},r.createElement("h4",null,"Users"),r.createElement("button",{className:"btn btn-primary",disabled:Pe.length===f.length&&f.length>0,onClick:function(){return Fe(!0)}},"Bulk Add to Team")),Pe.length>0&&r.createElement("button",{className:"btn btn-danger",onClick:ze,disabled:G,style:{marginBottom:16}},"Delete Selected Users (",Pe.length,")"),r.createElement("div",{className:"requests-table-wrapper"},r.createElement("table",{className:"requests-table"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,r.createElement("input",{type:"checkbox",checked:Pe.length===f.length&&f.length>0,onChange:function(e){return Ue(e.target.checked?f.map((function(e){return e.id})):[])}})),r.createElement("th",null,"Name"),r.createElement("th",null,"Email"),r.createElement("th",null,"Teams"),r.createElement("th",null,"Actions"))),r.createElement("tbody",null,f.map((function(e){return r.createElement("tr",{key:e.id},r.createElement("td",null,r.createElement("input",{type:"checkbox",checked:Pe.includes(e.id),onChange:function(t){return Ue(t.target.checked?[].concat(N(Pe),[e.id]):Pe.filter((function(t){return t!==e.id})))}})),r.createElement("td",null,e.display_name||e.displayName||e.name),r.createElement("td",null,e.email_address||e.emailAddress||"-"),r.createElement("td",null,(e.team_memberships||[]).map((function(e){var t=m.find((function(t){return t.id===e.team_id}));return t?"".concat(t.name," (").concat(e.role,")"):e.team_id})).join(", ")),r.createElement("td",null,r.createElement("button",{className:"btn btn-sm btn-secondary",onClick:function(){return function(e){M(e),se({firstName:e.first_name||e.firstName||"",lastName:e.last_name||e.lastName||"",displayName:e.display_name||e.displayName||"",emailAddress:e.email_address||e.emailAddress||"",jiraAccountId:e.jira_account_id||e.accountId||"",employmentType:e.employment_type||e.employmentType||"full-time",hireDate:e.hire_date||e.hireDate||"",teamMemberships:e.team_memberships||[],capacity:e.capacity||40,isAdmin:!0===e.isAdmin,manager:e.manager||"",executiveManager:e.executive_manager||""}),e.availability&&Array.isArray(e.availability)&&de(e.availability),j("users"),U("form")}(e)},disabled:G},"Edit"),r.createElement("button",{className:"btn btn-sm btn-danger",onClick:function(){return je(e.id,e.display_name||e.displayName||e.name)},disabled:G},"Delete")))}))))),xe&&r.createElement("div",{className:"modal-overlay"},r.createElement("div",{className:"modal-content",style:{maxWidth:400,margin:"auto",padding:24}},r.createElement("h4",null,"Add Selected Users to Team"),r.createElement("div",{className:"form-group"},r.createElement("label",null,"Team"),r.createElement("select",{className:"form-control",value:Re,onChange:function(e){Me(e.target.value),qe(e.target.value)&&ge("Member")}},r.createElement("option",{value:""},"Select a team"),m.map((function(e){return r.createElement("option",{key:e.id,value:e.id},e.name)})))),r.createElement("div",{className:"form-group"},r.createElement("label",null,"Role"),r.createElement("select",{className:"form-control",value:be,onChange:function(e){return ge(e.target.value)},disabled:Re&&qe(Re)},r.createElement("option",{value:"Member"},"Member"),r.createElement("option",{value:"Manager",disabled:Re&&qe(Re)},"Manager ",Re&&qe(Re)?"(Team already has a manager)":""))),r.createElement("div",{className:"form-actions",style:{marginTop:24}},r.createElement("button",{className:"btn btn-secondary",onClick:function(){return Fe(!1)}},"Cancel"),r.createElement("button",{className:"btn btn-primary",disabled:!Re,onClick:w(h().m((function e(){var t,a,r,n;return h().w((function(e){for(;;)switch(e.n){case 0:B(!0),t=v(Pe),e.p=1,r=h().m((function e(){var t,r;return h().w((function(e){for(;;)switch(e.n){case 0:if(t=a.value,!(r=f.find((function(e){return e.id===t})))||(r.team_memberships||[]).some((function(e){return e.team_id===Re}))){e.n=1;break}return e.n=1,k(b(b({},r),{},{team_memberships:[].concat(N(r.team_memberships||[]),[{team_id:Re,role:be}])}));case 1:return e.a(2)}}),e)})),t.s();case 2:if((a=t.n()).done){e.n=4;break}return e.d(p(r()),3);case 3:e.n=2;break;case 4:e.n=6;break;case 5:e.p=5,n=e.v,t.e(n);case 6:return e.p=6,t.f(),e.f(6);case 7:B(!1),Fe(!1),Ue([]),Me(""),ge("Member"),A&&A();case 8:return e.a(2)}}),e,null,[[1,5,6,7]])})))},"Add to Team"))))),"form"===P&&r.createElement("form",{onSubmit:Te,className:"team-management-user-form"},r.createElement("div",{className:"form-row"},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"firstName"},"First Name *"),r.createElement("input",{type:"text",id:"firstName",className:"form-control ".concat(pe.firstName?"form-control-error":""),value:ie.firstName,onChange:function(e){return Ae("firstName",e.target.value)},placeholder:"Enter first name",disabled:G}),pe.firstName&&r.createElement("span",{className:"form-error-text"},pe.firstName)),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"lastName"},"Last Name *"),r.createElement("input",{type:"text",id:"lastName",className:"form-control ".concat(pe.lastName?"form-control-error":""),value:ie.lastName,onChange:function(e){return Ae("lastName",e.target.value)},placeholder:"Enter last name",disabled:G}),pe.lastName&&r.createElement("span",{className:"form-error-text"},pe.lastName))),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"emailAddress"},"Email Address"),r.createElement("input",{type:"email",id:"emailAddress",className:"form-control ".concat(pe.emailAddress?"form-control-error":""),value:ie.emailAddress,onChange:function(e){return Ae("emailAddress",e.target.value)},placeholder:"Enter email address",disabled:G}),pe.emailAddress&&r.createElement("span",{className:"form-error-text"},pe.emailAddress)),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"displayName"},"Display Name"),r.createElement("input",{type:"text",id:"displayName",className:"form-control",value:ie.displayName,onChange:function(e){return Ae("displayName",e.target.value)},placeholder:"Display name (auto-generated from first/last name)",disabled:G})),r.createElement("div",{className:"form-row"},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"employmentType"},"Employment Type"),r.createElement("select",{id:"employmentType",className:"form-control",value:ie.employmentType,onChange:function(e){return Ae("employmentType",e.target.value)},disabled:G},r.createElement("option",{value:"full-time"},"Full-time"),r.createElement("option",{value:"part-time"},"Part-time"),r.createElement("option",{value:"contractor"},"Contractor"))),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"hireDate"},"Hire Date"),r.createElement("input",{type:"date",id:"hireDate",className:"form-control",value:ie.hireDate,onChange:function(e){return Ae("hireDate",e.target.value)},disabled:G}))),r.createElement("div",{className:"form-group"},r.createElement("label",null,"Teams & Roles"),m.map((function(e){var t=ie.teamMemberships.find((function(t){return t.team_id===e.id})),a=f.some((function(t){return(t.team_memberships||[]).some((function(t){return t.team_id===e.id&&"Manager"===t.role}))}));return r.createElement("div",{key:e.id,style:{display:"flex",alignItems:"center",marginBottom:8}},r.createElement("input",{type:"checkbox",checked:!!t,onChange:function(t){t.target.checked?se((function(t){return b(b({},t),{},{teamMemberships:[].concat(N(t.teamMemberships),[{team_id:e.id,role:a?"Member":"Manager"}])})})):se((function(t){return b(b({},t),{},{teamMemberships:t.teamMemberships.filter((function(t){return t.team_id!==e.id}))})}))},disabled:G}),r.createElement("span",{style:{marginLeft:8,marginRight:8}},e.name),t&&r.createElement("select",{value:t.role,onChange:function(t){"Manager"===t.target.value&&a?_("This team already has a manager","error"):se((function(a){return b(b({},a),{},{teamMemberships:a.teamMemberships.map((function(a){return a.team_id===e.id?b(b({},a),{},{role:t.target.value}):a}))})}))},style:{marginLeft:8},disabled:G||a&&"Manager"!==t.role},r.createElement("option",{value:"Member"},"Member"),r.createElement("option",{value:"Manager",disabled:a},"Manager ",a?"(Team already has a manager)":"")))}))),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"jiraAccountId"},"Jira Account ID"),r.createElement("input",{type:"text",id:"jiraAccountId",className:"form-control",value:ie.jiraAccountId,onChange:function(e){return Ae("jiraAccountId",e.target.value)},placeholder:"Optional: Link to Jira account",disabled:G})),r.createElement("div",{className:"form-group"},r.createElement("label",null,r.createElement("input",{type:"checkbox",checked:!0===ie.isAdmin,onChange:function(e){return se((function(t){return b(b({},t),{},{isAdmin:e.target.checked})}))},disabled:G})," ","Admin User")),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"manager"},"Manager"),r.createElement(l.A,{selectedUser:ie.manager&&f.find((function(e){return e.id===ie.manager}))||null,onSelect:function(e){return se((function(t){return b(b({},t),{},{manager:e?e.id:""})}))},placeholder:"Select manager",users:f,allUsers:f,disabled:G})),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"executiveManager"},"Executive Manager"),r.createElement(l.A,{selectedUser:ie.executiveManager&&f.find((function(e){return e.id===ie.executiveManager}))||null,onSelect:function(e){return se((function(t){return b(b({},t),{},{executiveManager:e?e.id:""})}))},placeholder:"Select executive manager",users:f,allUsers:f,disabled:G})),r.createElement("div",{className:"team-management-availability-section"},r.createElement("h4",null,"Working Schedule"),r.createElement("p",{className:"team-management-help-text"},"Set the default working hours for this team member."),r.createElement("div",{className:"team-management-availability-grid"},me.map((function(e,t){return r.createElement("div",{key:e.dayOfWeek,className:"team-management-availability-day"},r.createElement("div",{className:"team-management-day-header"},r.createElement("label",{className:"team-management-checkbox-label"},r.createElement("input",{type:"checkbox",checked:e.isWorkingDay,onChange:function(e){return Oe(t,"isWorkingDay",e.target.checked)},disabled:G}),r.createElement("span",{className:"team-management-day-name"},e.dayName))),e.isWorkingDay&&r.createElement("div",{className:"team-management-day-details"},r.createElement("div",{className:"team-management-time-inputs"},r.createElement("input",{type:"time",value:e.startTime,onChange:function(e){return Oe(t,"startTime",e.target.value)},className:"form-control team-management-input-small",disabled:G}),r.createElement("span",null,"to"),r.createElement("input",{type:"time",value:e.endTime,onChange:function(e){return Oe(t,"endTime",e.target.value)},className:"form-control team-management-input-small",disabled:G})),r.createElement("div",{className:"team-management-hours-display"},e.hoursPerDay.toFixed(1)," hours")))}))),r.createElement("div",{className:"team-management-availability-summary"},r.createElement("strong",null,"Total weekly capacity: "),me.reduce((function(e,t){return e+(t.isWorkingDay?t.hoursPerDay:0)}),0).toFixed(1)," hours")),r.createElement("div",{className:"form-actions"},r.createElement("button",{type:"submit",className:"btn btn-primary",disabled:G},G?"Saving...":R?"Update User":"Create User"),r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){ke(),U("list")},disabled:G},"Cancel"))),"import"===P&&r.createElement("div",{className:"team-management-import-section"},r.createElement("div",{className:"team-management-import-header"},r.createElement("div",{className:"team-management-import-title"},r.createElement("h4",null,"Import Users from Jira"),r.createElement("p",null,"Select Jira users to import into the PTO system. Users already in the system will not be shown.")),r.createElement("div",{className:"team-management-import-actions"},r.createElement("button",{onClick:function(){return he(0)},disabled:H,className:"btn btn-secondary"},r.createElement(i.A,{size:16,className:H?"team-management-spin":""}),"Refresh"),Z.length>0&&r.createElement("button",{onClick:Ee,disabled:ae,className:"btn btn-primary"},r.createElement(c.A,{size:16}),"Import ",Z.length," Selected",ae&&" (Importing...)"))),H&&0===W.length?r.createElement("div",{className:"team-management-loading-state"},r.createElement("div",{className:"team-management-loading-spinner"}),r.createElement("p",null,"Loading Jira users...")):0===Ve.length?r.createElement("div",{className:"team-management-empty-state"},r.createElement("div",{className:"team-management-empty-icon"},"✅"),r.createElement("h4",null,"All Jira Users Imported"),r.createElement("p",null,"All available Jira users from your organization are already in the system.")):r.createElement(r.Fragment,null,r.createElement("div",{className:"team-management-import-stats"},r.createElement("div",{className:"team-management-import-stat"},r.createElement("span",{className:"team-management-import-stat-label"},"Total Jira Users:"),r.createElement("span",{className:"team-management-import-stat-value"},K.total)),r.createElement("div",{className:"team-management-import-stat"},r.createElement("span",{className:"team-management-import-stat-label"},"Available to Import:"),r.createElement("span",{className:"team-management-import-stat-value"},Ve.length)),r.createElement("div",{className:"team-management-import-stat"},r.createElement("span",{className:"team-management-import-stat-label"},"Selected:"),r.createElement("span",{className:"team-management-import-stat-value"},Z.length))),r.createElement("div",{className:"team-management-jira-users-grid"},Ve.map((function(e){var t,a=Z.some((function(t){return t.accountId===e.accountId}));return r.createElement("div",{key:e.accountId,className:"team-management-jira-user-card"},r.createElement("div",{className:"team-management-jira-user-header"},r.createElement("label",{className:"team-management-jira-user-checkbox"},r.createElement("input",{type:"checkbox",checked:a,onChange:function(t){return function(e,t){ee((function(a){return t?[].concat(N(a),[e]):a.filter((function(t){return t.accountId!==e.accountId}))}))}(e,t.target.checked)},disabled:ae}),r.createElement("span",{className:"team-management-checkbox-custom"})),r.createElement("div",{className:"team-management-jira-user-avatar"},e.avatarUrl?r.createElement("img",{src:e.avatarUrl,alt:e.displayName}):r.createElement("div",{className:"team-management-avatar-placeholder"},(null===(t=e.displayName)||void 0===t?void 0:t.charAt(0))||"?"))),r.createElement("div",{className:"team-management-jira-user-info"},r.createElement("h5",{className:"team-management-jira-user-name"},e.displayName),r.createElement("div",{className:"team-management-jira-user-email"},e.emailAddress),r.createElement("div",{className:"team-management-jira-user-active"},e.active?"✅ Active":"❌ Inactive")),r.createElement("div",{className:"team-management-jira-user-actions"},r.createElement("button",{onClick:function(){return function(e){var t,a;se({firstName:(null===(t=e.displayName)||void 0===t?void 0:t.split(" ")[0])||"",lastName:(null===(a=e.displayName)||void 0===a?void 0:a.split(" ").slice(1).join(" "))||"",displayName:e.displayName||"",emailAddress:e.emailAddress||"",jiraAccountId:e.accountId||"",employmentType:"full-time",hireDate:"",teamMemberships:[],capacity:40,manager:"",executiveManager:""}),M(null),U("form")}(e)},className:"btn btn-sm btn-secondary",disabled:ae},r.createElement(s.A,{size:14}),"Create User")))}))),!K.isLast&&r.createElement("div",{className:"team-management-pagination"},r.createElement("button",{onClick:function(){return he(K.startAt+K.maxResults)},disabled:H,className:"btn btn-secondary"},r.createElement(u.A,{size:16}),"Load More Users",H&&" (Loading...)"),r.createElement("div",{className:"team-management-pagination-info"},"Showing ",W.length," of ",K.total," Jira users"))))))))}},9618:(e,t,a)=>{a.d(t,{A:()=>v});var r=a(6540),n=a(8697),l=a(2321);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u(){var e,t,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",n=a.toStringTag||"@@toStringTag";function l(a,r,n,l){var i=r&&r.prototype instanceof c?r:c,s=Object.create(i.prototype);return m(s,"_invoke",function(a,r,n){var l,c,i,s=0,u=n||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return l=t,c=0,i=e,d.n=a,o}};function f(a,r){for(c=a,i=r,t=0;!m&&s&&!n&&t<u.length;t++){var n,l=u[t],f=d.p,p=l[2];a>3?(n=p===r)&&(i=l[(c=l[4])?5:(c=3,3)],l[4]=l[5]=e):l[0]<=f&&((n=a<2&&f<l[1])?(c=0,d.v=r,d.n=l[1]):f<p&&(n=a<3||l[0]>r||r>p)&&(l[4]=a,l[5]=r,d.n=p,c=0))}if(n||a>1)return o;throw m=!0,r}return function(n,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),c=u,i=p;(t=c<2?e:i)||!m;){l||(c?c<3?(c>1&&(d.n=-1),f(c,i)):d.n=i:d.v=i);try{if(s=2,l){if(c||(n="next"),t=l[n]){if(!(t=t.call(l,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,c<2&&(c=0)}else 1===c&&(t=l.return)&&t.call(l),c<2&&(i=TypeError("The iterator does not provide a '"+n+"' method"),c=1);l=e}else if((t=(m=d.n<0)?i:a.call(r,d))!==o)break}catch(t){l=e,c=1,i=t}finally{s=1}}return{value:t,done:m}}}(a,n,l),!0),s}var o={};function c(){}function i(){}function s(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(m(t={},r,(function(){return this})),t),f=s.prototype=c.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,m(e,n,"GeneratorFunction")),e.prototype=Object.create(f),e}return i.prototype=s,m(f,"constructor",s),m(s,"constructor",i),i.displayName="GeneratorFunction",m(s,n,"GeneratorFunction"),m(f),m(f,n,"Generator"),m(f,r,(function(){return this})),m(f,"toString",(function(){return"[object Generator]"})),(u=function(){return{w:l,m:p}})()}function m(e,t,a,r){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}m=function(e,t,a,r){if(t)n?n(e,t,{value:a,enumerable:!r,configurable:!r,writable:!r}):e[t]=a;else{var l=function(t,a){m(e,t,(function(e){return this._invoke(t,a,e)}))};l("next",0),l("throw",1),l("return",2)}},m(e,t,a,r)}function d(e,t,a,r,n,l,o){try{var c=e[l](o),i=c.value}catch(e){return void a(e)}c.done?t(i):Promise.resolve(i).then(r,n)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,l,o,c=[],i=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;i=!1}else for(;!(i=(r=l.call(a)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){s=!0,n=e}finally{try{if(!i&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(s)throw n}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}const v=function(e){var t=e.request,a=e.onClose,o=e.onSave,c=e.currentUser,s=f((0,r.useState)({startDate:"",endDate:"",leaveType:"",reason:"",dailySchedules:[]}),2),m=s[0],p=s[1],v=f((0,r.useState)(""),2),y=v[0],b=v[1];(0,r.useEffect)((function(){t&&p({startDate:t.start_date,endDate:t.end_date,leaveType:t.leave_type,reason:t.reason||"",dailySchedules:t.daily_schedules||[]})}),[t]);var g=function(){var e,r=(e=u().m((function e(r){var n,i,s;return u().w((function(e){for(;;)switch(e.n){case 0:if(r.preventDefault(),b(""),e.p=1,"approved"!==t.status){e.n=2;break}if((n=new Date).setHours(0,0,0,0),!(new Date(t.start_date)<n)){e.n=2;break}return b("Cannot edit approved requests with past dates. Please contact an admin for assistance."),e.a(2);case 2:return e.n=3,(0,l.invoke)("editPTORequest",{requestId:t.id,editedBy:c.accountId,updatedData:{startDate:m.startDate,endDate:m.endDate,leaveType:m.leaveType,reason:m.reason,dailySchedules:m.dailySchedules}});case 3:(i=e.v).success?(o(i.data),a()):b(i.message||"Failed to update PTO request"),e.n=5;break;case 4:e.p=4,s=e.v,b("Failed to update PTO request: "+s.message);case 5:return e.a(2)}}),e,null,[[1,4]])})),function(){var t=this,a=arguments;return new Promise((function(r,n){var l=e.apply(t,a);function o(e){d(l,r,n,o,c,"next",e)}function c(e){d(l,r,n,o,c,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}();return r.createElement("div",{className:"modal-overlay"},r.createElement("div",{className:"modal-content"},r.createElement("div",{className:"modal-header"},r.createElement("h3",null,"Edit PTO Request"),r.createElement("button",{onClick:a,className:"modal-close"},r.createElement(n.A,{size:20}))),y&&r.createElement("div",{className:"alert alert-danger"},y),r.createElement("form",{onSubmit:g},r.createElement("div",{className:"form-group"},r.createElement("label",null,"Start Date"),r.createElement("input",{type:"date",value:m.startDate,onChange:function(e){return p((function(t){return i(i({},t),{},{startDate:e.target.value})}))},className:"form-control",required:!0})),r.createElement("div",{className:"form-group"},r.createElement("label",null,"End Date"),r.createElement("input",{type:"date",value:m.endDate,onChange:function(e){return p((function(t){return i(i({},t),{},{endDate:e.target.value})}))},className:"form-control",required:!0})),r.createElement("div",{className:"form-group"},r.createElement("label",null,"Leave Type"),r.createElement("select",{value:m.leaveType,onChange:function(e){return p((function(t){return i(i({},t),{},{leaveType:e.target.value})}))},className:"form-control",required:!0},r.createElement("option",{value:"vacation"},"Vacation"),r.createElement("option",{value:"sick"},"Sick Leave"),r.createElement("option",{value:"personal"},"Personal Leave"),r.createElement("option",{value:"other"},"Other"))),r.createElement("div",{className:"form-group"},r.createElement("label",null,"Reason"),r.createElement("textarea",{value:m.reason,onChange:function(e){return p((function(t){return i(i({},t),{},{reason:e.target.value})}))},className:"form-control",rows:"3"})),r.createElement("div",{className:"modal-footer"},r.createElement("button",{type:"button",onClick:a,className:"btn btn-secondary"},"Cancel"),r.createElement("button",{type:"submit",className:"btn btn-primary"},"Save Changes")))))}}}]);