/*! For license information please see main-83f27341.1e2e65fa5c267512c947.js.LICENSE.txt */
(()=>{"use strict";var e,t={2898:(e,t,n)=>{n.d(t,{A:()=>D});var r=n(6540),a=n(2321),s=n(3893),i=n(2307),c=n(7235),l=n(4471),o=n(6316),u=n(8686),d=n(8309),m=n(3245),f=n(808),v=n(99),h=n(4848);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function j(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function s(n,r,a,s){var l=r&&r.prototype instanceof c?r:c,o=Object.create(l.prototype);return N(o,"_invoke",function(n,r,a){var s,c,l,o=0,u=a||[],d=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return s=t,c=0,l=e,m.n=n,i}};function f(n,r){for(c=n,l=r,t=0;!d&&o&&!a&&t<u.length;t++){var a,s=u[t],f=m.p,v=s[2];n>3?(a=v===r)&&(l=s[(c=s[4])?5:(c=3,3)],s[4]=s[5]=e):s[0]<=f&&((a=n<2&&f<s[1])?(c=0,m.v=r,m.n=s[1]):f<v&&(a=n<3||s[0]>r||r>v)&&(s[4]=n,s[5]=r,m.n=v,c=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,v){if(o>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,v),c=u,l=v;(t=c<2?e:l)||!d;){s||(c?c<3?(c>1&&(m.n=-1),f(c,l)):m.n=l:m.v=l);try{if(o=2,s){if(c||(a="next"),t=s[a]){if(!(t=t.call(s,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=s.return)&&t.call(s),c<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),c=1);s=e}else if((t=(d=m.n<0)?l:n.call(r,m))!==i)break}catch(t){s=e,c=1,l=t}finally{o=1}}return{value:t,done:d}}}(n,a,s),!0),o}var i={};function c(){}function l(){}function o(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(N(t={},r,(function(){return this})),t),d=o.prototype=c.prototype=Object.create(u);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,N(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=o,N(d,"constructor",o),N(o,"constructor",l),l.displayName="GeneratorFunction",N(o,a,"GeneratorFunction"),N(d),N(d,a,"Generator"),N(d,r,(function(){return this})),N(d,"toString",(function(){return"[object Generator]"})),(g=function(){return{w:s,m}})()}function N(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}N=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var s=function(t,n){N(e,t,(function(e){return this._invoke(t,n,e)}))};s("next",0),s("throw",1),s("return",2)}},N(e,t,n,r)}function w(e,t,n,r,a,s,i){try{var c=e[s](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var s=e.apply(t,n);function i(e){w(s,r,a,i,c,"next",e)}function c(e){w(s,r,a,i,c,"throw",e)}i(void 0)}))}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,c=[],l=!0,o=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(o)throw a}}return c}}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return k(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const D=function(e){var t=e.currentUser,n=e.isAdmin,p=e.showNotification,y=S((0,r.useState)(null),2),N=y[0],w=y[1],O=S((0,r.useState)("current_month"),2),k=O[0],D=(O[1],S((0,r.useState)("all"),2)),A=D[0],T=D[1],q=S((0,r.useState)([]),2),P=q[0],C=q[1],I=S((0,r.useState)([]),2),U=I[0],R=I[1],E=S((0,r.useState)([]),2),F=E[0],L=E[1],B=S((0,r.useState)(!0),2),M=B[0],z=B[1],G=S((0,r.useState)({}),2),Y=G[0],W=G[1],H=S((0,r.useState)(!1),2),J=(H[0],H[1],S((0,r.useState)({preset:"current_month",from:"",to:""}),2)),V=J[0],$=J[1];(0,r.useEffect)((function(){K()}),[t]),(0,r.useEffect)((function(){N&&Q()}),[N,k]);var K=function(){var e=_(g().m((function e(){var r,s,i,c;return g().w((function(e){for(;;)switch(e.n){case 0:return z(!0),e.p=1,e.n=2,(0,a.invoke)("getTeams");case 2:if((r=e.v).success&&(s=r.data||[],i=n?s:s.filter((function(e){var n,r;return(null===(n=e.manager)||void 0===n?void 0:n.accountId)===t.accountId||(null===(r=e.manager)||void 0===r?void 0:r.jira_account_id)===t.accountId})),C(i),i.length>0&&!N&&w(i[0])),null==t||!t.emailAddress){e.n=4;break}return e.n=3,(0,a.invoke)("getPendingRequests",{managerEmail:t.emailAddress});case 3:(c=e.v).success&&L(c.data||[]);case 4:e.n=6;break;case 5:e.p=5,e.v,p("Failed to load manager data","error");case 6:return e.p=6,z(!1),e.f(6);case 7:return e.a(2)}}),e,null,[[1,5,6,7]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=_(g().m((function e(){var t,n;return g().w((function(e){for(;;)switch(e.n){case 0:if(N){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,(0,a.invoke)("getTeamPTORequests",{teamId:N.id,dateRange:k});case 2:(t=e.v).success&&R(t.data||[]),e.n=4;break;case 3:e.p=3,n=e.v,console.error("Error loading team requests:",n),R([]);case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=_(g().m((function e(t,n){var r;return g().w((function(e){for(;;)switch(e.n){case 0:return W((function(e){return x(x({},e),{},b({},t,!0))})),e.p=1,e.n=2,(0,a.invoke)("updatePTORequest",{requestId:t,status:n});case 2:(r=e.v).success?(p("Request ".concat(n.toLowerCase()," successfully")),L((function(e){return e.filter((function(e){return e.id!==t}))})),Q()):p(r.message||"Failed to ".concat(n.toLowerCase()," request"),"error"),e.n=4;break;case 3:e.p=3,e.v,p("Failed to ".concat(n.toLowerCase()," request"),"error");case 4:return e.p=4,W((function(e){return x(x({},e),{},b({},t,!1))})),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(){var e=_(g().m((function e(){var n,r,a,s,i,c;return g().w((function(e){for(;;)switch(e.n){case 0:if(N){e.n=1;break}return e.a(2);case 1:try{n=ee.map((function(e){return{Date:(new Date).toLocaleDateString(),Manager:t.displayName,Team:N.name,Department:N.department||"",User:e.requester_name,"Start Date":e.start_date,"End Date":e.end_date,Period:"".concat(e.total_days," days"),"Leave Type":e.leave_type,Reason:e.reason||"",Status:e.status}})),r=Object.keys(n[0]||{}),a=[r.join(",")].concat(j(n.map((function(e){return r.map((function(t){return'"'.concat((e[t]||"").toString().replace(/"/g,'""'),'"')})).join(",")})))).join("\n"),s=new Blob([a],{type:"text/csv"}),i=URL.createObjectURL(s),(c=document.createElement("a")).href=i,c.download="team-pto-report-".concat(N.name,"-").concat(k,"-").concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(i),p("Report downloaded successfully!")}catch(e){p("Failed to generate report","error")}case 2:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=(0,r.useMemo)((function(){var e=U;return"all"!==A&&(e=e.filter((function(e){return e.requester_id===A}))),e.sort((function(e,t){return new Date(t.submitted_at)-new Date(e.submitted_at)}))}),[U,A]),te=(0,r.useMemo)((function(){var e=ee;return{totalRequests:e.length,approvedRequests:e.filter((function(e){return"approved"===e.status})).length,pendingRequests:e.filter((function(e){return"pending"===e.status})).length,declinedRequests:e.filter((function(e){return"declined"===e.status})).length,totalDaysOff:e.filter((function(e){return"approved"===e.status})).reduce((function(e,t){return e+(t.total_days||0)}),0),ptoByLeaveType:e.filter((function(e){return"approved"===e.status})).reduce((function(e,t){var n=t.leave_type||"unknown";return e[n]=(e[n]||0)+(t.total_days||0),e}),{}),ptoByMember:e.filter((function(e){return"approved"===e.status})).reduce((function(e,t){var n=t.requester_name||"Unknown";return e[n]=(e[n]||0)+(t.total_days||0),e}),{}),ptoByWeekday:e.filter((function(e){return"approved"===e.status})).reduce((function(e,t){for(var n=new Date(t.start_date),r=new Date(t.end_date),a=new Date(n);a<=r;a.setDate(a.getDate()+1)){var s=a.toLocaleDateString("en-US",{weekday:"long"});e[s]=(e[s]||0)+1}return e}),{})}}),[ee]),ne=(0,r.useMemo)((function(){var e=new Date;return U.filter((function(t){return"approved"===t.status&&new Date(t.start_date)>=e})).sort((function(e,t){return new Date(e.start_date)-new Date(t.start_date)})).slice(0,5)}),[U]),re=function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},ae=function(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return M?(0,h.jsxs)("div",{className:"manager-loading",children:[(0,h.jsx)("div",{className:"loading-spinner"}),(0,h.jsx)("p",{children:"Loading manager dashboard..."})]}):0===P.length?(0,h.jsxs)("div",{className:"manager-empty",children:[(0,h.jsx)(s.A,{size:48}),(0,h.jsx)("h3",{children:"No Teams to Manage"}),(0,h.jsx)("p",{children:"You don't have any teams assigned to manage. Contact your administrator if this is incorrect."})]}):(0,h.jsxs)("div",{className:"manager-dashboard",children:[(0,h.jsxs)("div",{className:"manager-header",children:[(0,h.jsxs)("div",{className:"manager-title-section",children:[(0,h.jsx)("h2",{children:"Manager Dashboard"}),(0,h.jsx)("p",{children:"Manage team PTO requests and view analytics"})]}),(0,h.jsxs)("div",{className:"manager-controls",children:[(0,h.jsx)("select",{value:(null==N?void 0:N.id)||"",onChange:function(e){return w(P.find((function(t){return t.id===e.target.value})))},className:"form-control",children:P.map((function(e){var t;return(0,h.jsxs)("option",{value:e.id,children:[e.name," (",(null===(t=e.members)||void 0===t?void 0:t.length)||0," members)"]},e.id)}))}),(0,h.jsx)(v.A,{value:V,onChange:$})]})]}),(0,h.jsxs)("div",{className:"manager-stats-grid",children:[(0,h.jsxs)("div",{className:"stat-card stat-blue",children:[(0,h.jsx)("div",{className:"stat-icon",children:(0,h.jsx)(i.A,{size:24})}),(0,h.jsxs)("div",{className:"stat-content",children:[(0,h.jsx)("div",{className:"stat-value",children:te.totalRequests}),(0,h.jsx)("div",{className:"stat-label",children:"Total Requests"})]})]}),(0,h.jsxs)("div",{className:"stat-card stat-yellow",children:[(0,h.jsx)("div",{className:"stat-icon",children:(0,h.jsx)(c.A,{size:24})}),(0,h.jsxs)("div",{className:"stat-content",children:[(0,h.jsx)("div",{className:"stat-value",children:F.length}),(0,h.jsx)("div",{className:"stat-label",children:"Pending Approval"})]})]}),(0,h.jsxs)("div",{className:"stat-card stat-green",children:[(0,h.jsx)("div",{className:"stat-icon",children:(0,h.jsx)(l.A,{size:24})}),(0,h.jsxs)("div",{className:"stat-content",children:[(0,h.jsx)("div",{className:"stat-value",children:te.approvedRequests}),(0,h.jsx)("div",{className:"stat-label",children:"Approved"})]})]}),(0,h.jsxs)("div",{className:"stat-card stat-purple",children:[(0,h.jsx)("div",{className:"stat-icon",children:(0,h.jsx)(o.A,{size:24})}),(0,h.jsxs)("div",{className:"stat-content",children:[(0,h.jsx)("div",{className:"stat-value",children:te.totalDaysOff}),(0,h.jsx)("div",{className:"stat-label",children:"Days Off"})]})]})]}),F.length>0&&(0,h.jsxs)("div",{className:"card pending-approvals-card",children:[(0,h.jsxs)("div",{className:"card-header",children:[(0,h.jsx)("h3",{children:"Pending Approvals"}),(0,h.jsxs)("div",{className:"pending-count",children:[F.length," requests"]})]}),(0,h.jsxs)("div",{className:"card-body",children:[(0,h.jsx)("div",{className:"pending-requests-list",children:F.slice(0,5).map((function(e){var t;return(0,h.jsxs)("div",{className:"pending-request-item",children:[(0,h.jsxs)("div",{className:"request-info",children:[(0,h.jsxs)("div",{className:"request-user",children:[(0,h.jsx)("div",{className:"user-avatar",children:(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||(0,h.jsx)(u.A,{size:16})}),(0,h.jsxs)("div",{className:"user-details",children:[(0,h.jsx)("div",{className:"user-name",children:e.requester_name}),(0,h.jsxs)("div",{className:"request-details",children:[(0,f.S0)(e.leave_type)," ",e.leave_type," â€¢ ",e.total_days," days"]})]})]}),(0,h.jsxs)("div",{className:"request-dates",children:[(0,h.jsxs)("div",{children:[re(e.start_date)," - ",re(e.end_date)]}),(0,h.jsxs)("div",{className:"submitted-date",children:["Submitted ",ae(e.submitted_at)]})]})]}),(0,h.jsx)("div",{className:"request-actions-inline",children:(0,h.jsxs)("div",{className:"action-buttons-inline",children:[(0,h.jsx)("button",{onClick:function(){return X(e.id,"approved")},disabled:Y[e.id],className:"btn btn-sm btn-success",children:Y[e.id]?"...":"Approve"}),(0,h.jsx)("button",{onClick:function(){return X(e.id,"declined")},disabled:Y[e.id],className:"btn btn-sm btn-danger",children:Y[e.id]?"...":"Decline"})]})})]},e.id)}))}),F.length>5&&(0,h.jsx)("div",{className:"show-more",children:(0,h.jsxs)("p",{className:"text-sm text-gray-600",children:[F.length-5," more pending requests..."]})})]})]}),(0,h.jsxs)("div",{className:"manager-content-grid",children:[(0,h.jsxs)("div",{className:"card team-requests-card",children:[(0,h.jsxs)("div",{className:"card-header",children:[(0,h.jsx)("h3",{children:"Team Requests"}),(0,h.jsxs)("div",{className:"team-requests-controls",children:[(0,h.jsxs)("select",{value:A,onChange:function(e){return T(e.target.value)},className:"form-control",children:[(0,h.jsx)("option",{value:"all",children:"All Members"}),P.map((function(e){return(0,h.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),(0,h.jsx)("div",{className:"action-buttons-group",children:(0,h.jsxs)("button",{onClick:Z,className:"btn btn-primary",children:[(0,h.jsx)(d.A,{size:16}),"Generate Report"]})})]})]}),(0,h.jsx)("div",{className:"card-body",children:0===ee.length?(0,h.jsxs)("div",{className:"empty-state",children:[(0,h.jsx)(s.A,{size:48}),(0,h.jsx)("h4",{children:"No Requests Found"}),(0,h.jsx)("p",{children:"No PTO requests found for the selected criteria."})]}):(0,h.jsx)("div",{className:"team-requests-list",children:ee.map((function(e){var t;return(0,h.jsxs)("div",{className:"team-request-item",children:[(0,h.jsxs)("div",{className:"request-header-row",children:[(0,h.jsxs)("div",{className:"request-user-info",children:[(0,h.jsx)("div",{className:"user-avatar",children:(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||"?"}),(0,h.jsxs)("div",{className:"user-details",children:[(0,h.jsx)("div",{className:"user-name",children:e.requester_name}),(0,h.jsxs)("div",{className:"request-type",children:[(0,f.S0)(e.leave_type)," ",e.leave_type]})]})]}),(0,h.jsxs)("div",{className:"request-details-summary",children:[(0,h.jsxs)("div",{className:"date-range",children:[re(e.start_date)," - ",re(e.end_date)]}),(0,h.jsxs)("div",{className:"duration",children:[e.total_days," days"]})]}),(0,h.jsxs)("div",{className:"request-status-section",children:[(0,h.jsx)(m.A,{status:e.status}),(0,h.jsx)("div",{className:"submitted-date",children:ae(e.submitted_at)})]})]}),e.reason&&(0,h.jsxs)("div",{className:"request-reason-row",children:[(0,h.jsx)("span",{className:"reason-label",children:"Reason:"}),(0,h.jsx)("span",{className:"reason-text",children:e.reason})]})]},e.id)}))})})]}),(0,h.jsxs)("div",{className:"card upcoming-pto-card",children:[(0,h.jsx)("div",{className:"card-header",children:(0,h.jsx)("h3",{children:"Upcoming PTO"})}),(0,h.jsx)("div",{className:"card-body",children:0===ne.length?(0,h.jsxs)("div",{className:"empty-state-small",children:[(0,h.jsx)(i.A,{size:32}),(0,h.jsx)("p",{children:"No upcoming PTO scheduled"})]}):(0,h.jsx)("div",{className:"upcoming-pto-list",children:ne.map((function(e){var t;return(0,h.jsxs)("div",{className:"upcoming-pto-item",children:[(0,h.jsxs)("div",{className:"pto-user",children:[(0,h.jsx)("div",{className:"user-avatar-small",children:(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||"?"}),(0,h.jsxs)("div",{className:"user-info-small",children:[(0,h.jsx)("div",{className:"user-name-small",children:e.requester_name}),(0,h.jsxs)("div",{className:"pto-type-small",children:[(0,f.S0)(e.leave_type)," ",e.leave_type]})]})]}),(0,h.jsxs)("div",{className:"pto-dates-small",children:[(0,h.jsxs)("div",{className:"date-range-small",children:[re(e.start_date)," - ",re(e.end_date)]}),(0,h.jsxs)("div",{className:"duration-small",children:[e.total_days," days"]})]})]},e.id)}))})})]}),(0,h.jsxs)("div",{className:"card analytics-card",children:[(0,h.jsxs)("div",{className:"card-header",children:[(0,h.jsx)("h3",{children:"Team Analytics"}),(0,h.jsx)("div",{className:"analytics-period",children:k.replace("_"," ").replace(/\b\w/g,(function(e){return e.toUpperCase()}))})]}),(0,h.jsxs)("div",{className:"card-body",children:[Object.keys(te.ptoByLeaveType).length>0&&(0,h.jsxs)("div",{className:"analytics-section",children:[(0,h.jsx)("h4",{children:"PTO by Leave Type"}),(0,h.jsx)("div",{className:"analytics-items",children:Object.entries(te.ptoByLeaveType).sort((function(e,t){var n=S(e,2)[1];return S(t,2)[1]-n})).map((function(e){var t=S(e,2),n=t[0],r=t[1];return(0,h.jsxs)("div",{className:"analytics-item",children:[(0,h.jsx)("span",{className:"item-icon",children:(0,f.S0)(n)}),(0,h.jsx)("span",{className:"item-label",children:n.charAt(0).toUpperCase()+n.slice(1)}),(0,h.jsxs)("span",{className:"item-value",children:[r," days"]})]},n)}))})]}),Object.keys(te.ptoByMember).length>0&&(0,h.jsxs)("div",{className:"analytics-section",children:[(0,h.jsx)("h4",{children:"PTO by Team Member"}),(0,h.jsx)("div",{className:"analytics-items",children:Object.entries(te.ptoByMember).sort((function(e,t){var n=S(e,2)[1];return S(t,2)[1]-n})).slice(0,5).map((function(e){var t=S(e,2),n=t[0],r=t[1];return(0,h.jsxs)("div",{className:"analytics-item",children:[(0,h.jsx)("span",{className:"item-icon",children:"ðŸ‘¤"}),(0,h.jsx)("span",{className:"item-label",children:n}),(0,h.jsxs)("span",{className:"item-value",children:[r," days"]})]},n)}))})]}),Object.keys(te.ptoByWeekday).length>0&&(0,h.jsxs)("div",{className:"analytics-section",children:[(0,h.jsx)("h4",{children:"Most Popular Days Off"}),(0,h.jsx)("div",{className:"analytics-items",children:Object.entries(te.ptoByWeekday).sort((function(e,t){var n=S(e,2)[1];return S(t,2)[1]-n})).map((function(e){var t=S(e,2),n=t[0],r=t[1];return(0,h.jsxs)("div",{className:"analytics-item",children:[(0,h.jsx)("span",{className:"item-icon",children:"ðŸ“…"}),(0,h.jsx)("span",{className:"item-label",children:n}),(0,h.jsxs)("span",{className:"item-value",children:[r," days"]})]},n)}))})]})]})]})]})]})}},3029:(e,t,n)=>{n.d(t,{A:()=>k});var r=n(6540),a=n(2307),s=n(5627),i=n(6316),c=n(4945),l=n(8188),o=n(2708),u=n(3245),d=n(808),m=n(99),f=n(9618),v=n(4848);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function s(n,r,a,s){var l=r&&r.prototype instanceof c?r:c,o=Object.create(l.prototype);return g(o,"_invoke",function(n,r,a){var s,c,l,o=0,u=a||[],d=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return s=t,c=0,l=e,m.n=n,i}};function f(n,r){for(c=n,l=r,t=0;!d&&o&&!a&&t<u.length;t++){var a,s=u[t],f=m.p,v=s[2];n>3?(a=v===r)&&(l=s[(c=s[4])?5:(c=3,3)],s[4]=s[5]=e):s[0]<=f&&((a=n<2&&f<s[1])?(c=0,m.v=r,m.n=s[1]):f<v&&(a=n<3||s[0]>r||r>v)&&(s[4]=n,s[5]=r,m.n=v,c=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,v){if(o>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,v),c=u,l=v;(t=c<2?e:l)||!d;){s||(c?c<3?(c>1&&(m.n=-1),f(c,l)):m.n=l:m.v=l);try{if(o=2,s){if(c||(a="next"),t=s[a]){if(!(t=t.call(s,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=s.return)&&t.call(s),c<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),c=1);s=e}else if((t=(d=m.n<0)?l:n.call(r,m))!==i)break}catch(t){s=e,c=1,l=t}finally{o=1}}return{value:t,done:d}}}(n,a,s),!0),o}var i={};function c(){}function l(){}function o(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(g(t={},r,(function(){return this})),t),d=o.prototype=c.prototype=Object.create(u);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,g(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=o,g(d,"constructor",o),g(o,"constructor",l),l.displayName="GeneratorFunction",g(o,a,"GeneratorFunction"),g(d),g(d,a,"Generator"),g(d,r,(function(){return this})),g(d,"toString",(function(){return"[object Generator]"})),(b=function(){return{w:s,m}})()}function g(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}g=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var s=function(t,n){g(e,t,(function(e){return this._invoke(t,n,e)}))};s("next",0),s("throw",1),s("return",2)}},g(e,t,n,r)}function N(e,t,n,r,a,s,i){try{var c=e[s](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,c=[],l=!0,o=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(o)throw a}}return c}}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return S(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var O=[{key:"vacation",label:"Vacation",color:"stat-blue"},{key:"holiday",label:"Holiday",color:"stat-yellow"},{key:"personal",label:"Personal",color:"stat-purple"}];const k=function(e){var t=e.requests,n=e.currentUser,h=e.onEditRequest,p=e.onCancelRequest,y=w((0,r.useState)("all"),2),g=(y[0],y[1],w((0,r.useState)("all"),2)),_=g[0],S=g[1],k=w((0,r.useState)(!1),2),D=k[0],A=k[1],T=w((0,r.useState)({preset:"all",from:"",to:""}),2),q=T[0],P=T[1],C=w((0,r.useState)(null),2),I=C[0],U=C[1],R=w((0,r.useState)(null),2),E=R[0],F=R[1],L=w((0,r.useState)(!0),2),B=L[0],M=L[1],z=w((0,r.useState)(null),2),G=(z[0],z[1]);(0,r.useEffect)((function(){function e(){var t;return t=b().m((function e(){var t,r;return b().w((function(e){for(;;)switch(e.n){case 0:return M(!0),G(null),e.p=1,e.n=2,window.forgeResolver.invoke("getUserPTOBalances",{accountId:n.accountId});case 2:(t=e.v).success?F(t.data):G(t.message||"Failed to fetch PTO balances"),e.n=4;break;case 3:e.p=3,r=e.v,G(r.message||"Failed to fetch PTO balances");case 4:return e.p=4,M(!1),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})),e=function(){var e=this,n=arguments;return new Promise((function(r,a){var s=t.apply(e,n);function i(e){N(s,r,a,i,c,"next",e)}function c(e){N(s,r,a,i,c,"throw",e)}i(void 0)}))},e.apply(this,arguments)}null!=n&&n.accountId&&function(){e.apply(this,arguments)}()}),[null==n?void 0:n.accountId]);var Y=function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},W=function(e){if(e.requester_id!==n.accountId)return!1;if("pending"===e.status)return!0;if("approved"===e.status){var t=new Date;return t.setHours(0,0,0,0),new Date(e.start_date)>=t}return!1},H=function(e){if(e.requester_id!==n.accountId)return!1;if("approved"===e.status){var t=new Date(e.end_date),r=new Date;return r.setHours(0,0,0,0),t>=r}return"pending"===e.status},J=(0,r.useMemo)((function(){var e=Array.isArray(t)?x(t):[];if(q&&"all"!==q.preset){var n,r,a=new Date;switch(q.preset){case"current_year":n=new Date(a.getFullYear(),0,1),r=new Date(a.getFullYear(),11,31);break;case"last_90_days":(n=new Date(a)).setDate(a.getDate()-90),r=a;break;case"last_30_days":(n=new Date(a)).setDate(a.getDate()-30),r=a;break;case"custom":n=q.from?new Date(q.from):null,r=q.to?new Date(q.to):null;break;default:n=null,r=null}e=e.filter((function(e){var t=new Date(e.start_date),a=new Date(e.end_date);return"custom"===q.preset?!(n&&a<n)&&!(r&&t>r):(!n||a>=n)&&(!r||t<=r)}))}return _&&"all"!==_&&(e=e.filter((function(e){return e.status===_}))),e}),[t,q,_]),V=(0,r.useMemo)((function(){return x(J).sort((function(e,t){return new Date(t.start_date)-new Date(e.start_date)}))}),[J]),$=(0,r.useMemo)((function(){var e=Array.isArray(J)?J:[];return{totalRequests:e.length,pendingRequests:e.filter((function(e){return"pending"===e.status})).length,approvedRequests:e.filter((function(e){return"approved"===e.status})).length,declinedRequests:e.filter((function(e){return"declined"===e.status})).length,totalDays:e.filter((function(e){return"approved"===e.status})).reduce((function(e,t){return e+(t.total_days||0)}),0),ptoByType:e.filter((function(e){return"approved"===e.status})).reduce((function(e,t){var n=t.leave_type||"unknown";return e[n]=(e[n]||0)+(t.total_days||0),e}),{})}}),[J]),K=(0,r.useMemo)((function(){return(Array.isArray(t)?t:[]).filter((function(e){return"approved"===e.status}))}),[t]),Q=["vacation","holiday","personal"].reduce((function(e,t){return e[t]=K.filter((function(e){return e.leave_type===t})).reduce((function(e,t){return e+(t.total_days||0)}),0),e}),{}),X=(Object.values(Q).reduce((function(e,t){return e+t}),0),K.filter((function(e){return"sick"===e.leave_type})).reduce((function(e,t){return e+(t.total_days||0)}),0),(0,r.useMemo)((function(){var e=[];return V.forEach((function(t){for(var n=new Date(t.start_date),r=new Date(t.end_date),a=new Date(n);a<=r;a.setDate(a.getDate()+1)){var s=new Date(a);e.push(j(j({},t),{},{scheduled_date:new Date(s)}))}})),e.sort((function(e,t){return t.scheduled_date-e.scheduled_date}))}),[V])),Z=(0,r.useMemo)((function(){var e=["vacation","holiday","personal"].reduce((function(e,t){return e[t]=X.filter((function(e){return e.leave_type===t})).length,e}),{});return{daysOffBreakdown:e,totalDaysOff:Object.values(e).reduce((function(e,t){return e+t}),0),sickDays:X.filter((function(e){return"sick"===e.leave_type})).length,ptoByType:X.reduce((function(e,t){return e[t.leave_type]=(e[t.leave_type]||0)+1,e}),{}),totalScheduled:X.length}}),[X]);return 0===t.length?(0,v.jsx)("div",{className:"requests-container",children:(0,v.jsxs)("div",{className:"card requests-card",children:[(0,v.jsx)("h2",{className:"card-title",children:"My PTO Requests"}),(0,v.jsxs)("div",{className:"requests-empty",children:[(0,v.jsx)(a.A,{size:48,className:"requests-empty-icon"}),(0,v.jsx)("h3",{className:"requests-empty-title",children:"No PTO requests found"}),(0,v.jsx)("p",{children:"You haven't submitted any PTO requests yet."}),(0,v.jsx)("p",{className:"requests-empty-desc",children:"Go to the Calendar tab to submit your first request!"})]})]})}):(0,v.jsxs)("div",{className:"requests-container",children:[(0,v.jsxs)("div",{className:"requests-header-section",children:[(0,v.jsxs)("div",{className:"requests-page-header",children:[(0,v.jsx)("h2",{className:"page-title",children:"My PTO Requests"}),(0,v.jsxs)("div",{className:"requests-counts-header",children:[(0,v.jsxs)("span",{className:"requests-count total",children:["Total: ",t.length]}),(0,v.jsxs)("span",{className:"requests-count pending",children:["Pending: ",$.pendingRequests]}),(0,v.jsxs)("span",{className:"requests-count approved",children:["Approved: ",$.approvedRequests]})]}),(0,v.jsx)("div",{className:"requests-page-controls",children:(0,v.jsxs)("button",{onClick:function(){return A(!D)},className:"btn btn-secondary ".concat(D?"active":""),children:[(0,v.jsx)(s.A,{size:16}),"Filters"]})})]}),D&&(0,v.jsx)("div",{className:"filters-panel",children:(0,v.jsxs)("div",{className:"filters-row",children:[(0,v.jsxs)("div",{className:"filter-group",children:[(0,v.jsx)("label",{children:"Date Range"}),(0,v.jsx)(m.A,{value:q,onChange:P})]}),(0,v.jsxs)("div",{className:"filter-group",children:[(0,v.jsx)("label",{children:"Status"}),(0,v.jsxs)("select",{value:_,onChange:function(e){return S(e.target.value)},className:"form-control",children:[(0,v.jsx)("option",{value:"all",children:"All Status"}),(0,v.jsx)("option",{value:"pending",children:"Pending"}),(0,v.jsx)("option",{value:"approved",children:"Approved"}),(0,v.jsx)("option",{value:"declined",children:"Declined"})]})]})]})}),(0,v.jsxs)("div",{className:"summary-cards-container pto-balances-cards",children:[O.map((function(e){var t,n;return(0,v.jsxs)("div",{className:"summary-card ".concat(e.color),children:[(0,v.jsx)("div",{className:"summary-icon",children:(0,d.S0)(e.key)}),(0,v.jsxs)("div",{className:"summary-content",children:[(0,v.jsx)("div",{className:"summary-value",children:B?"...":null!==(t=null==E||null===(n=E[e.key])||void 0===n?void 0:n.remaining_days)&&void 0!==t?t:"-"}),(0,v.jsxs)("div",{className:"summary-label",children:["Available ",e.label," Days"]})]})]},e.key)})),(0,v.jsxs)("div",{className:"summary-card stat-green",children:[(0,v.jsx)("div",{className:"summary-icon",children:(0,v.jsx)(i.A,{size:20})}),(0,v.jsxs)("div",{className:"summary-content",children:[(0,v.jsx)("div",{className:"summary-value",children:Z.totalDaysOff}),(0,v.jsx)("div",{className:"summary-label",children:"Days Off"}),(0,v.jsx)("div",{className:"summary-breakdown",children:Object.keys(Z.daysOffBreakdown).map((function(e){return(0,v.jsxs)("div",{className:"breakdown-row",children:[(0,v.jsxs)("span",{className:"breakdown-label",children:[e.charAt(0).toUpperCase()+e.slice(1),":"]}),(0,v.jsx)("span",{className:"breakdown-value",children:Z.daysOffBreakdown[e]})]},e)}))})]})]}),(0,v.jsxs)("div",{className:"summary-card stat-red",children:[(0,v.jsx)("div",{className:"summary-icon",children:(0,v.jsx)(c.A,{size:20})}),(0,v.jsxs)("div",{className:"summary-content",children:[(0,v.jsx)("div",{className:"summary-value",children:Z.sickDays}),(0,v.jsx)("div",{className:"summary-label",children:"Sick Days"})]})]})]}),Object.keys(Z.ptoByType||{}).length>0&&(0,v.jsxs)("div",{className:"card pto-breakdown-card restyled",children:[(0,v.jsx)("div",{className:"card-header",children:(0,v.jsx)("h3",{children:"PTO Breakdown by Leave Type"})}),(0,v.jsx)("div",{className:"card-body",children:(0,v.jsx)("div",{className:"pto-breakdown-flex",children:Object.entries(Z.ptoByType||{}).map((function(e){var t=w(e,2),n=t[0],r=t[1];return(0,v.jsxs)("div",{className:"pto-breakdown-pill pill-".concat(n),children:[(0,v.jsx)("span",{className:"pill-emoji",children:(0,d.S0)(n)}),(0,v.jsx)("span",{className:"pill-type",children:n.charAt(0).toUpperCase()+n.slice(1)}),(0,v.jsxs)("span",{className:"pill-days",children:[r," ",1===r?"day":"days"]}),(0,v.jsxs)("span",{className:"pill-percent",children:[Z.totalScheduled>0?(r/Z.totalScheduled*100).toFixed(1):"0.0","%"]})]},n)}))})})]})]}),(0,v.jsx)("div",{className:"requests-content",children:(0,v.jsxs)("div",{className:"card requests-list-card",children:[(0,v.jsxs)("div",{className:"card-header",children:[(0,v.jsx)("h3",{children:"Request History"}),(0,v.jsxs)("div",{className:"requests-count",children:[J.length," ",1===J.length?"request":"requests"]})]}),(0,v.jsx)("div",{className:"card-body",children:0===J.length?(0,v.jsx)("div",{className:"no-results",children:(0,v.jsx)("p",{children:"No requests found for the selected filters."})}):(0,v.jsx)("div",{className:"requests-table-wrapper",children:(0,v.jsxs)("table",{className:"requests-table",children:[(0,v.jsx)("thead",{children:(0,v.jsxs)("tr",{children:[(0,v.jsx)("th",{children:"Type"}),(0,v.jsx)("th",{children:"Date"}),(0,v.jsx)("th",{children:"Status"}),(0,v.jsx)("th",{children:"Reason"}),(0,v.jsx)("th",{children:"Submitted"}),(0,v.jsx)("th",{children:"Reviewed"}),(0,v.jsx)("th",{children:"Actions"})]})}),(0,v.jsx)("tbody",{children:X.map((function(e,t){return(0,v.jsxs)("tr",{className:"request-row",children:[(0,v.jsxs)("td",{children:[(0,v.jsx)("span",{className:"request-emoji",children:(0,d.S0)(e.leave_type)}),e.leave_type.charAt(0).toUpperCase()+e.leave_type.slice(1)]}),(0,v.jsx)("td",{children:Y(e.scheduled_date)}),(0,v.jsx)("td",{children:(0,v.jsx)(u.A,{status:e.status})}),(0,v.jsx)("td",{children:e.reason||"-"}),(0,v.jsx)("td",{children:Y(e.submitted_at)}),(0,v.jsx)("td",{children:"pending"!==e.status&&e.reviewed_at?Y(e.reviewed_at):"-"}),(0,v.jsxs)("td",{children:[W(e)&&(0,v.jsx)("button",{onClick:function(){var t;W(t=e)&&U(t)},className:"btn btn-sm btn-secondary",title:"Edit Request",children:(0,v.jsx)(l.A,{size:14})}),H(e)&&(0,v.jsx)("button",{onClick:function(){return p&&p(e)},className:"btn btn-sm btn-danger",title:"Cancel Request",children:(0,v.jsx)(o.A,{size:14})})]})]},e.id+"-"+e.scheduled_date.toISOString())}))})]})})})]})}),I&&(0,v.jsx)(f.A,{request:I,onClose:function(){return U(null)},onSave:function(e){h(e),U(null)},currentUser:n})]})}},7892:(e,t,n)=>{n.d(t,{A:()=>R});var r=n(6540),a=n(2492),s=n(3893),i=n(4945),c=n(2762),l=n(7623),o=n(2307),u=n(8309),d=n(964),m=n(4796),f=n(418),v=n(8697),h=n(2321),p=n(5143),j=n(4506),y=n(5839),x=n(4143),b=n(2435),g=n(4848);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function w(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=C(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,s=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw s}}}}function _(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function s(n,r,a,s){var l=r&&r.prototype instanceof c?r:c,o=Object.create(l.prototype);return A(o,"_invoke",function(n,r,a){var s,c,l,o=0,u=a||[],d=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return s=t,c=0,l=e,m.n=n,i}};function f(n,r){for(c=n,l=r,t=0;!d&&o&&!a&&t<u.length;t++){var a,s=u[t],f=m.p,v=s[2];n>3?(a=v===r)&&(l=s[(c=s[4])?5:(c=3,3)],s[4]=s[5]=e):s[0]<=f&&((a=n<2&&f<s[1])?(c=0,m.v=r,m.n=s[1]):f<v&&(a=n<3||s[0]>r||r>v)&&(s[4]=n,s[5]=r,m.n=v,c=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,v){if(o>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,v),c=u,l=v;(t=c<2?e:l)||!d;){s||(c?c<3?(c>1&&(m.n=-1),f(c,l)):m.n=l:m.v=l);try{if(o=2,s){if(c||(a="next"),t=s[a]){if(!(t=t.call(s,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=s.return)&&t.call(s),c<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),c=1);s=e}else if((t=(d=m.n<0)?l:n.call(r,m))!==i)break}catch(t){s=e,c=1,l=t}finally{o=1}}return{value:t,done:d}}}(n,a,s),!0),o}var i={};function c(){}function l(){}function o(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(A(t={},r,(function(){return this})),t),d=o.prototype=c.prototype=Object.create(u);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,A(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=o,A(d,"constructor",o),A(o,"constructor",l),l.displayName="GeneratorFunction",A(o,a,"GeneratorFunction"),A(d),A(d,a,"Generator"),A(d,r,(function(){return this})),A(d,"toString",(function(){return"[object Generator]"})),(D=function(){return{w:s,m}})()}function A(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}A=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var s=function(t,n){A(e,t,(function(e){return this._invoke(t,n,e)}))};s("next",0),s("throw",1),s("return",2)}},A(e,t,n,r)}function T(e,t,n,r,a,s,i){try{var c=e[s](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function q(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var s=e.apply(t,n);function i(e){T(s,r,a,i,c,"next",e)}function c(e){T(s,r,a,i,c,"throw",e)}i(void 0)}))}}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,c=[],l=!0,o=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(o)throw a}}return c}}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"==typeof e)return I(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function U(e){var t=e.title,n=e.children,r=e.onClose;return(0,g.jsx)("div",{className:"modal-overlay",children:(0,g.jsxs)("div",{className:"modal-content admin-modal",children:[(0,g.jsxs)("div",{className:"modal-header",children:[(0,g.jsx)("h3",{children:t}),(0,g.jsx)("button",{className:"modal-close",onClick:r,children:(0,g.jsx)(v.A,{size:24})})]}),(0,g.jsx)("div",{className:"modal-body",children:n})]})})}const R=function(e){var t=e.currentUser,n=e.showNotification,v=P((0,r.useState)("overview"),2),S=v[0],A=v[1],T=P((0,r.useState)(!1),2),C=T[0],I=T[1],R=P((0,r.useState)([]),2),E=R[0],F=R[1],L=P((0,r.useState)([]),2),B=L[0],M=L[1],z=P((0,r.useState)([]),2),G=z[0],Y=z[1],W=P((0,r.useState)([]),2),H=W[0],J=W[1],V=P((0,r.useState)([]),2),$=V[0],K=V[1],Q=P((0,r.useState)(!1),2),X=Q[0],Z=Q[1],ee=P((0,r.useState)(!1),2),te=ee[0],ne=ee[1],re=P((0,r.useState)(!1),2),ae=re[0],se=re[1],ie=P((0,r.useState)(!1),2),ce=ie[0],le=ie[1],oe=P((0,r.useState)(!1),2),ue=oe[0],de=oe[1],me=P((0,r.useState)(!1),2),fe=me[0],ve=me[1],he=P((0,r.useState)(!1),2),pe=he[0],je=he[1],ye=P((0,r.useState)({startDate:"",endDate:"",requesterId:"",managerId:"",leaveType:""}),2),xe=ye[0],be=ye[1],ge=P((0,r.useState)({scope:"company",teamId:"",userId:"",startDate:"",endDate:"",status:"all"}),2),Ne=ge[0],we=ge[1],_e=P((0,r.useState)(Date.now()),2),Se=_e[0],Oe=_e[1],ke=P((0,r.useState)({totalAdmins:0,totalTeams:0,totalUsers:0,totalRequests:0,approvedRequests:0,pendingRequests:0,declinedRequests:0}),2),De=ke[0],Ae=ke[1],Te=(0,r.useRef)(),qe=P((0,r.useState)("actions"),2),Pe=qe[0],Ce=qe[1],Ie=P((0,r.useState)([]),2),Ue=Ie[0],Re=Ie[1],Ee=P((0,r.useState)(!1),2),Fe=Ee[0],Le=Ee[1],Be=P((0,r.useState)((new Date).getFullYear()),2),Me=Be[0],ze=(Be[1],P((0,r.useState)({}),2)),Ge=ze[0],Ye=ze[1],We=P((0,r.useState)({user:"",leaveType:"",year:""}),2),He=We[0],Je=We[1],Ve=P((0,r.useState)(""),2),$e=Ve[0],Ke=Ve[1],Qe=P((0,r.useState)(!1),2),Xe=Qe[0],Ze=Qe[1],et=P((0,r.useState)({user_id:"",leave_type:"",allocated_days:0,year:(new Date).getFullYear()}),2),tt=et[0],nt=et[1],rt=P((0,r.useState)("users"),2),at=rt[0],st=rt[1];(0,r.useEffect)((function(){it(),dt()}),[]);var it=function(){var e=q(D().m((function e(){return D().w((function(e){for(;;)switch(e.n){case 0:return I(!0),e.p=1,e.n=2,Promise.all([ct(),lt(),ot(),ut()]);case 2:e.n=4;break;case 3:e.p=3,e.v,n("Failed to load admin data","error");case 4:return e.p=4,I(!1),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})));return function(){return e.apply(this,arguments)}}(),ct=function(){var e=q(D().m((function e(){var t,n,r,a,s,i;return D().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,h.invoke)("getAdminUsers");case 1:if(!(t=e.v).success){e.n=3;break}return n=t.data||[],e.n=2,(0,h.invoke)("getUsers");case 2:r=e.v,a=r.success&&r.data||[],s=n.map((function(e){return a.find((function(t){return t.jira_account_id===e.accountId||t.email_address===e.emailAddress}))||e})),F(s);case 3:e.n=5;break;case 4:e.p=4,i=e.v,console.error("Failed to load admin users:",i);case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(){return e.apply(this,arguments)}}(),lt=function(){var e=q(D().m((function e(){var t;return D().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,h.invoke)("getTeams");case 1:(t=e.v).success&&M(t.data||[]),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}(),ot=function(){var e=q(D().m((function e(){var t;return D().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,h.invoke)("getUsers");case 1:(t=e.v).success&&Y(t.data||[]),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}(),ut=function(){var e=q(D().m((function e(){var t;return D().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,h.invoke)("getPTORequests");case 1:(t=e.v).success&&J(t.data||[]),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}(),dt=function(){var e=q(D().m((function e(){var t,n;return D().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,h.invoke)("getInternalJiraUsers",{startAt:0,maxResults:50});case 1:(t=e.v).success&&K(t.data.users||[]),e.n=3;break;case 2:e.p=2,n=e.v,console.error("Failed to load Jira users:",n);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}(),mt=function(){var e=q(D().m((function e(r){var a;return D().w((function(e){for(;;)switch(e.n){case 0:if(r){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,(0,h.invoke)("addAdminUser",{accountId:r.accountId,addedBy:t.accountId});case 2:(a=e.v).success?(n("".concat(r.displayName," added as admin")),Z(!1),ct()):n(a.message||"Failed to add admin","error"),e.n=4;break;case 3:e.p=3,e.v,n("Failed to add admin user","error");case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}(),ft=function(){var e=q(D().m((function e(r){var a,s;return D().w((function(e){for(;;)switch(e.n){case 0:if(null!=r&&r.targetUser){e.n=1;break}return n("Please select a user for PTO","error"),e.a(2);case 1:return e.p=1,i=r.manager,a=i?O(O({},i),{},{accountId:i.accountId||i.jira_account_id||i.id,displayName:i.displayName||i.display_name||i.name,emailAddress:i.emailAddress||i.email_address,avatarUrl:i.avatarUrl||i.avatar_url}):null,e.n=2,(0,h.invoke)("submitPTOForUser",{requestData:{requester_id:r.targetUser.accountId,requester_name:r.targetUser.displayName,requester_email:r.targetUser.emailAddress,manager_id:(null==a?void 0:a.accountId)||"admin",manager_name:(null==a?void 0:a.displayName)||t.displayName,manager_email:(null==a?void 0:a.emailAddress)||t.emailAddress,start_date:r.startDate,end_date:r.endDate,leave_type:r.leaveType||"vacation",reason:r.reason||"Admin created",status:"approved",total_days:r.totalDays,total_hours:r.totalHours,daily_schedules:r.dailySchedules},submittedBy:t.accountId});case 2:(s=e.v).success?(n("PTO request created for ".concat(r.targetUser.displayName)),se(!1),ut()):n(s.message||"Failed to create PTO request","error"),e.n=4;break;case 3:e.p=3,e.v,n("Failed to create PTO request","error");case 4:return e.a(2)}var i}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}(),vt=function(){var e=q(D().m((function e(){var t,r,a,s,i,c,l,o,u;return D().w((function(e){for(;;)switch(e.n){case 0:try{t=_(H),"team"===Ne.scope&&Ne.teamId?(r=G.filter((function(e){return(e.team_ids||[]).includes(Ne.teamId)})),a=r.map((function(e){return e.jira_account_id||e.id})),t=t.filter((function(e){return a.includes(e.requester_id)}))):"user"===Ne.scope&&Ne.userId&&(t=t.filter((function(e){return e.requester_id===Ne.userId}))),Ne.startDate&&Ne.endDate&&(t=t.filter((function(e){var t=new Date(e.start_date),n=new Date(Ne.startDate),r=new Date(Ne.endDate);return t>=n&&t<=r}))),"all"!==Ne.status&&(t=t.filter((function(e){return e.status===Ne.status}))),s=t.map((function(e){var t=G.find((function(t){return t.jira_account_id===e.requester_id||t.email_address===e.requester_email})),n=t?B.filter((function(e){return(t.team_ids||[]).includes(e.id)})):[];return{Date:(new Date).toLocaleDateString(),Manager:e.manager_name||"",Team:n.map((function(e){return e.name})).join(", "),Department:n.length>0?n[0].department:"",User:e.requester_name,"Start Date":e.start_date,"End Date":e.end_date,"Total Days":e.total_days||0,"Leave Type":e.leave_type,Reason:e.reason||"",Status:e.status,"Submitted Date":e.submitted_at}})),i=Object.keys(s[0]||{}),c=[i.join(",")].concat(_(s.map((function(e){return i.map((function(t){return'"'.concat((e[t]||"").toString().replace(/"/g,'""'),'"')})).join(",")})))).join("\n"),l=new Blob([c],{type:"text/csv"}),o=URL.createObjectURL(l),(u=document.createElement("a")).href=o,u.download="pto-admin-report-".concat(Ne.scope,"-").concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(o),n("Report downloaded successfully!"),le(!1)}catch(e){n("Failed to generate report","error")}case 1:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){var e,t;Ae({totalAdmins:E.length,totalTeams:B.length,totalUsers:G.length,totalRequests:H.length,pendingRequests:H.filter((function(e){return"pending"===e.status})).length,approvedRequests:H.filter((function(e){return"approved"===e.status})).length,declinedRequests:H.filter((function(e){return"declined"===e.status})).length,usersNotInSystem:(null===(t=G.map((function(e){return e.jira_account_id||e.email_address})).filter(Boolean),e=$.filter((function(e){return!t.includes(e.accountId)&&!t.includes(e.emailAddress)})))||void 0===e?void 0:e.length)||0})}),[E,B,G,H]);var ht={requestsByWeekday:H.reduce((function(e,t){var n=new Date(t.start_date).toLocaleDateString("en-US",{weekday:"long"});return e[n]=(e[n]||0)+1,e}),{}),requestsByLeaveType:H.reduce((function(e,t){return e[t.leave_type]=(e[t.leave_type]||0)+1,e}),{}),requestsByTeam:H.reduce((function(e,t){var n=G.find((function(e){return e.jira_account_id===t.requester_id||e.email_address===t.requester_email})),r=n?B.find((function(e){return e.id===n.team_id})):null,a=(null==r?void 0:r.name)||"Unassigned";return e[a]=(e[a]||0)+1,e}),{})};function pt(e,t){if(Array.isArray(e)&&0!==e.length){var n,r=Object.keys(e[0]),a=[r.join(",")],s=w(e);try{var i=function(){var e=n.value;a.push(r.map((function(t){var n;return'"'+(null!==(n=e[t])&&void 0!==n?n:"").toString().replace(/"/g,'""')+'"'})).join(","))};for(s.s();!(n=s.n()).done;)i()}catch(e){s.e(e)}finally{s.f()}var c=a.join("\n"),l=new Blob([c],{type:"text/csv"}),o=URL.createObjectURL(l),u=document.createElement("a");u.href=o,u.download=t,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(o)}}var jt=function(){var e=q(D().m((function e(){var t;return D().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,h.invoke)("debugStorage");case 1:(t=e.v).success&&t.data?(t.data.users&&pt(t.data.users,"users.csv"),t.data.teams&&pt(t.data.teams,"teams.csv"),t.data.admins&&pt(t.data.admins.map((function(e){return{accountId:e}})),"admins.csv"),t.data.pto_requests&&pt(t.data.pto_requests,"pto_requests.csv"),t.data.pto_daily_schedules&&pt(t.data.pto_daily_schedules,"pto_daily_schedules.csv"),n("Database exported as CSV files!")):n("Failed to export database","error"),e.n=3;break;case 2:e.p=2,e.v,n("Failed to export database","error");case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}(),yt=function(){var e=q(D().m((function e(){var t;return D().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,h.invoke)("exportPTODailySchedules",{filters:xe});case 1:(t=e.v).success?(pt(t.data,"pto_daily_schedules.csv"),n("Daily schedules exported successfully!"),ve(!1)):n(t.message||"Failed to export daily schedules","error"),e.n=3;break;case 2:e.p=2,e.v,n("Failed to export daily schedules","error");case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}(),xt=function(){var e=q(D().m((function e(){var t;return D().w((function(e){for(;;)switch(e.n){case 0:return Le(!0),e.p=1,e.n=2,(0,h.invoke)("getAllPTOBalances",{year:Me});case 2:t=e.v,Re(t.success?t.data:[]),e.n=4;break;case 3:e.p=3,e.v,n("Failed to load PTO balances","error");case 4:return e.p=4,Le(!1),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){"pto-balances"===Pe&&xt()}),[Pe,Me]);var bt=Ue.filter((function(e){var t,n,r=G.find((function(t){return t.id===e.user_id})),a=!He.user||e.user_id===He.user,s=!He.leaveType||e.leave_type===He.leaveType,i=!He.year||String(e.year)===String(He.year),c=!$e||r&&((null===(t=r.display_name)||void 0===t?void 0:t.toLowerCase().includes($e.toLowerCase()))||(null===(n=r.email_address)||void 0===n?void 0:n.toLowerCase().includes($e.toLowerCase())));return a&&s&&i&&c})),gt=Array.from(new Set(Ue.map((function(e){return e.leave_type})))),Nt=Array.from(new Set(Ue.map((function(e){return e.year})))),wt=bt.reduce((function(e,t){return e.allocated+=t.allocated_days,e.used+=t.used_days,e.remaining+=t.allocated_days-t.used_days,e}),{allocated:0,used:0,remaining:0});return(0,g.jsxs)("div",{className:"admin-dashboard",children:[(0,g.jsxs)("div",{className:"admin-tabs",children:[(0,g.jsxs)("button",{className:"admin-tab ".concat("overview"===S?"active":""),onClick:function(){return A("overview")},children:[(0,g.jsx)(a.A,{size:16}),"Overview"]}),(0,g.jsxs)("button",{className:"admin-tab ".concat("users"===S?"active":""),onClick:function(){return A("users")},children:[(0,g.jsx)(s.A,{size:16}),"Users"]}),(0,g.jsxs)("button",{className:"admin-tab ".concat("analytics"===S?"active":""),onClick:function(){return A("analytics")},children:[(0,g.jsx)(i.A,{size:16}),"Analytics"]}),(0,g.jsx)("button",{className:"admin-tab".concat("actions"===Pe?" active":""),onClick:function(){return Ce("actions")},children:"Actions"}),(0,g.jsx)("button",{className:"admin-tab".concat("pto-balances"===Pe?" active":""),onClick:function(){return Ce("pto-balances")},children:"PTO Balances"})]}),"overview"===S&&(0,g.jsxs)("div",{className:"admin-section",children:[(0,g.jsxs)("div",{className:"admin-stats-grid",children:[(0,g.jsxs)("div",{className:"admin-stat-card admin-stat-purple",children:[(0,g.jsx)("div",{className:"stat-icon",children:(0,g.jsx)(a.A,{size:24})}),(0,g.jsxs)("div",{className:"stat-content",children:[(0,g.jsx)("div",{className:"stat-value",children:De.totalAdmins}),(0,g.jsx)("div",{className:"stat-label",children:"Admin Users"})]})]}),(0,g.jsxs)("div",{className:"admin-stat-card admin-stat-blue",children:[(0,g.jsx)("div",{className:"stat-icon",children:(0,g.jsx)(c.A,{size:24})}),(0,g.jsxs)("div",{className:"stat-content",children:[(0,g.jsx)("div",{className:"stat-value",children:De.totalTeams}),(0,g.jsx)("div",{className:"stat-label",children:"Teams"})]})]}),(0,g.jsxs)("div",{className:"admin-stat-card admin-stat-emerald",children:[(0,g.jsx)("div",{className:"stat-icon",children:(0,g.jsx)(l.A,{size:24})}),(0,g.jsxs)("div",{className:"stat-content",children:[(0,g.jsx)("div",{className:"stat-value",children:De.totalUsers}),(0,g.jsx)("div",{className:"stat-label",children:"Users"})]})]}),(0,g.jsxs)("div",{className:"admin-stat-card admin-stat-indigo",children:[(0,g.jsx)("div",{className:"stat-icon",children:(0,g.jsx)(o.A,{size:24})}),(0,g.jsxs)("div",{className:"stat-content",children:[(0,g.jsx)("div",{className:"stat-value",children:De.totalRequests}),(0,g.jsx)("div",{className:"stat-label",children:"Total Requests"}),(0,g.jsxs)("div",{className:"stat-breakdown",children:[(0,g.jsxs)("span",{className:"breakdown-item green",children:[De.approvedRequests," approved"]}),(0,g.jsxs)("span",{className:"breakdown-item orange",children:[De.pendingRequests," pending"]}),(0,g.jsxs)("span",{className:"breakdown-item red",children:[De.declinedRequests," declined"]})]})]})]})]}),(0,g.jsxs)("div",{className:"card admin-actions-card",children:[(0,g.jsx)("div",{className:"card-header",children:(0,g.jsx)("h3",{children:"Actions"})}),(0,g.jsx)("div",{className:"card-body",children:(0,g.jsxs)("div",{className:"admin-actions-grid",children:[(0,g.jsxs)("button",{onClick:function(){Oe(Date.now()),se(!0)},className:"admin-action-btn",children:[(0,g.jsx)("div",{className:"action-icon bg-green",children:(0,g.jsx)(o.A,{size:20})}),(0,g.jsxs)("div",{className:"action-content",children:[(0,g.jsx)("div",{className:"action-title",children:"Create PTO"}),(0,g.jsx)("div",{className:"action-desc",children:"Create PTO requests for users"})]})]}),(0,g.jsxs)("button",{onClick:function(){return le(!0)},className:"admin-action-btn",children:[(0,g.jsx)("div",{className:"action-icon bg-blue",children:(0,g.jsx)(u.A,{size:20})}),(0,g.jsxs)("div",{className:"action-content",children:[(0,g.jsx)("div",{className:"action-title",children:"Generate Reports"}),(0,g.jsx)("div",{className:"action-desc",children:"Export detailed PTO reports"})]})]}),(0,g.jsxs)("button",{onClick:function(){return ne(!0)},className:"admin-action-btn",children:[(0,g.jsx)("div",{className:"action-icon bg-indigo",children:(0,g.jsx)(d.A,{size:20})}),(0,g.jsxs)("div",{className:"action-content",children:[(0,g.jsx)("div",{className:"action-title",children:"Manage Teams & Users"}),(0,g.jsx)("div",{className:"action-desc",children:"Advanced team and user management"})]})]}),(0,g.jsxs)("button",{onClick:jt,className:"admin-action-btn",children:[(0,g.jsx)("div",{className:"action-icon bg-yellow",children:(0,g.jsx)(u.A,{size:20})}),(0,g.jsxs)("div",{className:"action-content",children:[(0,g.jsx)("div",{className:"action-title",children:"Export Database"}),(0,g.jsx)("div",{className:"action-desc",children:"Download all tables as CSV"})]})]}),(0,g.jsxs)("button",{onClick:function(){return de(!0)},className:"admin-action-btn",children:[(0,g.jsx)("div",{className:"action-icon bg-purple",children:(0,g.jsx)(m.A,{size:20})}),(0,g.jsxs)("div",{className:"action-content",children:[(0,g.jsx)("div",{className:"action-title",children:"Import PTOs"}),(0,g.jsx)("div",{className:"action-desc",children:"Import PTO daily schedules from CSV"})]})]}),(0,g.jsxs)("button",{onClick:function(){return ve(!0)},className:"admin-action-btn",children:[(0,g.jsx)("div",{className:"action-icon bg-pink",children:(0,g.jsx)(u.A,{size:20})}),(0,g.jsxs)("div",{className:"action-content",children:[(0,g.jsx)("div",{className:"action-title",children:"Export Daily Schedules"}),(0,g.jsx)("div",{className:"action-desc",children:"Export PTO daily schedules"})]})]}),(0,g.jsxs)("button",{onClick:q(D().m((function e(){var t,r,a,s,i,c,l,o,u;return D().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm("This will check all teams and fix any manager fields that are objects. Proceed?")){e.n=1;break}return e.a(2);case 1:return I(!0),e.p=2,e.n=3,(0,h.invoke)("getTeams");case 3:if((t=e.v).success){e.n=4;break}throw new Error("Failed to fetch teams");case 4:r=t.data||[],a=0,s=w(r),e.p=5,s.s();case 6:if((i=s.n()).done){e.n=9;break}if(!(c=i.value).manager||"object"!==N(c.manager)){e.n=8;break}if(!(l=c.manager.jira_account_id||c.manager.accountId||c.manager.id||null)){e.n=8;break}return e.n=7,(0,h.invoke)("updateTeam",O(O({},c),{},{manager:l}));case 7:a++;case 8:e.n=6;break;case 9:e.n=11;break;case 10:e.p=10,o=e.v,s.e(o);case 11:return e.p=11,s.f(),e.f(11);case 12:n("âœ… Fixed ".concat(a," teams with object managers.")),lt(),e.n=14;break;case 13:e.p=13,u=e.v,n("Failed to fix teams: "+u.message,"error");case 14:return e.p=14,I(!1),e.f(14);case 15:return e.a(2)}}),e,null,[[5,10,11,12],[2,13,14,15]])}))),className:"admin-action-btn",children:[(0,g.jsx)("div",{className:"action-icon bg-orange",children:(0,g.jsx)(f.A,{size:20})}),(0,g.jsxs)("div",{className:"action-content",children:[(0,g.jsx)("div",{className:"action-title",children:"Fix Team Managers"}),(0,g.jsx)("div",{className:"action-desc",children:"Convert all manager fields to IDs"})]})]}),(0,g.jsxs)("button",{onClick:q(D().m((function e(){var r,a;return D().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm("âš ï¸ WARNING: This will DELETE ALL PTO data (requests + daily schedules). This cannot be undone. Are you sure?")){e.n=1;break}return e.a(2);case 1:if(window.confirm("Final confirmation: Delete ALL PTO data? Type YES to confirm.")){e.n=2;break}return e.a(2);case 2:return I(!0),e.p=3,e.n=4,(0,h.invoke)("cleanupPTODatabase",{adminId:t.accountId,confirmDelete:!0});case 4:(r=e.v).success?(n("âœ… Cleanup complete: ".concat(r.data.deletedCount," items removed")),it()):n(r.message||"Cleanup failed","error"),e.n=6;break;case 5:e.p=5,a=e.v,n("Cleanup failed: "+a.message,"error");case 6:return e.p=6,I(!1),e.f(6);case 7:return e.a(2)}}),e,null,[[3,5,6,7]])}))),className:"admin-action-btn",disabled:C,children:[(0,g.jsx)("div",{className:"action-icon bg-red",children:(0,g.jsx)(f.A,{size:20})}),(0,g.jsxs)("div",{className:"action-content",children:[(0,g.jsx)("div",{className:"action-title",children:"ðŸ—‘ï¸ Cleanup PTO Database"}),(0,g.jsx)("div",{className:"action-desc",children:"Delete ALL PTO requests and schedules"})]})]}),(0,g.jsxs)("button",{onClick:function(){return je(!0)},className:"admin-action-btn",children:[(0,g.jsx)("div",{className:"action-icon bg-orange",children:(0,g.jsx)(m.A,{size:20})}),(0,g.jsxs)("div",{className:"action-content",children:[(0,g.jsx)("div",{className:"action-title",children:"Import Database"}),(0,g.jsx)("div",{className:"action-desc",children:"Upload a JSON file to replace all data"})]})]})]})})]}),(0,g.jsxs)("div",{className:"card recent-activity-card",children:[(0,g.jsx)("div",{className:"card-header",children:(0,g.jsx)("h3",{children:"Recent PTO Activity"})}),(0,g.jsx)("div",{className:"card-body",children:0===H.length?(0,g.jsxs)("div",{className:"empty-state-small",children:[(0,g.jsx)(o.A,{size:32}),(0,g.jsx)("p",{children:"No PTO requests yet"})]}):(0,g.jsx)("div",{className:"recent-requests-list",children:H.sort((function(e,t){return new Date(t.submitted_at)-new Date(e.submitted_at)})).slice(0,5).map((function(e){var t;return(0,g.jsxs)("div",{className:"recent-request-item",children:[(0,g.jsx)("div",{className:"request-avatar",children:(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||"?"}),(0,g.jsxs)("div",{className:"request-details",children:[(0,g.jsxs)("div",{className:"request-summary",children:[(0,g.jsx)("span",{className:"requester-name",children:e.requester_name}),(0,g.jsxs)("span",{className:"request-action",children:["requested ",e.leave_type]})]}),(0,g.jsxs)("div",{className:"request-meta",children:[new Date(e.start_date).toLocaleDateString()," â€¢ ",e.total_days," days"]})]}),(0,g.jsx)("div",{className:"request-status",children:(0,g.jsx)("span",{className:"status-badge status-".concat(e.status),children:e.status})})]},e.id)}))})})]})]}),"users"===S&&(0,g.jsx)("div",{className:"admin-section",children:(0,g.jsx)(x.A,{currentUser:t,showNotification:n,isAdmin:!0})}),"analytics"===S&&(0,g.jsxs)("div",{className:"admin-section",children:[(0,g.jsx)("div",{className:"section-header",children:(0,g.jsx)("h3",{children:"Analytics Dashboard"})}),(0,g.jsx)("div",{className:"analytics-grid",children:(0,g.jsxs)("div",{className:"card analytics-card",children:[(0,g.jsx)("div",{className:"card-header",children:(0,g.jsx)("h4",{children:"Requests by Weekday"})}),(0,g.jsx)("div",{className:"card-body",children:(0,g.jsx)("div",{className:"analytics-list",children:Object.entries(ht.requestsByWeekday).sort((function(e,t){var n=P(e,2)[1];return P(t,2)[1]-n})).map((function(e){var t=P(e,2),n=t[0],r=t[1];return(0,g.jsxs)("div",{className:"analytics-item",children:[(0,g.jsxs)("div",{className:"item-info",children:[(0,g.jsx)("span",{className:"item-icon",children:"ðŸ“…"}),(0,g.jsx)("span",{className:"item-label",children:n})]}),(0,g.jsx)("div",{className:"item-value",children:r})]},n)}))})})]})})]}),"pto-balances"===Pe&&(0,g.jsxs)("div",{className:"admin-section",children:[(0,g.jsxs)("div",{className:"section-header",children:[(0,g.jsx)("h3",{children:"PTO Balances"}),(0,g.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,g.jsx)("label",{children:"Year: "}),(0,g.jsxs)("select",{value:He.year,onChange:function(e){return Je((function(t){return O(O({},t),{},{year:e.target.value})}))},children:[(0,g.jsx)("option",{value:"",children:"All"}),Nt.map((function(e){return(0,g.jsx)("option",{value:e,children:e},e)}))]}),(0,g.jsx)("label",{children:"Leave Type: "}),(0,g.jsxs)("select",{value:He.leaveType,onChange:function(e){return Je((function(t){return O(O({},t),{},{leaveType:e.target.value})}))},children:[(0,g.jsx)("option",{value:"",children:"All"}),gt.map((function(e){return(0,g.jsx)("option",{value:e,children:e},e)}))]}),(0,g.jsx)("label",{children:"User: "}),(0,g.jsxs)("select",{value:He.user,onChange:function(e){return Je((function(t){return O(O({},t),{},{user:e.target.value})}))},children:[(0,g.jsx)("option",{value:"",children:"All"}),G.map((function(e){return(0,g.jsxs)("option",{value:e.id,children:[e.display_name," (",e.email_address,")"]},e.id)}))]}),(0,g.jsx)("input",{type:"text",placeholder:"Search user...",value:$e,onChange:function(e){return Ke(e.target.value)},style:{marginLeft:8}}),(0,g.jsx)("button",{className:"btn btn-primary",onClick:function(){return Ze(!0)},children:"Add PTO Balance"})]})]}),Fe?(0,g.jsxs)("div",{className:"loading-container",children:[(0,g.jsx)("div",{className:"loading-spinner"}),"Loading..."]}):(0,g.jsxs)("table",{className:"requests-table",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:"User"}),(0,g.jsx)("th",{children:"Email"}),(0,g.jsx)("th",{children:"Leave Type"}),(0,g.jsx)("th",{children:"Allocated"}),(0,g.jsx)("th",{children:"Used"}),(0,g.jsx)("th",{children:"Remaining"}),(0,g.jsx)("th",{children:"Year"}),(0,g.jsx)("th",{children:"Actions"})]})}),(0,g.jsxs)("tbody",{children:[bt.map((function(e,t){var n,r,a,s,i=G.find((function(t){return t.id===e.user_id}));return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:(null==i?void 0:i.display_name)||e.user_id}),(0,g.jsx)("td",{children:(null==i?void 0:i.email_address)||""}),(0,g.jsx)("td",{children:e.leave_type}),(0,g.jsx)("td",{children:(0,g.jsx)("input",{type:"number",value:null!==(n=null===(r=Ge[t])||void 0===r?void 0:r.allocated_days)&&void 0!==n?n:e.allocated_days,min:0,onChange:function(e){return Ye((function(n){return O(O({},n),{},k({},t,O(O({},n[t]),{},{allocated_days:Number(e.target.value)})))}))}})}),(0,g.jsx)("td",{children:e.used_days}),(0,g.jsx)("td",{children:(null!==(a=null===(s=Ge[t])||void 0===s?void 0:s.allocated_days)&&void 0!==a?a:e.allocated_days)-e.used_days}),(0,g.jsx)("td",{children:e.year}),(0,g.jsxs)("td",{style:{display:"flex",gap:4},children:[(0,g.jsx)("button",{className:"btn btn-sm btn-primary",onClick:q(D().m((function n(){var r,a;return D().w((function(n){for(;;)switch(n.n){case 0:return Le(!0),n.n=1,(0,h.invoke)("setPTOBalance",O(O({},e),{},{allocated_days:null!==(r=null===(a=Ge[t])||void 0===a?void 0:a.allocated_days)&&void 0!==r?r:e.allocated_days}));case 1:return Ye((function(e){return O(O({},e),{},k({},t,void 0))})),n.n=2,xt();case 2:return n.a(2)}}),n)}))),children:"Save"}),(0,g.jsx)("button",{className:"btn btn-sm btn-danger",onClick:q(D().m((function t(){return D().w((function(t){for(;;)switch(t.n){case 0:if(window.confirm("Delete this PTO balance?")){t.n=1;break}return t.a(2);case 1:return Le(!0),t.n=2,(0,h.invoke)("deletePTOBalance",{user_id:e.user_id,leave_type:e.leave_type,year:e.year});case 2:return t.n=3,xt();case 3:return t.a(2)}}),t)}))),children:"Delete"})]})]},t)})),(0,g.jsxs)("tr",{style:{fontWeight:"bold",background:"#f9fafb"},children:[(0,g.jsx)("td",{colSpan:3,children:"Total"}),(0,g.jsx)("td",{children:wt.allocated}),(0,g.jsx)("td",{children:wt.used}),(0,g.jsx)("td",{children:wt.remaining}),(0,g.jsx)("td",{colSpan:2})]})]})]}),Xe&&(0,g.jsx)("div",{className:"modal-overlay",children:(0,g.jsxs)("div",{className:"modal-content",style:{maxWidth:400,margin:"auto",padding:24},children:[(0,g.jsx)("h4",{children:"Add PTO Balance"}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{children:"User"}),(0,g.jsxs)("select",{className:"form-control",value:tt.user_id,onChange:function(e){return nt((function(t){return O(O({},t),{},{user_id:e.target.value})}))},children:[(0,g.jsx)("option",{value:"",children:"Select user"}),G.map((function(e){return(0,g.jsxs)("option",{value:e.id,children:[e.display_name," (",e.email_address,")"]},e.id)}))]})]}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{children:"Leave Type"}),(0,g.jsx)("input",{className:"form-control",value:tt.leave_type,onChange:function(e){return nt((function(t){return O(O({},t),{},{leave_type:e.target.value})}))},placeholder:"e.g. vacation"})]}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{children:"Allocated Days"}),(0,g.jsx)("input",{className:"form-control",type:"number",value:tt.allocated_days,min:0,onChange:function(e){return nt((function(t){return O(O({},t),{},{allocated_days:Number(e.target.value)})}))}})]}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{children:"Year"}),(0,g.jsx)("input",{className:"form-control",type:"number",value:tt.year,onChange:function(e){return nt((function(t){return O(O({},t),{},{year:Number(e.target.value)})}))}})]}),(0,g.jsxs)("div",{className:"form-actions",children:[(0,g.jsx)("button",{className:"btn btn-secondary",onClick:function(){return Ze(!1)},children:"Cancel"}),(0,g.jsx)("button",{className:"btn btn-primary",onClick:q(D().m((function e(){return D().w((function(e){for(;;)switch(e.n){case 0:if(tt.user_id&&tt.leave_type&&tt.year){e.n=1;break}return n("All fields required","error"),e.a(2);case 1:return Le(!0),e.n=2,(0,h.invoke)("setPTOBalance",O(O({},tt),{},{used_days:0,remaining_days:tt.allocated_days}));case 2:return Ze(!1),nt({user_id:"",leave_type:"",allocated_days:0,year:(new Date).getFullYear()}),e.n=3,xt();case 3:return e.a(2)}}),e)}))),children:"Add"})]})]})})]}),X&&(0,g.jsx)(U,{title:"Add Admin User",onClose:function(){return Z(!1)},children:(0,g.jsxs)("div",{className:"add-admin-content",children:[(0,g.jsx)("p",{children:"Grant admin privileges to a user. They will be able to manage teams, users, and all PTO requests."}),(0,g.jsx)(p.A,{selectedUser:null,onSelect:mt,placeholder:"Search and select user to grant admin privileges",useBackendSearch:!1})]})}),ce&&(0,g.jsx)(U,{title:"Generate PTO Report",onClose:function(){return le(!1)},children:(0,g.jsxs)("div",{className:"report-config",children:[(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{children:"Report Scope"}),(0,g.jsxs)("select",{value:Ne.scope,onChange:function(e){return we((function(t){return O(O({},t),{},{scope:e.target.value})}))},className:"form-control",children:[(0,g.jsx)("option",{value:"company",children:"Full Company"}),(0,g.jsx)("option",{value:"team",children:"Specific Team"}),(0,g.jsx)("option",{value:"user",children:"Specific User"})]})]}),"team"===Ne.scope&&(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{children:"Select Team"}),(0,g.jsxs)("select",{value:Ne.teamId,onChange:function(e){return we((function(t){return O(O({},t),{},{teamId:e.target.value})}))},className:"form-control",children:[(0,g.jsx)("option",{value:"",children:"Choose a team"}),B.map((function(e){return(0,g.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]}),"user"===Ne.scope&&(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{children:"Select User"}),(0,g.jsxs)("select",{value:Ne.userId,onChange:function(e){return we((function(t){return O(O({},t),{},{userId:e.target.value})}))},className:"form-control",children:[(0,g.jsx)("option",{value:"",children:"Choose a user"}),G.map((function(e){return(0,g.jsx)("option",{value:e.jira_account_id||e.id,children:e.display_name||e.displayName},e.id)}))]})]}),(0,g.jsxs)("div",{className:"form-row",children:[(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{children:"Start Date"}),(0,g.jsx)("input",{type:"date",value:Ne.startDate,onChange:function(e){return we((function(t){return O(O({},t),{},{startDate:e.target.value})}))},className:"form-control"})]}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{children:"End Date"}),(0,g.jsx)("input",{type:"date",value:Ne.endDate,onChange:function(e){return we((function(t){return O(O({},t),{},{endDate:e.target.value})}))},className:"form-control"})]})]}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{children:"Status Filter"}),(0,g.jsxs)("select",{value:Ne.status,onChange:function(e){return we((function(t){return O(O({},t),{},{status:e.target.value})}))},className:"form-control",children:[(0,g.jsx)("option",{value:"all",children:"All Status"}),(0,g.jsx)("option",{value:"pending",children:"Pending"}),(0,g.jsx)("option",{value:"approved",children:"Approved"}),(0,g.jsx)("option",{value:"declined",children:"Declined"})]})]}),(0,g.jsxs)("div",{className:"form-actions",children:[(0,g.jsx)("button",{onClick:function(){return le(!1)},className:"btn btn-secondary",children:"Cancel"}),(0,g.jsxs)("button",{onClick:vt,className:"btn btn-primary",children:[(0,g.jsx)(u.A,{size:16}),"Generate Report"]})]})]})}),te&&(0,g.jsx)(y.A,{isOpen:te,onClose:function(){return ne(!1)},teams:B,users:G,onSaveTeam:function(){var e=q(D().m((function e(t){return D().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,h.invoke)(t.id?"updateTeam":"createTeam",t);case 1:lt();case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),onDeleteTeam:function(){var e=q(D().m((function e(n){return D().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,h.invoke)("deleteTeam",{teamId:n,deletedBy:t.accountId});case 1:lt();case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),onSaveUser:function(){var e=q(D().m((function e(t){return D().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,h.invoke)(t.id?"updateUser":"createUser",t);case 1:ot();case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),onDeleteUser:function(){var e=q(D().m((function e(n){return D().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,h.invoke)("deleteUser",{userId:n,deletedBy:t.accountId});case 1:ot();case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),showNotification:n,onRefresh:it}),ae&&(0,g.jsx)(j.A,{isAdminMode:!0,onClose:function(){return se(!1)},onSubmit:ft,allUsers:G,allTeams:B,allRequests:H,currentUser:t,isAdmin:!0},Se),ue&&(0,g.jsx)(b.A,{isOpen:ue,onClose:function(){return de(!1)},currentUser:t,showNotification:n,onImportSuccess:ut}),fe&&(0,g.jsx)(U,{title:"Export PTO Daily Schedules",onClose:function(){return ve(!1)},children:(0,g.jsxs)("div",{className:"export-filters",children:[(0,g.jsxs)("div",{className:"form-row",children:[(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{children:"Start Date"}),(0,g.jsx)("input",{type:"date",value:xe.startDate,onChange:function(e){return be((function(t){return O(O({},t),{},{startDate:e.target.value})}))},className:"form-control"})]}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{children:"End Date"}),(0,g.jsx)("input",{type:"date",value:xe.endDate,onChange:function(e){return be((function(t){return O(O({},t),{},{endDate:e.target.value})}))},className:"form-control"})]})]}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{children:"Requester"}),(0,g.jsxs)("select",{value:xe.requesterId,onChange:function(e){return be((function(t){return O(O({},t),{},{requesterId:e.target.value})}))},className:"form-control",children:[(0,g.jsx)("option",{value:"",children:"All Requesters"}),G.map((function(e){return(0,g.jsx)("option",{value:e.jira_account_id||e.id,children:e.display_name||e.displayName},e.id)}))]})]}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{children:"Manager"}),(0,g.jsxs)("select",{value:xe.managerId,onChange:function(e){return be((function(t){return O(O({},t),{},{managerId:e.target.value})}))},className:"form-control",children:[(0,g.jsx)("option",{value:"",children:"All Managers"}),G.map((function(e){return(0,g.jsx)("option",{value:e.jira_account_id||e.id,children:e.display_name||e.displayName},e.id)}))]})]}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{children:"Leave Type"}),(0,g.jsxs)("select",{value:xe.leaveType,onChange:function(e){return be((function(t){return O(O({},t),{},{leaveType:e.target.value})}))},className:"form-control",children:[(0,g.jsx)("option",{value:"",children:"All Types"}),(0,g.jsx)("option",{value:"vacation",children:"Vacation"}),(0,g.jsx)("option",{value:"sick",children:"Sick Leave"}),(0,g.jsx)("option",{value:"personal",children:"Personal Leave"}),(0,g.jsx)("option",{value:"holiday",children:"Holiday"}),(0,g.jsx)("option",{value:"other leave type",children:"Other Leave Type"})]})]}),(0,g.jsxs)("div",{className:"form-actions",children:[(0,g.jsx)("button",{onClick:function(){return ve(!1)},className:"btn btn-secondary",children:"Cancel"}),(0,g.jsxs)("button",{onClick:yt,className:"btn btn-primary",children:[(0,g.jsx)(u.A,{size:16}),"Export Schedules"]}),(0,g.jsxs)("button",{onClick:q(D().m((function e(){var t,r,a,s,i;return D().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,h.invoke)("debugStorage");case 1:if(t=e.v,console.log("ðŸ” DEBUG Storage Response:",t),!t.success){e.n=3;break}return r=t.data.summary,n("Storage Debug: ".concat(r.ptoRequestCount," PTO requests, ").concat(r.ptoScheduleCount," daily schedules"),"info"),e.n=2,(0,h.invoke)("getPTORequests");case 2:a=e.v,console.log("ðŸ” DEBUG getPTORequests Response:",a),a.success&&n("getPTORequests returned: ".concat((null===(s=a.data)||void 0===s?void 0:s.length)||0," total events"),"info");case 3:e.n=5;break;case 4:e.p=4,i=e.v,console.error("Debug error:",i),n("Debug failed: "+i.message,"error");case 5:return e.a(2)}}),e,null,[[0,4]])}))),className:"btn btn-secondary",children:[(0,g.jsx)(u.A,{size:16}),"Debug Storage"]})]})]})}),pe&&(0,g.jsx)("div",{className:"modal-overlay",children:(0,g.jsxs)("div",{className:"modal-content",style:{maxWidth:400,margin:"auto",padding:24},children:[(0,g.jsx)("h4",{children:"Import Database"}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{children:"Table to Replace"}),(0,g.jsx)("select",{className:"form-control",value:at,onChange:function(e){return st(e.target.value)},children:[{value:"users",label:"Users"},{value:"teams",label:"Teams"},{value:"pto_balances",label:"PTO Balances"}].map((function(e){return(0,g.jsx)("option",{value:e.value,children:e.label},e.value)}))})]}),(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{children:"CSV File"}),(0,g.jsx)("input",{type:"file",accept:".csv",ref:Te,onChange:function(){var e=q(D().m((function e(t){var r,a;return D().w((function(e){for(;;)switch(e.n){case 0:if(r=t.target.files[0]){e.n=1;break}return e.a(2);case 1:(a=new FileReader).onload=function(){var e=q(D().m((function e(t){var r,a,s,i;return D().w((function(e){for(;;)switch(e.n){case 0:if(r=t.target.result,a=r.split(/\r?\n/).filter(Boolean),s=a[0].split(",").map((function(e){return e.trim()})),i=a.slice(1).map((function(e){var t=e.split(","),n={};return s.forEach((function(e,r){n[e]=t[r]})),n})),window.confirm("This will replace all data in the '".concat(at,"' table. Proceed?"))){e.n=1;break}return e.a(2);case 1:return e.n=2,(0,h.invoke)("importDatabase",{table:at,data:i});case 2:if(je(!1),n("Imported ".concat(i.length," records into ").concat(at,"."),"success"),"users"!==at){e.n=3;break}return e.n=3,loadUsers();case 3:if("teams"!==at){e.n=4;break}return e.n=4,loadTeams();case 4:if("pto_balances"!==at){e.n=5;break}return e.n=5,xt();case 5:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.readAsText(r);case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}()})]}),(0,g.jsx)("div",{className:"form-actions",children:(0,g.jsx)("button",{className:"btn btn-secondary",onClick:function(){return je(!1)},children:"Cancel"})})]})})]})}},9681:(e,t,n)=>{n.d(t,{A:()=>x});var r=n(6540),a=n(5627),s=n(697),i=n(4506),c=n(808),l=n(9618),o=n(4848);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function s(n,r,a,s){var l=r&&r.prototype instanceof c?r:c,o=Object.create(l.prototype);return m(o,"_invoke",function(n,r,a){var s,c,l,o=0,u=a||[],d=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return s=t,c=0,l=e,m.n=n,i}};function f(n,r){for(c=n,l=r,t=0;!d&&o&&!a&&t<u.length;t++){var a,s=u[t],f=m.p,v=s[2];n>3?(a=v===r)&&(l=s[(c=s[4])?5:(c=3,3)],s[4]=s[5]=e):s[0]<=f&&((a=n<2&&f<s[1])?(c=0,m.v=r,m.n=s[1]):f<v&&(a=n<3||s[0]>r||r>v)&&(s[4]=n,s[5]=r,m.n=v,c=0))}if(a||n>1)return i;throw d=!0,r}return function(a,u,v){if(o>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,v),c=u,l=v;(t=c<2?e:l)||!d;){s||(c?c<3?(c>1&&(m.n=-1),f(c,l)):m.n=l:m.v=l);try{if(o=2,s){if(c||(a="next"),t=s[a]){if(!(t=t.call(s,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=s.return)&&t.call(s),c<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),c=1);s=e}else if((t=(d=m.n<0)?l:n.call(r,m))!==i)break}catch(t){s=e,c=1,l=t}finally{o=1}}return{value:t,done:d}}}(n,a,s),!0),o}var i={};function c(){}function l(){}function o(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(m(t={},r,(function(){return this})),t),f=o.prototype=c.prototype=Object.create(u);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,m(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=o,m(f,"constructor",o),m(o,"constructor",l),l.displayName="GeneratorFunction",m(o,a,"GeneratorFunction"),m(f),m(f,a,"Generator"),m(f,r,(function(){return this})),m(f,"toString",(function(){return"[object Generator]"})),(d=function(){return{w:s,m:v}})()}function m(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}m=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var s=function(t,n){m(e,t,(function(e){return this._invoke(t,n,e)}))};s("next",0),s("throw",1),s("return",2)}},m(e,t,n,r)}function f(e,t,n,r,a,s,i){try{var c=e[s](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,s,i,c=[],l=!0,o=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(o)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const x=function(e){var t=e.events,n=e.onDateSelect,u=e.selectedDates,m=e.onSubmitPTO,v=e.currentUser,y=e.allUsers,x=e.allTeams,b=e.isAdmin,g=j((0,r.useState)(new Date),2),N=g[0],w=g[1],_=j((0,r.useState)(!1),2),S=_[0],O=_[1],k=j((0,r.useState)({team:"all",user:"all",leaveType:"all",status:"all"}),2),D=k[0],A=k[1],T=j((0,r.useState)(!1),2),q=T[0],P=T[1],C=j((0,r.useState)(null),2),I=C[0],U=C[1],R=j((0,r.useState)(""),2),E=R[0],F=R[1],L=j((0,r.useState)(!1),2),B=L[0],M=L[1],z=j((0,r.useState)([]),2),G=z[0],Y=z[1],W=j((0,r.useState)(null),2),H=W[0],J=W[1],V=null==y?void 0:y.find((function(e){return e.jira_account_id===(null==v?void 0:v.accountId)||e.email_address===(null==v?void 0:v.emailAddress)})),$=function(e){return e.toISOString().split("T")[0]},K=function(){return t?t.filter((function(e){if("all"!==D.team){var t=null==y?void 0:y.find((function(t){return t.jira_account_id===e.requester_id||t.email_address===e.requester_email}));if(!t||String(t.team_id)!==String(D.team))return!1}if("me"===D.user){if(e.requester_id!==(null==v?void 0:v.accountId)&&e.requester_email!==(null==v?void 0:v.emailAddress))return!1}else if("all"!==D.user){var n=null==y?void 0:y.find((function(e){return e.jira_account_id===D.user||e.id===D.user}));if(n&&e.requester_id!==n.jira_account_id&&e.requester_email!==n.email_address)return!1}return("all"===D.leaveType||e.leave_type===D.leaveType)&&("all"===D.status||e.status===D.status)})):[]},Q=function(e){w((function(t){var n=new Date(t);return n.setMonth(t.getMonth()+e),n}))},X=function(e,t){A((function(n){return h(h({},n),{},p({},e,t))}))},Z=function(){return Object.values(D).some((function(e){return"all"!==e}))},ee=function(){var e,t=(e=d().m((function e(t){var n;return d().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,m(t);case 1:null!=(n=e.v)&&n.success&&O(!1);case 2:return e.a(2)}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var s=e.apply(t,n);function i(e){f(s,r,a,i,c,"next",e)}function c(e){f(s,r,a,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),te=function(e){if(!e)return!1;if(e.requester_id!==v.accountId)return!1;if("pending"===e.status)return!0;if("approved"===e.status){var t=new Date;return t.setHours(0,0,0,0),new Date(e.start_date)>=t}return!1},ne=function(e){for(var t=e.getFullYear(),n=e.getMonth(),r=new Date(t,n,1),a=new Date(t,n+1,0).getDate(),s=r.getDay(),i=[],c=0;c<s;c++)i.push(null);for(var l=1;l<=a;l++)i.push(new Date(t,n,l));return i}(N);return(0,o.jsxs)("div",{className:"card calendar-card",children:[(0,o.jsxs)("div",{className:"calendar-header",children:[(0,o.jsxs)("div",{className:"calendar-header-controls",children:[(0,o.jsx)("button",{onClick:function(){return Q(-1)},className:"calendar-nav-btn",children:"â†"}),(0,o.jsxs)("h2",{className:"calendar-title",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][N.getMonth()]," ",N.getFullYear()]}),(0,o.jsx)("button",{onClick:function(){return Q(1)},className:"calendar-nav-btn",children:"â†’"})]}),(0,o.jsxs)("div",{className:"calendar-header-actions",children:[(0,o.jsxs)("button",{onClick:function(){return P(!q)},className:"btn btn-secondary calendar-filter-btn ".concat(Z()?"has-filters":""),children:[(0,o.jsx)(a.A,{size:16}),(0,o.jsx)("span",{children:"Filters"}),Z()&&(0,o.jsx)("span",{className:"filter-indicator",children:"â—"})]}),u.filter((function(e){return new Date(e)>=new Date((new Date).setHours(0,0,0,0))})).length>0&&(0,o.jsxs)("button",{onClick:function(){return O(!0)},className:"btn btn-primary calendar-submit-btn",children:[(0,o.jsx)(s.A,{size:16}),(0,o.jsxs)("span",{children:["Request PTO (",u.filter((function(e){return new Date(e)>=new Date((new Date).setHours(0,0,0,0))})).length," days)"]})]})]})]}),q&&(0,o.jsxs)("div",{className:"calendar-filters-panel",children:[(0,o.jsxs)("div",{className:"filters-grid",children:[(0,o.jsxs)("div",{className:"filter-group",children:[(0,o.jsx)("label",{children:"Team"}),(0,o.jsxs)("select",{value:D.team,onChange:function(e){return X("team",e.target.value)},className:"form-control",children:[(0,o.jsx)("option",{value:"all",children:"All Teams"}),(x?b?x:x.filter((function(e){var t,n;return(null===(t=e.manager)||void 0===t?void 0:t.accountId)===(null==v?void 0:v.accountId)||(null===(n=e.manager)||void 0===n?void 0:n.jira_account_id)===(null==v?void 0:v.accountId)})):[]).map((function(e){return(0,o.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]}),(0,o.jsxs)("div",{className:"filter-group",children:[(0,o.jsx)("label",{children:"User"}),(0,o.jsxs)("select",{value:D.user,onChange:function(e){return X("user",e.target.value)},className:"form-control",children:[(0,o.jsx)("option",{value:"all",children:"All Users"}),(0,o.jsx)("option",{value:"me",children:"Me"}),null==y?void 0:y.map((function(e){return(0,o.jsx)("option",{value:e.jira_account_id||e.id,children:e.display_name||e.displayName},e.id)}))]})]}),(0,o.jsxs)("div",{className:"filter-group",children:[(0,o.jsx)("label",{children:"Leave Type"}),(0,o.jsxs)("select",{value:D.leaveType,onChange:function(e){return X("leaveType",e.target.value)},className:"form-control",children:[(0,o.jsx)("option",{value:"all",children:"All Types"}),["vacation","sick","personal","holiday","other leave type"].map((function(e){return(0,o.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)}))]})]}),(0,o.jsxs)("div",{className:"filter-group",children:[(0,o.jsx)("label",{children:"Status"}),(0,o.jsxs)("select",{value:D.status,onChange:function(e){return X("status",e.target.value)},className:"form-control",children:[(0,o.jsx)("option",{value:"all",children:"All Status"}),["pending","approved","declined"].map((function(e){return(0,o.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e)}))]})]})]}),(0,o.jsxs)("div",{className:"filters-actions",children:[(0,o.jsx)("button",{onClick:function(){A({team:"all",user:"all",leaveType:"all",status:"all"})},className:"btn btn-secondary",children:"Clear All"}),(0,o.jsx)("button",{onClick:function(){return P(!1)},className:"btn btn-primary",children:"Apply Filters"})]})]}),(0,o.jsx)("div",{className:"calendar-info",children:(0,o.jsxs)("p",{children:["ðŸ’¡ Click on dates to select them for your PTO request. Selected dates will be highlighted in blue.",Z()&&(0,o.jsx)("span",{children:" â€¢ Filters are active - some events may be hidden."})]})}),(0,o.jsxs)("div",{className:"calendar-grid",children:[(0,o.jsx)("div",{className:"calendar-days-header",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((function(e){return(0,o.jsx)("div",{className:"calendar-day-label",children:e},e)}))}),(0,o.jsx)("div",{className:"calendar-days-grid",children:ne.map((function(e,r){if(!e)return(0,o.jsx)("div",{className:"calendar-day calendar-day-empty"},r);var a,s=(a=e,u.includes($(a))),i=(function(e){var t=$(e);K().some((function(e){return t>=e.start_date&&t<=e.end_date}))}(e),function(e){var t=$(e);return K().filter((function(e){return t>=e.start_date&&t<=e.end_date}))}(e)),l=e.toDateString()===(new Date).toDateString(),d=e<new Date((new Date).setHours(0,0,0,0));return(0,o.jsx)("div",{onClick:function(){return function(e){var r=$(e),a=t.filter((function(e){return(e.requester_id===v.accountId||e.requester_email===v.emailAddress)&&r>=e.start_date&&r<=e.end_date})),s=a.find(te);s?U(s):a.length>0?F("You already have a PTO request this day and it is not editable."):!e||e<new Date((new Date).setHours(0,0,0,0))||n(e)}(e)},className:"calendar-day"+(d?" calendar-day-past":" calendar-day-active")+(s?" calendar-day-selected":"")+(l?" calendar-day-today":""),children:(0,o.jsxs)("div",{className:"calendar-day-inner",children:[(0,o.jsx)("span",{className:"calendar-day-number"+(l?" calendar-day-number-today":"")+(d?" calendar-day-number-past":""),children:e.getDate()}),(0,o.jsxs)("div",{className:"calendar-day-events",children:[i.slice(0,2).map((function(e,t){return(0,o.jsxs)("div",{className:"calendar-event"+("approved"===e.status?" calendar-event-approved":"")+("pending"===e.status?" calendar-event-pending":"")+("declined"===e.status?" calendar-event-declined":""),title:"".concat(e.requester_name,": ").concat(e.reason),children:[(0,o.jsx)("span",{children:(0,c.S0)(e.leave_type)}),(0,o.jsx)("span",{className:"calendar-event-name",children:e.requester_name})]},"".concat(e.id,"-").concat(t))})),i.length>2&&(0,o.jsxs)("button",{className:"calendar-event-more",onClick:function(t){t.stopPropagation(),Y(i),J(e),M(!0)},type:"button",tabIndex:0,"aria-label":"Show all events for ".concat(e.toDateString()),children:["+",i.length-2," more"]})]})]})},e.toISOString())}))})]}),(0,o.jsxs)("div",{className:"calendar-legend",children:[(0,o.jsxs)("div",{className:"calendar-legend-item",children:[(0,o.jsx)("span",{className:"calendar-legend-dot calendar-event-approved"}),(0,o.jsx)("span",{children:"Approved"})]}),(0,o.jsxs)("div",{className:"calendar-legend-item",children:[(0,o.jsx)("span",{className:"calendar-legend-dot calendar-event-pending"}),(0,o.jsx)("span",{children:"Pending"})]}),(0,o.jsxs)("div",{className:"calendar-legend-item",children:[(0,o.jsx)("span",{className:"calendar-legend-dot calendar-event-declined"}),(0,o.jsx)("span",{children:"Declined"})]}),(0,o.jsxs)("div",{className:"calendar-legend-item",children:[(0,o.jsx)("span",{className:"calendar-legend-dot calendar-day-selected"}),(0,o.jsx)("span",{children:"Selected"})]})]}),S&&(0,o.jsx)(i.A,{selectedDates:u.filter((function(e){return new Date(e)>=new Date((new Date).setHours(0,0,0,0))})),onClose:function(){return O(!1)},onSubmit:ee,currentUser:v,currentUserData:V,userManager:function(){if(null==V||!V.team_id)return null;var e=null==x?void 0:x.find((function(e){return e.id===V.team_id}));return null!=e&&e.manager?e.manager:null}(),allUsers:y,allTeams:x,allRequests:t,isAdmin:b}),I&&(0,o.jsx)(l.A,{request:I,onClose:function(){return U(null)},onSave:function(){U(null)},currentUser:v}),E&&(0,o.jsx)("div",{className:"modal-overlay",children:(0,o.jsxs)("div",{className:"modal-content",style:{maxWidth:400,margin:"auto",padding:24,textAlign:"center"},children:[(0,o.jsx)("div",{style:{marginBottom:16},children:(0,o.jsx)("span",{role:"img","aria-label":"info",style:{fontSize:32},children:"â„¹ï¸"})}),(0,o.jsx)("div",{style:{marginBottom:16},children:E}),(0,o.jsx)("button",{className:"btn btn-primary",onClick:function(){return F("")},children:"OK"})]})}),B&&(0,o.jsx)("div",{className:"modal-overlay",onClick:function(){return M(!1)},children:(0,o.jsxs)("div",{className:"modal-content",style:{maxWidth:400,margin:"auto",padding:24},onClick:function(e){return e.stopPropagation()},children:[(0,o.jsxs)("div",{style:{marginBottom:16,fontWeight:600,fontSize:18},children:["Events for ",H&&H.toLocaleDateString()]}),(0,o.jsx)("div",{style:{maxHeight:300,overflowY:"auto"},children:G.map((function(e,t){return(0,o.jsxs)("div",{className:"calendar-event"+("approved"===e.status?" calendar-event-approved":"")+("pending"===e.status?" calendar-event-pending":"")+("declined"===e.status?" calendar-event-declined":""),style:{marginBottom:6},children:[(0,o.jsx)("span",{children:(0,c.S0)(e.leave_type)}),(0,o.jsx)("span",{className:"calendar-event-name",children:e.requester_name}),(0,o.jsxs)("span",{style:{marginLeft:8,fontSize:12,color:"#888"},children:["(",e.status,")"]})]},e.id+"-"+t)}))}),(0,o.jsx)("button",{className:"btn btn-primary",style:{marginTop:16},onClick:function(){return M(!1)},children:"Close"})]})})]})}}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var s=n[e]={exports:{}};return t[e].call(s.exports,s,s.exports,r),s.exports}r.m=t,e=[],r.O=(t,n,a,s)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],a=e[u][1],s=e[u][2];for(var c=!0,l=0;l<n.length;l++)(!1&s||i>=s)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(c=!1,s<i&&(i=s));if(c){e.splice(u--,1);var o=a();void 0!==o&&(t=o)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[n,a,s]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={625:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var a,s,i=n[0],c=n[1],l=n[2],o=0;if(i.some((t=>0!==e[t]))){for(a in c)r.o(c,a)&&(r.m[a]=c[a]);if(l)var u=l(r)}for(t&&t(n);o<i.length;o++)s=i[o],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(u)},n=self.webpackChunkpto_request_app=self.webpackChunkpto_request_app||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=r.O(void 0,[96,357,286,64,656],(()=>r(6483)));a=r.O(a)})();