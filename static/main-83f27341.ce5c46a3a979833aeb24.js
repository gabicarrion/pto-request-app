(()=>{"use strict";var e,t={2898:(e,t,a)=>{a.d(t,{A:()=>b});var l=a(6540),n=a(2321),s=a(3893),r=a(2307),c=a(7235),i=a(4471),o=a(6316),m=a(8686),d=a(8309),u=a(3245),v=a(808),p=a(99);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){g(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var l=a.call(e,t||"default");if("object"!=typeof l)return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const b=e=>{let{currentUser:t,isAdmin:a,showNotification:E}=e;const[g,b]=(0,l.useState)(null),[N,f]=(0,l.useState)("current_month"),[h,_]=(0,l.useState)("all"),[w,D]=(0,l.useState)([]),[S,O]=(0,l.useState)([]),[k,q]=(0,l.useState)([]),[T,A]=(0,l.useState)(!0),[C,P]=(0,l.useState)({}),[j,R]=(0,l.useState)(!1),[U,I]=(0,l.useState)({preset:"current_month",from:"",to:""});(0,l.useEffect)((()=>{L()}),[t]),(0,l.useEffect)((()=>{g&&B()}),[g,N]);const L=async()=>{A(!0);try{const e=await(0,n.invoke)("getTeams");if(e.success){const l=e.data||[],n=a?l:l.filter((e=>{var a,l;return(null===(a=e.manager)||void 0===a?void 0:a.accountId)===t.accountId||(null===(l=e.manager)||void 0===l?void 0:l.jira_account_id)===t.accountId}));D(n),n.length>0&&!g&&b(n[0])}if(null!=t&&t.emailAddress){const e=await(0,n.invoke)("getPendingRequests",{managerEmail:t.emailAddress});e.success&&q(e.data||[])}}catch(e){E("Failed to load manager data","error")}finally{A(!1)}},B=async()=>{if(g)try{const e=await(0,n.invoke)("getTeamPTORequests",{teamId:g.id,dateRange:N});e.success&&O(e.data||[])}catch(e){console.error("Error loading team requests:",e),O([])}},F=async(e,t)=>{P((t=>y(y({},t),{},{[e]:!0})));try{const a=await(0,n.invoke)("updatePTORequest",{requestId:e,status:t});a.success?(E("Request ".concat(t.toLowerCase()," successfully")),q((t=>t.filter((t=>t.id!==e)))),B()):E(a.message||"Failed to ".concat(t.toLowerCase()," request"),"error")}catch(e){E("Failed to ".concat(t.toLowerCase()," request"),"error")}finally{P((t=>y(y({},t),{},{[e]:!1})))}},x=(0,l.useMemo)((()=>{let e=S;return"all"!==h&&(e=e.filter((e=>e.requester_id===h))),e.sort(((e,t)=>new Date(t.submitted_at)-new Date(e.submitted_at)))}),[S,h]),z=(0,l.useMemo)((()=>{const e=x;return{totalRequests:e.length,approvedRequests:e.filter((e=>"approved"===e.status)).length,pendingRequests:e.filter((e=>"pending"===e.status)).length,declinedRequests:e.filter((e=>"declined"===e.status)).length,totalDaysOff:e.filter((e=>"approved"===e.status)).reduce(((e,t)=>e+(t.total_days||0)),0),ptoByLeaveType:e.filter((e=>"approved"===e.status)).reduce(((e,t)=>{const a=t.leave_type||"unknown";return e[a]=(e[a]||0)+(t.total_days||0),e}),{}),ptoByMember:e.filter((e=>"approved"===e.status)).reduce(((e,t)=>{const a=t.requester_name||"Unknown";return e[a]=(e[a]||0)+(t.total_days||0),e}),{}),ptoByWeekday:e.filter((e=>"approved"===e.status)).reduce(((e,t)=>{const a=new Date(t.start_date),l=new Date(t.end_date);for(let t=new Date(a);t<=l;t.setDate(t.getDate()+1)){const a=t.toLocaleDateString("en-US",{weekday:"long"});e[a]=(e[a]||0)+1}return e}),{})}}),[x]),M=(0,l.useMemo)((()=>{const e=new Date;return S.filter((t=>"approved"===t.status&&new Date(t.start_date)>=e)).sort(((e,t)=>new Date(e.start_date)-new Date(t.start_date))).slice(0,5)}),[S]),Y=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),W=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return T?l.createElement("div",{className:"manager-loading"},l.createElement("div",{className:"loading-spinner"}),l.createElement("p",null,"Loading manager dashboard...")):0===w.length?l.createElement("div",{className:"manager-empty"},l.createElement(s.A,{size:48}),l.createElement("h3",null,"No Teams to Manage"),l.createElement("p",null,"You don't have any teams assigned to manage. Contact your administrator if this is incorrect.")):l.createElement("div",{className:"manager-dashboard"},l.createElement("div",{className:"manager-header"},l.createElement("div",{className:"manager-title-section"},l.createElement("h2",null,"Manager Dashboard"),l.createElement("p",null,"Manage team PTO requests and view analytics")),l.createElement("div",{className:"manager-controls"},l.createElement("select",{value:(null==g?void 0:g.id)||"",onChange:e=>b(w.find((t=>t.id===e.target.value))),className:"form-control"},w.map((e=>{var t;return l.createElement("option",{key:e.id,value:e.id},e.name," (",(null===(t=e.members)||void 0===t?void 0:t.length)||0," members)")}))),l.createElement(p.A,{value:U,onChange:I}))),l.createElement("div",{className:"manager-stats-grid"},l.createElement("div",{className:"stat-card stat-blue"},l.createElement("div",{className:"stat-icon"},l.createElement(r.A,{size:24})),l.createElement("div",{className:"stat-content"},l.createElement("div",{className:"stat-value"},z.totalRequests),l.createElement("div",{className:"stat-label"},"Total Requests"))),l.createElement("div",{className:"stat-card stat-yellow"},l.createElement("div",{className:"stat-icon"},l.createElement(c.A,{size:24})),l.createElement("div",{className:"stat-content"},l.createElement("div",{className:"stat-value"},k.length),l.createElement("div",{className:"stat-label"},"Pending Approval"))),l.createElement("div",{className:"stat-card stat-green"},l.createElement("div",{className:"stat-icon"},l.createElement(i.A,{size:24})),l.createElement("div",{className:"stat-content"},l.createElement("div",{className:"stat-value"},z.approvedRequests),l.createElement("div",{className:"stat-label"},"Approved"))),l.createElement("div",{className:"stat-card stat-purple"},l.createElement("div",{className:"stat-icon"},l.createElement(o.A,{size:24})),l.createElement("div",{className:"stat-content"},l.createElement("div",{className:"stat-value"},z.totalDaysOff),l.createElement("div",{className:"stat-label"},"Days Off")))),k.length>0&&l.createElement("div",{className:"card pending-approvals-card"},l.createElement("div",{className:"card-header"},l.createElement("h3",null,"Pending Approvals"),l.createElement("div",{className:"pending-count"},k.length," requests")),l.createElement("div",{className:"card-body"},l.createElement("div",{className:"pending-requests-list"},k.slice(0,5).map((e=>{var t;return l.createElement("div",{key:e.id,className:"pending-request-item"},l.createElement("div",{className:"request-info"},l.createElement("div",{className:"request-user"},l.createElement("div",{className:"user-avatar"},(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||l.createElement(m.A,{size:16})),l.createElement("div",{className:"user-details"},l.createElement("div",{className:"user-name"},e.requester_name),l.createElement("div",{className:"request-details"},(0,v.S0)(e.leave_type)," ",e.leave_type," â€¢ ",e.total_days," days"))),l.createElement("div",{className:"request-dates"},l.createElement("div",null,Y(e.start_date)," - ",Y(e.end_date)),l.createElement("div",{className:"submitted-date"},"Submitted ",W(e.submitted_at)))),l.createElement("div",{className:"request-actions-inline"},l.createElement("div",{className:"action-buttons-inline"},l.createElement("button",{onClick:()=>F(e.id,"approved"),disabled:C[e.id],className:"btn btn-sm btn-success"},C[e.id]?"...":"Approve"),l.createElement("button",{onClick:()=>F(e.id,"declined"),disabled:C[e.id],className:"btn btn-sm btn-danger"},C[e.id]?"...":"Decline"))))}))),k.length>5&&l.createElement("div",{className:"show-more"},l.createElement("p",{className:"text-sm text-gray-600"},k.length-5," more pending requests...")))),l.createElement("div",{className:"manager-content-grid"},l.createElement("div",{className:"card team-requests-card"},l.createElement("div",{className:"card-header"},l.createElement("h3",null,"Team Requests"),l.createElement("div",{className:"team-requests-controls"},l.createElement("select",{value:h,onChange:e=>_(e.target.value),className:"form-control"},l.createElement("option",{value:"all"},"All Members"),w.map((e=>l.createElement("option",{key:e.id,value:e.id},e.name)))),l.createElement("div",{className:"action-buttons-group"},l.createElement("button",{onClick:async()=>{if(g)try{const e=x.map((e=>({Date:(new Date).toLocaleDateString(),Manager:t.displayName,Team:g.name,Department:g.department||"",User:e.requester_name,"Start Date":e.start_date,"End Date":e.end_date,Period:"".concat(e.total_days," days"),"Leave Type":e.leave_type,Reason:e.reason||"",Status:e.status}))),a=Object.keys(e[0]||{}),l=[a.join(","),...e.map((e=>a.map((t=>'"'.concat((e[t]||"").toString().replace(/"/g,'""'),'"'))).join(",")))].join("\n"),n=new Blob([l],{type:"text/csv"}),s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download="team-pto-report-".concat(g.name,"-").concat(N,"-").concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s),E("Report downloaded successfully!")}catch(e){E("Failed to generate report","error")}},className:"btn btn-primary"},l.createElement(d.A,{size:16}),"Generate Report")))),l.createElement("div",{className:"card-body"},0===x.length?l.createElement("div",{className:"empty-state"},l.createElement(s.A,{size:48}),l.createElement("h4",null,"No Requests Found"),l.createElement("p",null,"No PTO requests found for the selected criteria.")):l.createElement("div",{className:"team-requests-list"},x.map((e=>{var t;return l.createElement("div",{key:e.id,className:"team-request-item"},l.createElement("div",{className:"request-header-row"},l.createElement("div",{className:"request-user-info"},l.createElement("div",{className:"user-avatar"},(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||"?"),l.createElement("div",{className:"user-details"},l.createElement("div",{className:"user-name"},e.requester_name),l.createElement("div",{className:"request-type"},(0,v.S0)(e.leave_type)," ",e.leave_type))),l.createElement("div",{className:"request-details-summary"},l.createElement("div",{className:"date-range"},Y(e.start_date)," - ",Y(e.end_date)),l.createElement("div",{className:"duration"},e.total_days," days")),l.createElement("div",{className:"request-status-section"},l.createElement(u.A,{status:e.status}),l.createElement("div",{className:"submitted-date"},W(e.submitted_at)))),e.reason&&l.createElement("div",{className:"request-reason-row"},l.createElement("span",{className:"reason-label"},"Reason:"),l.createElement("span",{className:"reason-text"},e.reason)))}))))),l.createElement("div",{className:"card upcoming-pto-card"},l.createElement("div",{className:"card-header"},l.createElement("h3",null,"Upcoming PTO")),l.createElement("div",{className:"card-body"},0===M.length?l.createElement("div",{className:"empty-state-small"},l.createElement(r.A,{size:32}),l.createElement("p",null,"No upcoming PTO scheduled")):l.createElement("div",{className:"upcoming-pto-list"},M.map((e=>{var t;return l.createElement("div",{key:e.id,className:"upcoming-pto-item"},l.createElement("div",{className:"pto-user"},l.createElement("div",{className:"user-avatar-small"},(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||"?"),l.createElement("div",{className:"user-info-small"},l.createElement("div",{className:"user-name-small"},e.requester_name),l.createElement("div",{className:"pto-type-small"},(0,v.S0)(e.leave_type)," ",e.leave_type))),l.createElement("div",{className:"pto-dates-small"},l.createElement("div",{className:"date-range-small"},Y(e.start_date)," - ",Y(e.end_date)),l.createElement("div",{className:"duration-small"},e.total_days," days")))}))))),l.createElement("div",{className:"card analytics-card"},l.createElement("div",{className:"card-header"},l.createElement("h3",null,"Team Analytics"),l.createElement("div",{className:"analytics-period"},N.replace("_"," ").replace(/\b\w/g,(e=>e.toUpperCase())))),l.createElement("div",{className:"card-body"},Object.keys(z.ptoByLeaveType).length>0&&l.createElement("div",{className:"analytics-section"},l.createElement("h4",null,"PTO by Leave Type"),l.createElement("div",{className:"analytics-items"},Object.entries(z.ptoByLeaveType).sort(((e,t)=>{let[,a]=e,[,l]=t;return l-a})).map((e=>{let[t,a]=e;return l.createElement("div",{key:t,className:"analytics-item"},l.createElement("span",{className:"item-icon"},(0,v.S0)(t)),l.createElement("span",{className:"item-label"},t.charAt(0).toUpperCase()+t.slice(1)),l.createElement("span",{className:"item-value"},a," days"))})))),Object.keys(z.ptoByMember).length>0&&l.createElement("div",{className:"analytics-section"},l.createElement("h4",null,"PTO by Team Member"),l.createElement("div",{className:"analytics-items"},Object.entries(z.ptoByMember).sort(((e,t)=>{let[,a]=e,[,l]=t;return l-a})).slice(0,5).map((e=>{let[t,a]=e;return l.createElement("div",{key:t,className:"analytics-item"},l.createElement("span",{className:"item-icon"},"ðŸ‘¤"),l.createElement("span",{className:"item-label"},t),l.createElement("span",{className:"item-value"},a," days"))})))),Object.keys(z.ptoByWeekday).length>0&&l.createElement("div",{className:"analytics-section"},l.createElement("h4",null,"Most Popular Days Off"),l.createElement("div",{className:"analytics-items"},Object.entries(z.ptoByWeekday).sort(((e,t)=>{let[,a]=e,[,l]=t;return l-a})).map((e=>{let[t,a]=e;return l.createElement("div",{key:t,className:"analytics-item"},l.createElement("span",{className:"item-icon"},"ðŸ“…"),l.createElement("span",{className:"item-label"},t),l.createElement("span",{className:"item-value"},a," days"))}))))))))}},3029:(e,t,a)=>{a.d(t,{A:()=>b});var l=a(6540),n=a(2307),s=a(5627),r=a(6316),c=a(4945),i=a(8188),o=a(2708),m=a(3245),d=a(808),u=a(99),v=a(9618);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var l=a.call(e,t||"default");if("object"!=typeof l)return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const g=[{key:"vacation",label:"Vacation",color:"stat-blue"},{key:"holiday",label:"Holiday",color:"stat-yellow"},{key:"personal",label:"Personal",color:"stat-purple"}],b=e=>{let{requests:t,currentUser:a,onEditRequest:p,onCancelRequest:y}=e;const[b,N]=(0,l.useState)("all"),[f,h]=(0,l.useState)("all"),[_,w]=(0,l.useState)(!1),[D,S]=(0,l.useState)({preset:"all",from:"",to:""}),[O,k]=(0,l.useState)(null),[q,T]=(0,l.useState)(null),[A,C]=(0,l.useState)(!0),[P,j]=(0,l.useState)(null);(0,l.useEffect)((()=>{null!=a&&a.accountId&&async function(){C(!0),j(null);try{const e=await window.forgeResolver.invoke("getUserPTOBalances",{accountId:a.accountId});e.success?T(e.data):j(e.message||"Failed to fetch PTO balances")}catch(e){j(e.message||"Failed to fetch PTO balances")}finally{C(!1)}}()}),[null==a?void 0:a.accountId]);const R=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),U=e=>{if(e.requester_id!==a.accountId)return!1;if("pending"===e.status)return!0;if("approved"===e.status){const t=new Date;t.setHours(0,0,0,0);return new Date(e.start_date)>=t}return!1},I=(0,l.useMemo)((()=>{let e=Array.isArray(t)?[...t]:[];if(D&&"all"!==D.preset){let t,a;const l=new Date;switch(D.preset){case"current_year":t=new Date(l.getFullYear(),0,1),a=new Date(l.getFullYear(),11,31);break;case"last_90_days":t=new Date(l),t.setDate(l.getDate()-90),a=l;break;case"last_30_days":t=new Date(l),t.setDate(l.getDate()-30),a=l;break;case"custom":t=D.from?new Date(D.from):null,a=D.to?new Date(D.to):null;break;default:t=null,a=null}e=e.filter((e=>{const l=new Date(e.start_date),n=new Date(e.end_date);return"custom"===D.preset?!(t&&n<t)&&!(a&&l>a):(!t||n>=t)&&(!a||l<=a)}))}return f&&"all"!==f&&(e=e.filter((e=>e.status===f))),e}),[t,D,f]),L=(0,l.useMemo)((()=>[...I].sort(((e,t)=>new Date(t.start_date)-new Date(e.start_date)))),[I]),B=(0,l.useMemo)((()=>{const e=Array.isArray(I)?I:[];return{totalRequests:e.length,pendingRequests:e.filter((e=>"pending"===e.status)).length,approvedRequests:e.filter((e=>"approved"===e.status)).length,declinedRequests:e.filter((e=>"declined"===e.status)).length,totalDays:e.filter((e=>"approved"===e.status)).reduce(((e,t)=>e+(t.total_days||0)),0),ptoByType:e.filter((e=>"approved"===e.status)).reduce(((e,t)=>{const a=t.leave_type||"unknown";return e[a]=(e[a]||0)+(t.total_days||0),e}),{})}}),[I]),F=(0,l.useMemo)((()=>(Array.isArray(t)?t:[]).filter((e=>"approved"===e.status))),[t]),x=["vacation","holiday","personal"].reduce(((e,t)=>(e[t]=F.filter((e=>e.leave_type===t)).reduce(((e,t)=>e+(t.total_days||0)),0),e)),{}),z=(Object.values(x).reduce(((e,t)=>e+t),0),F.filter((e=>"sick"===e.leave_type)).reduce(((e,t)=>e+(t.total_days||0)),0),(0,l.useMemo)((()=>{const e=[];return L.forEach((t=>{const a=new Date(t.start_date),l=new Date(t.end_date);for(let n=new Date(a);n<=l;n.setDate(n.getDate()+1)){const a=new Date(n);e.push(E(E({},t),{},{scheduled_date:new Date(a)}))}})),e.sort(((e,t)=>t.scheduled_date-e.scheduled_date))}),[L])),M=(0,l.useMemo)((()=>{const e=["vacation","holiday","personal"].reduce(((e,t)=>(e[t]=z.filter((e=>e.leave_type===t)).length,e)),{});return{daysOffBreakdown:e,totalDaysOff:Object.values(e).reduce(((e,t)=>e+t),0),sickDays:z.filter((e=>"sick"===e.leave_type)).length,ptoByType:z.reduce(((e,t)=>(e[t.leave_type]=(e[t.leave_type]||0)+1,e)),{}),totalScheduled:z.length}}),[z]);return 0===t.length?l.createElement("div",{className:"requests-container"},l.createElement("div",{className:"card requests-card"},l.createElement("h2",{className:"card-title"},"My PTO Requests"),l.createElement("div",{className:"requests-empty"},l.createElement(n.A,{size:48,className:"requests-empty-icon"}),l.createElement("h3",{className:"requests-empty-title"},"No PTO requests found"),l.createElement("p",null,"You haven't submitted any PTO requests yet."),l.createElement("p",{className:"requests-empty-desc"},"Go to the Calendar tab to submit your first request!")))):l.createElement("div",{className:"requests-container"},l.createElement("div",{className:"requests-header-section"},l.createElement("div",{className:"requests-page-header"},l.createElement("h2",{className:"page-title"},"My PTO Requests"),l.createElement("div",{className:"requests-counts-header"},l.createElement("span",{className:"requests-count total"},"Total: ",t.length),l.createElement("span",{className:"requests-count pending"},"Pending: ",B.pendingRequests),l.createElement("span",{className:"requests-count approved"},"Approved: ",B.approvedRequests)),l.createElement("div",{className:"requests-page-controls"},l.createElement("button",{onClick:()=>w(!_),className:"btn btn-secondary ".concat(_?"active":"")},l.createElement(s.A,{size:16}),"Filters"))),_&&l.createElement("div",{className:"filters-panel"},l.createElement("div",{className:"filters-row"},l.createElement("div",{className:"filter-group"},l.createElement("label",null,"Date Range"),l.createElement(u.A,{value:D,onChange:S})),l.createElement("div",{className:"filter-group"},l.createElement("label",null,"Status"),l.createElement("select",{value:f,onChange:e=>h(e.target.value),className:"form-control"},l.createElement("option",{value:"all"},"All Status"),l.createElement("option",{value:"pending"},"Pending"),l.createElement("option",{value:"approved"},"Approved"),l.createElement("option",{value:"declined"},"Declined"))))),l.createElement("div",{className:"summary-cards-container pto-balances-cards"},g.map((e=>{var t,a;return l.createElement("div",{key:e.key,className:"summary-card ".concat(e.color)},l.createElement("div",{className:"summary-icon"},(0,d.S0)(e.key)),l.createElement("div",{className:"summary-content"},l.createElement("div",{className:"summary-value"},A?"...":null!==(t=null==q||null===(a=q[e.key])||void 0===a?void 0:a.remaining_days)&&void 0!==t?t:"-"),l.createElement("div",{className:"summary-label"},"Available ",e.label," Days")))})),l.createElement("div",{className:"summary-card stat-green"},l.createElement("div",{className:"summary-icon"},l.createElement(r.A,{size:20})),l.createElement("div",{className:"summary-content"},l.createElement("div",{className:"summary-value"},M.totalDaysOff),l.createElement("div",{className:"summary-label"},"Days Off"),l.createElement("div",{className:"summary-breakdown"},Object.keys(M.daysOffBreakdown).map((e=>l.createElement("div",{key:e,className:"breakdown-row"},l.createElement("span",{className:"breakdown-label"},e.charAt(0).toUpperCase()+e.slice(1),":"),l.createElement("span",{className:"breakdown-value"},M.daysOffBreakdown[e]))))))),l.createElement("div",{className:"summary-card stat-red"},l.createElement("div",{className:"summary-icon"},l.createElement(c.A,{size:20})),l.createElement("div",{className:"summary-content"},l.createElement("div",{className:"summary-value"},M.sickDays),l.createElement("div",{className:"summary-label"},"Sick Days")))),Object.keys(M.ptoByType||{}).length>0&&l.createElement("div",{className:"card pto-breakdown-card restyled"},l.createElement("div",{className:"card-header"},l.createElement("h3",null,"PTO Breakdown by Leave Type")),l.createElement("div",{className:"card-body"},l.createElement("div",{className:"pto-breakdown-flex"},Object.entries(M.ptoByType||{}).map((e=>{let[t,a]=e;return l.createElement("div",{key:t,className:"pto-breakdown-pill pill-".concat(t)},l.createElement("span",{className:"pill-emoji"},(0,d.S0)(t)),l.createElement("span",{className:"pill-type"},t.charAt(0).toUpperCase()+t.slice(1)),l.createElement("span",{className:"pill-days"},a," ",1===a?"day":"days"),l.createElement("span",{className:"pill-percent"},M.totalScheduled>0?(a/M.totalScheduled*100).toFixed(1):"0.0","%"))})))))),l.createElement("div",{className:"requests-content"},l.createElement("div",{className:"card requests-list-card"},l.createElement("div",{className:"card-header"},l.createElement("h3",null,"Request History"),l.createElement("div",{className:"requests-count"},I.length," ",1===I.length?"request":"requests")),l.createElement("div",{className:"card-body"},0===I.length?l.createElement("div",{className:"no-results"},l.createElement("p",null,"No requests found for the selected filters.")):l.createElement("div",{className:"requests-table-wrapper"},l.createElement("table",{className:"requests-table"},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",null,"Type"),l.createElement("th",null,"Date"),l.createElement("th",null,"Status"),l.createElement("th",null,"Reason"),l.createElement("th",null,"Submitted"),l.createElement("th",null,"Reviewed"),l.createElement("th",null,"Actions"))),l.createElement("tbody",null,z.map(((e,t)=>l.createElement("tr",{key:e.id+"-"+e.scheduled_date.toISOString(),className:"request-row"},l.createElement("td",null,l.createElement("span",{className:"request-emoji"},(0,d.S0)(e.leave_type)),e.leave_type.charAt(0).toUpperCase()+e.leave_type.slice(1)),l.createElement("td",null,R(e.scheduled_date)),l.createElement("td",null,l.createElement(m.A,{status:e.status})),l.createElement("td",null,e.reason||"-"),l.createElement("td",null,R(e.submitted_at)),l.createElement("td",null,"pending"!==e.status&&e.reviewed_at?R(e.reviewed_at):"-"),l.createElement("td",null,U(e)&&l.createElement("button",{onClick:()=>{var t;U(t=e)&&k(t)},className:"btn btn-sm btn-secondary",title:"Edit Request"},l.createElement(i.A,{size:14})),(e=>{if(e.requester_id!==a.accountId)return!1;if("approved"===e.status){const t=new Date(e.end_date),a=new Date;return a.setHours(0,0,0,0),t>=a}return"pending"===e.status})(e)&&l.createElement("button",{onClick:()=>y&&y(e),className:"btn btn-sm btn-danger",title:"Cancel Request"},l.createElement(o.A,{size:14})))))))))))),O&&l.createElement(v.A,{request:O,onClose:()=>k(null),onSave:e=>{p(e),k(null)},currentUser:a}))}},7892:(e,t,a)=>{a.d(t,{A:()=>S});var l=a(6540),n=a(2492),s=a(3893),r=a(4945),c=a(2762),i=a(7623),o=a(2307),m=a(8309),d=a(964),u=a(4796),v=a(418),p=a(8697),E=a(2321),y=a(5143),g=a(4506),b=a(5839),N=a(4143),f=a(2435);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){w(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var l=a.call(e,t||"default");if("object"!=typeof l)return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function D(e){let{title:t,children:a,onClose:n}=e;return l.createElement("div",{className:"modal-overlay"},l.createElement("div",{className:"modal-content admin-modal"},l.createElement("div",{className:"modal-header"},l.createElement("h3",null,t),l.createElement("button",{className:"modal-close",onClick:n},l.createElement(p.A,{size:24}))),l.createElement("div",{className:"modal-body"},a)))}const S=e=>{let{currentUser:t,showNotification:a}=e;const[p,h]=(0,l.useState)("overview"),[w,S]=(0,l.useState)(!1),[O,k]=(0,l.useState)([]),[q,T]=(0,l.useState)([]),[A,C]=(0,l.useState)([]),[P,j]=(0,l.useState)([]),[R,U]=(0,l.useState)([]),[I,L]=(0,l.useState)(!1),[B,F]=(0,l.useState)(!1),[x,z]=(0,l.useState)(!1),[M,Y]=(0,l.useState)(!1),[W,H]=(0,l.useState)(!1),[G,J]=(0,l.useState)(!1),[V,K]=(0,l.useState)(!1),[Q,X]=(0,l.useState)({startDate:"",endDate:"",requesterId:"",managerId:"",leaveType:""}),[Z,$]=(0,l.useState)({scope:"company",teamId:"",userId:"",startDate:"",endDate:"",status:"all"}),[ee,te]=(0,l.useState)(Date.now()),[ae,le]=(0,l.useState)({totalAdmins:0,totalTeams:0,totalUsers:0,totalRequests:0,approvedRequests:0,pendingRequests:0,declinedRequests:0}),ne=(0,l.useRef)(),[se,re]=(0,l.useState)("actions"),[ce,ie]=(0,l.useState)([]),[oe,me]=(0,l.useState)(!1),[de,ue]=(0,l.useState)((new Date).getFullYear()),[ve,pe]=(0,l.useState)({}),[Ee,ye]=(0,l.useState)({user:"",leaveType:"",year:""}),[ge,be]=(0,l.useState)(""),[Ne,fe]=(0,l.useState)(!1),[he,_e]=(0,l.useState)({user_id:"",leave_type:"",allocated_days:0,year:(new Date).getFullYear()}),[we,De]=(0,l.useState)("users");(0,l.useEffect)((()=>{Se(),Ae()}),[]);const Se=async()=>{S(!0);try{await Promise.all([Oe(),ke(),qe(),Te()])}catch(e){a("Failed to load admin data","error")}finally{S(!1)}},Oe=async()=>{try{const e=await(0,E.invoke)("getAdminUsers");if(e.success){const t=e.data||[],a=await(0,E.invoke)("getUsers"),l=a.success&&a.data||[],n=t.map((e=>l.find((t=>t.jira_account_id===e.accountId||t.email_address===e.emailAddress))||e));k(n)}}catch(e){console.error("Failed to load admin users:",e)}},ke=async()=>{try{const e=await(0,E.invoke)("getTeams");e.success&&T(e.data||[])}catch(e){}},qe=async()=>{try{const e=await(0,E.invoke)("getUsers");e.success&&C(e.data||[])}catch(e){}},Te=async()=>{try{const e=await(0,E.invoke)("getPTORequests");e.success&&j(e.data||[])}catch(e){}},Ae=async()=>{try{const e=await(0,E.invoke)("getInternalJiraUsers",{startAt:0,maxResults:50});e.success&&U(e.data.users||[])}catch(e){console.error("Failed to load Jira users:",e)}},Ce=()=>{const e=A.map((e=>e.jira_account_id||e.email_address)).filter(Boolean);return R.filter((t=>!e.includes(t.accountId)&&!e.includes(t.emailAddress)))};(0,l.useEffect)((()=>{var e;le({totalAdmins:O.length,totalTeams:q.length,totalUsers:A.length,totalRequests:P.length,pendingRequests:P.filter((e=>"pending"===e.status)).length,approvedRequests:P.filter((e=>"approved"===e.status)).length,declinedRequests:P.filter((e=>"declined"===e.status)).length,usersNotInSystem:(null===(e=Ce())||void 0===e?void 0:e.length)||0})}),[O,q,A,P]);const Pe={requestsByWeekday:P.reduce(((e,t)=>{const a=new Date(t.start_date).toLocaleDateString("en-US",{weekday:"long"});return e[a]=(e[a]||0)+1,e}),{}),requestsByLeaveType:P.reduce(((e,t)=>(e[t.leave_type]=(e[t.leave_type]||0)+1,e)),{}),requestsByTeam:P.reduce(((e,t)=>{const a=A.find((e=>e.jira_account_id===t.requester_id||e.email_address===t.requester_email)),l=a?q.find((e=>e.id===a.team_id)):null,n=(null==l?void 0:l.name)||"Unassigned";return e[n]=(e[n]||0)+1,e}),{})};function je(e,t){if(!Array.isArray(e)||0===e.length)return;const a=Object.keys(e[0]),l=[a.join(",")];for(const t of e)l.push(a.map((e=>{var a;return'"'+(null!==(a=t[e])&&void 0!==a?a:"").toString().replace(/"/g,'""')+'"'})).join(","));const n=l.join("\n"),s=new Blob([n],{type:"text/csv"}),r=URL.createObjectURL(s),c=document.createElement("a");c.href=r,c.download=t,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(r)}const Re=async()=>{me(!0);try{const e=await(0,E.invoke)("getAllPTOBalances",{year:de});ie(e.success?e.data:[])}catch(e){a("Failed to load PTO balances","error")}finally{me(!1)}};(0,l.useEffect)((()=>{"pto-balances"===se&&Re()}),[se,de]);const Ue=ce.filter((e=>{var t,a;const l=A.find((t=>t.id===e.user_id)),n=!Ee.user||e.user_id===Ee.user,s=!Ee.leaveType||e.leave_type===Ee.leaveType,r=!Ee.year||String(e.year)===String(Ee.year),c=!ge||l&&((null===(t=l.display_name)||void 0===t?void 0:t.toLowerCase().includes(ge.toLowerCase()))||(null===(a=l.email_address)||void 0===a?void 0:a.toLowerCase().includes(ge.toLowerCase())));return n&&s&&r&&c})),Ie=Array.from(new Set(ce.map((e=>e.leave_type)))),Le=Array.from(new Set(ce.map((e=>e.year)))),Be=Ue.reduce(((e,t)=>(e.allocated+=t.allocated_days,e.used+=t.used_days,e.remaining+=t.allocated_days-t.used_days,e)),{allocated:0,used:0,remaining:0});return l.createElement("div",{className:"admin-dashboard"},l.createElement("div",{className:"admin-tabs"},l.createElement("button",{className:"admin-tab ".concat("overview"===p?"active":""),onClick:()=>h("overview")},l.createElement(n.A,{size:16}),"Overview"),l.createElement("button",{className:"admin-tab ".concat("users"===p?"active":""),onClick:()=>h("users")},l.createElement(s.A,{size:16}),"Users"),l.createElement("button",{className:"admin-tab ".concat("analytics"===p?"active":""),onClick:()=>h("analytics")},l.createElement(r.A,{size:16}),"Analytics"),l.createElement("button",{className:"admin-tab".concat("actions"===se?" active":""),onClick:()=>re("actions")},"Actions"),l.createElement("button",{className:"admin-tab".concat("pto-balances"===se?" active":""),onClick:()=>re("pto-balances")},"PTO Balances")),"overview"===p&&l.createElement("div",{className:"admin-section"},l.createElement("div",{className:"admin-stats-grid"},l.createElement("div",{className:"admin-stat-card admin-stat-purple"},l.createElement("div",{className:"stat-icon"},l.createElement(n.A,{size:24})),l.createElement("div",{className:"stat-content"},l.createElement("div",{className:"stat-value"},ae.totalAdmins),l.createElement("div",{className:"stat-label"},"Admin Users"))),l.createElement("div",{className:"admin-stat-card admin-stat-blue"},l.createElement("div",{className:"stat-icon"},l.createElement(c.A,{size:24})),l.createElement("div",{className:"stat-content"},l.createElement("div",{className:"stat-value"},ae.totalTeams),l.createElement("div",{className:"stat-label"},"Teams"))),l.createElement("div",{className:"admin-stat-card admin-stat-emerald"},l.createElement("div",{className:"stat-icon"},l.createElement(i.A,{size:24})),l.createElement("div",{className:"stat-content"},l.createElement("div",{className:"stat-value"},ae.totalUsers),l.createElement("div",{className:"stat-label"},"Users"))),l.createElement("div",{className:"admin-stat-card admin-stat-indigo"},l.createElement("div",{className:"stat-icon"},l.createElement(o.A,{size:24})),l.createElement("div",{className:"stat-content"},l.createElement("div",{className:"stat-value"},ae.totalRequests),l.createElement("div",{className:"stat-label"},"Total Requests"),l.createElement("div",{className:"stat-breakdown"},l.createElement("span",{className:"breakdown-item green"},ae.approvedRequests," approved"),l.createElement("span",{className:"breakdown-item orange"},ae.pendingRequests," pending"),l.createElement("span",{className:"breakdown-item red"},ae.declinedRequests," declined"))))),l.createElement("div",{className:"card admin-actions-card"},l.createElement("div",{className:"card-header"},l.createElement("h3",null,"Actions")),l.createElement("div",{className:"card-body"},l.createElement("div",{className:"admin-actions-grid"},l.createElement("button",{onClick:()=>{te(Date.now()),z(!0)},className:"admin-action-btn"},l.createElement("div",{className:"action-icon bg-green"},l.createElement(o.A,{size:20})),l.createElement("div",{className:"action-content"},l.createElement("div",{className:"action-title"},"Create PTO"),l.createElement("div",{className:"action-desc"},"Create PTO requests for users"))),l.createElement("button",{onClick:()=>Y(!0),className:"admin-action-btn"},l.createElement("div",{className:"action-icon bg-blue"},l.createElement(m.A,{size:20})),l.createElement("div",{className:"action-content"},l.createElement("div",{className:"action-title"},"Generate Reports"),l.createElement("div",{className:"action-desc"},"Export detailed PTO reports"))),l.createElement("button",{onClick:()=>F(!0),className:"admin-action-btn"},l.createElement("div",{className:"action-icon bg-indigo"},l.createElement(d.A,{size:20})),l.createElement("div",{className:"action-content"},l.createElement("div",{className:"action-title"},"Manage Teams & Users"),l.createElement("div",{className:"action-desc"},"Advanced team and user management"))),l.createElement("button",{onClick:async()=>{try{const e=await(0,E.invoke)("debugStorage");e.success&&e.data?(e.data.users&&je(e.data.users,"users.csv"),e.data.teams&&je(e.data.teams,"teams.csv"),e.data.admins&&je(e.data.admins.map((e=>({accountId:e}))),"admins.csv"),e.data.pto_requests&&je(e.data.pto_requests,"pto_requests.csv"),e.data.pto_daily_schedules&&je(e.data.pto_daily_schedules,"pto_daily_schedules.csv"),a("Database exported as CSV files!")):a("Failed to export database","error")}catch(e){a("Failed to export database","error")}},className:"admin-action-btn"},l.createElement("div",{className:"action-icon bg-yellow"},l.createElement(m.A,{size:20})),l.createElement("div",{className:"action-content"},l.createElement("div",{className:"action-title"},"Export Database"),l.createElement("div",{className:"action-desc"},"Download all tables as CSV"))),l.createElement("button",{onClick:()=>H(!0),className:"admin-action-btn"},l.createElement("div",{className:"action-icon bg-purple"},l.createElement(u.A,{size:20})),l.createElement("div",{className:"action-content"},l.createElement("div",{className:"action-title"},"Import PTOs"),l.createElement("div",{className:"action-desc"},"Import PTO daily schedules from CSV"))),l.createElement("button",{onClick:()=>J(!0),className:"admin-action-btn"},l.createElement("div",{className:"action-icon bg-pink"},l.createElement(m.A,{size:20})),l.createElement("div",{className:"action-content"},l.createElement("div",{className:"action-title"},"Export Daily Schedules"),l.createElement("div",{className:"action-desc"},"Export PTO daily schedules"))),l.createElement("button",{onClick:async()=>{if(window.confirm("This will check all teams and fix any manager fields that are objects. Proceed?")){S(!0);try{const e=await(0,E.invoke)("getTeams");if(!e.success)throw new Error("Failed to fetch teams");const t=e.data||[];let l=0;for(const e of t)if(e.manager&&"object"==typeof e.manager){const t=e.manager.jira_account_id||e.manager.accountId||e.manager.id||null;t&&(await(0,E.invoke)("updateTeam",_(_({},e),{},{manager:t})),l++)}a("âœ… Fixed ".concat(l," teams with object managers.")),ke()}catch(e){a("Failed to fix teams: "+e.message,"error")}finally{S(!1)}}},className:"admin-action-btn"},l.createElement("div",{className:"action-icon bg-orange"},l.createElement(v.A,{size:20})),l.createElement("div",{className:"action-content"},l.createElement("div",{className:"action-title"},"Fix Team Managers"),l.createElement("div",{className:"action-desc"},"Convert all manager fields to IDs"))),l.createElement("button",{onClick:async()=>{if(window.confirm("âš ï¸ WARNING: This will DELETE ALL PTO data (requests + daily schedules). This cannot be undone. Are you sure?")&&window.confirm("Final confirmation: Delete ALL PTO data? Type YES to confirm.")){S(!0);try{const e=await(0,E.invoke)("cleanupPTODatabase",{adminId:t.accountId,confirmDelete:!0});e.success?(a("âœ… Cleanup complete: ".concat(e.data.deletedCount," items removed")),Se()):a(e.message||"Cleanup failed","error")}catch(e){a("Cleanup failed: "+e.message,"error")}finally{S(!1)}}},className:"admin-action-btn",disabled:w},l.createElement("div",{className:"action-icon bg-red"},l.createElement(v.A,{size:20})),l.createElement("div",{className:"action-content"},l.createElement("div",{className:"action-title"},"ðŸ—‘ï¸ Cleanup PTO Database"),l.createElement("div",{className:"action-desc"},"Delete ALL PTO requests and schedules"))),l.createElement("button",{onClick:()=>K(!0),className:"admin-action-btn"},l.createElement("div",{className:"action-icon bg-orange"},l.createElement(u.A,{size:20})),l.createElement("div",{className:"action-content"},l.createElement("div",{className:"action-title"},"Import Database"),l.createElement("div",{className:"action-desc"},"Upload a JSON file to replace all data")))))),l.createElement("div",{className:"card recent-activity-card"},l.createElement("div",{className:"card-header"},l.createElement("h3",null,"Recent PTO Activity")),l.createElement("div",{className:"card-body"},0===P.length?l.createElement("div",{className:"empty-state-small"},l.createElement(o.A,{size:32}),l.createElement("p",null,"No PTO requests yet")):l.createElement("div",{className:"recent-requests-list"},P.sort(((e,t)=>new Date(t.submitted_at)-new Date(e.submitted_at))).slice(0,5).map((e=>{var t;return l.createElement("div",{key:e.id,className:"recent-request-item"},l.createElement("div",{className:"request-avatar"},(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||"?"),l.createElement("div",{className:"request-details"},l.createElement("div",{className:"request-summary"},l.createElement("span",{className:"requester-name"},e.requester_name),l.createElement("span",{className:"request-action"},"requested ",e.leave_type)),l.createElement("div",{className:"request-meta"},new Date(e.start_date).toLocaleDateString()," â€¢ ",e.total_days," days")),l.createElement("div",{className:"request-status"},l.createElement("span",{className:"status-badge status-".concat(e.status)},e.status)))})))))),"users"===p&&l.createElement("div",{className:"admin-section"},l.createElement(N.A,{currentUser:t,showNotification:a,isAdmin:!0})),"analytics"===p&&l.createElement("div",{className:"admin-section"},l.createElement("div",{className:"section-header"},l.createElement("h3",null,"Analytics Dashboard")),l.createElement("div",{className:"analytics-grid"},l.createElement("div",{className:"card analytics-card"},l.createElement("div",{className:"card-header"},l.createElement("h4",null,"Requests by Weekday")),l.createElement("div",{className:"card-body"},l.createElement("div",{className:"analytics-list"},Object.entries(Pe.requestsByWeekday).sort(((e,t)=>{let[,a]=e,[,l]=t;return l-a})).map((e=>{let[t,a]=e;return l.createElement("div",{key:t,className:"analytics-item"},l.createElement("div",{className:"item-info"},l.createElement("span",{className:"item-icon"},"ðŸ“…"),l.createElement("span",{className:"item-label"},t)),l.createElement("div",{className:"item-value"},a))}))))))),"pto-balances"===se&&l.createElement("div",{className:"admin-section"},l.createElement("div",{className:"section-header"},l.createElement("h3",null,"PTO Balances"),l.createElement("div",{style:{display:"flex",gap:8,alignItems:"center"}},l.createElement("label",null,"Year: "),l.createElement("select",{value:Ee.year,onChange:e=>ye((t=>_(_({},t),{},{year:e.target.value})))},l.createElement("option",{value:""},"All"),Le.map((e=>l.createElement("option",{key:e,value:e},e)))),l.createElement("label",null,"Leave Type: "),l.createElement("select",{value:Ee.leaveType,onChange:e=>ye((t=>_(_({},t),{},{leaveType:e.target.value})))},l.createElement("option",{value:""},"All"),Ie.map((e=>l.createElement("option",{key:e,value:e},e)))),l.createElement("label",null,"User: "),l.createElement("select",{value:Ee.user,onChange:e=>ye((t=>_(_({},t),{},{user:e.target.value})))},l.createElement("option",{value:""},"All"),A.map((e=>l.createElement("option",{key:e.id,value:e.id},e.display_name," (",e.email_address,")")))),l.createElement("input",{type:"text",placeholder:"Search user...",value:ge,onChange:e=>be(e.target.value),style:{marginLeft:8}}),l.createElement("button",{className:"btn btn-primary",onClick:()=>fe(!0)},"Add PTO Balance"))),oe?l.createElement("div",{className:"loading-container"},l.createElement("div",{className:"loading-spinner"}),"Loading..."):l.createElement("table",{className:"requests-table"},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",null,"User"),l.createElement("th",null,"Email"),l.createElement("th",null,"Leave Type"),l.createElement("th",null,"Allocated"),l.createElement("th",null,"Used"),l.createElement("th",null,"Remaining"),l.createElement("th",null,"Year"),l.createElement("th",null,"Actions"))),l.createElement("tbody",null,Ue.map(((e,t)=>{var a,n,s,r;const c=A.find((t=>t.id===e.user_id));return l.createElement("tr",{key:t},l.createElement("td",null,(null==c?void 0:c.display_name)||e.user_id),l.createElement("td",null,(null==c?void 0:c.email_address)||""),l.createElement("td",null,e.leave_type),l.createElement("td",null,l.createElement("input",{type:"number",value:null!==(a=null===(n=ve[t])||void 0===n?void 0:n.allocated_days)&&void 0!==a?a:e.allocated_days,min:0,onChange:e=>pe((a=>_(_({},a),{},{[t]:_(_({},a[t]),{},{allocated_days:Number(e.target.value)})})))})),l.createElement("td",null,e.used_days),l.createElement("td",null,(null!==(s=null===(r=ve[t])||void 0===r?void 0:r.allocated_days)&&void 0!==s?s:e.allocated_days)-e.used_days),l.createElement("td",null,e.year),l.createElement("td",{style:{display:"flex",gap:4}},l.createElement("button",{className:"btn btn-sm btn-primary",onClick:async()=>{var a,l;me(!0),await(0,E.invoke)("setPTOBalance",_(_({},e),{},{allocated_days:null!==(a=null===(l=ve[t])||void 0===l?void 0:l.allocated_days)&&void 0!==a?a:e.allocated_days})),pe((e=>_(_({},e),{},{[t]:void 0}))),await Re()}},"Save"),l.createElement("button",{className:"btn btn-sm btn-danger",onClick:async()=>{window.confirm("Delete this PTO balance?")&&(me(!0),await(0,E.invoke)("deletePTOBalance",{user_id:e.user_id,leave_type:e.leave_type,year:e.year}),await Re())}},"Delete")))})),l.createElement("tr",{style:{fontWeight:"bold",background:"#f9fafb"}},l.createElement("td",{colSpan:3},"Total"),l.createElement("td",null,Be.allocated),l.createElement("td",null,Be.used),l.createElement("td",null,Be.remaining),l.createElement("td",{colSpan:2})))),Ne&&l.createElement("div",{className:"modal-overlay"},l.createElement("div",{className:"modal-content",style:{maxWidth:400,margin:"auto",padding:24}},l.createElement("h4",null,"Add PTO Balance"),l.createElement("div",{className:"form-group"},l.createElement("label",null,"User"),l.createElement("select",{className:"form-control",value:he.user_id,onChange:e=>_e((t=>_(_({},t),{},{user_id:e.target.value})))},l.createElement("option",{value:""},"Select user"),A.map((e=>l.createElement("option",{key:e.id,value:e.id},e.display_name," (",e.email_address,")"))))),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Leave Type"),l.createElement("input",{className:"form-control",value:he.leave_type,onChange:e=>_e((t=>_(_({},t),{},{leave_type:e.target.value}))),placeholder:"e.g. vacation"})),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Allocated Days"),l.createElement("input",{className:"form-control",type:"number",value:he.allocated_days,min:0,onChange:e=>_e((t=>_(_({},t),{},{allocated_days:Number(e.target.value)})))})),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Year"),l.createElement("input",{className:"form-control",type:"number",value:he.year,onChange:e=>_e((t=>_(_({},t),{},{year:Number(e.target.value)})))})),l.createElement("div",{className:"form-actions"},l.createElement("button",{className:"btn btn-secondary",onClick:()=>fe(!1)},"Cancel"),l.createElement("button",{className:"btn btn-primary",onClick:async()=>{he.user_id&&he.leave_type&&he.year?(me(!0),await(0,E.invoke)("setPTOBalance",_(_({},he),{},{used_days:0,remaining_days:he.allocated_days})),fe(!1),_e({user_id:"",leave_type:"",allocated_days:0,year:(new Date).getFullYear()}),await Re()):a("All fields required","error")}},"Add"))))),I&&l.createElement(D,{title:"Add Admin User",onClose:()=>L(!1)},l.createElement("div",{className:"add-admin-content"},l.createElement("p",null,"Grant admin privileges to a user. They will be able to manage teams, users, and all PTO requests."),l.createElement(y.A,{selectedUser:null,onSelect:async e=>{if(e)try{const l=await(0,E.invoke)("addAdminUser",{accountId:e.accountId,addedBy:t.accountId});l.success?(a("".concat(e.displayName," added as admin")),L(!1),Oe()):a(l.message||"Failed to add admin","error")}catch(e){a("Failed to add admin user","error")}},placeholder:"Search and select user to grant admin privileges",useBackendSearch:!1}))),M&&l.createElement(D,{title:"Generate PTO Report",onClose:()=>Y(!1)},l.createElement("div",{className:"report-config"},l.createElement("div",{className:"form-group"},l.createElement("label",null,"Report Scope"),l.createElement("select",{value:Z.scope,onChange:e=>$((t=>_(_({},t),{},{scope:e.target.value}))),className:"form-control"},l.createElement("option",{value:"company"},"Full Company"),l.createElement("option",{value:"team"},"Specific Team"),l.createElement("option",{value:"user"},"Specific User"))),"team"===Z.scope&&l.createElement("div",{className:"form-group"},l.createElement("label",null,"Select Team"),l.createElement("select",{value:Z.teamId,onChange:e=>$((t=>_(_({},t),{},{teamId:e.target.value}))),className:"form-control"},l.createElement("option",{value:""},"Choose a team"),q.map((e=>l.createElement("option",{key:e.id,value:e.id},e.name))))),"user"===Z.scope&&l.createElement("div",{className:"form-group"},l.createElement("label",null,"Select User"),l.createElement("select",{value:Z.userId,onChange:e=>$((t=>_(_({},t),{},{userId:e.target.value}))),className:"form-control"},l.createElement("option",{value:""},"Choose a user"),A.map((e=>l.createElement("option",{key:e.id,value:e.jira_account_id||e.id},e.display_name||e.displayName))))),l.createElement("div",{className:"form-row"},l.createElement("div",{className:"form-group"},l.createElement("label",null,"Start Date"),l.createElement("input",{type:"date",value:Z.startDate,onChange:e=>$((t=>_(_({},t),{},{startDate:e.target.value}))),className:"form-control"})),l.createElement("div",{className:"form-group"},l.createElement("label",null,"End Date"),l.createElement("input",{type:"date",value:Z.endDate,onChange:e=>$((t=>_(_({},t),{},{endDate:e.target.value}))),className:"form-control"}))),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Status Filter"),l.createElement("select",{value:Z.status,onChange:e=>$((t=>_(_({},t),{},{status:e.target.value}))),className:"form-control"},l.createElement("option",{value:"all"},"All Status"),l.createElement("option",{value:"pending"},"Pending"),l.createElement("option",{value:"approved"},"Approved"),l.createElement("option",{value:"declined"},"Declined"))),l.createElement("div",{className:"form-actions"},l.createElement("button",{onClick:()=>Y(!1),className:"btn btn-secondary"},"Cancel"),l.createElement("button",{onClick:async()=>{try{let e=[...P];if("team"===Z.scope&&Z.teamId){const t=A.filter((e=>(e.team_ids||[]).includes(Z.teamId))).map((e=>e.jira_account_id||e.id));e=e.filter((e=>t.includes(e.requester_id)))}else"user"===Z.scope&&Z.userId&&(e=e.filter((e=>e.requester_id===Z.userId)));Z.startDate&&Z.endDate&&(e=e.filter((e=>{const t=new Date(e.start_date),a=new Date(Z.startDate),l=new Date(Z.endDate);return t>=a&&t<=l}))),"all"!==Z.status&&(e=e.filter((e=>e.status===Z.status)));const t=e.map((e=>{const t=A.find((t=>t.jira_account_id===e.requester_id||t.email_address===e.requester_email)),a=t?q.filter((e=>(t.team_ids||[]).includes(e.id))):[];return{Date:(new Date).toLocaleDateString(),Manager:e.manager_name||"",Team:a.map((e=>e.name)).join(", "),Department:a.length>0?a[0].department:"",User:e.requester_name,"Start Date":e.start_date,"End Date":e.end_date,"Total Days":e.total_days||0,"Leave Type":e.leave_type,Reason:e.reason||"",Status:e.status,"Submitted Date":e.submitted_at}})),l=Object.keys(t[0]||{}),n=[l.join(","),...t.map((e=>l.map((t=>'"'.concat((e[t]||"").toString().replace(/"/g,'""'),'"'))).join(",")))].join("\n"),s=new Blob([n],{type:"text/csv"}),r=URL.createObjectURL(s),c=document.createElement("a");c.href=r,c.download="pto-admin-report-".concat(Z.scope,"-").concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(r),a("Report downloaded successfully!"),Y(!1)}catch(e){a("Failed to generate report","error")}},className:"btn btn-primary"},l.createElement(m.A,{size:16}),"Generate Report")))),B&&l.createElement(b.A,{isOpen:B,onClose:()=>F(!1),teams:q,users:A,onSaveTeam:async e=>{await(0,E.invoke)(e.id?"updateTeam":"createTeam",e),ke()},onDeleteTeam:async e=>{await(0,E.invoke)("deleteTeam",{teamId:e,deletedBy:t.accountId}),ke()},onSaveUser:async e=>{await(0,E.invoke)(e.id?"updateUser":"createUser",e),qe()},onDeleteUser:async e=>{await(0,E.invoke)("deleteUser",{userId:e,deletedBy:t.accountId}),qe()},showNotification:a,onRefresh:Se}),x&&l.createElement(g.A,{key:ee,isAdminMode:!0,onClose:()=>z(!1),onSubmit:async e=>{var l;if(null!=e&&e.targetUser)try{const n=(l=e.manager)?_(_({},l),{},{accountId:l.accountId||l.jira_account_id||l.id,displayName:l.displayName||l.display_name||l.name,emailAddress:l.emailAddress||l.email_address,avatarUrl:l.avatarUrl||l.avatar_url}):null,s=await(0,E.invoke)("submitPTOForUser",{requestData:{requester_id:e.targetUser.accountId,requester_name:e.targetUser.displayName,requester_email:e.targetUser.emailAddress,manager_id:(null==n?void 0:n.accountId)||"admin",manager_name:(null==n?void 0:n.displayName)||t.displayName,manager_email:(null==n?void 0:n.emailAddress)||t.emailAddress,start_date:e.startDate,end_date:e.endDate,leave_type:e.leaveType||"vacation",reason:e.reason||"Admin created",status:"approved",total_days:e.totalDays,total_hours:e.totalHours,daily_schedules:e.dailySchedules},submittedBy:t.accountId});s.success?(a("PTO request created for ".concat(e.targetUser.displayName)),z(!1),Te()):a(s.message||"Failed to create PTO request","error")}catch(e){a("Failed to create PTO request","error")}else a("Please select a user for PTO","error")},allUsers:A,allTeams:q,allRequests:P,currentUser:t,isAdmin:!0}),W&&l.createElement(f.A,{isOpen:W,onClose:()=>H(!1),currentUser:t,showNotification:a,onImportSuccess:Te}),G&&l.createElement(D,{title:"Export PTO Daily Schedules",onClose:()=>J(!1)},l.createElement("div",{className:"export-filters"},l.createElement("div",{className:"form-row"},l.createElement("div",{className:"form-group"},l.createElement("label",null,"Start Date"),l.createElement("input",{type:"date",value:Q.startDate,onChange:e=>X((t=>_(_({},t),{},{startDate:e.target.value}))),className:"form-control"})),l.createElement("div",{className:"form-group"},l.createElement("label",null,"End Date"),l.createElement("input",{type:"date",value:Q.endDate,onChange:e=>X((t=>_(_({},t),{},{endDate:e.target.value}))),className:"form-control"}))),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Requester"),l.createElement("select",{value:Q.requesterId,onChange:e=>X((t=>_(_({},t),{},{requesterId:e.target.value}))),className:"form-control"},l.createElement("option",{value:""},"All Requesters"),A.map((e=>l.createElement("option",{key:e.id,value:e.jira_account_id||e.id},e.display_name||e.displayName))))),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Manager"),l.createElement("select",{value:Q.managerId,onChange:e=>X((t=>_(_({},t),{},{managerId:e.target.value}))),className:"form-control"},l.createElement("option",{value:""},"All Managers"),A.map((e=>l.createElement("option",{key:e.id,value:e.jira_account_id||e.id},e.display_name||e.displayName))))),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Leave Type"),l.createElement("select",{value:Q.leaveType,onChange:e=>X((t=>_(_({},t),{},{leaveType:e.target.value}))),className:"form-control"},l.createElement("option",{value:""},"All Types"),l.createElement("option",{value:"vacation"},"Vacation"),l.createElement("option",{value:"sick"},"Sick Leave"),l.createElement("option",{value:"personal"},"Personal Leave"),l.createElement("option",{value:"holiday"},"Holiday"),l.createElement("option",{value:"other leave type"},"Other Leave Type"))),l.createElement("div",{className:"form-actions"},l.createElement("button",{onClick:()=>J(!1),className:"btn btn-secondary"},"Cancel"),l.createElement("button",{onClick:async()=>{try{const e=await(0,E.invoke)("exportPTODailySchedules",{filters:Q});e.success?(je(e.data,"pto_daily_schedules.csv"),a("Daily schedules exported successfully!"),J(!1)):a(e.message||"Failed to export daily schedules","error")}catch(e){a("Failed to export daily schedules","error")}},className:"btn btn-primary"},l.createElement(m.A,{size:16}),"Export Schedules"),l.createElement("button",{onClick:async()=>{try{const t=await(0,E.invoke)("debugStorage");if(console.log("ðŸ” DEBUG Storage Response:",t),t.success){const l=t.data.summary;a("Storage Debug: ".concat(l.ptoRequestCount," PTO requests, ").concat(l.ptoScheduleCount," daily schedules"),"info");const n=await(0,E.invoke)("getPTORequests");var e;if(console.log("ðŸ” DEBUG getPTORequests Response:",n),n.success)a("getPTORequests returned: ".concat((null===(e=n.data)||void 0===e?void 0:e.length)||0," total events"),"info")}}catch(e){console.error("Debug error:",e),a("Debug failed: "+e.message,"error")}},className:"btn btn-secondary"},l.createElement(m.A,{size:16}),"Debug Storage")))),V&&l.createElement("div",{className:"modal-overlay"},l.createElement("div",{className:"modal-content",style:{maxWidth:400,margin:"auto",padding:24}},l.createElement("h4",null,"Import Database"),l.createElement("div",{className:"form-group"},l.createElement("label",null,"Table to Replace"),l.createElement("select",{className:"form-control",value:we,onChange:e=>De(e.target.value)},[{value:"users",label:"Users"},{value:"teams",label:"Teams"},{value:"pto_balances",label:"PTO Balances"}].map((e=>l.createElement("option",{key:e.value,value:e.value},e.label))))),l.createElement("div",{className:"form-group"},l.createElement("label",null,"CSV File"),l.createElement("input",{type:"file",accept:".csv",ref:ne,onChange:async e=>{const t=e.target.files[0];if(!t)return;const l=new FileReader;l.onload=async e=>{const t=e.target.result.split(/\r?\n/).filter(Boolean),l=t[0].split(",").map((e=>e.trim())),n=t.slice(1).map((e=>{const t=e.split(","),a={};return l.forEach(((e,l)=>{a[e]=t[l]})),a}));window.confirm("This will replace all data in the '".concat(we,"' table. Proceed?"))&&(await(0,E.invoke)("importDatabase",{table:we,data:n}),K(!1),a("Imported ".concat(n.length," records into ").concat(we,"."),"success"),"users"===we&&await loadUsers(),"teams"===we&&await loadTeams(),"pto_balances"===we&&await Re())},l.readAsText(t)}})),l.createElement("div",{className:"form-actions"},l.createElement("button",{className:"btn btn-secondary",onClick:()=>K(!1)},"Cancel")))))}},9681:(e,t,a)=>{a.d(t,{A:()=>u});var l=a(6540),n=a(5627),s=a(697),r=a(4506),c=a(808),i=a(9618);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){d(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var l=a.call(e,t||"default");if("object"!=typeof l)return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const u=e=>{let{events:t,onDateSelect:a,selectedDates:o,onSubmitPTO:d,currentUser:u,allUsers:v,allTeams:p,isAdmin:E}=e;const[y,g]=(0,l.useState)(new Date),[b,N]=(0,l.useState)(!1),[f,h]=(0,l.useState)({team:"all",user:"all",leaveType:"all",status:"all"}),[_,w]=(0,l.useState)(!1),[D,S]=(0,l.useState)(null),[O,k]=(0,l.useState)(""),[q,T]=(0,l.useState)(!1),[A,C]=(0,l.useState)([]),[P,j]=(0,l.useState)(null),R=null==v?void 0:v.find((e=>e.jira_account_id===(null==u?void 0:u.accountId)||e.email_address===(null==u?void 0:u.emailAddress))),U=e=>e.toISOString().split("T")[0],I=()=>t?t.filter((e=>{if("all"!==f.team){const t=null==v?void 0:v.find((t=>t.jira_account_id===e.requester_id||t.email_address===e.requester_email));if(!t||String(t.team_id)!==String(f.team))return!1}if("me"===f.user){if(e.requester_id!==(null==u?void 0:u.accountId)&&e.requester_email!==(null==u?void 0:u.emailAddress))return!1}else if("all"!==f.user){const t=null==v?void 0:v.find((e=>e.jira_account_id===f.user||e.id===f.user));if(t&&e.requester_id!==t.jira_account_id&&e.requester_email!==t.email_address)return!1}return("all"===f.leaveType||e.leave_type===f.leaveType)&&("all"===f.status||e.status===f.status)})):[],L=e=>{g((t=>{const a=new Date(t);return a.setMonth(t.getMonth()+e),a}))},B=(e,t)=>{h((a=>m(m({},a),{},{[e]:t})))},F=()=>Object.values(f).some((e=>"all"!==e)),x=e=>{if(!e)return!1;if(e.requester_id!==u.accountId)return!1;if("pending"===e.status)return!0;if("approved"===e.status){const t=new Date;t.setHours(0,0,0,0);return new Date(e.start_date)>=t}return!1},z=(e=>{const t=e.getFullYear(),a=e.getMonth(),l=new Date(t,a,1),n=new Date(t,a+1,0).getDate(),s=l.getDay(),r=[];for(let e=0;e<s;e++)r.push(null);for(let e=1;e<=n;e++)r.push(new Date(t,a,e));return r})(y);return l.createElement("div",{className:"card calendar-card"},l.createElement("div",{className:"calendar-header"},l.createElement("div",{className:"calendar-header-controls"},l.createElement("button",{onClick:()=>L(-1),className:"calendar-nav-btn"},"â†"),l.createElement("h2",{className:"calendar-title"},["January","February","March","April","May","June","July","August","September","October","November","December"][y.getMonth()]," ",y.getFullYear()),l.createElement("button",{onClick:()=>L(1),className:"calendar-nav-btn"},"â†’")),l.createElement("div",{className:"calendar-header-actions"},l.createElement("button",{onClick:()=>w(!_),className:"btn btn-secondary calendar-filter-btn ".concat(F()?"has-filters":"")},l.createElement(n.A,{size:16}),l.createElement("span",null,"Filters"),F()&&l.createElement("span",{className:"filter-indicator"},"â—")),o.filter((e=>new Date(e)>=new Date((new Date).setHours(0,0,0,0)))).length>0&&l.createElement("button",{onClick:()=>N(!0),className:"btn btn-primary calendar-submit-btn"},l.createElement(s.A,{size:16}),l.createElement("span",null,"Request PTO (",o.filter((e=>new Date(e)>=new Date((new Date).setHours(0,0,0,0)))).length," days)")))),_&&l.createElement("div",{className:"calendar-filters-panel"},l.createElement("div",{className:"filters-grid"},l.createElement("div",{className:"filter-group"},l.createElement("label",null,"Team"),l.createElement("select",{value:f.team,onChange:e=>B("team",e.target.value),className:"form-control"},l.createElement("option",{value:"all"},"All Teams"),(p?E?p:p.filter((e=>{var t,a;return(null===(t=e.manager)||void 0===t?void 0:t.accountId)===(null==u?void 0:u.accountId)||(null===(a=e.manager)||void 0===a?void 0:a.jira_account_id)===(null==u?void 0:u.accountId)})):[]).map((e=>l.createElement("option",{key:e.id,value:e.id},e.name))))),l.createElement("div",{className:"filter-group"},l.createElement("label",null,"User"),l.createElement("select",{value:f.user,onChange:e=>B("user",e.target.value),className:"form-control"},l.createElement("option",{value:"all"},"All Users"),l.createElement("option",{value:"me"},"Me"),null==v?void 0:v.map((e=>l.createElement("option",{key:e.id,value:e.jira_account_id||e.id},e.display_name||e.displayName))))),l.createElement("div",{className:"filter-group"},l.createElement("label",null,"Leave Type"),l.createElement("select",{value:f.leaveType,onChange:e=>B("leaveType",e.target.value),className:"form-control"},l.createElement("option",{value:"all"},"All Types"),["vacation","sick","personal","holiday","other leave type"].map((e=>l.createElement("option",{key:e,value:e},e.charAt(0).toUpperCase()+e.slice(1)))))),l.createElement("div",{className:"filter-group"},l.createElement("label",null,"Status"),l.createElement("select",{value:f.status,onChange:e=>B("status",e.target.value),className:"form-control"},l.createElement("option",{value:"all"},"All Status"),["pending","approved","declined"].map((e=>l.createElement("option",{key:e,value:e},e.charAt(0).toUpperCase()+e.slice(1))))))),l.createElement("div",{className:"filters-actions"},l.createElement("button",{onClick:()=>{h({team:"all",user:"all",leaveType:"all",status:"all"})},className:"btn btn-secondary"},"Clear All"),l.createElement("button",{onClick:()=>w(!1),className:"btn btn-primary"},"Apply Filters"))),l.createElement("div",{className:"calendar-info"},l.createElement("p",null,"ðŸ’¡ Click on dates to select them for your PTO request. Selected dates will be highlighted in blue.",F()&&l.createElement("span",null," â€¢ Filters are active - some events may be hidden."))),l.createElement("div",{className:"calendar-grid"},l.createElement("div",{className:"calendar-days-header"},["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e=>l.createElement("div",{key:e,className:"calendar-day-label"},e)))),l.createElement("div",{className:"calendar-days-grid"},z.map(((e,n)=>{if(!e)return l.createElement("div",{key:n,className:"calendar-day calendar-day-empty"});const s=(r=e,o.includes(U(r)));var r;(e=>{const t=U(e);I().some((e=>t>=e.start_date&&t<=e.end_date))})(e);const i=(e=>{const t=U(e);return I().filter((e=>t>=e.start_date&&t<=e.end_date))})(e),m=e.toDateString()===(new Date).toDateString(),d=e<new Date((new Date).setHours(0,0,0,0));return l.createElement("div",{key:e.toISOString(),onClick:()=>(e=>{const l=U(e),n=t.filter((e=>(e.requester_id===u.accountId||e.requester_email===u.emailAddress)&&l>=e.start_date&&l<=e.end_date)),s=n.find(x);s?S(s):n.length>0?k("You already have a PTO request this day and it is not editable."):!e||e<new Date((new Date).setHours(0,0,0,0))||a(e)})(e),className:"calendar-day"+(d?" calendar-day-past":" calendar-day-active")+(s?" calendar-day-selected":"")+(m?" calendar-day-today":"")},l.createElement("div",{className:"calendar-day-inner"},l.createElement("span",{className:"calendar-day-number"+(m?" calendar-day-number-today":"")+(d?" calendar-day-number-past":"")},e.getDate()),l.createElement("div",{className:"calendar-day-events"},i.slice(0,2).map(((e,t)=>l.createElement("div",{key:"".concat(e.id,"-").concat(t),className:"calendar-event"+("approved"===e.status?" calendar-event-approved":"")+("pending"===e.status?" calendar-event-pending":"")+("declined"===e.status?" calendar-event-declined":""),title:"".concat(e.requester_name,": ").concat(e.reason)},l.createElement("span",null,(0,c.S0)(e.leave_type)),l.createElement("span",{className:"calendar-event-name"},e.requester_name)))),i.length>2&&l.createElement("button",{className:"calendar-event-more",onClick:t=>{t.stopPropagation(),C(i),j(e),T(!0)},type:"button",tabIndex:0,"aria-label":"Show all events for ".concat(e.toDateString())},"+",i.length-2," more"))))})))),l.createElement("div",{className:"calendar-legend"},l.createElement("div",{className:"calendar-legend-item"},l.createElement("span",{className:"calendar-legend-dot calendar-event-approved"}),l.createElement("span",null,"Approved")),l.createElement("div",{className:"calendar-legend-item"},l.createElement("span",{className:"calendar-legend-dot calendar-event-pending"}),l.createElement("span",null,"Pending")),l.createElement("div",{className:"calendar-legend-item"},l.createElement("span",{className:"calendar-legend-dot calendar-event-declined"}),l.createElement("span",null,"Declined")),l.createElement("div",{className:"calendar-legend-item"},l.createElement("span",{className:"calendar-legend-dot calendar-day-selected"}),l.createElement("span",null,"Selected"))),b&&l.createElement(r.A,{selectedDates:o.filter((e=>new Date(e)>=new Date((new Date).setHours(0,0,0,0)))),onClose:()=>N(!1),onSubmit:async e=>{const t=await d(e);null!=t&&t.success&&N(!1)},currentUser:u,currentUserData:R,userManager:(()=>{if(null==R||!R.team_id)return null;const e=null==p?void 0:p.find((e=>e.id===R.team_id));return null!=e&&e.manager?e.manager:null})(),allUsers:v,allTeams:p,allRequests:t,isAdmin:E}),D&&l.createElement(i.A,{request:D,onClose:()=>S(null),onSave:()=>{S(null)},currentUser:u}),O&&l.createElement("div",{className:"modal-overlay"},l.createElement("div",{className:"modal-content",style:{maxWidth:400,margin:"auto",padding:24,textAlign:"center"}},l.createElement("div",{style:{marginBottom:16}},l.createElement("span",{role:"img","aria-label":"info",style:{fontSize:32}},"â„¹ï¸")),l.createElement("div",{style:{marginBottom:16}},O),l.createElement("button",{className:"btn btn-primary",onClick:()=>k("")},"OK"))),q&&l.createElement("div",{className:"modal-overlay",onClick:()=>T(!1)},l.createElement("div",{className:"modal-content",style:{maxWidth:400,margin:"auto",padding:24},onClick:e=>e.stopPropagation()},l.createElement("div",{style:{marginBottom:16,fontWeight:600,fontSize:18}},"Events for ",P&&P.toLocaleDateString()),l.createElement("div",{style:{maxHeight:300,overflowY:"auto"}},A.map(((e,t)=>l.createElement("div",{key:e.id+"-"+t,className:"calendar-event"+("approved"===e.status?" calendar-event-approved":"")+("pending"===e.status?" calendar-event-pending":"")+("declined"===e.status?" calendar-event-declined":""),style:{marginBottom:6}},l.createElement("span",null,(0,c.S0)(e.leave_type)),l.createElement("span",{className:"calendar-event-name"},e.requester_name),l.createElement("span",{style:{marginLeft:8,fontSize:12,color:"#888"}},"(",e.status,")"))))),l.createElement("button",{className:"btn btn-primary",style:{marginTop:16},onClick:()=>T(!1)},"Close"))))}}},a={};function l(e){var n=a[e];if(void 0!==n)return n.exports;var s=a[e]={exports:{}};return t[e].call(s.exports,s,s.exports,l),s.exports}l.m=t,e=[],l.O=(t,a,n,s)=>{if(!a){var r=1/0;for(m=0;m<e.length;m++){a=e[m][0],n=e[m][1],s=e[m][2];for(var c=!0,i=0;i<a.length;i++)(!1&s||r>=s)&&Object.keys(l.O).every((e=>l.O[e](a[i])))?a.splice(i--,1):(c=!1,s<r&&(r=s));if(c){e.splice(m--,1);var o=n();void 0!==o&&(t=o)}}return t}s=s||0;for(var m=e.length;m>0&&e[m-1][2]>s;m--)e[m]=e[m-1];e[m]=[a,n,s]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={625:0};l.O.j=t=>0===e[t];var t=(t,a)=>{var n,s,r=a[0],c=a[1],i=a[2],o=0;if(r.some((t=>0!==e[t]))){for(n in c)l.o(c,n)&&(l.m[n]=c[n]);if(i)var m=i(l)}for(t&&t(a);o<r.length;o++)s=r[o],l.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return l.O(m)},a=self.webpackChunkpto_request_app=self.webpackChunkpto_request_app||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var n=l.O(void 0,[96,865],(()=>l(2605)));n=l.O(n)})();