/*! For license information please see main-9e313568.e22fccd335773a4c777c.js.LICENSE.txt */
(()=>{"use strict";var e,t={883:(e,t,r)=>{r.d(t,{A:()=>p});var n=r(6540),a=r(2321);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function o(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function l(r,n,a,l){var o=n&&n.prototype instanceof i?n:i,u=Object.create(o.prototype);return c(u,"_invoke",function(r,n,a){var l,o,c,i=0,u=a||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return l=t,o=0,c=e,d.n=r,s}};function f(r,n){for(o=r,c=n,t=0;!m&&i&&!a&&t<u.length;t++){var a,l=u[t],f=d.p,v=l[2];r>3?(a=v===n)&&(c=l[(o=l[4])?5:(o=3,3)],l[4]=l[5]=e):l[0]<=f&&((a=r<2&&f<l[1])?(o=0,d.v=n,d.n=l[1]):f<v&&(a=r<3||l[0]>n||n>v)&&(l[4]=r,l[5]=n,d.n=v,o=0))}if(a||r>1)return s;throw m=!0,n}return function(a,u,v){if(i>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,v),o=u,c=v;(t=o<2?e:c)||!m;){l||(o?o<3?(o>1&&(d.n=-1),f(o,c)):d.n=c:d.v=c);try{if(i=2,l){if(o||(a="next"),t=l[a]){if(!(t=t.call(l,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,o<2&&(o=0)}else 1===o&&(t=l.return)&&t.call(l),o<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),o=1);l=e}else if((t=(m=d.n<0)?c:r.call(n,d))!==s)break}catch(t){l=e,o=1,c=t}finally{i=1}}return{value:t,done:m}}}(r,a,l),!0),u}var s={};function i(){}function u(){}function m(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(c(t={},n,(function(){return this})),t),f=m.prototype=i.prototype=Object.create(d);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=m,c(f,"constructor",m),c(m,"constructor",u),u.displayName="GeneratorFunction",c(m,a,"GeneratorFunction"),c(f),c(f,a,"Generator"),c(f,n,(function(){return this})),c(f,"toString",(function(){return"[object Generator]"})),(o=function(){return{w:l,m:v}})()}function c(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}c=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var l=function(t,r){c(e,t,(function(e){return this._invoke(t,r,e)}))};l("next",0),l("throw",1),l("return",2)}},c(e,t,r,n)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t,r,n,a,l,o){try{var c=e[l](o),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var l=e.apply(t,r);function o(e){m(l,n,a,o,c,"next",e)}function c(e){m(l,n,a,o,c,"throw",e)}o(void 0)}))}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,o,c=[],s=!0,i=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=l.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(i)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const p=function(){var e=f((0,n.useState)(null),2),t=e[0],r=e[1],l=f((0,n.useState)(!0),2),c=l[0],s=l[1],u=f((0,n.useState)(null),2),m=u[0],v=u[1],p=f((0,n.useState)(0),2),y=p[0],b=p[1];(0,n.useEffect)((function(){g()}),[]);var g=function(){var e=d(o().m((function e(){var t,n,l,c,u,m,d,f=arguments;return o().w((function(e){for(;;)switch(e.n){case 0:return s(!0),v(null),e.p=1,console.log("🔍 Fetching current user..."),e.n=2,(0,a.invoke)("getCurrentUser");case 2:if((n=e.v).success||"NETWORK_ERROR"!==(null===(t=n.error)||void 0===t?void 0:t.type)){e.n=4;break}return console.log("🔄 Main method failed, trying fallback..."),e.n=3,(0,a.invoke)("getCurrentUserFallback");case 3:n=e.v;case 4:if(!n.success){e.n=9;break}return console.log("👤 User data received:",n.data),l=!1,e.p=5,e.n=6,(0,a.invoke)("checkUserAdminStatus",{accountId:n.data.accountId});case 6:c=e.v,l=!!c.success&&c.data.isAdmin,e.n=8;break;case 7:e.p=7,m=e.v,console.warn("⚠️ Could not check admin status:",m);case 8:u=i(i({},n.data),{},{isAdmin:l}),console.log("✅ Current user loaded:",u.displayName,"isAdmin:",u.isAdmin),r(u),b(0),e.n=10;break;case 9:throw new Error(n.message||"Failed to fetch current user");case 10:e.n=13;break;case 11:if(e.p=11,d=e.v,console.error("❌ Error fetching current user:",d),v(d.message),!d.message.includes("timeout")&&!d.message.includes("fetch failed")){e.n=13;break}if(!(y<3)){e.n=12;break}return console.log("🔄 Auto-retrying in 5 seconds... (attempt ".concat(y+1,"/3)")),setTimeout((function(){b((function(e){return e+1})),g(!0)}),5e3),e.a(2);case 12:v("Network connection failed after multiple attempts. Please check your internet connection and refresh the page.");case 13:return e.p=13,s(!1),e.f(13);case 14:return e.a(2)}}),e,null,[[5,7],[1,11,13,14]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=d(o().m((function e(){return o().w((function(e){for(;;)switch(e.n){case 0:return b(0),e.n=1,g();case 1:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=d(o().m((function e(){var t,r;return o().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,a.invoke)("testConnectivity");case 1:return t=e.v,e.a(2,t);case 2:return e.p=2,r=e.v,e.a(2,{success:!1,message:"Connectivity test failed: "+r.message})}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}();return{currentUser:t,loading:c,error:m,refreshUser:h,testConnectivity:E,isAdmin:(null==t?void 0:t.isAdmin)||!1,retryCount:y}}},1863:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(6540);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,o,c=[],s=!0,i=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=l.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(i)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var o=[{value:"all",label:"All Time"},{value:"current_year",label:"Current Year"},{value:"last_90_days",label:"Last 90 Days"},{value:"last_30_days",label:"Last 30 Days"},{value:"custom",label:"Custom Range"}];const c=function(e){var t=e.value,r=void 0===t?{preset:"all",from:"",to:""}:t,l=e.onChange,c=a((0,n.useState)(r.preset||"all"),2),s=c[0],i=c[1],u=a((0,n.useState)(r.from||""),2),m=u[0],d=u[1],f=a((0,n.useState)(r.to||""),2),v=f[0],p=f[1];return(0,n.useEffect)((function(){l("custom"!==s?{preset:s,from:"",to:""}:{preset:s,from:m,to:v})}),[s,m,v]),n.createElement("div",{className:"date-range-filter"},n.createElement("select",{className:"form-control",value:s,onChange:function(e){return i(e.target.value)}},o.map((function(e){return n.createElement("option",{key:e.value,value:e.value},e.label)}))),"custom"===s&&n.createElement("div",{className:"custom-range-fields",style:{display:"flex",gap:8,marginTop:8}},n.createElement("input",{type:"date",className:"form-control",value:m,onChange:function(e){return d(e.target.value)},max:v||void 0,placeholder:"From"}),n.createElement("span",{style:{alignSelf:"center"}},"to"),n.createElement("input",{type:"date",className:"form-control",value:v,onChange:function(e){return p(e.target.value)},min:m||void 0,placeholder:"To"})))}},2795:(e,t,r)=>{r.d(t,{A:()=>b});var n=r(6540),a=r(8686),l=r(8697),o=r(8445),c=r(2321);function s(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function l(r,n,a,l){var s=n&&n.prototype instanceof c?n:c,i=Object.create(s.prototype);return u(i,"_invoke",function(r,n,a){var l,c,s,i=0,u=a||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return l=t,c=0,s=e,d.n=r,o}};function f(r,n){for(c=r,s=n,t=0;!m&&i&&!a&&t<u.length;t++){var a,l=u[t],f=d.p,v=l[2];r>3?(a=v===n)&&(s=l[(c=l[4])?5:(c=3,3)],l[4]=l[5]=e):l[0]<=f&&((a=r<2&&f<l[1])?(c=0,d.v=n,d.n=l[1]):f<v&&(a=r<3||l[0]>n||n>v)&&(l[4]=r,l[5]=n,d.n=v,c=0))}if(a||r>1)return o;throw m=!0,n}return function(a,u,v){if(i>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,v),c=u,s=v;(t=c<2?e:s)||!m;){l||(c?c<3?(c>1&&(d.n=-1),f(c,s)):d.n=s:d.v=s);try{if(i=2,l){if(c||(a="next"),t=l[a]){if(!(t=t.call(l,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=l.return)&&t.call(l),c<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),c=1);l=e}else if((t=(m=d.n<0)?s:r.call(n,d))!==o)break}catch(t){l=e,c=1,s=t}finally{i=1}}return{value:t,done:m}}}(r,a,l),!0),i}var o={};function c(){}function s(){}function m(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(u(t={},n,(function(){return this})),t),f=m.prototype=c.prototype=Object.create(d);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=m,u(f,"constructor",m),u(m,"constructor",s),s.displayName="GeneratorFunction",u(m,a,"GeneratorFunction"),u(f),u(f,a,"Generator"),u(f,n,(function(){return this})),u(f,"toString",(function(){return"[object Generator]"})),(i=function(){return{w:l,m:v}})()}function u(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}u=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var l=function(t,r){u(e,t,(function(e){return this._invoke(t,r,e)}))};l("next",0),l("throw",1),l("return",2)}},u(e,t,r,n)}function m(e,t,r,n,a,l,o){try{var c=e[l](o),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var l=e.apply(t,r);function o(e){m(l,n,a,o,c,"next",e)}function c(e){m(l,n,a,o,c,"throw",e)}o(void 0)}))}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,o,c=[],s=!0,i=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=l.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(i)throw a}}return c}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return p(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){var r;return function(){for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];clearTimeout(r),r=setTimeout((function(){clearTimeout(r),e.apply(void 0,a)}),t)}}const b=function(e){var t,r=e.selectedUser,u=e.onSelect,m=e.placeholder,v=void 0===m?"Search for a user":m,p=e.disabled,b=void 0!==p&&p,g=e.required,h=void 0!==g&&g,E=e.error,N=void 0===E?null:E,w=e.allUsers,S=void 0===w?[]:w,O=e.filterBy,k=void 0===O?"all":O,j=e.useBackendSearch,_=void 0!==j&&j,D=f((0,n.useState)(!1),2),A=D[0],T=D[1],P=f((0,n.useState)(""),2),q=P[0],C=P[1],U=f((0,n.useState)([]),2),x=U[0],R=U[1],I=f((0,n.useState)(!1),2),L=I[0],F=I[1],M=f((0,n.useState)(null),2),G=M[0],z=M[1],B=(0,n.useRef)(null),H=(0,n.useRef)(null),Y=(0,n.useCallback)(y(function(){var e=d(i().m((function e(t){var r,n;return i().w((function(e){for(;;)switch(e.n){case 0:if(!(t.length<1)){e.n=1;break}return R([]),e.a(2);case 1:return F(!0),z(null),e.p=2,e.n=3,(0,c.invoke)("searchDatabaseUsers",{query:t,filterBy:k,startAt:0,maxResults:50});case 3:if(!(r=e.v).success||!r.data){e.n=4;break}R(r.data.users||[]),e.n=5;break;case 4:throw new Error(r.message||"Failed to search users");case 5:e.n=7;break;case 6:e.p=6,n=e.v,console.error("❌ Error searching users:",n),z(n.message),R([]);case 7:return e.p=7,F(!1),e.f(7);case 8:return e.a(2)}}),e,null,[[2,6,7,8]])})));return function(t){return e.apply(this,arguments)}}(),300),[k]),$=(0,n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=s(S);if("withTeam"===k?t=t.filter((function(e){return(e.team_ids||[]).length>0})):"withoutTeam"===k&&(t=t.filter((function(e){return!(e.team_ids&&e.team_ids.length>0)}))),e.length>=1){var r=e.toLowerCase();t=t.filter((function(e){var t=(e.display_name||e.displayName||"").toLowerCase(),n=(e.email_address||e.emailAddress||"").toLowerCase(),a=(e.first_name||e.firstName||"").toLowerCase(),l=(e.last_name||e.lastName||"").toLowerCase();return t.includes(r)||n.includes(r)||a.includes(r)||l.includes(r)}))}t.sort((function(e,t){var r=(e.display_name||e.displayName||"").toLowerCase(),n=(t.display_name||t.displayName||"").toLowerCase();return r.localeCompare(n)})),R(t.slice(0,50))}),[S,k]);(0,n.useEffect)((function(){_||$(q)}),[$,q,_]);(0,n.useEffect)((function(){var e=function(e){B.current&&!B.current.contains(e.target)&&(T(!1),C(""),_||R([]))};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[_]),(0,n.useEffect)((function(){var e=function(e){"Escape"===e.key&&A&&(T(!1),C(""),_||R([]))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[A,_]);var W=function(e){return e.team_name||""},J=(0,n.useCallback)(y(function(){var e=d(i().m((function e(t){var r,n;return i().w((function(e){for(;;)switch(e.n){case 0:if(t){e.n=1;break}return R([]),e.a(2);case 1:if(e.p=1,!_){e.n=3;break}return e.n=2,(0,c.invoke)("searchDatabaseUsers",{query:t,filterBy:k,startAt:0,maxResults:50});case 2:r=e.v,e.n=5;break;case 3:return e.n=4,(0,c.invoke)("getInternalJiraUsers",{startAt:0,maxResults:50});case 4:r=e.v;case 5:r.success?R(r.data.users||[]):R([]),e.n=7;break;case 6:e.p=6,n=e.v,console.error("Error searching users:",n),R([]);case 7:return e.a(2)}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),300),[_,k]);return(0,n.useEffect)((function(){q?J(q):R([])}),[q,J]),n.createElement("div",{className:"user-picker-container",ref:B},n.createElement("div",{onClick:function(){b||(T(!0),setTimeout((function(){var e;null===(e=H.current)||void 0===e||e.focus()}),100))},className:"user-picker-input ".concat(b?"user-picker-input-disabled":""," ").concat(A?"user-picker-input-focused":""," ").concat(N?"user-picker-input-error":"")},r?n.createElement("div",{className:"user-picker-selected"},n.createElement("div",{className:"user-picker-avatar"},r.avatarUrl||r.avatar_url?n.createElement("img",{src:r.avatarUrl||r.avatar_url,alt:r.displayName||r.display_name,className:"user-picker-avatar-img"}):n.createElement("span",{className:"user-picker-avatar-text"},(null===(t=r.displayName||r.display_name)||void 0===t?void 0:t.charAt(0))||n.createElement(a.A,{size:16}))),n.createElement("div",{className:"user-picker-user-info"},n.createElement("div",{className:"user-picker-user-name"},r.displayName||r.display_name),n.createElement("div",{className:"user-picker-user-email"},r.emailAddress||r.email_address)),!b&&n.createElement("button",{onClick:function(e){e.stopPropagation(),u(null)},className:"user-picker-clear-btn",type:"button"},n.createElement(l.A,{size:16}))):n.createElement("div",{className:"user-picker-placeholder"},n.createElement(o.A,{size:16}),n.createElement("span",null,v),h&&n.createElement("span",{className:"user-picker-required"},"*"))),N&&n.createElement("div",{className:"user-picker-error"},N),A&&n.createElement("div",{className:"user-picker-dropdown"},n.createElement("div",{className:"user-picker-search-container"},n.createElement("div",{className:"user-picker-search-input-wrapper"},n.createElement(o.A,{size:16,className:"user-picker-search-icon"}),n.createElement("input",{ref:H,type:"text",value:q,onChange:function(e){var t=e.target.value;C(t),_?Y(t):$(t)},placeholder:"Type to search users...",className:"user-picker-search-input"}))),n.createElement("div",{className:"user-picker-results"},L?n.createElement("div",{className:"user-picker-loading"},n.createElement("div",{className:"user-picker-loading-spinner"}),n.createElement("div",{className:"user-picker-loading-text"},"Searching...")):G?n.createElement("div",{className:"user-picker-empty"},n.createElement("div",{className:"user-picker-empty-text"},"Error: ",G)):0!==S.length||_?q.length>=1&&0===x.length?n.createElement("div",{className:"user-picker-empty"},n.createElement("div",{className:"user-picker-empty-text"},"No users found")):q.length<1?n.createElement("div",{className:"user-picker-empty"},n.createElement("div",{className:"user-picker-empty-text"},"Type to search users...")):n.createElement("div",{className:"user-picker-user-list"},x.map((function(e){var t;return n.createElement("div",{key:e.id,onClick:function(){return function(e){u(e),T(!1),C(""),R([])}(e)},className:"user-picker-user-option"},n.createElement("div",{className:"user-picker-avatar"},e.avatarUrl||e.avatar_url?n.createElement("img",{src:e.avatarUrl||e.avatar_url,alt:e.displayName||e.display_name,className:"user-picker-avatar-img"}):n.createElement("span",{className:"user-picker-avatar-text"},(null===(t=e.displayName||e.display_name)||void 0===t?void 0:t.charAt(0))||n.createElement(a.A,{size:16}))),n.createElement("div",{className:"user-picker-option-info"},n.createElement("div",{className:"user-picker-option-name"},e.displayName||e.display_name),n.createElement("div",{className:"user-picker-option-email"},e.emailAddress||e.email_address),W(e)&&n.createElement("div",{className:"user-picker-option-team"},"Team: ",W(e))))})),50===x.length&&n.createElement("div",{className:"user-picker-more-results"},"Showing first 50 results. Narrow your search for more specific results.")):n.createElement("div",{className:"user-picker-empty"},n.createElement("div",{className:"user-picker-empty-text"},"No users available")))))}},2890:(e,t,r)=>{r.d(t,{A:()=>p});var n=r(6540),a=r(2321);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function l(r,n,a,l){var s=n&&n.prototype instanceof c?n:c,i=Object.create(s.prototype);return u(i,"_invoke",function(r,n,a){var l,c,s,i=0,u=a||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return l=t,c=0,s=e,d.n=r,o}};function f(r,n){for(c=r,s=n,t=0;!m&&i&&!a&&t<u.length;t++){var a,l=u[t],f=d.p,v=l[2];r>3?(a=v===n)&&(s=l[(c=l[4])?5:(c=3,3)],l[4]=l[5]=e):l[0]<=f&&((a=r<2&&f<l[1])?(c=0,d.v=n,d.n=l[1]):f<v&&(a=r<3||l[0]>n||n>v)&&(l[4]=r,l[5]=n,d.n=v,c=0))}if(a||r>1)return o;throw m=!0,n}return function(a,u,v){if(i>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,v),c=u,s=v;(t=c<2?e:s)||!m;){l||(c?c<3?(c>1&&(d.n=-1),f(c,s)):d.n=s:d.v=s);try{if(i=2,l){if(c||(a="next"),t=l[a]){if(!(t=t.call(l,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=l.return)&&t.call(l),c<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),c=1);l=e}else if((t=(m=d.n<0)?s:r.call(n,d))!==o)break}catch(t){l=e,c=1,s=t}finally{i=1}}return{value:t,done:m}}}(r,a,l),!0),i}var o={};function c(){}function s(){}function m(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(u(t={},n,(function(){return this})),t),f=m.prototype=c.prototype=Object.create(d);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=m,u(f,"constructor",m),u(m,"constructor",s),s.displayName="GeneratorFunction",u(m,a,"GeneratorFunction"),u(f),u(f,a,"Generator"),u(f,n,(function(){return this})),u(f,"toString",(function(){return"[object Generator]"})),(i=function(){return{w:l,m:v}})()}function u(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}u=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var l=function(t,r){u(e,t,(function(e){return this._invoke(t,r,e)}))};l("next",0),l("throw",1),l("return",2)}},u(e,t,r,n)}function m(e,t,r,n,a,l,o){try{var c=e[l](o),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var l=e.apply(t,r);function o(e){m(l,n,a,o,c,"next",e)}function c(e){m(l,n,a,o,c,"throw",e)}o(void 0)}))}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,o,c=[],s=!0,i=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=l.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(i)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const p=function(e){var t=f((0,n.useState)([]),2),r=t[0],l=t[1],o=f((0,n.useState)(!0),2),s=o[0],u=o[1],m=f((0,n.useState)(null),2),v=m[0],p=m[1],y=(0,n.useCallback)(d(i().m((function t(){var r,n,o,c,s=arguments;return i().w((function(t){for(;;)switch(t.n){case 0:if(r=s.length>0&&void 0!==s[0]?s[0]:{},e){t.n=1;break}return t.a(2);case 1:return u(!0),p(null),t.p=2,console.log("📋 Fetching PTO requests with filters:",r),t.n=3,(0,a.invoke)("getPTORequests",r);case 3:if(!(n=t.v).success){t.n=4;break}l(n.data||[]),console.log("✅ Loaded ".concat((null===(o=n.data)||void 0===o?void 0:o.length)||0," PTO requests")),t.n=5;break;case 4:throw new Error(n.message||"Failed to fetch PTO requests");case 5:t.n=7;break;case 6:t.p=6,c=t.v,p(c.message),console.error("❌ Error fetching PTO requests:",c);case 7:return t.p=7,u(!1),t.f(7);case 8:return t.a(2)}}),t,null,[[2,6,7,8]])}))),[e]),b=(0,n.useCallback)(function(){var e=d(i().m((function e(t){var r,n;return i().w((function(e){for(;;)switch(e.n){case 0:return u(!0),p(null),e.p=1,console.log("📝 Submitting PTO request:",t),e.n=2,(0,a.invoke)("storePTORequest",t);case 2:if(!(r=e.v).success){e.n=4;break}return e.n=3,y();case 3:return e.a(2,{success:!0,data:r.data});case 4:throw new Error(r.message||"Failed to submit PTO request");case 5:e.n=7;break;case 6:return e.p=6,n=e.v,p(n.message),console.error("❌ Error submitting PTO request:",n),e.a(2,{success:!1,message:n.message});case 7:return e.p=7,u(!1),e.f(7);case 8:return e.a(2)}}),e,null,[[1,6,7,8]])})));return function(t){return e.apply(this,arguments)}}(),[y]),g=(0,n.useCallback)(function(){var e=d(i().m((function e(t,r){var n,o,s,m=arguments;return i().w((function(e){for(;;)switch(e.n){case 0:return n=m.length>2&&void 0!==m[2]?m[2]:"",u(!0),p(null),e.p=1,console.log("✅ Updating PTO request ".concat(t," to ").concat(r)),e.n=2,(0,a.invoke)("updatePTORequest",{requestId:t,status:r,comment:n});case 2:if(!(o=e.v).success){e.n=3;break}return l((function(e){return e.map((function(e){return e.id===t?c(c({},e),{},{status:r,reviewer_comments:n,reviewed_at:(new Date).toISOString()}):e}))})),e.a(2,{success:!0});case 3:throw new Error(o.message||"Failed to update PTO request");case 4:e.n=6;break;case 5:return e.p=5,s=e.v,p(s.message),console.error("❌ Error updating PTO request:",s),e.a(2,{success:!1,message:s.message});case 6:return e.p=6,u(!1),e.f(6);case 7:return e.a(2)}}),e,null,[[1,5,6,7]])})));return function(t,r){return e.apply(this,arguments)}}(),[]),h=(0,n.useCallback)(function(){var e=d(i().m((function e(t){var r,n;return i().w((function(e){for(;;)switch(e.n){case 0:return u(!0),p(null),e.p=1,console.log("🗑️ Cancelling PTO request ".concat(t)),e.n=2,(0,a.invoke)("updatePTORequest",{requestId:t,status:"cancelled",comment:"Cancelled by user"});case 2:if(!(r=e.v).success){e.n=3;break}return l((function(e){return e.filter((function(e){return e.id!==t}))})),e.a(2,{success:!0});case 3:throw new Error(r.message||"Failed to cancel PTO request");case 4:e.n=6;break;case 5:return e.p=5,n=e.v,p(n.message),console.error("❌ Error cancelling PTO request:",n),e.a(2,{success:!1,message:n.message});case 6:return e.p=6,u(!1),e.f(6);case 7:return e.a(2)}}),e,null,[[1,5,6,7]])})));return function(t){return e.apply(this,arguments)}}(),[]),E=(0,n.useCallback)((function(e){return r.filter((function(t){return t.requester_id===e}))}),[r]),N=(0,n.useCallback)((function(){return r.filter((function(e){return"pending"===e.status}))}),[r]),w=(0,n.useCallback)((function(e){return r.filter((function(t){return t.status===e}))}),[r]),S=(0,n.useCallback)((function(e,t){return r.filter((function(r){var n=new Date(r.start_date),a=new Date(r.end_date),l=new Date(e),o=new Date(t);return n>=l&&n<=o||a>=l&&a<=o||n<=l&&a>=o}))}),[r]),O=(0,n.useCallback)(d(i().m((function t(){var r,n;return i().w((function(t){for(;;)switch(t.n){case 0:if(null!=e&&e.emailAddress){t.n=1;break}return t.a(2,[]);case 1:return t.p=1,console.log("📋 Fetching pending requests for manager:",e.emailAddress),t.n=2,(0,a.invoke)("getPendingRequests",{managerEmail:e.emailAddress});case 2:if(!(r=t.v).success){t.n=3;break}return t.a(2,r.data||[]);case 3:return console.error("Failed to fetch pending requests:",r.message),t.a(2,[]);case 4:t.n=6;break;case 5:return t.p=5,n=t.v,console.error("❌ Error fetching pending requests for manager:",n),t.a(2,[]);case 6:return t.a(2)}}),t,null,[[1,5]])}))),[e]);return(0,n.useEffect)((function(){e&&y()}),[e,y]),{requests:r,loading:s,error:v,fetchRequests:y,submitRequest:b,updateRequestStatus:g,cancelRequest:h,getUserRequests:E,getPendingRequests:N,getRequestsByStatus:w,getRequestsByDateRange:S,getPendingRequestsForManager:O}}},2948:(e,t,r)=>{r.d(t,{S0:()=>a});var n={vacation:{id:"vacation",label:"🏖️ Vacation",emoji:"🏖️",color:"bg-blue-100 text-blue-800"},sick:{id:"sick",label:"🤒 Sick Leave",emoji:"🤒",color:"bg-red-100 text-red-800"},personal:{id:"personal",label:"👤 Personal Day",emoji:"👤",color:"bg-purple-100 text-purple-800"},holiday:{id:"holiday",label:"🎉 Holiday",emoji:"🎉",color:"bg-green-100 text-green-800"},"other leave type":{id:"other leave type",label:"📝 Other Leave Type",emoji:"📝",color:"bg-gray-100 text-gray-800"}},a=function(e){var t;return(null===(t=n[null==e?void 0:e.toLowerCase()])||void 0===t?void 0:t.emoji)||"📅"}},4278:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(6540);const a=function(e){var t=e.message,r=e.type,a=e.onClose;return n.createElement("div",{className:"fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ".concat("success"===r?"bg-green-500 text-white":"bg-red-500 text-white")},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("span",null,t),n.createElement("button",{onClick:a,className:"ml-4 text-white hover:text-gray-200"},"×")))}},5653:(e,t,r)=>{r.d(t,{A:()=>p});var n=r(6540),a=r(8697),l=r(2321);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function l(r,n,a,l){var s=n&&n.prototype instanceof c?n:c,i=Object.create(s.prototype);return m(i,"_invoke",function(r,n,a){var l,c,s,i=0,u=a||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return l=t,c=0,s=e,d.n=r,o}};function f(r,n){for(c=r,s=n,t=0;!m&&i&&!a&&t<u.length;t++){var a,l=u[t],f=d.p,v=l[2];r>3?(a=v===n)&&(s=l[(c=l[4])?5:(c=3,3)],l[4]=l[5]=e):l[0]<=f&&((a=r<2&&f<l[1])?(c=0,d.v=n,d.n=l[1]):f<v&&(a=r<3||l[0]>n||n>v)&&(l[4]=r,l[5]=n,d.n=v,c=0))}if(a||r>1)return o;throw m=!0,n}return function(a,u,v){if(i>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,v),c=u,s=v;(t=c<2?e:s)||!m;){l||(c?c<3?(c>1&&(d.n=-1),f(c,s)):d.n=s:d.v=s);try{if(i=2,l){if(c||(a="next"),t=l[a]){if(!(t=t.call(l,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=l.return)&&t.call(l),c<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),c=1);l=e}else if((t=(m=d.n<0)?s:r.call(n,d))!==o)break}catch(t){l=e,c=1,s=t}finally{i=1}}return{value:t,done:m}}}(r,a,l),!0),i}var o={};function c(){}function s(){}function i(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(m(t={},n,(function(){return this})),t),f=i.prototype=c.prototype=Object.create(d);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,m(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=i,m(f,"constructor",i),m(i,"constructor",s),s.displayName="GeneratorFunction",m(i,a,"GeneratorFunction"),m(f),m(f,a,"Generator"),m(f,n,(function(){return this})),m(f,"toString",(function(){return"[object Generator]"})),(u=function(){return{w:l,m:v}})()}function m(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}m=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var l=function(t,r){m(e,t,(function(e){return this._invoke(t,r,e)}))};l("next",0),l("throw",1),l("return",2)}},m(e,t,r,n)}function d(e,t,r,n,a,l,o){try{var c=e[l](o),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,o,c=[],s=!0,i=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=l.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(i)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const p=function(e){var t=e.request,r=e.onClose,o=e.onSave,c=e.currentUser,i=f((0,n.useState)({startDate:"",endDate:"",leaveType:"",reason:"",dailySchedules:[]}),2),m=i[0],v=i[1],p=f((0,n.useState)(""),2),y=p[0],b=p[1];(0,n.useEffect)((function(){t&&v({startDate:t.start_date,endDate:t.end_date,leaveType:t.leave_type,reason:t.reason||"",dailySchedules:t.daily_schedules||[]})}),[t]);var g=function(){var e,n=(e=u().m((function e(n){var a,s,i;return u().w((function(e){for(;;)switch(e.n){case 0:if(n.preventDefault(),b(""),e.p=1,"approved"!==t.status){e.n=2;break}if((a=new Date).setHours(0,0,0,0),!(new Date(t.start_date)<a)){e.n=2;break}return b("Cannot edit approved requests with past dates. Please contact an admin for assistance."),e.a(2);case 2:return e.n=3,(0,l.invoke)("editPTORequest",{requestId:t.id,editedBy:c.accountId,updatedData:{startDate:m.startDate,endDate:m.endDate,leaveType:m.leaveType,reason:m.reason,dailySchedules:m.dailySchedules}});case 3:(s=e.v).success?(o(s.data),r()):b(s.message||"Failed to update PTO request"),e.n=5;break;case 4:e.p=4,i=e.v,b("Failed to update PTO request: "+i.message);case 5:return e.a(2)}}),e,null,[[1,4]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var l=e.apply(t,r);function o(e){d(l,n,a,o,c,"next",e)}function c(e){d(l,n,a,o,c,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}();return n.createElement("div",{className:"modal-overlay"},n.createElement("div",{className:"modal-content"},n.createElement("div",{className:"modal-header"},n.createElement("h3",null,"Edit PTO Request"),n.createElement("button",{onClick:r,className:"modal-close"},n.createElement(a.A,{size:20}))),y&&n.createElement("div",{className:"alert alert-danger"},y),n.createElement("form",{onSubmit:g},n.createElement("div",{className:"form-group"},n.createElement("label",null,"Start Date"),n.createElement("input",{type:"date",value:m.startDate,onChange:function(e){return v((function(t){return s(s({},t),{},{startDate:e.target.value})}))},className:"form-control",required:!0})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"End Date"),n.createElement("input",{type:"date",value:m.endDate,onChange:function(e){return v((function(t){return s(s({},t),{},{endDate:e.target.value})}))},className:"form-control",required:!0})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Leave Type"),n.createElement("select",{value:m.leaveType,onChange:function(e){return v((function(t){return s(s({},t),{},{leaveType:e.target.value})}))},className:"form-control",required:!0},n.createElement("option",{value:"vacation"},"Vacation"),n.createElement("option",{value:"sick"},"Sick Leave"),n.createElement("option",{value:"personal"},"Personal Leave"),n.createElement("option",{value:"other"},"Other"))),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Reason"),n.createElement("textarea",{value:m.reason,onChange:function(e){return v((function(t){return s(s({},t),{},{reason:e.target.value})}))},className:"form-control",rows:"3"})),n.createElement("div",{className:"modal-footer"},n.createElement("button",{type:"button",onClick:r,className:"btn btn-secondary"},"Cancel"),n.createElement("button",{type:"submit",className:"btn btn-primary"},"Save Changes")))))}},5741:(e,t,r)=>{r.d(t,{A:()=>A});var n=r(6540),a=r(2307),l=r(8697),o=r(418),c=r(8686),s=r(3893),i=r(4471),u=r(2708),m=r(7235),d=r(6069),f=r(2795),v=r(2948),p=r(2321);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function l(r,n,a,l){var s=n&&n.prototype instanceof c?n:c,i=Object.create(s.prototype);return g(i,"_invoke",function(r,n,a){var l,c,s,i=0,u=a||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return l=t,c=0,s=e,d.n=r,o}};function f(r,n){for(c=r,s=n,t=0;!m&&i&&!a&&t<u.length;t++){var a,l=u[t],f=d.p,v=l[2];r>3?(a=v===n)&&(s=l[(c=l[4])?5:(c=3,3)],l[4]=l[5]=e):l[0]<=f&&((a=r<2&&f<l[1])?(c=0,d.v=n,d.n=l[1]):f<v&&(a=r<3||l[0]>n||n>v)&&(l[4]=r,l[5]=n,d.n=v,c=0))}if(a||r>1)return o;throw m=!0,n}return function(a,u,v){if(i>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,v),c=u,s=v;(t=c<2?e:s)||!m;){l||(c?c<3?(c>1&&(d.n=-1),f(c,s)):d.n=s:d.v=s);try{if(i=2,l){if(c||(a="next"),t=l[a]){if(!(t=t.call(l,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=l.return)&&t.call(l),c<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),c=1);l=e}else if((t=(m=d.n<0)?s:r.call(n,d))!==o)break}catch(t){l=e,c=1,s=t}finally{i=1}}return{value:t,done:m}}}(r,a,l),!0),i}var o={};function c(){}function s(){}function i(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(g(t={},n,(function(){return this})),t),m=i.prototype=c.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,g(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=i,g(m,"constructor",i),g(i,"constructor",s),s.displayName="GeneratorFunction",g(i,a,"GeneratorFunction"),g(m),g(m,a,"Generator"),g(m,n,(function(){return this})),g(m,"toString",(function(){return"[object Generator]"})),(b=function(){return{w:l,m:d}})()}function g(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}g=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var l=function(t,r){g(e,t,(function(e){return this._invoke(t,r,e)}))};l("next",0),l("throw",1),l("return",2)}},g(e,t,r,n)}function h(e,t,r,n,a,l,o){try{var c=e[l](o),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function E(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,o,c=[],s=!0,i=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=l.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(i)throw a}}return c}}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return j(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var _=n.useState,D=n.useEffect;const A=function(e){var t,r,y,g,N,k=e.selectedDates,j=void 0===k?[]:k,A=e.onClose,T=e.onSubmit,P=e.currentUser,q=e.currentUserData,C=e.userManager,U=e.allUsers,x=void 0===U?[]:U,R=e.allTeams,I=void 0===R?[]:R,L=e.allRequests,F=void 0===L?[]:L,M=e.isAdmin,G=void 0!==M&&M,z=(e.isAdminMode,O(_({targetUser:P,manager:C,startDate:j[0]||"",endDate:j[j.length-1]||"",reason:"",dailySchedules:[]}),2)),B=z[0],H=z[1],Y=O(_({}),2),$=Y[0],W=Y[1],J=O(_(!1),2),V=J[0],K=J[1],Q=O(_(!1),2),X=Q[0],Z=Q[1],ee=O(_(!1),2),te=ee[0],re=ee[1];D((function(){K(!G&&!q)}),[G,q]);var ne=function(e){if(!e)return null;var t=x.find((function(t){return t.jira_account_id===e.accountId||t.email_address===e.emailAddress}));if(null!=t&&t.manager)return x.find((function(e){return e.id===t.manager||e.jira_account_id===t.manager}));if(null!=t&&t.team_id){var r=I.find((function(e){return e.id===t.team_id}));if(null!=r&&r.manager)return x.find((function(e){return e.id===r.manager||e.jira_account_id===r.manager}))}return null};D((function(){!function(){var e=[];if(!X&&j.length>0)e=j.slice().sort();else if((X||0===j.length)&&B.startDate&&B.endDate){var t=new Date(B.startDate),r=new Date(B.endDate);e=[];for(var n=new Date(t);n<=r;n.setDate(n.getDate()+1))e.push(n.toISOString().split("T")[0])}var a=e.map((function(e){return{date:e,type:"FULL_DAY",leaveType:"vacation"}}));H((function(t){return w(w({},t),{},{targetUser:G?t.targetUser:P,manager:ne(G?t.targetUser:P)||C||t.manager,startDate:e[0]||"",endDate:e[e.length-1]||"",dailySchedules:a})}))}()}),[j,P,C,G,x,I,X]),D((function(){if(B.startDate&&B.endDate){for(var e=new Date(B.startDate),t=new Date(B.endDate),r=[],n=new Date(e);n<=t;n.setDate(n.getDate()+1))r.push(n.toISOString().split("T")[0]);var a=B.dailySchedules.filter((function(e){return r.includes(e.date)})),l=r.filter((function(e){return!a.find((function(t){return t.date===e}))})).map((function(e){return{date:e,type:"FULL_DAY",leaveType:"vacation"}}));H((function(e){return w(w({},e),{},{dailySchedules:[].concat(E(a),E(l)).sort((function(e,t){return new Date(e.date)-new Date(t.date)}))})}))}}),[B.startDate,B.endDate]);var ae=function(){var e,t=(e=b().m((function e(t){var r,n,a,l;return b().w((function(e){for(;;)switch(e.n){case 0:if(t){e.n=1;break}return H((function(e){return w(w({},e),{},{targetUser:null})})),e.a(2);case 1:return e.p=1,e.n=2,(0,p.invoke)("getAllUsers");case 2:r=e.v,n=r.success&&r.data||[],a=n.find((function(e){return e.jira_account_id===t.accountId||e.email_address===t.emailAddress})),H(a?function(e){return w(w({},e),{},{targetUser:a,manager:ne(a)})}:function(e){return w(w({},e),{},{targetUser:t,manager:null})}),e.n=4;break;case 3:e.p=3,l=e.v,console.error("Failed to get user details:",l),H((function(e){return w(w({},e),{},{targetUser:t})}));case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var l=e.apply(t,r);function o(e){h(l,n,a,o,c,"next",e)}function c(e){h(l,n,a,o,c,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),le=function(e,t,r){H((function(n){return w(w({},n),{},{dailySchedules:n.dailySchedules.map((function(n,a){return a===e?w(w({},n),{},S({},t,r)):n}))})}))},oe=[{value:"FULL_DAY",label:"Full Day (8h)"},{value:"HALF_DAY_MORNING",label:"Morning Half (4h)"},{value:"HALF_DAY_AFTERNOON",label:"Afternoon Half (4h)"}],ce=[{value:"vacation",label:"🏖️ Vacation",emoji:"🏖️"},{value:"sick",label:"🤒 Sick Leave",emoji:"🤒"},{value:"personal",label:"👤 Personal Day",emoji:"👤"},{value:"holiday",label:"🎉 Holiday",emoji:"🎉"},{value:"other leave type",label:"📝 Other Leave Type",emoji:"📝"}],se={totalDays:B.dailySchedules.reduce((function(e,t){return e+("FULL_DAY"===t.type?1:.5)}),0),totalHours:B.dailySchedules.reduce((function(e,t){return e+("FULL_DAY"===t.type?8:4)}),0),leaveTypeBreakdown:B.dailySchedules.reduce((function(e,t){return e[t.leaveType]=(e[t.leaveType]||0)+("FULL_DAY"===t.type?1:.5),e}),{}),workingDays:B.dailySchedules.length,dateRange:B.startDate&&B.endDate?"".concat(new Date(B.startDate).toLocaleDateString()," - ").concat(new Date(B.endDate).toLocaleDateString()):""},ie=function(e){Z(e);var t=[];if(e&&B.startDate&&B.endDate)for(var r=new Date(B.startDate),n=new Date(B.endDate),a=new Date(r);a<=n;a.setDate(a.getDate()+1))t.push(a.toISOString().split("T")[0]);else t=j.slice().sort();var l=t.map((function(e){return{date:e,type:"FULL_DAY",leaveType:"vacation"}}));H((function(e){return w(w({},e),{},{dailySchedules:l})}))};return D((function(){Z(!1);var e=j.slice().sort(),t=e.map((function(e){return{date:e,type:"FULL_DAY",leaveType:"vacation"}}));H((function(r){return w(w({},r),{},{startDate:e[0]||"",endDate:e[e.length-1]||"",dailySchedules:t})}))}),[j]),n.createElement("div",{className:"modal-overlay"},n.createElement("div",{className:"modal-content pto-submission-modal"},n.createElement("div",{className:"modal-header"},n.createElement("h3",{className:"modal-title"},n.createElement(a.A,{size:20}),G?"Create PTO Request (Admin)":"Submit PTO Request"),n.createElement("button",{onClick:A,className:"modal-close"},n.createElement(l.A,{size:20}))),n.createElement("div",{className:"modal-body"},V&&n.createElement("div",{className:"alert alert-warning"},n.createElement(o.A,{size:20}),n.createElement("div",null,n.createElement("strong",null,"User Not in System"),n.createElement("p",null,"Your user profile is not set up in the team management system. Please contact HR to complete your setup."))),n.createElement("div",{className:"form-section"},n.createElement("label",{className:"form-label"},"Employee ",G?"*":""),G?n.createElement(f.A,{selectedUser:B.targetUser,onSelect:ae,placeholder:"Search and select employee",required:!0,error:$.targetUser,useBackendSearch:!0}):n.createElement("div",{className:"user-display-card"},n.createElement("div",{className:"user-avatar-large"},null!=P&&P.avatarUrl?n.createElement("img",{src:P.avatarUrl,alt:P.displayName}):n.createElement("div",{className:"avatar-placeholder-large"},(null==P||null===(t=P.displayName)||void 0===t?void 0:t.charAt(0))||n.createElement(c.A,{size:20}))),n.createElement("div",{className:"user-info-detailed"},n.createElement("div",{className:"user-name-large"},null==P?void 0:P.displayName),n.createElement("div",{className:"user-email-large"},null==P?void 0:P.emailAddress),(null==q?void 0:q.team_id)&&n.createElement("div",{className:"user-team"},n.createElement(s.A,{size:14}),(null===(r=I.find((function(e){return e.id===q.team_id})))||void 0===r?void 0:r.name)||"Team Member"))),$.targetUser&&n.createElement("div",{className:"error-text"},$.targetUser)),n.createElement("div",{className:"form-section"},n.createElement("label",{className:"form-label"},"Manager *"),B.manager?n.createElement("div",{className:"user-display-card manager-display"},n.createElement("div",{className:"user-avatar-large"},B.manager.avatarUrl?n.createElement("img",{src:B.manager.avatarUrl,alt:B.manager.displayName}):n.createElement("div",{className:"avatar-placeholder-large"},(null===(y=B.manager.displayName)||void 0===y?void 0:y.charAt(0))||n.createElement(c.A,{size:20}))),n.createElement("div",{className:"user-info-detailed"},n.createElement("div",{className:"user-name-large"},B.manager.displayName),n.createElement("div",{className:"user-email-large"},B.manager.emailAddress),n.createElement("div",{className:"manager-badge"},n.createElement(i.A,{size:14}),"Approving Manager")),G&&n.createElement("button",{type:"button",onClick:function(){return H((function(e){return w(w({},e),{},{manager:null})}))},className:"btn btn-sm btn-secondary",title:"Change Manager"},"Change")):n.createElement(f.A,{selectedUser:B.manager,onSelect:function(e){return H((function(t){return w(w({},t),{},{manager:e})}))},placeholder:"Search and select approving manager",required:!0,error:$.manager,useBackendSearch:!0}),$.manager&&n.createElement("div",{className:"error-text"},$.manager)),n.createElement("div",{className:"pto-modal-section pto-modal-row"},n.createElement("div",{className:"pto-modal-col"},n.createElement("label",{className:"form-label"},"Start Date"),n.createElement("input",{type:"text",className:"form-control",value:B.startDate,readOnly:!0,tabIndex:-1})),n.createElement("div",{className:"pto-modal-col"},n.createElement("label",{className:"form-label"},"End Date"),n.createElement("input",{type:"text",className:"form-control",value:B.endDate,readOnly:!0,tabIndex:-1})),n.createElement("div",{className:"pto-modal-col",style:{alignSelf:"end"}},!X&&j.length>1&&n.createElement("button",{type:"button",className:"btn btn-sm btn-secondary",style:{marginTop:24},onClick:function(){return ie(!0)}},"Add all dates in range"),X&&n.createElement("button",{type:"button",className:"btn btn-sm btn-secondary",style:{marginTop:24},onClick:function(){return ie(!1)}},"Use only selected dates"))),n.createElement("div",{className:"form-section"},n.createElement("label",{className:"form-label"},"Reason (Optional)"),n.createElement("textarea",{value:B.reason,onChange:function(e){return H((function(t){return w(w({},t),{},{reason:e.target.value})}))},className:"form-control",rows:"3",placeholder:"Please provide additional details about your PTO request..."})),B.dailySchedules.length>0&&n.createElement("div",{className:"form-section"},n.createElement("div",{className:"schedule-header"},n.createElement("label",{className:"form-label"},"Schedule Details"),n.createElement("div",{className:"quick-actions"},n.createElement("span",{className:"quick-actions-label"},"Apply to all:"),ce.map((function(e){return n.createElement("button",{key:e.value,type:"button",onClick:function(){return t=e.value,void H((function(e){return w(w({},e),{},{dailySchedules:e.dailySchedules.map((function(e){return w(w({},e),{},{leaveType:t})}))})}));var t},className:"btn btn-sm btn-secondary quick-action-btn",title:"Mark all days as ".concat(e.label)},n.createElement("span",null,e.emoji),n.createElement("span",null,e.value))})))),n.createElement("div",{className:"schedule-list"},B.dailySchedules.map((function(e,t){return n.createElement("div",{key:e.date,className:"schedule-day-row"},n.createElement("div",{className:"schedule-day-info"},n.createElement("div",{className:"day-date"},new Date(e.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}))),n.createElement("div",{className:"schedule-controls"},n.createElement("select",{value:e.leaveType,onChange:function(e){return le(t,"leaveType",e.target.value)},className:"form-control schedule-select"},ce.map((function(e){return n.createElement("option",{key:e.value,value:e.value},e.label)}))),n.createElement("select",{value:e.type,onChange:function(e){return le(t,"type",e.target.value)},className:"form-control schedule-select"},oe.map((function(e){return n.createElement("option",{key:e.value,value:e.value},e.label)}))),n.createElement("button",{type:"button",onClick:function(){return function(e){H((function(t){return w(w({},t),{},{dailySchedules:t.dailySchedules.filter((function(t,r){return r!==e}))})}));var t=B.dailySchedules.filter((function(t,r){return r!==e}));if(t.length>0){var r=t.map((function(e){return e.date})).sort();H((function(e){return w(w({},e),{},{startDate:r[0],endDate:r[r.length-1]})}))}}(t)},className:"btn btn-sm btn-danger",title:"Remove this day"},n.createElement(u.A,{size:14}))))}))),$.dailySchedules&&n.createElement("div",{className:"error-text"},$.dailySchedules)),B.dailySchedules.length>0&&n.createElement("div",{className:"form-section"},n.createElement("div",{className:"request-summary-card"},n.createElement("div",{className:"summary-header"},n.createElement("h4",null,"Request Summary"),n.createElement("div",{className:"summary-status"},n.createElement(m.A,{size:16}),"Ready to Submit")),n.createElement("div",{className:"summary-content"},n.createElement("div",{className:"summary-metrics"},n.createElement("div",{className:"metric-item"},n.createElement("div",{className:"metric-value"},se.totalDays),n.createElement("div",{className:"metric-label"},"Days Off")),n.createElement("div",{className:"metric-item"},n.createElement("div",{className:"metric-value"},se.totalHours,"h"),n.createElement("div",{className:"metric-label"},"Total Hours")),n.createElement("div",{className:"metric-item"},n.createElement("div",{className:"metric-value"},se.workingDays),n.createElement("div",{className:"metric-label"},"Scheduled Days"))),n.createElement("div",{className:"summary-details"},n.createElement("div",{className:"detail-row"},n.createElement("span",{className:"detail-label"},n.createElement(d.A,{size:16}),"Date Range:"),n.createElement("span",{className:"detail-value"},se.dateRange)),n.createElement("div",{className:"detail-row"},n.createElement("span",{className:"detail-label"},n.createElement(c.A,{size:16}),G?"Employee:":"Approver:"),n.createElement("span",{className:"detail-value"},G?(null===(g=B.targetUser)||void 0===g?void 0:g.displayName)||"Not selected":(null===(N=B.manager)||void 0===N?void 0:N.displayName)||"Not selected")),Object.keys(se.leaveTypeBreakdown).length>0&&n.createElement("div",{className:"detail-row"},n.createElement("span",{className:"detail-label"},n.createElement(a.A,{size:16}),"Leave Types:"),n.createElement("div",{className:"leave-type-tags"},Object.entries(se.leaveTypeBreakdown).map((function(e){var t=O(e,2),r=t[0],a=t[1];return n.createElement("span",{key:r,className:"leave-type-tag"},(0,v.S0)(r)," ",r,": ",a," day",1!==a?"s":"")})))))))),$.duplicate&&n.createElement("div",{className:"alert alert-error"},n.createElement(o.A,{size:20}),n.createElement("div",null,n.createElement("strong",null,"Scheduling Conflict"),n.createElement("p",null,$.duplicate))),n.createElement("div",{className:"form-actions"},n.createElement("button",{type:"button",onClick:A,className:"btn btn-secondary"},"Cancel"),n.createElement("button",{type:"button",onClick:function(){var e;if(function(){var e,t,r={};B.targetUser||(r.targetUser="User is required"),B.manager||(r.manager="Manager is required"),B.startDate||(r.startDate="Start date is required"),B.endDate||(r.endDate="End date is required"),B.startDate&&B.endDate&&new Date(B.startDate)>new Date(B.endDate)&&(r.endDate="End date must be after start date"),0===B.dailySchedules.length&&(r.dailySchedules="Please select at least one day");var n=(null===(e=B.targetUser)||void 0===e?void 0:e.accountId)||(null===(t=B.targetUser)||void 0===t?void 0:t.jira_account_id);if(n){var a=B.dailySchedules.filter((function(e){return F.some((function(t){var r;return(t.requester_id===n||t.requester_email===(null===(r=B.targetUser)||void 0===r?void 0:r.emailAddress))&&"declined"!==t.status&&t.start_date<=e.date&&t.end_date>=e.date}))}));a.length>0&&(r.duplicate="This user already has PTO requests for: ".concat(a.map((function(e){return new Date(e.date).toLocaleDateString()})).join(", ")))}return W(r),0===Object.keys(r).length}()){var t,r=(t=B.targetUser)?w(w({},t),{},{accountId:t.accountId||t.jira_account_id||t.id,displayName:t.displayName||t.display_name||t.name,emailAddress:t.emailAddress||t.email_address,avatarUrl:t.avatarUrl||t.avatar_url}):null;if(r&&r.accountId&&r.displayName&&r.emailAddress){var n,a=B.dailySchedules.reduce((function(e,t){return e+("FULL_DAY"===t.type?1:.5)}),0),l=B.dailySchedules.reduce((function(e,t){return e+("FULL_DAY"===t.type?8:4)}),0),o=w({reporter:r,manager:(n=B.manager,n?w(w({},n),{},{accountId:n.accountId||n.jira_account_id||n.id,displayName:n.displayName||n.display_name||n.name,emailAddress:n.emailAddress||n.email_address,avatarUrl:n.avatarUrl||n.avatar_url}):null),startDate:B.startDate,endDate:B.endDate,leaveType:(null===(e=B.dailySchedules[0])||void 0===e?void 0:e.leaveType)||"vacation",reason:B.reason,dailySchedules:B.dailySchedules,totalDays:a,totalHours:l,isAdmin:te},te&&{targetUser:r});T(o)}else W((function(e){return w(w({},e),{},{targetUser:"Please select a valid user."})}))}},disabled:!B.targetUser||!B.manager||!B.startDate||!B.endDate||0===B.dailySchedules.length||!!$.duplicate||V,className:"btn btn-primary"},G?"Create PTO Request":"Submit Request")),te&&n.createElement("div",{className:"admin-notice"},n.createElement("strong",null,"Admin Mode:")," This PTO request will be created with admin privileges and may be automatically approved."),0===B.dailySchedules.length&&n.createElement("div",{className:"instructions"},n.createElement("strong",null,"Next Step:")," Select start and end dates to configure your PTO schedule, or return to the calendar to select specific dates."),G&&n.createElement("div",{className:"pto-admin-mode-toggle",style:{display:"flex",gap:"2rem",alignItems:"center",marginBottom:16}},n.createElement("label",{style:{display:"flex",alignItems:"center",gap:6}},n.createElement("input",{type:"radio",checked:!te,onChange:function(){return re(!1)},style:{marginRight:6}}),"Submit as Standard User"),n.createElement("label",{style:{display:"flex",alignItems:"center",gap:6}},n.createElement("input",{type:"radio",checked:te,onChange:function(){return re(!0)},style:{marginRight:6}}),"Submit as Admin (auto-approve)")))))}},6483:(e,t,r)=>{var n=r(6540),a=r(5338),l=r(922),o=r(2321);function c(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function l(r,n,a,l){var c=n&&n.prototype instanceof i?n:i,u=Object.create(c.prototype);return s(u,"_invoke",function(r,n,a){var l,c,s,i=0,u=a||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return l=t,c=0,s=e,d.n=r,o}};function f(r,n){for(c=r,s=n,t=0;!m&&i&&!a&&t<u.length;t++){var a,l=u[t],f=d.p,v=l[2];r>3?(a=v===n)&&(s=l[(c=l[4])?5:(c=3,3)],l[4]=l[5]=e):l[0]<=f&&((a=r<2&&f<l[1])?(c=0,d.v=n,d.n=l[1]):f<v&&(a=r<3||l[0]>n||n>v)&&(l[4]=r,l[5]=n,d.n=v,c=0))}if(a||r>1)return o;throw m=!0,n}return function(a,u,v){if(i>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,v),c=u,s=v;(t=c<2?e:s)||!m;){l||(c?c<3?(c>1&&(d.n=-1),f(c,s)):d.n=s:d.v=s);try{if(i=2,l){if(c||(a="next"),t=l[a]){if(!(t=t.call(l,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=l.return)&&t.call(l),c<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),c=1);l=e}else if((t=(m=d.n<0)?s:r.call(n,d))!==o)break}catch(t){l=e,c=1,s=t}finally{i=1}}return{value:t,done:m}}}(r,a,l),!0),u}var o={};function i(){}function u(){}function m(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(s(t={},n,(function(){return this})),t),f=m.prototype=i.prototype=Object.create(d);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,s(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=m,s(f,"constructor",m),s(m,"constructor",u),u.displayName="GeneratorFunction",s(m,a,"GeneratorFunction"),s(f),s(f,a,"Generator"),s(f,n,(function(){return this})),s(f,"toString",(function(){return"[object Generator]"})),(c=function(){return{w:l,m:v}})()}function s(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}s=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var l=function(t,r){s(e,t,(function(e){return this._invoke(t,r,e)}))};l("next",0),l("throw",1),l("return",2)}},s(e,t,r,n)}function i(e,t,r,n,a,l,o){try{var c=e[l](o),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}console.log("PTO app initializing...");var u=function(){var e,t=(e=c().m((function e(){var t,r;return c().w((function(e){for(;;)switch(e.n){case 0:if(t=document.getElementById("root")){e.n=1;break}return console.error('Root element not found! Make sure there is a div with id="root" in your HTML.'),e.a(2);case 1:return(0,a.H)(t).render(n.createElement(n.StrictMode,null,n.createElement(l.A,null))),console.log("App rendered successfully"),e.p=2,e.n=3,o.view.resize();case 3:console.log("Forge iframe resized"),e.n=5;break;case 4:e.p=4,r=e.v,console.warn("Unable to resize Forge iframe:",r);case 5:return e.a(2)}}),e,null,[[2,4]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var l=e.apply(t,r);function o(e){i(l,n,a,o,c,"next",e)}function c(e){i(l,n,a,o,c,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();"complete"===document.readyState||"interactive"===document.readyState?u():document.addEventListener("DOMContentLoaded",u)},6874:(e,t,r)=>{r.d(t,{A:()=>S});var n=r(6540),a=r(2307),l=r(5627),o=r(6316),c=r(4945),s=r(8188),i=r(2708),u=r(9649),m=r(2948),d=r(1863),f=r(5653);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,o,c=[],s=!0,i=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=l.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(i)throw a}}return c}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return N(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?N(e,t):void 0}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var w=[{key:"vacation",label:"Vacation",color:"stat-blue"},{key:"holiday",label:"Holiday",color:"stat-yellow"},{key:"personal",label:"Personal",color:"stat-purple"}];const S=function(e){var t=e.requests,r=e.currentUser,v=e.onEditRequest,p=e.onCancelRequest,b=h((0,n.useState)("all"),2),E=(b[0],b[1],h((0,n.useState)("all"),2)),N=E[0],S=E[1],O=h((0,n.useState)(!1),2),k=O[0],j=O[1],_=h((0,n.useState)({preset:"all",from:"",to:""}),2),D=_[0],A=_[1],T=h((0,n.useState)(null),2),P=T[0],q=T[1],C=h((0,n.useState)(!0),2),U=C[0],x=(C[1],h((0,n.useState)(null),2)),R=(x[0],x[1],function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),I=function(e){if(e.requester_id!==r.accountId)return!1;if("pending"===e.status)return!0;if("approved"===e.status){var t=new Date;return t.setHours(0,0,0,0),new Date(e.start_date)>=t}return!1},L=(0,n.useMemo)((function(){var e=Array.isArray(t)?g(t):[];if(D&&"all"!==D.preset){var r,n,a=new Date;switch(D.preset){case"current_year":r=new Date(a.getFullYear(),0,1),n=new Date(a.getFullYear(),11,31);break;case"last_90_days":(r=new Date(a)).setDate(a.getDate()-90),n=a;break;case"last_30_days":(r=new Date(a)).setDate(a.getDate()-30),n=a;break;case"custom":r=D.from?new Date(D.from):null,n=D.to?new Date(D.to):null;break;default:r=null,n=null}e=e.filter((function(e){var t=new Date(e.start_date),a=new Date(e.end_date);return"custom"===D.preset?!(r&&a<r)&&!(n&&t>n):(!r||a>=r)&&(!n||t<=n)}))}return N&&"all"!==N&&(e=e.filter((function(e){return e.status===N}))),e}),[t,D,N]),F=(0,n.useMemo)((function(){return g(L).sort((function(e,t){return new Date(t.start_date)-new Date(e.start_date)}))}),[L]),M=(0,n.useMemo)((function(){var e=Array.isArray(L)?L:[];return{totalRequests:e.length,pendingRequests:e.filter((function(e){return"pending"===e.status})).length,approvedRequests:e.filter((function(e){return"approved"===e.status})).length,declinedRequests:e.filter((function(e){return"declined"===e.status})).length,totalDays:e.filter((function(e){return"approved"===e.status})).reduce((function(e,t){return e+(t.total_days||0)}),0),ptoByType:e.filter((function(e){return"approved"===e.status})).reduce((function(e,t){var r=t.leave_type||"unknown";return e[r]=(e[r]||0)+(t.total_days||0),e}),{})}}),[L]),G=(0,n.useMemo)((function(){return(Array.isArray(t)?t:[]).filter((function(e){return"approved"===e.status}))}),[t]),z=["vacation","holiday","personal"].reduce((function(e,t){return e[t]=G.filter((function(e){return e.leave_type===t})).reduce((function(e,t){return e+(t.total_days||0)}),0),e}),{}),B=(Object.values(z).reduce((function(e,t){return e+t}),0),G.filter((function(e){return"sick"===e.leave_type})).reduce((function(e,t){return e+(t.total_days||0)}),0),(0,n.useMemo)((function(){var e=[];return F.forEach((function(t){for(var r=new Date(t.start_date),n=new Date(t.end_date),a=new Date(r);a<=n;a.setDate(a.getDate()+1)){var l=new Date(a);e.push(y(y({},t),{},{scheduled_date:new Date(l)}))}})),e.sort((function(e,t){return t.scheduled_date-e.scheduled_date}))}),[F])),H=(0,n.useMemo)((function(){var e=["vacation","holiday","personal"].reduce((function(e,t){return e[t]=B.filter((function(e){return e.leave_type===t})).length,e}),{});return{daysOffBreakdown:e,totalDaysOff:Object.values(e).reduce((function(e,t){return e+t}),0),sickDays:B.filter((function(e){return"sick"===e.leave_type})).length,ptoByType:B.reduce((function(e,t){return e[t.leave_type]=(e[t.leave_type]||0)+1,e}),{}),totalScheduled:B.length}}),[B]);return 0===t.length?n.createElement("div",{className:"requests-container"},n.createElement("div",{className:"card requests-card"},n.createElement("h2",{className:"card-title"},"My PTO Requests"),n.createElement("div",{className:"requests-empty"},n.createElement(a.A,{size:48,className:"requests-empty-icon"}),n.createElement("h3",{className:"requests-empty-title"},"No PTO requests found"),n.createElement("p",null,"You haven't submitted any PTO requests yet."),n.createElement("p",{className:"requests-empty-desc"},"Go to the Calendar tab to submit your first request!")))):n.createElement("div",{className:"requests-container"},n.createElement("div",{className:"requests-header-section"},n.createElement("div",{className:"requests-page-header"},n.createElement("h2",{className:"page-title"},"My PTO Requests"),n.createElement("div",{className:"requests-counts-header"},n.createElement("span",{className:"requests-count total"},"Total: ",t.length),n.createElement("span",{className:"requests-count pending"},"Pending: ",M.pendingRequests),n.createElement("span",{className:"requests-count approved"},"Approved: ",M.approvedRequests)),n.createElement("div",{className:"requests-page-controls"},n.createElement("button",{onClick:function(){return j(!k)},className:"btn btn-secondary ".concat(k?"active":"")},n.createElement(l.A,{size:16}),"Filters"))),k&&n.createElement("div",{className:"filters-panel"},n.createElement("div",{className:"filters-row"},n.createElement("div",{className:"filter-group"},n.createElement("label",null,"Date Range"),n.createElement(d.A,{value:D,onChange:A})),n.createElement("div",{className:"filter-group"},n.createElement("label",null,"Status"),n.createElement("select",{value:N,onChange:function(e){return S(e.target.value)},className:"form-control"},n.createElement("option",{value:"all"},"All Status"),n.createElement("option",{value:"pending"},"Pending"),n.createElement("option",{value:"approved"},"Approved"),n.createElement("option",{value:"declined"},"Declined"))))),n.createElement("div",{className:"summary-cards-container pto-balances-cards"},w.map((function(e){var t,r;return n.createElement("div",{key:e.key,className:"summary-card ".concat(e.color)},n.createElement("div",{className:"summary-icon"},(0,m.S0)(e.key)),n.createElement("div",{className:"summary-content"},n.createElement("div",{className:"summary-value"},U?"...":null!==(t=null===(r=[e.key])||void 0===r?void 0:r.remaining_days)&&void 0!==t?t:"-"),n.createElement("div",{className:"summary-label"},"Available ",e.label," Days")))})),n.createElement("div",{className:"summary-card stat-green"},n.createElement("div",{className:"summary-icon"},n.createElement(o.A,{size:20})),n.createElement("div",{className:"summary-content"},n.createElement("div",{className:"summary-value"},H.totalDaysOff),n.createElement("div",{className:"summary-label"},"Days Off"),n.createElement("div",{className:"summary-breakdown"},Object.keys(H.daysOffBreakdown).map((function(e){return n.createElement("div",{key:e,className:"breakdown-row"},n.createElement("span",{className:"breakdown-label"},e.charAt(0).toUpperCase()+e.slice(1),":"),n.createElement("span",{className:"breakdown-value"},H.daysOffBreakdown[e]))}))))),n.createElement("div",{className:"summary-card stat-red"},n.createElement("div",{className:"summary-icon"},n.createElement(c.A,{size:20})),n.createElement("div",{className:"summary-content"},n.createElement("div",{className:"summary-value"},H.sickDays),n.createElement("div",{className:"summary-label"},"Sick Days")))),Object.keys(H.ptoByType||{}).length>0&&n.createElement("div",{className:"card pto-breakdown-card restyled"},n.createElement("div",{className:"card-header"},n.createElement("h3",null,"PTO Breakdown by Leave Type")),n.createElement("div",{className:"card-body"},n.createElement("div",{className:"pto-breakdown-flex"},Object.entries(H.ptoByType||{}).map((function(e){var t=h(e,2),r=t[0],a=t[1];return n.createElement("div",{key:r,className:"pto-breakdown-pill pill-".concat(r)},n.createElement("span",{className:"pill-emoji"},(0,m.S0)(r)),n.createElement("span",{className:"pill-type"},r.charAt(0).toUpperCase()+r.slice(1)),n.createElement("span",{className:"pill-days"},a," ",1===a?"day":"days"),n.createElement("span",{className:"pill-percent"},H.totalScheduled>0?(a/H.totalScheduled*100).toFixed(1):"0.0","%"))})))))),n.createElement("div",{className:"requests-content"},n.createElement("div",{className:"card requests-list-card"},n.createElement("div",{className:"card-header"},n.createElement("h3",null,"Request History"),n.createElement("div",{className:"requests-count"},L.length," ",1===L.length?"request":"requests")),n.createElement("div",{className:"card-body"},0===L.length?n.createElement("div",{className:"no-results"},n.createElement("p",null,"No requests found for the selected filters.")):n.createElement("div",{className:"requests-table-wrapper"},n.createElement("table",{className:"requests-table"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Type"),n.createElement("th",null,"Date"),n.createElement("th",null,"Status"),n.createElement("th",null,"Reason"),n.createElement("th",null,"Submitted"),n.createElement("th",null,"Reviewed"),n.createElement("th",null,"Actions"))),n.createElement("tbody",null,B.map((function(e,t){return n.createElement("tr",{key:e.id+"-"+e.scheduled_date.toISOString(),className:"request-row"},n.createElement("td",null,n.createElement("span",{className:"request-emoji"},(0,m.S0)(e.leave_type)),e.leave_type.charAt(0).toUpperCase()+e.leave_type.slice(1)),n.createElement("td",null,R(e.scheduled_date)),n.createElement("td",null,n.createElement(u.A,{status:e.status})),n.createElement("td",null,e.reason||"-"),n.createElement("td",null,R(e.submitted_at)),n.createElement("td",null,"pending"!==e.status&&e.reviewed_at?R(e.reviewed_at):"-"),n.createElement("td",null,I(e)&&n.createElement("button",{onClick:function(){var t;I(t=e)&&q(t)},className:"btn btn-sm btn-secondary",title:"Edit Request"},n.createElement(s.A,{size:14})),function(e){if(e.requester_id!==r.accountId)return!1;if("approved"===e.status){var t=new Date(e.end_date),n=new Date;return n.setHours(0,0,0,0),t>=n}return"pending"===e.status}(e)&&n.createElement("button",{onClick:function(){return p&&p(e)},className:"btn btn-sm btn-danger",title:"Cancel Request"},n.createElement(i.A,{size:14}))))})))))))),P&&n.createElement(f.A,{request:P,onClose:function(){return q(null)},onSave:function(e){v(e),q(null)},currentUser:r}))}},7372:(e,t,r)=>{r.d(t,{A:()=>_});var n=r(6540),a=r(2321),l=r(3893),o=r(2307),c=r(7235),s=r(4471),i=r(6316),u=r(8686),m=r(8309),d=r(9649),f=r(2948),v=r(1863);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function l(r,n,a,l){var s=n&&n.prototype instanceof c?n:c,i=Object.create(s.prototype);return N(i,"_invoke",function(r,n,a){var l,c,s,i=0,u=a||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return l=t,c=0,s=e,d.n=r,o}};function f(r,n){for(c=r,s=n,t=0;!m&&i&&!a&&t<u.length;t++){var a,l=u[t],f=d.p,v=l[2];r>3?(a=v===n)&&(s=l[(c=l[4])?5:(c=3,3)],l[4]=l[5]=e):l[0]<=f&&((a=r<2&&f<l[1])?(c=0,d.v=n,d.n=l[1]):f<v&&(a=r<3||l[0]>n||n>v)&&(l[4]=r,l[5]=n,d.n=v,c=0))}if(a||r>1)return o;throw m=!0,n}return function(a,u,v){if(i>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,v),c=u,s=v;(t=c<2?e:s)||!m;){l||(c?c<3?(c>1&&(d.n=-1),f(c,s)):d.n=s:d.v=s);try{if(i=2,l){if(c||(a="next"),t=l[a]){if(!(t=t.call(l,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=l.return)&&t.call(l),c<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),c=1);l=e}else if((t=(m=d.n<0)?s:r.call(n,d))!==o)break}catch(t){l=e,c=1,s=t}finally{i=1}}return{value:t,done:m}}}(r,a,l),!0),i}var o={};function c(){}function s(){}function i(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(N(t={},n,(function(){return this})),t),m=i.prototype=c.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,N(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=i,N(m,"constructor",i),N(i,"constructor",s),s.displayName="GeneratorFunction",N(i,a,"GeneratorFunction"),N(m),N(m,a,"Generator"),N(m,n,(function(){return this})),N(m,"toString",(function(){return"[object Generator]"})),(E=function(){return{w:l,m:d}})()}function N(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}N=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var l=function(t,r){N(e,t,(function(e){return this._invoke(t,r,e)}))};l("next",0),l("throw",1),l("return",2)}},N(e,t,r,n)}function w(e,t,r,n,a,l,o){try{var c=e[l](o),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function S(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var l=e.apply(t,r);function o(e){w(l,n,a,o,c,"next",e)}function c(e){w(l,n,a,o,c,"throw",e)}o(void 0)}))}}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,o,c=[],s=!0,i=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=l.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(i)throw a}}return c}}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return j(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const _=function(e){var t=e.currentUser,r=e.isAdmin,p=e.showNotification,b=O((0,n.useState)(null),2),N=b[0],w=b[1],k=O((0,n.useState)("current_month"),2),j=k[0],_=(k[1],O((0,n.useState)("all"),2)),D=_[0],A=_[1],T=O((0,n.useState)([]),2),P=T[0],q=T[1],C=O((0,n.useState)([]),2),U=C[0],x=C[1],R=O((0,n.useState)([]),2),I=R[0],L=R[1],F=O((0,n.useState)(!0),2),M=F[0],G=F[1],z=O((0,n.useState)({}),2),B=z[0],H=z[1],Y=O((0,n.useState)(!1),2),$=(Y[0],Y[1],O((0,n.useState)({preset:"current_month",from:"",to:""}),2)),W=$[0],J=$[1];(0,n.useEffect)((function(){V()}),[t]),(0,n.useEffect)((function(){N&&K()}),[N,j]);var V=function(){var e=S(E().m((function e(){var n,l,o,c;return E().w((function(e){for(;;)switch(e.n){case 0:return G(!0),e.p=1,e.n=2,(0,a.invoke)("getTeams");case 2:if((n=e.v).success&&(l=n.data||[],o=r?l:l.filter((function(e){var r,n;return(null===(r=e.manager)||void 0===r?void 0:r.accountId)===t.accountId||(null===(n=e.manager)||void 0===n?void 0:n.jira_account_id)===t.accountId})),q(o),o.length>0&&!N&&w(o[0])),null==t||!t.emailAddress){e.n=4;break}return e.n=3,(0,a.invoke)("getPendingRequests",{managerEmail:t.emailAddress});case 3:(c=e.v).success&&L(c.data||[]);case 4:e.n=6;break;case 5:e.p=5,e.v,p("Failed to load manager data","error");case 6:return e.p=6,G(!1),e.f(6);case 7:return e.a(2)}}),e,null,[[1,5,6,7]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=S(E().m((function e(){var t,r;return E().w((function(e){for(;;)switch(e.n){case 0:if(N){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,(0,a.invoke)("getTeamPTORequests",{teamId:N.id,dateRange:j});case 2:(t=e.v).success&&x(t.data||[]),e.n=4;break;case 3:e.p=3,r=e.v,console.error("Error loading team requests:",r),x([]);case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=S(E().m((function e(t,r){var n;return E().w((function(e){for(;;)switch(e.n){case 0:return H((function(e){return g(g({},e),{},h({},t,!0))})),e.p=1,e.n=2,(0,a.invoke)("updatePTORequest",{requestId:t,status:r});case 2:(n=e.v).success?(p("Request ".concat(r.toLowerCase()," successfully")),L((function(e){return e.filter((function(e){return e.id!==t}))})),K()):p(n.message||"Failed to ".concat(r.toLowerCase()," request"),"error"),e.n=4;break;case 3:e.p=3,e.v,p("Failed to ".concat(r.toLowerCase()," request"),"error");case 4:return e.p=4,H((function(e){return g(g({},e),{},h({},t,!1))})),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})));return function(t,r){return e.apply(this,arguments)}}(),X=function(){var e=S(E().m((function e(){var r,n,a,l,o,c;return E().w((function(e){for(;;)switch(e.n){case 0:if(N){e.n=1;break}return e.a(2);case 1:try{r=Z.map((function(e){return{Date:(new Date).toLocaleDateString(),Manager:t.displayName,Team:N.name,Department:N.department||"",User:e.requester_name,"Start Date":e.start_date,"End Date":e.end_date,Period:"".concat(e.total_days," days"),"Leave Type":e.leave_type,Reason:e.reason||"",Status:e.status}})),n=Object.keys(r[0]||{}),a=[n.join(",")].concat(y(r.map((function(e){return n.map((function(t){return'"'.concat((e[t]||"").toString().replace(/"/g,'""'),'"')})).join(",")})))).join("\n"),l=new Blob([a],{type:"text/csv"}),o=URL.createObjectURL(l),(c=document.createElement("a")).href=o,c.download="team-pto-report-".concat(N.name,"-").concat(j,"-").concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(o),p("Report downloaded successfully!")}catch(e){p("Failed to generate report","error")}case 2:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=(0,n.useMemo)((function(){var e=U;return"all"!==D&&(e=e.filter((function(e){return e.requester_id===D}))),e.sort((function(e,t){return new Date(t.submitted_at)-new Date(e.submitted_at)}))}),[U,D]),ee=(0,n.useMemo)((function(){var e=Z;return{totalRequests:e.length,approvedRequests:e.filter((function(e){return"approved"===e.status})).length,pendingRequests:e.filter((function(e){return"pending"===e.status})).length,declinedRequests:e.filter((function(e){return"declined"===e.status})).length,totalDaysOff:e.filter((function(e){return"approved"===e.status})).reduce((function(e,t){return e+(t.total_days||0)}),0),ptoByLeaveType:e.filter((function(e){return"approved"===e.status})).reduce((function(e,t){var r=t.leave_type||"unknown";return e[r]=(e[r]||0)+(t.total_days||0),e}),{}),ptoByMember:e.filter((function(e){return"approved"===e.status})).reduce((function(e,t){var r=t.requester_name||"Unknown";return e[r]=(e[r]||0)+(t.total_days||0),e}),{}),ptoByWeekday:e.filter((function(e){return"approved"===e.status})).reduce((function(e,t){for(var r=new Date(t.start_date),n=new Date(t.end_date),a=new Date(r);a<=n;a.setDate(a.getDate()+1)){var l=a.toLocaleDateString("en-US",{weekday:"long"});e[l]=(e[l]||0)+1}return e}),{})}}),[Z]),te=(0,n.useMemo)((function(){var e=new Date;return U.filter((function(t){return"approved"===t.status&&new Date(t.start_date)>=e})).sort((function(e,t){return new Date(e.start_date)-new Date(t.start_date)})).slice(0,5)}),[U]),re=function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},ne=function(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return M?n.createElement("div",{className:"manager-loading"},n.createElement("div",{className:"loading-spinner"}),n.createElement("p",null,"Loading manager dashboard...")):0===P.length?n.createElement("div",{className:"manager-empty"},n.createElement(l.A,{size:48}),n.createElement("h3",null,"No Teams to Manage"),n.createElement("p",null,"You don't have any teams assigned to manage. Contact your administrator if this is incorrect.")):n.createElement("div",{className:"manager-dashboard"},n.createElement("div",{className:"manager-header"},n.createElement("div",{className:"manager-title-section"},n.createElement("h2",null,"Manager Dashboard"),n.createElement("p",null,"Manage team PTO requests and view analytics")),n.createElement("div",{className:"manager-controls"},n.createElement("select",{value:(null==N?void 0:N.id)||"",onChange:function(e){return w(P.find((function(t){return t.id===e.target.value})))},className:"form-control"},P.map((function(e){var t;return n.createElement("option",{key:e.id,value:e.id},e.name," (",(null===(t=e.members)||void 0===t?void 0:t.length)||0," members)")}))),n.createElement(v.A,{value:W,onChange:J}))),n.createElement("div",{className:"manager-stats-grid"},n.createElement("div",{className:"stat-card stat-blue"},n.createElement("div",{className:"stat-icon"},n.createElement(o.A,{size:24})),n.createElement("div",{className:"stat-content"},n.createElement("div",{className:"stat-value"},ee.totalRequests),n.createElement("div",{className:"stat-label"},"Total Requests"))),n.createElement("div",{className:"stat-card stat-yellow"},n.createElement("div",{className:"stat-icon"},n.createElement(c.A,{size:24})),n.createElement("div",{className:"stat-content"},n.createElement("div",{className:"stat-value"},I.length),n.createElement("div",{className:"stat-label"},"Pending Approval"))),n.createElement("div",{className:"stat-card stat-green"},n.createElement("div",{className:"stat-icon"},n.createElement(s.A,{size:24})),n.createElement("div",{className:"stat-content"},n.createElement("div",{className:"stat-value"},ee.approvedRequests),n.createElement("div",{className:"stat-label"},"Approved"))),n.createElement("div",{className:"stat-card stat-purple"},n.createElement("div",{className:"stat-icon"},n.createElement(i.A,{size:24})),n.createElement("div",{className:"stat-content"},n.createElement("div",{className:"stat-value"},ee.totalDaysOff),n.createElement("div",{className:"stat-label"},"Days Off")))),I.length>0&&n.createElement("div",{className:"card pending-approvals-card"},n.createElement("div",{className:"card-header"},n.createElement("h3",null,"Pending Approvals"),n.createElement("div",{className:"pending-count"},I.length," requests")),n.createElement("div",{className:"card-body"},n.createElement("div",{className:"pending-requests-list"},I.slice(0,5).map((function(e){var t;return n.createElement("div",{key:e.id,className:"pending-request-item"},n.createElement("div",{className:"request-info"},n.createElement("div",{className:"request-user"},n.createElement("div",{className:"user-avatar"},(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||n.createElement(u.A,{size:16})),n.createElement("div",{className:"user-details"},n.createElement("div",{className:"user-name"},e.requester_name),n.createElement("div",{className:"request-details"},(0,f.S0)(e.leave_type)," ",e.leave_type," • ",e.total_days," days"))),n.createElement("div",{className:"request-dates"},n.createElement("div",null,re(e.start_date)," - ",re(e.end_date)),n.createElement("div",{className:"submitted-date"},"Submitted ",ne(e.submitted_at)))),n.createElement("div",{className:"request-actions-inline"},n.createElement("div",{className:"action-buttons-inline"},n.createElement("button",{onClick:function(){return Q(e.id,"approved")},disabled:B[e.id],className:"btn btn-sm btn-success"},B[e.id]?"...":"Approve"),n.createElement("button",{onClick:function(){return Q(e.id,"declined")},disabled:B[e.id],className:"btn btn-sm btn-danger"},B[e.id]?"...":"Decline"))))}))),I.length>5&&n.createElement("div",{className:"show-more"},n.createElement("p",{className:"text-sm text-gray-600"},I.length-5," more pending requests...")))),n.createElement("div",{className:"manager-content-grid"},n.createElement("div",{className:"card team-requests-card"},n.createElement("div",{className:"card-header"},n.createElement("h3",null,"Team Requests"),n.createElement("div",{className:"team-requests-controls"},n.createElement("select",{value:D,onChange:function(e){return A(e.target.value)},className:"form-control"},n.createElement("option",{value:"all"},"All Members"),P.map((function(e){return n.createElement("option",{key:e.id,value:e.id},e.name)}))),n.createElement("div",{className:"action-buttons-group"},n.createElement("button",{onClick:X,className:"btn btn-primary"},n.createElement(m.A,{size:16}),"Generate Report")))),n.createElement("div",{className:"card-body"},0===Z.length?n.createElement("div",{className:"empty-state"},n.createElement(l.A,{size:48}),n.createElement("h4",null,"No Requests Found"),n.createElement("p",null,"No PTO requests found for the selected criteria.")):n.createElement("div",{className:"team-requests-list"},Z.map((function(e){var t;return n.createElement("div",{key:e.id,className:"team-request-item"},n.createElement("div",{className:"request-header-row"},n.createElement("div",{className:"request-user-info"},n.createElement("div",{className:"user-avatar"},(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||"?"),n.createElement("div",{className:"user-details"},n.createElement("div",{className:"user-name"},e.requester_name),n.createElement("div",{className:"request-type"},(0,f.S0)(e.leave_type)," ",e.leave_type))),n.createElement("div",{className:"request-details-summary"},n.createElement("div",{className:"date-range"},re(e.start_date)," - ",re(e.end_date)),n.createElement("div",{className:"duration"},e.total_days," days")),n.createElement("div",{className:"request-status-section"},n.createElement(d.A,{status:e.status}),n.createElement("div",{className:"submitted-date"},ne(e.submitted_at)))),e.reason&&n.createElement("div",{className:"request-reason-row"},n.createElement("span",{className:"reason-label"},"Reason:"),n.createElement("span",{className:"reason-text"},e.reason)))}))))),n.createElement("div",{className:"card upcoming-pto-card"},n.createElement("div",{className:"card-header"},n.createElement("h3",null,"Upcoming PTO")),n.createElement("div",{className:"card-body"},0===te.length?n.createElement("div",{className:"empty-state-small"},n.createElement(o.A,{size:32}),n.createElement("p",null,"No upcoming PTO scheduled")):n.createElement("div",{className:"upcoming-pto-list"},te.map((function(e){var t;return n.createElement("div",{key:e.id,className:"upcoming-pto-item"},n.createElement("div",{className:"pto-user"},n.createElement("div",{className:"user-avatar-small"},(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||"?"),n.createElement("div",{className:"user-info-small"},n.createElement("div",{className:"user-name-small"},e.requester_name),n.createElement("div",{className:"pto-type-small"},(0,f.S0)(e.leave_type)," ",e.leave_type))),n.createElement("div",{className:"pto-dates-small"},n.createElement("div",{className:"date-range-small"},re(e.start_date)," - ",re(e.end_date)),n.createElement("div",{className:"duration-small"},e.total_days," days")))}))))),n.createElement("div",{className:"card analytics-card"},n.createElement("div",{className:"card-header"},n.createElement("h3",null,"Team Analytics"),n.createElement("div",{className:"analytics-period"},j.replace("_"," ").replace(/\b\w/g,(function(e){return e.toUpperCase()})))),n.createElement("div",{className:"card-body"},Object.keys(ee.ptoByLeaveType).length>0&&n.createElement("div",{className:"analytics-section"},n.createElement("h4",null,"PTO by Leave Type"),n.createElement("div",{className:"analytics-items"},Object.entries(ee.ptoByLeaveType).sort((function(e,t){var r=O(e,2)[1];return O(t,2)[1]-r})).map((function(e){var t=O(e,2),r=t[0],a=t[1];return n.createElement("div",{key:r,className:"analytics-item"},n.createElement("span",{className:"item-icon"},(0,f.S0)(r)),n.createElement("span",{className:"item-label"},r.charAt(0).toUpperCase()+r.slice(1)),n.createElement("span",{className:"item-value"},a," days"))})))),Object.keys(ee.ptoByMember).length>0&&n.createElement("div",{className:"analytics-section"},n.createElement("h4",null,"PTO by Team Member"),n.createElement("div",{className:"analytics-items"},Object.entries(ee.ptoByMember).sort((function(e,t){var r=O(e,2)[1];return O(t,2)[1]-r})).slice(0,5).map((function(e){var t=O(e,2),r=t[0],a=t[1];return n.createElement("div",{key:r,className:"analytics-item"},n.createElement("span",{className:"item-icon"},"👤"),n.createElement("span",{className:"item-label"},r),n.createElement("span",{className:"item-value"},a," days"))})))),Object.keys(ee.ptoByWeekday).length>0&&n.createElement("div",{className:"analytics-section"},n.createElement("h4",null,"Most Popular Days Off"),n.createElement("div",{className:"analytics-items"},Object.entries(ee.ptoByWeekday).sort((function(e,t){var r=O(e,2)[1];return O(t,2)[1]-r})).map((function(e){var t=O(e,2),r=t[0],a=t[1];return n.createElement("div",{key:r,className:"analytics-item"},n.createElement("span",{className:"item-icon"},"📅"),n.createElement("span",{className:"item-label"},r),n.createElement("span",{className:"item-value"},a," days"))}))))))))}},7676:(e,t,r)=>{r.d(t,{A:()=>g});var n=r(6540),a=r(5627),l=r(697),o=r(5741),c=r(2948),s=r(5653);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function u(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function l(r,n,a,l){var s=n&&n.prototype instanceof c?n:c,i=Object.create(s.prototype);return m(i,"_invoke",function(r,n,a){var l,c,s,i=0,u=a||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return l=t,c=0,s=e,d.n=r,o}};function f(r,n){for(c=r,s=n,t=0;!m&&i&&!a&&t<u.length;t++){var a,l=u[t],f=d.p,v=l[2];r>3?(a=v===n)&&(s=l[(c=l[4])?5:(c=3,3)],l[4]=l[5]=e):l[0]<=f&&((a=r<2&&f<l[1])?(c=0,d.v=n,d.n=l[1]):f<v&&(a=r<3||l[0]>n||n>v)&&(l[4]=r,l[5]=n,d.n=v,c=0))}if(a||r>1)return o;throw m=!0,n}return function(a,u,v){if(i>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,v),c=u,s=v;(t=c<2?e:s)||!m;){l||(c?c<3?(c>1&&(d.n=-1),f(c,s)):d.n=s:d.v=s);try{if(i=2,l){if(c||(a="next"),t=l[a]){if(!(t=t.call(l,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=l.return)&&t.call(l),c<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),c=1);l=e}else if((t=(m=d.n<0)?s:r.call(n,d))!==o)break}catch(t){l=e,c=1,s=t}finally{i=1}}return{value:t,done:m}}}(r,a,l),!0),i}var o={};function c(){}function s(){}function i(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(m(t={},n,(function(){return this})),t),f=i.prototype=c.prototype=Object.create(d);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,m(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return s.prototype=i,m(f,"constructor",i),m(i,"constructor",s),s.displayName="GeneratorFunction",m(i,a,"GeneratorFunction"),m(f),m(f,a,"Generator"),m(f,n,(function(){return this})),m(f,"toString",(function(){return"[object Generator]"})),(u=function(){return{w:l,m:v}})()}function m(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}m=function(e,t,r,n){if(t)a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var l=function(t,r){m(e,t,(function(e){return this._invoke(t,r,e)}))};l("next",0),l("throw",1),l("return",2)}},m(e,t,r,n)}function d(e,t,r,n,a,l,o){try{var c=e[l](o),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,a)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,l,o,c=[],s=!0,i=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=l.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){i=!0,a=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(i)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const g=function(e){var t=e.events,r=e.onDateSelect,i=e.selectedDates,m=e.onSubmitPTO,f=e.currentUser,b=e.allUsers,g=e.allTeams,h=e.isAdmin,E=y((0,n.useState)(new Date),2),N=E[0],w=E[1],S=y((0,n.useState)(!1),2),O=S[0],k=S[1],j=y((0,n.useState)({team:"all",user:"all",leaveType:"all",status:"all"}),2),_=j[0],D=j[1],A=y((0,n.useState)(!1),2),T=A[0],P=A[1],q=y((0,n.useState)(null),2),C=q[0],U=q[1],x=y((0,n.useState)(""),2),R=x[0],I=x[1],L=y((0,n.useState)(!1),2),F=L[0],M=L[1],G=y((0,n.useState)([]),2),z=G[0],B=G[1],H=y((0,n.useState)(null),2),Y=H[0],$=H[1],W=null==b?void 0:b.find((function(e){return e.jira_account_id===(null==f?void 0:f.accountId)||e.email_address===(null==f?void 0:f.emailAddress)})),J=function(e){return e.toISOString().split("T")[0]},V=function(){return t?t.filter((function(e){if("all"!==_.team){var t=null==b?void 0:b.find((function(t){return t.jira_account_id===e.requester_id||t.email_address===e.requester_email}));if(!t||String(t.team_id)!==String(_.team))return!1}if("me"===_.user){if(e.requester_id!==(null==f?void 0:f.accountId)&&e.requester_email!==(null==f?void 0:f.emailAddress))return!1}else if("all"!==_.user){var r=null==b?void 0:b.find((function(e){return e.jira_account_id===_.user||e.id===_.user}));if(r&&e.requester_id!==r.jira_account_id&&e.requester_email!==r.email_address)return!1}return("all"===_.leaveType||e.leave_type===_.leaveType)&&("all"===_.status||e.status===_.status)})):[]},K=function(e){w((function(t){var r=new Date(t);return r.setMonth(t.getMonth()+e),r}))},Q=function(e,t){D((function(r){return v(v({},r),{},p({},e,t))}))},X=function(){return Object.values(_).some((function(e){return"all"!==e}))},Z=function(){var e,t=(e=u().m((function e(t){var r;return u().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,m(t);case 1:null!=(r=e.v)&&r.success&&k(!1);case 2:return e.a(2)}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var l=e.apply(t,r);function o(e){d(l,n,a,o,c,"next",e)}function c(e){d(l,n,a,o,c,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),ee=function(e){if(!e)return!1;if(e.requester_id!==f.accountId)return!1;if("pending"===e.status)return!0;if("approved"===e.status){var t=new Date;return t.setHours(0,0,0,0),new Date(e.start_date)>=t}return!1},te=function(e){for(var t=e.getFullYear(),r=e.getMonth(),n=new Date(t,r,1),a=new Date(t,r+1,0).getDate(),l=n.getDay(),o=[],c=0;c<l;c++)o.push(null);for(var s=1;s<=a;s++)o.push(new Date(t,r,s));return o}(N);return n.createElement("div",{className:"card calendar-card"},n.createElement("div",{className:"calendar-header"},n.createElement("div",{className:"calendar-header-controls"},n.createElement("button",{onClick:function(){return K(-1)},className:"calendar-nav-btn"},"←"),n.createElement("h2",{className:"calendar-title"},["January","February","March","April","May","June","July","August","September","October","November","December"][N.getMonth()]," ",N.getFullYear()),n.createElement("button",{onClick:function(){return K(1)},className:"calendar-nav-btn"},"→")),n.createElement("div",{className:"calendar-header-actions"},n.createElement("button",{onClick:function(){return P(!T)},className:"btn btn-secondary calendar-filter-btn ".concat(X()?"has-filters":"")},n.createElement(a.A,{size:16}),n.createElement("span",null,"Filters"),X()&&n.createElement("span",{className:"filter-indicator"},"●")),i.filter((function(e){return new Date(e)>=new Date((new Date).setHours(0,0,0,0))})).length>0&&n.createElement("button",{onClick:function(){return k(!0)},className:"btn btn-primary calendar-submit-btn"},n.createElement(l.A,{size:16}),n.createElement("span",null,"Request PTO (",i.filter((function(e){return new Date(e)>=new Date((new Date).setHours(0,0,0,0))})).length," days)")))),T&&n.createElement("div",{className:"calendar-filters-panel"},n.createElement("div",{className:"filters-grid"},n.createElement("div",{className:"filter-group"},n.createElement("label",null,"Team"),n.createElement("select",{value:_.team,onChange:function(e){return Q("team",e.target.value)},className:"form-control"},n.createElement("option",{value:"all"},"All Teams"),(g?h?g:g.filter((function(e){var t,r;return(null===(t=e.manager)||void 0===t?void 0:t.accountId)===(null==f?void 0:f.accountId)||(null===(r=e.manager)||void 0===r?void 0:r.jira_account_id)===(null==f?void 0:f.accountId)})):[]).map((function(e){return n.createElement("option",{key:e.id,value:e.id},e.name)})))),n.createElement("div",{className:"filter-group"},n.createElement("label",null,"User"),n.createElement("select",{value:_.user,onChange:function(e){return Q("user",e.target.value)},className:"form-control"},n.createElement("option",{value:"all"},"All Users"),n.createElement("option",{value:"me"},"Me"),null==b?void 0:b.map((function(e){return n.createElement("option",{key:e.id,value:e.jira_account_id||e.id},e.display_name||e.displayName)})))),n.createElement("div",{className:"filter-group"},n.createElement("label",null,"Leave Type"),n.createElement("select",{value:_.leaveType,onChange:function(e){return Q("leaveType",e.target.value)},className:"form-control"},n.createElement("option",{value:"all"},"All Types"),["vacation","sick","personal","holiday","other leave type"].map((function(e){return n.createElement("option",{key:e,value:e},e.charAt(0).toUpperCase()+e.slice(1))})))),n.createElement("div",{className:"filter-group"},n.createElement("label",null,"Status"),n.createElement("select",{value:_.status,onChange:function(e){return Q("status",e.target.value)},className:"form-control"},n.createElement("option",{value:"all"},"All Status"),["pending","approved","declined"].map((function(e){return n.createElement("option",{key:e,value:e},e.charAt(0).toUpperCase()+e.slice(1))}))))),n.createElement("div",{className:"filters-actions"},n.createElement("button",{onClick:function(){D({team:"all",user:"all",leaveType:"all",status:"all"})},className:"btn btn-secondary"},"Clear All"),n.createElement("button",{onClick:function(){return P(!1)},className:"btn btn-primary"},"Apply Filters"))),n.createElement("div",{className:"calendar-info"},n.createElement("p",null,"💡 Click on dates to select them for your PTO request. Selected dates will be highlighted in blue.",X()&&n.createElement("span",null," • Filters are active - some events may be hidden."))),n.createElement("div",{className:"calendar-grid"},n.createElement("div",{className:"calendar-days-header"},["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((function(e){return n.createElement("div",{key:e,className:"calendar-day-label"},e)}))),n.createElement("div",{className:"calendar-days-grid"},te.map((function(e,a){if(!e)return n.createElement("div",{key:a,className:"calendar-day calendar-day-empty"});var l,o=(l=e,i.includes(J(l))),s=(function(e){var t=J(e);V().some((function(e){return t>=e.start_date&&t<=e.end_date}))}(e),function(e){var t=J(e);return V().filter((function(e){return t>=e.start_date&&t<=e.end_date}))}(e)),u=e.toDateString()===(new Date).toDateString(),m=e<new Date((new Date).setHours(0,0,0,0));return n.createElement("div",{key:e.toISOString(),onClick:function(){return function(e){var n=J(e),a=t.filter((function(e){return(e.requester_id===f.accountId||e.requester_email===f.emailAddress)&&n>=e.start_date&&n<=e.end_date})),l=a.find(ee);l?U(l):a.length>0?I("You already have a PTO request this day and it is not editable."):!e||e<new Date((new Date).setHours(0,0,0,0))||r(e)}(e)},className:"calendar-day"+(m?" calendar-day-past":" calendar-day-active")+(o?" calendar-day-selected":"")+(u?" calendar-day-today":"")},n.createElement("div",{className:"calendar-day-inner"},n.createElement("span",{className:"calendar-day-number"+(u?" calendar-day-number-today":"")+(m?" calendar-day-number-past":"")},e.getDate()),n.createElement("div",{className:"calendar-day-events"},s.slice(0,2).map((function(e,t){return n.createElement("div",{key:"".concat(e.id,"-").concat(t),className:"calendar-event"+("approved"===e.status?" calendar-event-approved":"")+("pending"===e.status?" calendar-event-pending":"")+("declined"===e.status?" calendar-event-declined":""),title:"".concat(e.requester_name,": ").concat(e.reason)},n.createElement("span",null,(0,c.S0)(e.leave_type)),n.createElement("span",{className:"calendar-event-name"},e.requester_name))})),s.length>2&&n.createElement("button",{className:"calendar-event-more",onClick:function(t){t.stopPropagation(),B(s),$(e),M(!0)},type:"button",tabIndex:0,"aria-label":"Show all events for ".concat(e.toDateString())},"+",s.length-2," more"))))})))),n.createElement("div",{className:"calendar-legend"},n.createElement("div",{className:"calendar-legend-item"},n.createElement("span",{className:"calendar-legend-dot calendar-event-approved"}),n.createElement("span",null,"Approved")),n.createElement("div",{className:"calendar-legend-item"},n.createElement("span",{className:"calendar-legend-dot calendar-event-pending"}),n.createElement("span",null,"Pending")),n.createElement("div",{className:"calendar-legend-item"},n.createElement("span",{className:"calendar-legend-dot calendar-event-declined"}),n.createElement("span",null,"Declined")),n.createElement("div",{className:"calendar-legend-item"},n.createElement("span",{className:"calendar-legend-dot calendar-day-selected"}),n.createElement("span",null,"Selected"))),O&&n.createElement(o.A,{selectedDates:i.filter((function(e){return new Date(e)>=new Date((new Date).setHours(0,0,0,0))})),onClose:function(){return k(!1)},onSubmit:Z,currentUser:f,currentUserData:W,userManager:function(){if(null==W||!W.team_id)return null;var e=null==g?void 0:g.find((function(e){return e.id===W.team_id}));return null!=e&&e.manager?e.manager:null}(),allUsers:b,allTeams:g,allRequests:t,isAdmin:h}),C&&n.createElement(s.A,{request:C,onClose:function(){return U(null)},onSave:function(){U(null)},currentUser:f}),R&&n.createElement("div",{className:"modal-overlay"},n.createElement("div",{className:"modal-content",style:{maxWidth:400,margin:"auto",padding:24,textAlign:"center"}},n.createElement("div",{style:{marginBottom:16}},n.createElement("span",{role:"img","aria-label":"info",style:{fontSize:32}},"ℹ️")),n.createElement("div",{style:{marginBottom:16}},R),n.createElement("button",{className:"btn btn-primary",onClick:function(){return I("")}},"OK"))),F&&n.createElement("div",{className:"modal-overlay",onClick:function(){return M(!1)}},n.createElement("div",{className:"modal-content",style:{maxWidth:400,margin:"auto",padding:24},onClick:function(e){return e.stopPropagation()}},n.createElement("div",{style:{marginBottom:16,fontWeight:600,fontSize:18}},"Events for ",Y&&Y.toLocaleDateString()),n.createElement("div",{style:{maxHeight:300,overflowY:"auto"}},z.map((function(e,t){return n.createElement("div",{key:e.id+"-"+t,className:"calendar-event"+("approved"===e.status?" calendar-event-approved":"")+("pending"===e.status?" calendar-event-pending":"")+("declined"===e.status?" calendar-event-declined":""),style:{marginBottom:6}},n.createElement("span",null,(0,c.S0)(e.leave_type)),n.createElement("span",{className:"calendar-event-name"},e.requester_name),n.createElement("span",{style:{marginLeft:8,fontSize:12,color:"#888"}},"(",e.status,")"))}))),n.createElement("button",{className:"btn btn-primary",style:{marginTop:16},onClick:function(){return M(!1)}},"Close"))))}},9649:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(6540),a=r(7946),l=r(4471),o=r(180);const c=function(e){var t=function(e){var t={pending:{bg:"bg-yellow-100",text:"text-yellow-800",icon:a.A,label:"Pending"},approved:{bg:"bg-green-100",text:"text-green-800",icon:l.A,label:"Approved"},declined:{bg:"bg-red-100",text:"text-red-800",icon:o.A,label:"Declined"}};return t[e.toLowerCase()]||t.pending}(e.status),r=t.icon;return n.createElement("span",{className:"inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ".concat(t.bg," ").concat(t.text)},n.createElement(r,{size:12}),n.createElement("span",null,t.label))}}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var l=r[e]={exports:{}};return t[e](l,l.exports,n),l.exports}n.m=t,e=[],n.O=(t,r,a,l)=>{if(!r){var o=1/0;for(u=0;u<e.length;u++){for(var[r,a,l]=e[u],c=!0,s=0;s<r.length;s++)(!1&l||o>=l)&&Object.keys(n.O).every((e=>n.O[e](r[s])))?r.splice(s--,1):(c=!1,l<o&&(o=l));if(c){e.splice(u--,1);var i=a();void 0!==i&&(t=i)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[r,a,l]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={525:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var a,l,[o,c,s]=r,i=0;if(o.some((t=>0!==e[t]))){for(a in c)n.o(c,a)&&(n.m[a]=c[a]);if(s)var u=s(n)}for(t&&t(r);i<o.length;i++)l=o[i],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(u)},r=this.webpackChunkpto_request_app=this.webpackChunkpto_request_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=n.O(void 0,[96,357,6],(()=>n(6483)));a=n.O(a)})();