/*! For license information please see main-fa968b87.9b56094ac89a604fb350.js.LICENSE.txt */
"use strict";(this.webpackChunkpto_request_app=this.webpackChunkpto_request_app||[]).push([[286],{99:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(6540);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,i,o=[],c=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=l.call(a)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var i=[{value:"all",label:"All Time"},{value:"current_year",label:"Current Year"},{value:"last_90_days",label:"Last 90 Days"},{value:"last_30_days",label:"Last 30 Days"},{value:"custom",label:"Custom Range"}];const o=function(e){var t=e.value,a=void 0===t?{preset:"all",from:"",to:""}:t,l=e.onChange,o=r((0,n.useState)(a.preset||"all"),2),c=o[0],s=o[1],u=r((0,n.useState)(a.from||""),2),m=u[0],d=u[1],f=r((0,n.useState)(a.to||""),2),p=f[0],v=f[1];return(0,n.useEffect)((function(){l("custom"!==c?{preset:c,from:"",to:""}:{preset:c,from:m,to:p})}),[c,m,p]),n.createElement("div",{className:"date-range-filter"},n.createElement("select",{className:"form-control",value:c,onChange:function(e){return s(e.target.value)}},i.map((function(e){return n.createElement("option",{key:e.value,value:e.value},e.label)}))),"custom"===c&&n.createElement("div",{className:"custom-range-fields",style:{display:"flex",gap:8,marginTop:8}},n.createElement("input",{type:"date",className:"form-control",value:m,onChange:function(e){return d(e.target.value)},max:p||void 0,placeholder:"From"}),n.createElement("span",{style:{alignSelf:"center"}},"to"),n.createElement("input",{type:"date",className:"form-control",value:p,onChange:function(e){return v(e.target.value)},min:m||void 0,placeholder:"To"})))}},808:(e,t,a)=>{a.d(t,{S0:()=>r});var n={vacation:{id:"vacation",label:"🏖️ Vacation",emoji:"🏖️",color:"bg-blue-100 text-blue-800"},sick:{id:"sick",label:"🤒 Sick Leave",emoji:"🤒",color:"bg-red-100 text-red-800"},personal:{id:"personal",label:"👤 Personal Day",emoji:"👤",color:"bg-purple-100 text-purple-800"},holiday:{id:"holiday",label:"🎉 Holiday",emoji:"🎉",color:"bg-green-100 text-green-800"},"other leave type":{id:"other leave type",label:"📝 Other Leave Type",emoji:"📝",color:"bg-gray-100 text-gray-800"}},r=function(e){var t;return(null===(t=n[null==e?void 0:e.toLowerCase()])||void 0===t?void 0:t.emoji)||"📅"}},1098:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(6540);const r=function(e){var t=e.message,a=e.type,r=e.onClose;return n.createElement("div",{className:"fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ".concat("success"===a?"bg-green-500 text-white":"bg-red-500 text-white")},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("span",null,t),n.createElement("button",{onClick:r,className:"ml-4 text-white hover:text-gray-200"},"×")))}},2435:(e,t,a)=>{a.d(t,{A:()=>f});var n=a(6540),r=a(2321),l=a(8697);function i(){var e,t,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",r=a.toStringTag||"@@toStringTag";function l(a,n,r,l){var i=n&&n.prototype instanceof s?n:s,u=Object.create(i.prototype);return o(u,"_invoke",function(a,n,r){var l,i,o,s=0,u=r||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return l=t,i=0,o=e,d.n=a,c}};function f(a,n){for(i=a,o=n,t=0;!m&&s&&!r&&t<u.length;t++){var r,l=u[t],f=d.p,p=l[2];a>3?(r=p===n)&&(o=l[(i=l[4])?5:(i=3,3)],l[4]=l[5]=e):l[0]<=f&&((r=a<2&&f<l[1])?(i=0,d.v=n,d.n=l[1]):f<p&&(r=a<3||l[0]>n||n>p)&&(l[4]=a,l[5]=n,d.n=p,i=0))}if(r||a>1)return c;throw m=!0,n}return function(r,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,o=p;(t=i<2?e:o)||!m;){l||(i?i<3?(i>1&&(d.n=-1),f(i,o)):d.n=o:d.v=o);try{if(s=2,l){if(i||(r="next"),t=l[r]){if(!(t=t.call(l,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,i<2&&(i=0)}else 1===i&&(t=l.return)&&t.call(l),i<2&&(o=TypeError("The iterator does not provide a '"+r+"' method"),i=1);l=e}else if((t=(m=d.n<0)?o:a.call(n,d))!==c)break}catch(t){l=e,i=1,o=t}finally{s=1}}return{value:t,done:m}}}(a,r,l),!0),u}var c={};function s(){}function u(){}function m(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(o(t={},n,(function(){return this})),t),f=m.prototype=s.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,o(e,r,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=m,o(f,"constructor",m),o(m,"constructor",u),u.displayName="GeneratorFunction",o(m,r,"GeneratorFunction"),o(f),o(f,r,"Generator"),o(f,n,(function(){return this})),o(f,"toString",(function(){return"[object Generator]"})),(i=function(){return{w:l,m:p}})()}function o(e,t,a,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}o=function(e,t,a,n){if(t)r?r(e,t,{value:a,enumerable:!n,configurable:!n,writable:!n}):e[t]=a;else{var l=function(t,a){o(e,t,(function(e){return this._invoke(t,a,e)}))};l("next",0),l("throw",1),l("return",2)}},o(e,t,a,n)}function c(e,t,a,n,r,l,i){try{var o=e[l](i),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(n,r)}function s(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var l=e.apply(t,a);function i(e){c(l,n,r,i,o,"next",e)}function o(e){c(l,n,r,i,o,"throw",e)}i(void 0)}))}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,i,o=[],c=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=l.call(a)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function d(e){var t=e.value,a=e.max;return n.createElement("div",{className:"progress-bar",style:{width:"100%",background:"#e0e0e0",borderRadius:6,margin:"10px 0"}},n.createElement("div",{style:{width:"".concat(t/a*100,"%"),background:"#00b38f",height:16,borderRadius:6,transition:"width 0.2s"}}))}const f=function(e){var t,a=e.isOpen,o=e.onClose,c=e.showNotification,m=u((0,n.useState)(1),2),f=m[0],p=m[1],v=u((0,n.useState)(null),2),y=(v[0],v[1]),b=u((0,n.useState)([]),2),g=b[0],h=b[1],E=u((0,n.useState)(null),2),N=E[0],k=E[1],w=u((0,n.useState)(!1),2),S=w[0],D=w[1],T=u((0,n.useState)(null),2),_=T[0],A=T[1],O=u((0,n.useState)(!1),2),j=O[0],C=O[1],P=u((0,n.useState)(!1),2),x=P[0],U=P[1],I=u((0,n.useState)(!1),2),F=I[0],L=I[1],M=u((0,n.useState)({currentBatch:0,totalBatches:1}),2),q=M[0],R=M[1],W=u((0,n.useState)(null),2),B=W[0],z=W[1],G=u((0,n.useState)(!1),2),H=G[0],Y=G[1];(0,n.useEffect)((function(){a||(p(1),y(null),h([]),k(null),D(!1),A(null),C(!1),U(!1),L(!1),R({currentBatch:0,totalBatches:1}),z(null),Y(!1))}),[a]);var J=function(){var e=s(i().m((function e(){var t,a;return i().w((function(e){for(;;)switch(e.n){case 0:return D(!0),A(null),C(!1),e.p=1,e.n=2,(0,r.invoke)("preValidatePTOImportData",{importData:g});case 2:t=e.v,A(t.summary),C(0===t.summary.missingRequesters.length&&0===t.summary.missingManagers.length&&0===t.summary.invalidLeaveTypes.length&&0===t.summary.invalidHours.length&&0===t.summary.invalidStatuses.length),c("Validation complete. Review the details below."),e.n=4;break;case 3:e.p=3,a=e.v,A(null),c("Validation failed: "+(a.message||a.toString()),"error");case 4:D(!1);case 5:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=s(i().m((function e(){var t,a;return i().w((function(e){for(;;)switch(e.n){case 0:return U(!0),z(null),e.p=1,e.n=2,(0,r.invoke)("preparePTOImportData",{importData:g});case 2:t=e.v,console.log("preparePTOImportData response:",t),t.success&&t.enrichedCount>0?(p(3),c("Data prepared. Ready for import.")):c(t.message||"Preparation failed.","error"),e.n=4;break;case 3:e.p=3,a=e.v,c("Preparation error: "+(a.message||a.toString()),"error");case 4:U(!1);case 5:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=s(i().m((function e(){var t,a,n,l,o;return i().w((function(e){for(;;)switch(e.n){case 0:L(!0),R({currentBatch:0,totalBatches:1}),z(null),e.p=1,t=!1,a=0,n=null;case 2:if(t){e.n=5;break}return e.n=3,(0,r.invoke)("importPTODailySchedulesChunked",{batchIndex:a});case 3:return(l=e.v).progress&&(R({currentBatch:l.progress.currentBatch,totalBatches:l.progress.totalBatches}),a=l.progress.currentBatch,l.progress.totalBatches),l.finished&&(n=l.result,t=!0),e.n=4,new Promise((function(e){return setTimeout(e,300)}));case 4:e.n=2;break;case 5:z(n),c(n.message,n.success?void 0:"error"),L(!1),p(4),e.n=7;break;case 6:e.p=6,o=e.v,c("Import failed: "+(o.message||o.toString()),"error"),L(!1);case 7:return e.a(2)}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();return a?n.createElement("div",{className:"modal-overlay"},n.createElement("div",{className:"modal-content",style:{maxWidth:560,margin:"auto"}},n.createElement("div",{className:"modal-header"},n.createElement("h3",null,"Import PTO Daily Schedules"),n.createElement("button",{className:"modal-close",onClick:o},n.createElement(l.A,{size:20}))),n.createElement("div",{className:"modal-body"},1===f&&n.createElement(n.Fragment,null,n.createElement("h4",null,"Step 1: Upload CSV File"),n.createElement("input",{type:"file",accept:".csv",onChange:function(e){var t=e.target.files[0];if(!t)return k("No file selected."),h([]),void y(null);y(t),k(null);var a=new FileReader;a.onload=function(e){try{var t=e.target.result.trim().split("\n");if(t.length<2)throw new Error("File must have a header and at least one data row.");var a=t[0].split(",").map((function(e){return e.trim()})),n=t.slice(1).filter((function(e){return e.trim()})).map((function(e){var t=e.split(",").map((function(e){return e.trim().replace(/^"|"$/g,"")})),n={};return a.forEach((function(e,a){var r;return n[e]=null!==(r=t[a])&&void 0!==r?r:""})),n}));h(n),p(2)}catch(e){k(e.message),h([])}},a.onerror=function(){return k("Could not read file.")},a.readAsText(t)},disabled:S||x||F}),N&&n.createElement("div",{style:{color:"red",marginTop:10}},N),g.length>0&&n.createElement("div",{style:{marginTop:10}},n.createElement("div",null,"Records loaded: ",n.createElement("b",null,g.length)),n.createElement("button",{className:"btn btn-primary",onClick:J},"Validate Data"))),2===f&&n.createElement(n.Fragment,null,n.createElement("h4",null,"Step 2: Validate Data"),n.createElement("button",{className:"btn btn-secondary",onClick:J,disabled:S||x},"Run Validation"),S&&n.createElement("div",{style:{marginTop:10}},n.createElement("span",{className:"spinner"})," Validating..."),_&&n.createElement("div",{style:{marginTop:16}},n.createElement("div",null,n.createElement("b",null,"Total records:")," ",_.totalRecords),n.createElement("div",null,n.createElement("b",null,"Unique requesters:")," ",_.uniqueRequesters," (",_.missingRequesters.length," missing)"),_.missingRequesters.length>0&&n.createElement("div",{style:{color:"red"}},"Missing requesters: ",_.missingRequesters.join(", ")),n.createElement("div",null,n.createElement("b",null,"Unique managers:")," ",_.uniqueManagers," (",_.missingManagers.length," missing)"),_.missingManagers.length>0&&n.createElement("div",{style:{color:"red"}},"Missing managers: ",_.missingManagers.join(", ")),_.invalidLeaveTypes.length>0&&n.createElement("div",{style:{color:"red"}},"Invalid leave types: ",_.invalidLeaveTypes.map((function(e){return"row ".concat(e.row,": ").concat(e.value)})).join(", ")),_.invalidHours.length>0&&n.createElement("div",{style:{color:"red"}},"Invalid hours: ",_.invalidHours.map((function(e){return"row ".concat(e.row,": ").concat(e.value)})).join(", ")),_.invalidStatuses.length>0&&n.createElement("div",{style:{color:"red"}},"Invalid statuses: ",_.invalidStatuses.map((function(e){return"row ".concat(e.row,": ").concat(e.value)})).join(", ")),_.invalidDates.length>0&&n.createElement("div",{style:{color:"red"}},"Invalid dates: ",_.invalidDates.map((function(e){return"row ".concat(e.row,": ").concat(e.value)})).join(", ")),_.missingFields.length>0&&n.createElement("div",{style:{color:"red"}},"Missing fields: ",_.missingFields.map((function(e){return"row ".concat(e.row,": ").concat(e.fields.join(", "))})).join("; ")),_.duplicateRecords.length>0&&n.createElement("div",{style:{color:"orange"}},"Duplicates: ",_.duplicateRecords.map((function(e){return"row ".concat(e.row)})).join(", "))),n.createElement("div",{style:{marginTop:16}},n.createElement("button",{className:"btn btn-primary",disabled:!_||!j||x,onClick:V},"Prepare Data for Import"),n.createElement("button",{className:"btn",onClick:function(){return p(1)}},"Back"))),(null==B||null===(t=B.errors)||void 0===t?void 0:t.length)>0&&n.createElement("div",{className:"alert alert-danger"},n.createElement("ul",null,B.errors.map((function(e,t){return n.createElement("li",{key:t},"Row ".concat(e.row,": ").concat(e.error," ").concat(e.error2))})))),3===f&&n.createElement(n.Fragment,null,n.createElement("h4",null,"Step 3: Confirm and Import"),n.createElement("div",{className:"alert alert-warning",style:{marginBottom:16}},n.createElement("strong",null,"Warning:")," This import will ",n.createElement("b",null,"REPLACE ALL")," existing PTO daily schedules in the system!"),n.createElement("label",{style:{display:"block",margin:"10px 0"}},n.createElement("input",{type:"checkbox",checked:H,onChange:function(e){return Y(e.target.checked)}})," I understand this will delete all current PTO daily schedules and replace with my uploaded data."),n.createElement("button",{className:"btn btn-primary",onClick:$,disabled:!H||F},F?"Importing...":"Start Import"),F&&n.createElement("div",{style:{marginTop:16}},n.createElement(d,{value:q.currentBatch,max:q.totalBatches}),n.createElement("div",null,"Importing batch ",q.currentBatch," of ",q.totalBatches,"..."))),4===f&&B&&n.createElement(n.Fragment,null,n.createElement("h4",null,"Import Complete"),n.createElement("div",{className:B.success?"alert alert-success":"alert alert-danger"},B.message),n.createElement("div",null,n.createElement("div",null,n.createElement("b",null,"Total records:")," ",B.data.totalRecords),n.createElement("div",null,n.createElement("b",null,"Imported:")," ",B.data.importedRecords),n.createElement("div",null,n.createElement("b",null,"Failed:")," ",B.data.failedRecords),B.data.errors&&B.data.errors.length>0&&n.createElement("div",null,n.createElement("b",null,"Errors:"),n.createElement("ul",null,B.data.errors.slice(0,10).map((function(e,t){return n.createElement("li",{key:t},e.record?"Row ".concat(e.record):""," ",e.error)}))))),n.createElement("button",{className:"btn btn-primary",onClick:o},"Close"))))):null}},3245:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(6540),r=a(7946),l=a(4471),i=a(180);const o=function(e){var t=function(e){var t={pending:{bg:"bg-yellow-100",text:"text-yellow-800",icon:r.A,label:"Pending"},approved:{bg:"bg-green-100",text:"text-green-800",icon:l.A,label:"Approved"},declined:{bg:"bg-red-100",text:"text-red-800",icon:i.A,label:"Declined"}};return t[e.toLowerCase()]||t.pending}(e.status),a=t.icon;return n.createElement("span",{className:"inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ".concat(t.bg," ").concat(t.text)},n.createElement(a,{size:12}),n.createElement("span",null,t.label))}},4143:(e,t,a)=>{a.d(t,{A:()=>w});var n=a(6540),r=a(2307),l=a(4471),i=a(7235),o=a(4934),c=a(2708),s=a(7946),u=a(2321),m=a(5143),d=a(9618);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(){var e,t,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",r=a.toStringTag||"@@toStringTag";function l(a,n,r,l){var c=n&&n.prototype instanceof o?n:o,s=Object.create(c.prototype);return g(s,"_invoke",function(a,n,r){var l,o,c,s=0,u=r||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return l=t,o=0,c=e,d.n=a,i}};function f(a,n){for(o=a,c=n,t=0;!m&&s&&!r&&t<u.length;t++){var r,l=u[t],f=d.p,p=l[2];a>3?(r=p===n)&&(c=l[(o=l[4])?5:(o=3,3)],l[4]=l[5]=e):l[0]<=f&&((r=a<2&&f<l[1])?(o=0,d.v=n,d.n=l[1]):f<p&&(r=a<3||l[0]>n||n>p)&&(l[4]=a,l[5]=n,d.n=p,o=0))}if(r||a>1)return i;throw m=!0,n}return function(r,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),o=u,c=p;(t=o<2?e:c)||!m;){l||(o?o<3?(o>1&&(d.n=-1),f(o,c)):d.n=c:d.v=c);try{if(s=2,l){if(o||(r="next"),t=l[r]){if(!(t=t.call(l,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,o<2&&(o=0)}else 1===o&&(t=l.return)&&t.call(l),o<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),o=1);l=e}else if((t=(m=d.n<0)?c:a.call(n,d))!==i)break}catch(t){l=e,o=1,c=t}finally{s=1}}return{value:t,done:m}}}(a,r,l),!0),s}var i={};function o(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(g(t={},n,(function(){return this})),t),m=s.prototype=o.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,g(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return c.prototype=s,g(m,"constructor",s),g(s,"constructor",c),c.displayName="GeneratorFunction",g(s,r,"GeneratorFunction"),g(m),g(m,r,"Generator"),g(m,n,(function(){return this})),g(m,"toString",(function(){return"[object Generator]"})),(b=function(){return{w:l,m:d}})()}function g(e,t,a,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}g=function(e,t,a,n){if(t)r?r(e,t,{value:a,enumerable:!n,configurable:!n,writable:!n}):e[t]=a;else{var l=function(t,a){g(e,t,(function(e){return this._invoke(t,a,e)}))};l("next",0),l("throw",1),l("return",2)}},g(e,t,a,n)}function h(e,t,a,n,r,l,i){try{var o=e[l](i),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(n,r)}function E(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var l=e.apply(t,a);function i(e){h(l,n,r,i,o,"next",e)}function o(e){h(l,n,r,i,o,"throw",e)}i(void 0)}))}}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,i,o=[],c=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=l.call(a)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}const w=function(e){var t=e.currentUser,a=e.showNotification,f=e.isAdmin,p=N((0,n.useState)(null),2),y=p[0],g=p[1],h=N((0,n.useState)({startDate:new Date((new Date).getFullYear(),0,1).toISOString().split("T")[0],endDate:new Date((new Date).getFullYear(),11,31).toISOString().split("T")[0]}),2),k=h[0],w=h[1],S=N((0,n.useState)([]),2),D=S[0],T=S[1],_=N((0,n.useState)(!1),2),A=(_[0],_[1]),O=N((0,n.useState)(null),2),j=O[0],C=O[1];(0,n.useEffect)((function(){y&&P()}),[y,k]);var P=function(){var e=E(b().m((function e(){var t;return b().w((function(e){for(;;)switch(e.n){case 0:return A(!0),e.p=1,e.n=2,(0,u.invoke)("getPTORequests",{requester_id:y.accountId,startDate:k.startDate,endDate:k.endDate});case 2:(t=e.v).success&&T(t.data||[]),e.n=4;break;case 3:e.p=3,e.v,a("Failed to load PTO requests","error");case 4:return e.p=4,A(!1),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=E(b().m((function e(t){return b().w((function(e){for(;;)switch(e.n){case 0:a("PTO request updated successfully"),P();case 1:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=E(b().m((function e(n){var r;return b().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm("Are you sure you want to delete this PTO request?")){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,(0,u.invoke)("adminDeletePTORequest",{requestId:n.id,adminId:t.accountId,reason:"Admin deletion"});case 2:(r=e.v).success?(a("PTO request deleted successfully"),P()):a(r.message||"Failed to delete request","error"),e.n=4;break;case 3:e.p=3,e.v,a("Failed to delete PTO request","error");case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}(),I={totalDays:D.reduce((function(e,t){return e+(t.total_days||0)}),0),approved:D.filter((function(e){return"approved"===e.status})).length,pending:D.filter((function(e){return"pending"===e.status})).length,declined:D.filter((function(e){return"declined"===e.status})).length};return n.createElement("div",{className:"user-pto-management"},n.createElement("div",{className:"user-pto-header"},n.createElement("h2",null,"User PTO Management"),n.createElement("div",{className:"user-pto-controls"},n.createElement(m.A,{selectedUser:y,onSelect:g,placeholder:"Search and select user",useBackendSearch:!0}),n.createElement("div",{className:"date-range-filter"},n.createElement("input",{type:"date",value:k.startDate,onChange:function(e){return w((function(t){return v(v({},t),{},{startDate:e.target.value})}))},className:"form-control"}),n.createElement("span",null,"to"),n.createElement("input",{type:"date",value:k.endDate,onChange:function(e){return w((function(t){return v(v({},t),{},{endDate:e.target.value})}))},className:"form-control"})))),y&&n.createElement(n.Fragment,null,n.createElement("div",{className:"summary-cards"},n.createElement("div",{className:"summary-card"},n.createElement("div",{className:"card-icon"},n.createElement(r.A,{size:24})),n.createElement("div",{className:"card-content"},n.createElement("div",{className:"card-value"},I.totalDays),n.createElement("div",{className:"card-label"},"Total PTO Days"))),n.createElement("div",{className:"summary-card approved"},n.createElement("div",{className:"card-icon"},n.createElement(l.A,{size:24})),n.createElement("div",{className:"card-content"},n.createElement("div",{className:"card-value"},I.approved),n.createElement("div",{className:"card-label"},"Approved"))),n.createElement("div",{className:"summary-card pending"},n.createElement("div",{className:"card-icon"},n.createElement(i.A,{size:24})),n.createElement("div",{className:"card-content"},n.createElement("div",{className:"card-value"},I.pending),n.createElement("div",{className:"card-label"},"Pending")))),n.createElement("div",{className:"requests-table-container"},n.createElement("table",{className:"requests-table"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"PTO Date"),n.createElement("th",null,"Leave Type"),n.createElement("th",null,"Period"),n.createElement("th",null,"Days"),n.createElement("th",null,"Reason"),n.createElement("th",null,"Status"),f&&n.createElement("th",null,"Actions"))),n.createElement("tbody",null,D.map((function(e){return n.createElement("tr",{key:e.id},n.createElement("td",null,new Date(e.start_date).toLocaleDateString()),n.createElement("td",null,n.createElement("span",{className:"leave-type ".concat(e.leave_type)},e.leave_type)),n.createElement("td",null,e.start_date===e.end_date?new Date(e.start_date).toLocaleDateString():"".concat(new Date(e.start_date).toLocaleDateString()," - ").concat(new Date(e.end_date).toLocaleDateString())),n.createElement("td",null,e.total_days),n.createElement("td",null,e.reason),n.createElement("td",null,n.createElement("span",{className:"status-badge status-".concat(e.status)},e.status)),f&&n.createElement("td",{className:"actions"},n.createElement("button",{onClick:function(){return function(e){C(e)}(e)},className:"action-btn edit",title:"Edit request"},n.createElement(o.A,{size:16})),n.createElement("button",{onClick:function(){return U(e)},className:"action-btn delete",title:"Delete request"},n.createElement(c.A,{size:16}))))})),0===D.length&&n.createElement("tr",null,n.createElement("td",{colSpan:f?7:6,className:"empty-state"},n.createElement("div",{className:"empty-content"},n.createElement(r.A,{size:24}),n.createElement("p",null,"No PTO requests found for this period")))))))),!y&&n.createElement("div",{className:"empty-state"},n.createElement("div",{className:"empty-content"},n.createElement(s.A,{size:32}),n.createElement("p",null,"Select a user to view their PTO requests"))),j&&n.createElement(d.A,{request:j,onClose:function(){return C(null)},onSave:x,currentUser:t}))}},4506:(e,t,a)=>{a.d(t,{A:()=>O});var n=a(6540),r=a(2307),l=a(8697),i=a(418),o=a(8686),c=a(3893),s=a(4471),u=a(2708),m=a(7235),d=a(6069),f=a(5143),p=a(808),v=a(2321);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(){var e,t,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",r=a.toStringTag||"@@toStringTag";function l(a,n,r,l){var c=n&&n.prototype instanceof o?n:o,s=Object.create(c.prototype);return g(s,"_invoke",function(a,n,r){var l,o,c,s=0,u=r||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return l=t,o=0,c=e,d.n=a,i}};function f(a,n){for(o=a,c=n,t=0;!m&&s&&!r&&t<u.length;t++){var r,l=u[t],f=d.p,p=l[2];a>3?(r=p===n)&&(c=l[(o=l[4])?5:(o=3,3)],l[4]=l[5]=e):l[0]<=f&&((r=a<2&&f<l[1])?(o=0,d.v=n,d.n=l[1]):f<p&&(r=a<3||l[0]>n||n>p)&&(l[4]=a,l[5]=n,d.n=p,o=0))}if(r||a>1)return i;throw m=!0,n}return function(r,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),o=u,c=p;(t=o<2?e:c)||!m;){l||(o?o<3?(o>1&&(d.n=-1),f(o,c)):d.n=c:d.v=c);try{if(s=2,l){if(o||(r="next"),t=l[r]){if(!(t=t.call(l,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,o<2&&(o=0)}else 1===o&&(t=l.return)&&t.call(l),o<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),o=1);l=e}else if((t=(m=d.n<0)?c:a.call(n,d))!==i)break}catch(t){l=e,o=1,c=t}finally{s=1}}return{value:t,done:m}}}(a,r,l),!0),s}var i={};function o(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(g(t={},n,(function(){return this})),t),m=s.prototype=o.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,g(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return c.prototype=s,g(m,"constructor",s),g(s,"constructor",c),c.displayName="GeneratorFunction",g(s,r,"GeneratorFunction"),g(m),g(m,r,"Generator"),g(m,n,(function(){return this})),g(m,"toString",(function(){return"[object Generator]"})),(b=function(){return{w:l,m:d}})()}function g(e,t,a,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}g=function(e,t,a,n){if(t)r?r(e,t,{value:a,enumerable:!n,configurable:!n,writable:!n}):e[t]=a;else{var l=function(t,a){g(e,t,(function(e){return this._invoke(t,a,e)}))};l("next",0),l("throw",1),l("return",2)}},g(e,t,a,n)}function h(e,t,a,n,r,l,i){try{var o=e[l](i),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(n,r)}function E(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){w(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,i,o=[],c=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=l.call(a)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(s)throw r}}return o}}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return T(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var _=n.useState,A=n.useEffect;const O=function(e){var t,a,y,g,N,D=e.selectedDates,T=void 0===D?[]:D,O=e.onClose,j=e.onSubmit,C=e.currentUser,P=e.currentUserData,x=e.userManager,U=e.allUsers,I=void 0===U?[]:U,F=e.allTeams,L=void 0===F?[]:F,M=e.allRequests,q=void 0===M?[]:M,R=e.isAdmin,W=void 0!==R&&R,B=(e.isAdminMode,S(_({targetUser:C,manager:x,startDate:T[0]||"",endDate:T[T.length-1]||"",reason:"",dailySchedules:[]}),2)),z=B[0],G=B[1],H=S(_({}),2),Y=H[0],J=H[1],V=S(_(!1),2),$=V[0],K=V[1],Q=S(_(!1),2),X=Q[0],Z=Q[1],ee=S(_(!1),2),te=ee[0],ae=ee[1];A((function(){K(!W&&!P)}),[W,P]);var ne=function(e){if(!e)return null;var t=I.find((function(t){return t.jira_account_id===e.accountId||t.email_address===e.emailAddress}));if(null!=t&&t.manager)return I.find((function(e){return e.id===t.manager||e.jira_account_id===t.manager}));if(null!=t&&t.team_id){var a=L.find((function(e){return e.id===t.team_id}));if(null!=a&&a.manager)return I.find((function(e){return e.id===a.manager||e.jira_account_id===a.manager}))}return null};A((function(){!function(){var e=[];if(!X&&T.length>0)e=T.slice().sort();else if((X||0===T.length)&&z.startDate&&z.endDate){var t=new Date(z.startDate),a=new Date(z.endDate);e=[];for(var n=new Date(t);n<=a;n.setDate(n.getDate()+1))e.push(n.toISOString().split("T")[0])}var r=e.map((function(e){return{date:e,type:"FULL_DAY",leaveType:"vacation"}}));G((function(t){return k(k({},t),{},{targetUser:W?t.targetUser:C,manager:ne(W?t.targetUser:C)||x||t.manager,startDate:e[0]||"",endDate:e[e.length-1]||"",dailySchedules:r})}))}()}),[T,C,x,W,I,L,X]),A((function(){if(z.startDate&&z.endDate){for(var e=new Date(z.startDate),t=new Date(z.endDate),a=[],n=new Date(e);n<=t;n.setDate(n.getDate()+1))a.push(n.toISOString().split("T")[0]);var r=z.dailySchedules.filter((function(e){return a.includes(e.date)})),l=a.filter((function(e){return!r.find((function(t){return t.date===e}))})).map((function(e){return{date:e,type:"FULL_DAY",leaveType:"vacation"}}));G((function(e){return k(k({},e),{},{dailySchedules:[].concat(E(r),E(l)).sort((function(e,t){return new Date(e.date)-new Date(t.date)}))})}))}}),[z.startDate,z.endDate]);var re=function(){var e,t=(e=b().m((function e(t){var a,n,r,l;return b().w((function(e){for(;;)switch(e.n){case 0:if(t){e.n=1;break}return G((function(e){return k(k({},e),{},{targetUser:null})})),e.a(2);case 1:return e.p=1,e.n=2,(0,v.invoke)("getUsers");case 2:a=e.v,n=a.success&&a.data||[],r=n.find((function(e){return e.jira_account_id===t.accountId||e.email_address===t.emailAddress})),G(r?function(e){return k(k({},e),{},{targetUser:r,manager:ne(r)})}:function(e){return k(k({},e),{},{targetUser:t,manager:null})}),e.n=4;break;case 3:e.p=3,l=e.v,console.error("Failed to get user details:",l),G((function(e){return k(k({},e),{},{targetUser:t})}));case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var l=e.apply(t,a);function i(e){h(l,n,r,i,o,"next",e)}function o(e){h(l,n,r,i,o,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),le=function(e,t,a){G((function(n){return k(k({},n),{},{dailySchedules:n.dailySchedules.map((function(n,r){return r===e?k(k({},n),{},w({},t,a)):n}))})}))},ie=[{value:"FULL_DAY",label:"Full Day (8h)"},{value:"HALF_DAY_MORNING",label:"Morning Half (4h)"},{value:"HALF_DAY_AFTERNOON",label:"Afternoon Half (4h)"}],oe=[{value:"vacation",label:"🏖️ Vacation",emoji:"🏖️"},{value:"sick",label:"🤒 Sick Leave",emoji:"🤒"},{value:"personal",label:"👤 Personal Day",emoji:"👤"},{value:"holiday",label:"🎉 Holiday",emoji:"🎉"},{value:"other leave type",label:"📝 Other Leave Type",emoji:"📝"}],ce={totalDays:z.dailySchedules.reduce((function(e,t){return e+("FULL_DAY"===t.type?1:.5)}),0),totalHours:z.dailySchedules.reduce((function(e,t){return e+("FULL_DAY"===t.type?8:4)}),0),leaveTypeBreakdown:z.dailySchedules.reduce((function(e,t){return e[t.leaveType]=(e[t.leaveType]||0)+("FULL_DAY"===t.type?1:.5),e}),{}),workingDays:z.dailySchedules.length,dateRange:z.startDate&&z.endDate?"".concat(new Date(z.startDate).toLocaleDateString()," - ").concat(new Date(z.endDate).toLocaleDateString()):""},se=function(e){Z(e);var t=[];if(e&&z.startDate&&z.endDate)for(var a=new Date(z.startDate),n=new Date(z.endDate),r=new Date(a);r<=n;r.setDate(r.getDate()+1))t.push(r.toISOString().split("T")[0]);else t=T.slice().sort();var l=t.map((function(e){return{date:e,type:"FULL_DAY",leaveType:"vacation"}}));G((function(e){return k(k({},e),{},{dailySchedules:l})}))};return A((function(){Z(!1);var e=T.slice().sort(),t=e.map((function(e){return{date:e,type:"FULL_DAY",leaveType:"vacation"}}));G((function(a){return k(k({},a),{},{startDate:e[0]||"",endDate:e[e.length-1]||"",dailySchedules:t})}))}),[T]),n.createElement("div",{className:"modal-overlay"},n.createElement("div",{className:"modal-content pto-submission-modal"},n.createElement("div",{className:"modal-header"},n.createElement("h3",{className:"modal-title"},n.createElement(r.A,{size:20}),W?"Create PTO Request (Admin)":"Submit PTO Request"),n.createElement("button",{onClick:O,className:"modal-close"},n.createElement(l.A,{size:20}))),n.createElement("div",{className:"modal-body"},$&&n.createElement("div",{className:"alert alert-warning"},n.createElement(i.A,{size:20}),n.createElement("div",null,n.createElement("strong",null,"User Not in System"),n.createElement("p",null,"Your user profile is not set up in the team management system. Please contact HR to complete your setup."))),n.createElement("div",{className:"form-section"},n.createElement("label",{className:"form-label"},"Employee ",W?"*":""),W?n.createElement(f.A,{selectedUser:z.targetUser,onSelect:re,placeholder:"Search and select employee",required:!0,error:Y.targetUser,useBackendSearch:!0}):n.createElement("div",{className:"user-display-card"},n.createElement("div",{className:"user-avatar-large"},null!=C&&C.avatarUrl?n.createElement("img",{src:C.avatarUrl,alt:C.displayName}):n.createElement("div",{className:"avatar-placeholder-large"},(null==C||null===(t=C.displayName)||void 0===t?void 0:t.charAt(0))||n.createElement(o.A,{size:20}))),n.createElement("div",{className:"user-info-detailed"},n.createElement("div",{className:"user-name-large"},null==C?void 0:C.displayName),n.createElement("div",{className:"user-email-large"},null==C?void 0:C.emailAddress),(null==P?void 0:P.team_id)&&n.createElement("div",{className:"user-team"},n.createElement(c.A,{size:14}),(null===(a=L.find((function(e){return e.id===P.team_id})))||void 0===a?void 0:a.name)||"Team Member"))),Y.targetUser&&n.createElement("div",{className:"error-text"},Y.targetUser)),n.createElement("div",{className:"form-section"},n.createElement("label",{className:"form-label"},"Manager *"),z.manager?n.createElement("div",{className:"user-display-card manager-display"},n.createElement("div",{className:"user-avatar-large"},z.manager.avatarUrl?n.createElement("img",{src:z.manager.avatarUrl,alt:z.manager.displayName}):n.createElement("div",{className:"avatar-placeholder-large"},(null===(y=z.manager.displayName)||void 0===y?void 0:y.charAt(0))||n.createElement(o.A,{size:20}))),n.createElement("div",{className:"user-info-detailed"},n.createElement("div",{className:"user-name-large"},z.manager.displayName),n.createElement("div",{className:"user-email-large"},z.manager.emailAddress),n.createElement("div",{className:"manager-badge"},n.createElement(s.A,{size:14}),"Approving Manager")),W&&n.createElement("button",{type:"button",onClick:function(){return G((function(e){return k(k({},e),{},{manager:null})}))},className:"btn btn-sm btn-secondary",title:"Change Manager"},"Change")):n.createElement(f.A,{selectedUser:z.manager,onSelect:function(e){return G((function(t){return k(k({},t),{},{manager:e})}))},placeholder:"Search and select approving manager",required:!0,error:Y.manager,useBackendSearch:!0}),Y.manager&&n.createElement("div",{className:"error-text"},Y.manager)),n.createElement("div",{className:"pto-modal-section pto-modal-row"},n.createElement("div",{className:"pto-modal-col"},n.createElement("label",{className:"form-label"},"Start Date"),n.createElement("input",{type:"text",className:"form-control",value:z.startDate,readOnly:!0,tabIndex:-1})),n.createElement("div",{className:"pto-modal-col"},n.createElement("label",{className:"form-label"},"End Date"),n.createElement("input",{type:"text",className:"form-control",value:z.endDate,readOnly:!0,tabIndex:-1})),n.createElement("div",{className:"pto-modal-col",style:{alignSelf:"end"}},!X&&T.length>1&&n.createElement("button",{type:"button",className:"btn btn-sm btn-secondary",style:{marginTop:24},onClick:function(){return se(!0)}},"Add all dates in range"),X&&n.createElement("button",{type:"button",className:"btn btn-sm btn-secondary",style:{marginTop:24},onClick:function(){return se(!1)}},"Use only selected dates"))),n.createElement("div",{className:"form-section"},n.createElement("label",{className:"form-label"},"Reason (Optional)"),n.createElement("textarea",{value:z.reason,onChange:function(e){return G((function(t){return k(k({},t),{},{reason:e.target.value})}))},className:"form-control",rows:"3",placeholder:"Please provide additional details about your PTO request..."})),z.dailySchedules.length>0&&n.createElement("div",{className:"form-section"},n.createElement("div",{className:"schedule-header"},n.createElement("label",{className:"form-label"},"Schedule Details"),n.createElement("div",{className:"quick-actions"},n.createElement("span",{className:"quick-actions-label"},"Apply to all:"),oe.map((function(e){return n.createElement("button",{key:e.value,type:"button",onClick:function(){return t=e.value,void G((function(e){return k(k({},e),{},{dailySchedules:e.dailySchedules.map((function(e){return k(k({},e),{},{leaveType:t})}))})}));var t},className:"btn btn-sm btn-secondary quick-action-btn",title:"Mark all days as ".concat(e.label)},n.createElement("span",null,e.emoji),n.createElement("span",null,e.value))})))),n.createElement("div",{className:"schedule-list"},z.dailySchedules.map((function(e,t){return n.createElement("div",{key:e.date,className:"schedule-day-row"},n.createElement("div",{className:"schedule-day-info"},n.createElement("div",{className:"day-date"},new Date(e.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}))),n.createElement("div",{className:"schedule-controls"},n.createElement("select",{value:e.leaveType,onChange:function(e){return le(t,"leaveType",e.target.value)},className:"form-control schedule-select"},oe.map((function(e){return n.createElement("option",{key:e.value,value:e.value},e.label)}))),n.createElement("select",{value:e.type,onChange:function(e){return le(t,"type",e.target.value)},className:"form-control schedule-select"},ie.map((function(e){return n.createElement("option",{key:e.value,value:e.value},e.label)}))),n.createElement("button",{type:"button",onClick:function(){return function(e){G((function(t){return k(k({},t),{},{dailySchedules:t.dailySchedules.filter((function(t,a){return a!==e}))})}));var t=z.dailySchedules.filter((function(t,a){return a!==e}));if(t.length>0){var a=t.map((function(e){return e.date})).sort();G((function(e){return k(k({},e),{},{startDate:a[0],endDate:a[a.length-1]})}))}}(t)},className:"btn btn-sm btn-danger",title:"Remove this day"},n.createElement(u.A,{size:14}))))}))),Y.dailySchedules&&n.createElement("div",{className:"error-text"},Y.dailySchedules)),z.dailySchedules.length>0&&n.createElement("div",{className:"form-section"},n.createElement("div",{className:"request-summary-card"},n.createElement("div",{className:"summary-header"},n.createElement("h4",null,"Request Summary"),n.createElement("div",{className:"summary-status"},n.createElement(m.A,{size:16}),"Ready to Submit")),n.createElement("div",{className:"summary-content"},n.createElement("div",{className:"summary-metrics"},n.createElement("div",{className:"metric-item"},n.createElement("div",{className:"metric-value"},ce.totalDays),n.createElement("div",{className:"metric-label"},"Days Off")),n.createElement("div",{className:"metric-item"},n.createElement("div",{className:"metric-value"},ce.totalHours,"h"),n.createElement("div",{className:"metric-label"},"Total Hours")),n.createElement("div",{className:"metric-item"},n.createElement("div",{className:"metric-value"},ce.workingDays),n.createElement("div",{className:"metric-label"},"Scheduled Days"))),n.createElement("div",{className:"summary-details"},n.createElement("div",{className:"detail-row"},n.createElement("span",{className:"detail-label"},n.createElement(d.A,{size:16}),"Date Range:"),n.createElement("span",{className:"detail-value"},ce.dateRange)),n.createElement("div",{className:"detail-row"},n.createElement("span",{className:"detail-label"},n.createElement(o.A,{size:16}),W?"Employee:":"Approver:"),n.createElement("span",{className:"detail-value"},W?(null===(g=z.targetUser)||void 0===g?void 0:g.displayName)||"Not selected":(null===(N=z.manager)||void 0===N?void 0:N.displayName)||"Not selected")),Object.keys(ce.leaveTypeBreakdown).length>0&&n.createElement("div",{className:"detail-row"},n.createElement("span",{className:"detail-label"},n.createElement(r.A,{size:16}),"Leave Types:"),n.createElement("div",{className:"leave-type-tags"},Object.entries(ce.leaveTypeBreakdown).map((function(e){var t=S(e,2),a=t[0],r=t[1];return n.createElement("span",{key:a,className:"leave-type-tag"},(0,p.S0)(a)," ",a,": ",r," day",1!==r?"s":"")})))))))),Y.duplicate&&n.createElement("div",{className:"alert alert-error"},n.createElement(i.A,{size:20}),n.createElement("div",null,n.createElement("strong",null,"Scheduling Conflict"),n.createElement("p",null,Y.duplicate))),n.createElement("div",{className:"form-actions"},n.createElement("button",{type:"button",onClick:O,className:"btn btn-secondary"},"Cancel"),n.createElement("button",{type:"button",onClick:function(){var e;if(function(){var e,t,a={};z.targetUser||(a.targetUser="User is required"),z.manager||(a.manager="Manager is required"),z.startDate||(a.startDate="Start date is required"),z.endDate||(a.endDate="End date is required"),z.startDate&&z.endDate&&new Date(z.startDate)>new Date(z.endDate)&&(a.endDate="End date must be after start date"),0===z.dailySchedules.length&&(a.dailySchedules="Please select at least one day");var n=(null===(e=z.targetUser)||void 0===e?void 0:e.accountId)||(null===(t=z.targetUser)||void 0===t?void 0:t.jira_account_id);if(n){var r=z.dailySchedules.filter((function(e){return q.some((function(t){var a;return(t.requester_id===n||t.requester_email===(null===(a=z.targetUser)||void 0===a?void 0:a.emailAddress))&&"declined"!==t.status&&t.start_date<=e.date&&t.end_date>=e.date}))}));r.length>0&&(a.duplicate="This user already has PTO requests for: ".concat(r.map((function(e){return new Date(e.date).toLocaleDateString()})).join(", ")))}return J(a),0===Object.keys(a).length}()){var t,a=(t=z.targetUser)?k(k({},t),{},{accountId:t.accountId||t.jira_account_id||t.id,displayName:t.displayName||t.display_name||t.name,emailAddress:t.emailAddress||t.email_address,avatarUrl:t.avatarUrl||t.avatar_url}):null;if(a&&a.accountId&&a.displayName&&a.emailAddress){var n,r=z.dailySchedules.reduce((function(e,t){return e+("FULL_DAY"===t.type?1:.5)}),0),l=z.dailySchedules.reduce((function(e,t){return e+("FULL_DAY"===t.type?8:4)}),0),i=k({reporter:a,manager:(n=z.manager,n?k(k({},n),{},{accountId:n.accountId||n.jira_account_id||n.id,displayName:n.displayName||n.display_name||n.name,emailAddress:n.emailAddress||n.email_address,avatarUrl:n.avatarUrl||n.avatar_url}):null),startDate:z.startDate,endDate:z.endDate,leaveType:(null===(e=z.dailySchedules[0])||void 0===e?void 0:e.leaveType)||"vacation",reason:z.reason,dailySchedules:z.dailySchedules,totalDays:r,totalHours:l,isAdmin:te},te&&{targetUser:a});j(i)}else J((function(e){return k(k({},e),{},{targetUser:"Please select a valid user."})}))}},disabled:!z.targetUser||!z.manager||!z.startDate||!z.endDate||0===z.dailySchedules.length||!!Y.duplicate||$,className:"btn btn-primary"},W?"Create PTO Request":"Submit Request")),te&&n.createElement("div",{className:"admin-notice"},n.createElement("strong",null,"Admin Mode:")," This PTO request will be created with admin privileges and may be automatically approved."),0===z.dailySchedules.length&&n.createElement("div",{className:"instructions"},n.createElement("strong",null,"Next Step:")," Select start and end dates to configure your PTO schedule, or return to the calendar to select specific dates."),W&&n.createElement("div",{className:"pto-admin-mode-toggle",style:{display:"flex",gap:"2rem",alignItems:"center",marginBottom:16}},n.createElement("label",{style:{display:"flex",alignItems:"center",gap:6}},n.createElement("input",{type:"radio",checked:!te,onChange:function(){return ae(!1)},style:{marginRight:6}}),"Submit as Standard User"),n.createElement("label",{style:{display:"flex",alignItems:"center",gap:6}},n.createElement("input",{type:"radio",checked:te,onChange:function(){return ae(!0)},style:{marginRight:6}}),"Submit as Admin (auto-approve)")))))}},5143:(e,t,a)=>{a.d(t,{A:()=>b});var n=a(6540),r=a(8686),l=a(8697),i=a(8445),o=a(2321);function c(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(){var e,t,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",r=a.toStringTag||"@@toStringTag";function l(a,n,r,l){var c=n&&n.prototype instanceof o?n:o,s=Object.create(c.prototype);return u(s,"_invoke",function(a,n,r){var l,o,c,s=0,u=r||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return l=t,o=0,c=e,d.n=a,i}};function f(a,n){for(o=a,c=n,t=0;!m&&s&&!r&&t<u.length;t++){var r,l=u[t],f=d.p,p=l[2];a>3?(r=p===n)&&(c=l[(o=l[4])?5:(o=3,3)],l[4]=l[5]=e):l[0]<=f&&((r=a<2&&f<l[1])?(o=0,d.v=n,d.n=l[1]):f<p&&(r=a<3||l[0]>n||n>p)&&(l[4]=a,l[5]=n,d.n=p,o=0))}if(r||a>1)return i;throw m=!0,n}return function(r,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),o=u,c=p;(t=o<2?e:c)||!m;){l||(o?o<3?(o>1&&(d.n=-1),f(o,c)):d.n=c:d.v=c);try{if(s=2,l){if(o||(r="next"),t=l[r]){if(!(t=t.call(l,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,o<2&&(o=0)}else 1===o&&(t=l.return)&&t.call(l),o<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),o=1);l=e}else if((t=(m=d.n<0)?c:a.call(n,d))!==i)break}catch(t){l=e,o=1,c=t}finally{s=1}}return{value:t,done:m}}}(a,r,l),!0),s}var i={};function o(){}function c(){}function m(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(u(t={},n,(function(){return this})),t),f=m.prototype=o.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,r,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=m,u(f,"constructor",m),u(m,"constructor",c),c.displayName="GeneratorFunction",u(m,r,"GeneratorFunction"),u(f),u(f,r,"Generator"),u(f,n,(function(){return this})),u(f,"toString",(function(){return"[object Generator]"})),(s=function(){return{w:l,m:p}})()}function u(e,t,a,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}u=function(e,t,a,n){if(t)r?r(e,t,{value:a,enumerable:!n,configurable:!n,writable:!n}):e[t]=a;else{var l=function(t,a){u(e,t,(function(e){return this._invoke(t,a,e)}))};l("next",0),l("throw",1),l("return",2)}},u(e,t,a,n)}function m(e,t,a,n,r,l,i){try{var o=e[l](i),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(n,r)}function d(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var l=e.apply(t,a);function i(e){m(l,n,r,i,o,"next",e)}function o(e){m(l,n,r,i,o,"throw",e)}i(void 0)}))}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,i,o=[],c=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=l.call(a)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(s)throw r}}return o}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return v(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function y(e,t){var a;return function(){for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];clearTimeout(a),a=setTimeout((function(){clearTimeout(a),e.apply(void 0,r)}),t)}}const b=function(e){var t,a=e.selectedUser,u=e.onSelect,m=e.placeholder,p=void 0===m?"Search for a user":m,v=e.disabled,b=void 0!==v&&v,g=e.required,h=void 0!==g&&g,E=e.error,N=void 0===E?null:E,k=e.allUsers,w=void 0===k?[]:k,S=e.filterBy,D=void 0===S?"all":S,T=e.useBackendSearch,_=void 0!==T&&T,A=f((0,n.useState)(!1),2),O=A[0],j=A[1],C=f((0,n.useState)(""),2),P=C[0],x=C[1],U=f((0,n.useState)([]),2),I=U[0],F=U[1],L=f((0,n.useState)(!1),2),M=L[0],q=L[1],R=f((0,n.useState)(null),2),W=R[0],B=R[1],z=(0,n.useRef)(null),G=(0,n.useRef)(null),H=(0,n.useCallback)(y(function(){var e=d(s().m((function e(t){var a,n;return s().w((function(e){for(;;)switch(e.n){case 0:if(!(t.length<1)){e.n=1;break}return F([]),e.a(2);case 1:return q(!0),B(null),e.p=2,e.n=3,(0,o.invoke)("searchDatabaseUsers",{query:t,filterBy:D,startAt:0,maxResults:50});case 3:if(!(a=e.v).success||!a.data){e.n=4;break}F(a.data.users||[]),e.n=5;break;case 4:throw new Error(a.message||"Failed to search users");case 5:e.n=7;break;case 6:e.p=6,n=e.v,console.error("❌ Error searching users:",n),B(n.message),F([]);case 7:return e.p=7,q(!1),e.f(7);case 8:return e.a(2)}}),e,null,[[2,6,7,8]])})));return function(t){return e.apply(this,arguments)}}(),300),[D]),Y=(0,n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=c(w);if("withTeam"===D?t=t.filter((function(e){return(e.team_ids||[]).length>0})):"withoutTeam"===D&&(t=t.filter((function(e){return!(e.team_ids&&e.team_ids.length>0)}))),e.length>=1){var a=e.toLowerCase();t=t.filter((function(e){var t=(e.display_name||e.displayName||"").toLowerCase(),n=(e.email_address||e.emailAddress||"").toLowerCase(),r=(e.first_name||e.firstName||"").toLowerCase(),l=(e.last_name||e.lastName||"").toLowerCase();return t.includes(a)||n.includes(a)||r.includes(a)||l.includes(a)}))}t.sort((function(e,t){var a=(e.display_name||e.displayName||"").toLowerCase(),n=(t.display_name||t.displayName||"").toLowerCase();return a.localeCompare(n)})),F(t.slice(0,50))}),[w,D]);(0,n.useEffect)((function(){_||Y(P)}),[Y,P,_]);(0,n.useEffect)((function(){var e=function(e){z.current&&!z.current.contains(e.target)&&(j(!1),x(""),_||F([]))};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[_]),(0,n.useEffect)((function(){var e=function(e){"Escape"===e.key&&O&&(j(!1),x(""),_||F([]))};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[O,_]);var J=function(e){return e.team_name||""},V=(0,n.useCallback)(y(function(){var e=d(s().m((function e(t){var a,n;return s().w((function(e){for(;;)switch(e.n){case 0:if(t){e.n=1;break}return F([]),e.a(2);case 1:if(e.p=1,!_){e.n=3;break}return e.n=2,(0,o.invoke)("searchDatabaseUsers",{query:t,filterBy:D,startAt:0,maxResults:50});case 2:a=e.v,e.n=5;break;case 3:return e.n=4,(0,o.invoke)("getInternalJiraUsers",{startAt:0,maxResults:50});case 4:a=e.v;case 5:a.success?F(a.data.users||[]):F([]),e.n=7;break;case 6:e.p=6,n=e.v,console.error("Error searching users:",n),F([]);case 7:return e.a(2)}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),300),[_,D]);return(0,n.useEffect)((function(){P?V(P):F([])}),[P,V]),n.createElement("div",{className:"user-picker-container",ref:z},n.createElement("div",{onClick:function(){b||(j(!0),setTimeout((function(){var e;null===(e=G.current)||void 0===e||e.focus()}),100))},className:"user-picker-input ".concat(b?"user-picker-input-disabled":""," ").concat(O?"user-picker-input-focused":""," ").concat(N?"user-picker-input-error":"")},a?n.createElement("div",{className:"user-picker-selected"},n.createElement("div",{className:"user-picker-avatar"},a.avatarUrl||a.avatar_url?n.createElement("img",{src:a.avatarUrl||a.avatar_url,alt:a.displayName||a.display_name,className:"user-picker-avatar-img"}):n.createElement("span",{className:"user-picker-avatar-text"},(null===(t=a.displayName||a.display_name)||void 0===t?void 0:t.charAt(0))||n.createElement(r.A,{size:16}))),n.createElement("div",{className:"user-picker-user-info"},n.createElement("div",{className:"user-picker-user-name"},a.displayName||a.display_name),n.createElement("div",{className:"user-picker-user-email"},a.emailAddress||a.email_address)),!b&&n.createElement("button",{onClick:function(e){e.stopPropagation(),u(null)},className:"user-picker-clear-btn",type:"button"},n.createElement(l.A,{size:16}))):n.createElement("div",{className:"user-picker-placeholder"},n.createElement(i.A,{size:16}),n.createElement("span",null,p),h&&n.createElement("span",{className:"user-picker-required"},"*"))),N&&n.createElement("div",{className:"user-picker-error"},N),O&&n.createElement("div",{className:"user-picker-dropdown"},n.createElement("div",{className:"user-picker-search-container"},n.createElement("div",{className:"user-picker-search-input-wrapper"},n.createElement(i.A,{size:16,className:"user-picker-search-icon"}),n.createElement("input",{ref:G,type:"text",value:P,onChange:function(e){var t=e.target.value;x(t),_?H(t):Y(t)},placeholder:"Type to search users...",className:"user-picker-search-input"}))),n.createElement("div",{className:"user-picker-results"},M?n.createElement("div",{className:"user-picker-loading"},n.createElement("div",{className:"user-picker-loading-spinner"}),n.createElement("div",{className:"user-picker-loading-text"},"Searching...")):W?n.createElement("div",{className:"user-picker-empty"},n.createElement("div",{className:"user-picker-empty-text"},"Error: ",W)):0!==w.length||_?P.length>=1&&0===I.length?n.createElement("div",{className:"user-picker-empty"},n.createElement("div",{className:"user-picker-empty-text"},"No users found")):P.length<1?n.createElement("div",{className:"user-picker-empty"},n.createElement("div",{className:"user-picker-empty-text"},"Type to search users...")):n.createElement("div",{className:"user-picker-user-list"},I.map((function(e){var t;return n.createElement("div",{key:e.id,onClick:function(){return function(e){u(e),j(!1),x(""),F([])}(e)},className:"user-picker-user-option"},n.createElement("div",{className:"user-picker-avatar"},e.avatarUrl||e.avatar_url?n.createElement("img",{src:e.avatarUrl||e.avatar_url,alt:e.displayName||e.display_name,className:"user-picker-avatar-img"}):n.createElement("span",{className:"user-picker-avatar-text"},(null===(t=e.displayName||e.display_name)||void 0===t?void 0:t.charAt(0))||n.createElement(r.A,{size:16}))),n.createElement("div",{className:"user-picker-option-info"},n.createElement("div",{className:"user-picker-option-name"},e.displayName||e.display_name),n.createElement("div",{className:"user-picker-option-email"},e.emailAddress||e.email_address),J(e)&&n.createElement("div",{className:"user-picker-option-team"},"Team: ",J(e))))})),50===I.length&&n.createElement("div",{className:"user-picker-more-results"},"Showing first 50 results. Narrow your search for more specific results.")):n.createElement("div",{className:"user-picker-empty"},n.createElement("div",{className:"user-picker-empty-text"},"No users available")))))}},5839:(e,t,a)=>{a.d(t,{A:()=>_});var n=a(6540),r=a(2321),l=a(5143),i=a(8309),o=a(1999),c=a(5977),s=a(8686),u=a(7677),m=a(4809),d=a.n(m);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],a=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}}}throw new TypeError(f(e)+" is not iterable")}function v(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=D(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){o=!0,l=e},f:function(){try{i||null==a.return||a.return()}finally{if(o)throw l}}}}function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){g(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function h(){var e,t,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",r=a.toStringTag||"@@toStringTag";function l(a,n,r,l){var c=n&&n.prototype instanceof o?n:o,s=Object.create(c.prototype);return E(s,"_invoke",function(a,n,r){var l,o,c,s=0,u=r||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return l=t,o=0,c=e,d.n=a,i}};function f(a,n){for(o=a,c=n,t=0;!m&&s&&!r&&t<u.length;t++){var r,l=u[t],f=d.p,p=l[2];a>3?(r=p===n)&&(c=l[(o=l[4])?5:(o=3,3)],l[4]=l[5]=e):l[0]<=f&&((r=a<2&&f<l[1])?(o=0,d.v=n,d.n=l[1]):f<p&&(r=a<3||l[0]>n||n>p)&&(l[4]=a,l[5]=n,d.n=p,o=0))}if(r||a>1)return i;throw m=!0,n}return function(r,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),o=u,c=p;(t=o<2?e:c)||!m;){l||(o?o<3?(o>1&&(d.n=-1),f(o,c)):d.n=c:d.v=c);try{if(s=2,l){if(o||(r="next"),t=l[r]){if(!(t=t.call(l,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,o<2&&(o=0)}else 1===o&&(t=l.return)&&t.call(l),o<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),o=1);l=e}else if((t=(m=d.n<0)?c:a.call(n,d))!==i)break}catch(t){l=e,o=1,c=t}finally{s=1}}return{value:t,done:m}}}(a,r,l),!0),s}var i={};function o(){}function c(){}function s(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(E(t={},n,(function(){return this})),t),m=s.prototype=o.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,E(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return c.prototype=s,E(m,"constructor",s),E(s,"constructor",c),c.displayName="GeneratorFunction",E(s,r,"GeneratorFunction"),E(m),E(m,r,"Generator"),E(m,n,(function(){return this})),E(m,"toString",(function(){return"[object Generator]"})),(h=function(){return{w:l,m:d}})()}function E(e,t,a,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}E=function(e,t,a,n){if(t)r?r(e,t,{value:a,enumerable:!n,configurable:!n,writable:!n}):e[t]=a;else{var l=function(t,a){E(e,t,(function(e){return this._invoke(t,a,e)}))};l("next",0),l("throw",1),l("return",2)}},E(e,t,a,n)}function N(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t,a,n,r,l,i){try{var o=e[l](i),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(n,r)}function w(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var l=e.apply(t,a);function i(e){k(l,n,r,i,o,"next",e)}function o(e){k(l,n,r,i,o,"throw",e)}i(void 0)}))}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,i,o=[],c=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=l.call(a)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(s)throw r}}return o}}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return T(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}const _=function(e){var t=e.isOpen,a=e.onClose,m=e.teams,f=e.users,y=e.onSaveTeam,E=e.onDeleteTeam,k=e.onSaveUser,D=e.onDeleteUser,T=e.showNotification,_=e.onRefresh,A=S((0,n.useState)("teams"),2),O=A[0],j=A[1],C=S((0,n.useState)("list"),2),P=C[0],x=C[1],U=S((0,n.useState)(null),2),I=U[0],F=U[1],L=S((0,n.useState)(null),2),M=L[0],q=L[1],R=S((0,n.useState)(!1),2),W=R[0],B=R[1],z=S((0,n.useState)([]),2),G=z[0],H=z[1],Y=S((0,n.useState)(!1),2),J=Y[0],V=Y[1],$=S((0,n.useState)({startAt:0,maxResults:50,total:0,isLast:!0}),2),K=$[0],Q=$[1],X=S((0,n.useState)([]),2),Z=X[0],ee=X[1],te=S((0,n.useState)(!1),2),ae=te[0],ne=te[1],re=S((0,n.useState)({name:"",description:"",manager:null,department:"",color:"#667eea"}),2),le=re[0],ie=re[1],oe=S((0,n.useState)({firstName:"",lastName:"",displayName:"",emailAddress:"",jiraAccountId:"",employmentType:"full-time",hireDate:"",teamMemberships:[],capacity:40,manager:"",executiveManager:""}),2),ce=oe[0],se=oe[1],ue=S((0,n.useState)([{dayOfWeek:1,dayName:"Monday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:2,dayName:"Tuesday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:3,dayName:"Wednesday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:4,dayName:"Thursday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:5,dayName:"Friday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:6,dayName:"Saturday",isWorkingDay:!1,startTime:"",endTime:"",hoursPerDay:0},{dayOfWeek:7,dayName:"Sunday",isWorkingDay:!1,startTime:"",endTime:"",hoursPerDay:0}]),2),me=ue[0],de=ue[1],fe=S((0,n.useState)({}),2),pe=fe[0],ve=fe[1],ye=S((0,n.useState)("Member"),2),be=ye[0],ge=ye[1];(0,n.useEffect)((function(){"users"===O&&"import"===P&&he(0)}),[O,P]);var he=function(){var e=w(h().m((function e(){var t,a,n,l,i,o,c,s,u=arguments;return h().w((function(e){for(;;)switch(e.n){case 0:return 0===(t=u.length>0&&void 0!==u[0]?u[0]:0)&&(V(!0),H([])),e.p=1,e.n=2,(0,r.invoke)("getInternalJiraUsers",{startAt:t,maxResults:50});case 2:if(!(a=e.v).success||!a.data){e.n=4;break}if(n=a.data,l=n.users,i=n.total,o=n.isLast,H((function(e){return[].concat(N(e),N(l||[]))})),Q({startAt:t,maxResults:50,total:i||0,isLast:!1!==o}),o){e.n=3;break}return c=t+50,e.n=3,he(c);case 3:e.n=5;break;case 4:throw new Error(a.message||"Failed to load Jira users");case 5:e.n=7;break;case 6:e.p=6,s=e.v,0===t&&(T("Failed to load Jira users: "+s.message,"error"),H([]));case 7:return e.p=7,(0===t||J)&&V(!1),e.f(7);case 8:return e.a(2)}}),e,null,[[1,6,7,8]])})));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=w(h().m((function e(){var t,a,n,l,i,o,c;return h().w((function(e){for(;;)switch(e.n){case 0:if(0!==Z.length){e.n=1;break}return T("Please select users to import","error"),e.a(2);case 1:return ne(!0),e.p=2,t=f.map((function(e){return e.jira_account_id||e.email_address})).filter(Boolean),a=Z.filter((function(e){return!t.includes(e.accountId)&&!t.includes(e.emailAddress)})),e.n=3,(0,r.invoke)("bulkImportUsersFromJira",{selectedUserIds:a.map((function(e){return e.accountId})),defaultTeamId:null,defaultDepartment:""});case 3:if(!(n=e.v).success){e.n=4;break}l=n.data,i=l.importedCount,o=l.skippedCount,T("Successfully imported ".concat(i," users. ").concat(o>0?"".concat(o," users were already in the system."):""),"success"),ee([]),_&&_(),he(0),e.n=5;break;case 4:throw new Error(n.message||"Failed to import users");case 5:e.n=7;break;case 6:e.p=6,c=e.v,T("Failed to import users: "+c.message,"error");case 7:return e.p=7,ne(!1),e.f(7);case 8:return e.a(2)}}),e,null,[[2,6,7,8]])})));return function(){return e.apply(this,arguments)}}(),Ne=function(){ie({name:"",description:"",manager:null,department:"",color:"#667eea"}),ve({}),F(null)},ke=function(){se({firstName:"",lastName:"",displayName:"",emailAddress:"",jiraAccountId:"",employmentType:"full-time",hireDate:"",teamMemberships:[],capacity:40,manager:"",executiveManager:""}),de([{dayOfWeek:1,dayName:"Monday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:2,dayName:"Tuesday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:3,dayName:"Wednesday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:4,dayName:"Thursday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:5,dayName:"Friday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:6,dayName:"Saturday",isWorkingDay:!1,startTime:"",endTime:"",hoursPerDay:0},{dayOfWeek:7,dayName:"Sunday",isWorkingDay:!1,startTime:"",endTime:"",hoursPerDay:0}]),ve({}),q(null)};(0,n.useEffect)((function(){(ce.firstName||ce.lastName)&&se((function(e){return b(b({},e),{},{displayName:"".concat(ce.firstName," ").concat(ce.lastName).trim()})}))}),[ce.firstName,ce.lastName]),(0,n.useEffect)((function(){var e=me.reduce((function(e,t){return e+(t.isWorkingDay?t.hoursPerDay:0)}),0);se((function(t){return b(b({},t),{},{capacity:e})}))}),[me]);var we=function(){var e=w(h().m((function e(t){return h().w((function(e){for(;;)switch(e.n){case 0:ie((function(e){return b(b({},e),{},{manager:t})}));case 1:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(e,t){ie((function(a){return b(b({},a),{},g({},e,t))})),pe[e]&&ve((function(t){return b(b({},t),{},g({},e,null))}))},De=function(){var e=w(h().m((function e(t){var a;return h().w((function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),n=void 0,n={},le.name.trim()||(n.name="Team name is required"),ve(n),0===Object.keys(n).length){e.n=1;break}return e.a(2);case 1:return B(!0),e.p=2,a={id:null==I?void 0:I.id,name:le.name,description:le.description,manager:le.manager&&(le.manager.jira_account_id||le.manager.accountId||le.manager.id)||null,department:le.department,color:le.color,members:(null==I?void 0:I.members)||[]},console.log("Submitting team:",a),e.n=3,y(a);case 3:T(I?"Team updated successfully":"Team created successfully"),Ne(),x("list"),_&&_(),e.n=5;break;case 4:e.p=4,e.v,T("Failed to save team","error");case 5:return e.p=5,B(!1),e.f(5);case 6:return e.a(2)}var n}),e,null,[[2,4,5,6]])})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=w(h().m((function e(t,a){return h().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm('Are you sure you want to delete the team "'.concat(a,'"? This action cannot be undone.'))){e.n=1;break}return e.a(2);case 1:return B(!0),e.p=2,e.n=3,E(t);case 3:T("Team deleted successfully"),_&&_(),e.n=5;break;case 4:e.p=4,e.v,T("Failed to delete team","error");case 5:return e.p=5,B(!1),e.f(5);case 6:return e.a(2)}}),e,null,[[2,4,5,6]])})));return function(t,a){return e.apply(this,arguments)}}(),_e=function(e,t){se((function(a){return b(b({},a),{},g({},e,t))})),pe[e]&&ve((function(t){return b(b({},t),{},g({},e,null))}))},Ae=function(e,t,a){de((function(n){var r=N(n);if(r[e]=b(b({},r[e]),{},g({},t,a)),"startTime"===t||"endTime"===t){var l=r[e];if(l.startTime&&l.endTime&&l.isWorkingDay){var i=new Date("2000-01-01T".concat(l.startTime)),o=(new Date("2000-01-01T".concat(l.endTime))-i)/36e5;r[e].hoursPerDay=Math.max(0,o)}}return"isWorkingDay"!==t||a||(r[e].startTime="",r[e].endTime="",r[e].hoursPerDay=0),r}))},Oe=function(){var e=w(h().m((function e(t){var a,n,l,i,o;return h().w((function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),c=void 0,c={},ce.firstName.trim()||(c.firstName="First name is required"),ce.lastName.trim()||(c.lastName="Last name is required"),ve(c),0===Object.keys(c).length){e.n=1;break}return e.a(2);case 1:return B(!0),e.p=2,a=!0===(null==M?void 0:M.isAdmin),n=!0===ce.isAdmin,l={id:null==M?void 0:M.id,first_name:ce.firstName,last_name:ce.lastName,display_name:ce.displayName,email_address:ce.emailAddress,jira_account_id:ce.jiraAccountId,employment_type:ce.employmentType,hire_date:ce.hireDate,team_memberships:ce.teamMemberships,capacity:ce.capacity,availability:me,isAdmin:n,manager:ce.manager,executive_manager:ce.executiveManager},console.log("Submitting user:",l),e.n=3,k(l);case 3:if(!n||a){e.n=5;break}return e.n=4,(0,r.invoke)("addAdminUser",{accountId:l.jira_account_id||l.id||l.accountId,addedBy:null===(i=currentUser)||void 0===i?void 0:i.accountId});case 4:e.n=6;break;case 5:if(n||!a){e.n=6;break}return e.n=6,(0,r.invoke)("removeAdminUser",{accountId:l.jira_account_id||l.id||l.accountId,removedBy:null===(o=currentUser)||void 0===o?void 0:o.accountId});case 6:T(M?"User updated successfully":"User created successfully"),ke(),x("list"),_&&_(),e.n=8;break;case 7:e.p=7,e.v,T("Failed to save user","error");case 8:return e.p=8,B(!1),e.f(8);case 9:return e.a(2)}var c}),e,null,[[2,7,8,9]])})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=w(h().m((function e(t,a){return h().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm('Are you sure you want to delete the user "'.concat(a,'"? This action cannot be undone.'))){e.n=1;break}return e.a(2);case 1:return B(!0),e.p=2,e.n=3,D(t);case 3:T("User deleted successfully"),_&&_(),e.n=5;break;case 4:e.p=4,e.v,T("Failed to delete user","error");case 5:return e.p=5,B(!1),e.f(5);case 6:return e.a(2)}}),e,null,[[2,4,5,6]])})));return function(t,a){return e.apply(this,arguments)}}(),Ce=S((0,n.useState)([]),2),Pe=Ce[0],xe=Ce[1],Ue=S((0,n.useState)(!1),2),Ie=Ue[0],Fe=Ue[1],Le=S((0,n.useState)(""),2),Me=Le[0],qe=Le[1],Re=function(e){return f.some((function(t){return(t.team_memberships||[]).some((function(t){return t.team_id===e&&"Manager"===t.role}))}))},We=["type","id","name","jira_account_id","first_name","last_name","display_name","email","employment_type","hire_date","team_memberships","capacity","department","description","color","manager","executive_manager","isAdmin"],Be=function(){var e=w(h().m((function e(t){var a;return h().w((function(e){for(;;)switch(e.n){case 0:if(a=t.target.files[0]){e.n=1;break}return e.a(2);case 1:d().parse(a,{header:!0,skipEmptyLines:!0,complete:function(){var e=w(h().m((function e(a){var n,l,i,o,c,s,u,d,f,y,b,g,E,N,w;return h().w((function(e){for(;;)switch(e.n){case 0:B(!0),e.p=1,n=[],l=[],i=v(a.data);try{for(i.s();!(o=i.n()).done;)"team"===(c=o.value).type?n.push({id:c.id||(window.crypto&&window.crypto.randomUUID?window.crypto.randomUUID():"team-"+Date.now()+"-"+Math.floor(1e4*Math.random())),name:c.name,department:c.department,description:c.description,color:c.color,manager:c.manager}):"user"===c.type&&(s=[],c.team_memberships&&(s=c.team_memberships.split(",").map((function(e){var t=S(e.split(":"),2),a=t[0],n=t[1],r=m.find((function(e){return e.name===a.trim()}));return{team_id:r?r.id:a.trim(),role:(n||"Member").trim()}}))),l.push({id:c.id,name:c.name,jira_account_id:c.jira_account_id,displayName:c.display_name,first_name:c.first_name,last_name:c.last_name,emailAddress:c.email,department:c.department,hireDate:c.hire_date,employmentType:c.employment_type,team_memberships:s,capacity:c.capacity,isAdmin:"TRUE"===c.isAdmin||"true"===c.isAdmin,manager:c.manager||"",executive_manager:c.executive_manager||""}))}catch(e){i.e(e)}finally{i.f()}return e.n=2,(0,r.invoke)("getTeams");case 2:u=e.v,d=u.success?u.data:[],f=h().m((function e(){var t;return h().w((function(e){for(;;)switch(e.n){case 0:if(t=b[y],!d.find((function(e){return e.id===t.id}))){e.n=2;break}return e.n=1,(0,r.invoke)("updateTeam",t);case 1:e.n=3;break;case 2:return e.n=3,(0,r.invoke)("createTeam",t);case 3:return e.a(2)}}),e)})),y=0,b=n;case 3:if(!(y<b.length)){e.n=5;break}return e.d(p(f()),4);case 4:y++,e.n=3;break;case 5:g=0,E=l;case 6:if(!(g<E.length)){e.n=8;break}return N=E[g],e.n=7,k(N);case 7:g++,e.n=6;break;case 8:T("CSV import completed successfully"),_&&_(),e.n=10;break;case 9:e.p=9,w=e.v,T("Failed to import CSV: "+w.message,"error");case 10:return e.p=10,B(!1),t.target.value="",e.f(10);case 11:return e.a(2)}}),e,null,[[1,9,10,11]])})));return function(t){return e.apply(this,arguments)}}()});case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=w(h().m((function e(){var t,a,n,r,l;return h().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm("Are you sure you want to delete ".concat(Pe.length," users? This action cannot be undone."))){e.n=1;break}return e.a(2);case 1:B(!0),e.p=2,t=v(Pe),e.p=3,t.s();case 4:if((a=t.n()).done){e.n=6;break}return n=a.value,e.n=5,D(n);case 5:e.n=4;break;case 6:e.n=8;break;case 7:e.p=7,r=e.v,t.e(r);case 8:return e.p=8,t.f(),e.f(8);case 9:T("".concat(Pe.length," users deleted successfully")),xe([]),_&&_(),e.n=11;break;case 10:e.p=10,l=e.v,T("Failed to delete users: "+l.message,"error");case 11:return e.p=11,B(!1),e.f(11);case 12:return e.a(2)}}),e,null,[[3,7,8,9],[2,10,11,12]])})));return function(){return e.apply(this,arguments)}}();if(!t)return null;var Ge,He=(Ge=new Set,f.forEach((function(e){e.jira_account_id&&Ge.add(e.jira_account_id),e.accountId&&Ge.add(e.accountId),e.email_address&&Ge.add(e.email_address.toLowerCase()),e.emailAddress&&Ge.add(e.emailAddress.toLowerCase())})),G.filter((function(e){var t;if(!1===e.active)return!1;var a=e.accountId,n=null===(t=e.emailAddress)||void 0===t?void 0:t.toLowerCase();return!(Ge.has(a)||n&&Ge.has(n))})));return n.createElement("div",{className:"modal-overlay"},n.createElement("div",{className:"modal-content team-management-modal"},n.createElement("div",{className:"modal-header"},n.createElement("h3",null,"Team & User Management"),n.createElement("div",{className:"header-actions"},n.createElement("button",{className:"btn btn-secondary",onClick:function(){var e=m.map((function(e){return{type:"team",id:e.id,name:e.name,jira_account_id:"",first_name:"",last_name:"",display_name:"",email:"",employment_type:"",hire_date:"",team_memberships:"",capacity:"",department:e.department||"",description:e.description||"",color:e.color||"",manager:e.manager||"",executive_manager:"",isAdmin:""}})),t=f.map((function(e){return{type:"user",id:e.id,name:e.name||e.display_name||"",jira_account_id:e.jira_account_id||"",first_name:e.first_name||"",last_name:e.last_name||"",display_name:e.display_name||"",email:e.email_address||"",employment_type:e.employment_type||"",hire_date:e.hire_date||"",team_memberships:(e.team_memberships||[]).map((function(e){var t;return"".concat((null===(t=m.find((function(t){return t.id===e.team_id})))||void 0===t?void 0:t.name)||e.team_id,":").concat(e.role)})).join(","),capacity:e.capacity||"",department:e.department||"",description:"",color:"",manager:e.manager||"",executive_manager:e.executive_manager||"",isAdmin:!0===e.isAdmin?"TRUE":"FALSE"}})),a=[].concat(N(e),N(t)),n=d().unparse(a,{columns:We}),r=new Blob([n],{type:"text/csv"}),l=URL.createObjectURL(r),i=document.createElement("a");i.href=l,i.download="teams-and-users-".concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(l)},disabled:W},n.createElement(i.A,{size:16})," Export CSV"),n.createElement("label",{className:"btn btn-secondary",style:{marginLeft:8}},n.createElement("input",{type:"file",accept:".csv",onChange:Be,style:{display:"none"},disabled:W}),n.createElement(o.A,{size:16})," Import CSV"),n.createElement("button",{className:"modal-close",onClick:a},"×"))),n.createElement("div",{className:"modal-body"},n.createElement("div",{className:"team-management-main-tabs"},n.createElement("button",{className:"team-management-main-tab ".concat("teams"===O?"team-management-main-tab-active":""),onClick:function(){j("teams"),x("list"),Ne(),ke()}},"👥 Teams (",m.length,")"),n.createElement("button",{className:"team-management-main-tab ".concat("users"===O?"team-management-main-tab-active":""),onClick:function(){j("users"),x("list"),Ne(),ke()}},"👤 Users (",f.length,")")),"teams"===O&&n.createElement(n.Fragment,null,n.createElement("div",{className:"team-management-sub-tabs"},n.createElement("button",{className:"team-management-sub-tab ".concat("list"===P?"team-management-sub-tab-active":""),onClick:function(){return x("list")}},"Teams List"),n.createElement("button",{className:"team-management-sub-tab ".concat("form"===P?"team-management-sub-tab-active":""),onClick:function(){x("form"),Ne()}},I?"Edit Team":"Add New Team")),"list"===P&&n.createElement("div",{className:"team-management-teams-section"},0===m.length?n.createElement("div",{className:"team-management-empty-state"},n.createElement("div",{className:"team-management-empty-icon"},"👥"),n.createElement("h4",null,"No Teams Created"),n.createElement("p",null,"Create your first team to organize your resources"),n.createElement("button",{className:"btn btn-primary",onClick:function(){Ne(),x("form")}},"Create First Team")):n.createElement("div",{className:"requests-table-wrapper"},n.createElement("table",{className:"requests-table"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Team Name"),n.createElement("th",null,"Department"),n.createElement("th",null,"Manager"),n.createElement("th",null,"Members"),n.createElement("th",null,"Actions"))),n.createElement("tbody",null,m.map((function(e){var t,a=(t=e.id,f.filter((function(e){return(e.team_memberships||[]).some((function(e){return e.team_id===t}))})));return n.createElement("tr",{key:e.id},n.createElement("td",null,e.name),n.createElement("td",null,e.department||"-"),n.createElement("td",null,function(e){if(!e)return"-";var t=f.find((function(t){return t.jira_account_id===e||t.accountId===e||t.id===e}));return t?t.display_name||t.displayName||t.name:e}(e.manager)),n.createElement("td",null,a.length),n.createElement("td",null,n.createElement("button",{className:"btn btn-sm btn-secondary",onClick:function(){return function(e){F(e);var t=null;e.manager&&(t=f.find((function(t){return t.jira_account_id===e.manager||t.accountId===e.manager||t.id===e.manager}))||null),ie({name:e.name||"",description:e.description||"",manager:t,department:e.department||"",color:e.color||"#667eea"}),x("form")}(e)},disabled:W},"Edit"),n.createElement("button",{className:"btn btn-sm btn-danger",onClick:function(){return Te(e.id,e.name)},disabled:W},"Delete")))})))))),"form"===P&&n.createElement("form",{onSubmit:De,className:"team-management-team-form"},n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"team-name"},"Team Name *"),n.createElement("input",{type:"text",id:"team-name",className:"form-control ".concat(pe.name?"form-control-error":""),value:le.name,onChange:function(e){return Se("name",e.target.value)},placeholder:"Enter team name",disabled:W}),pe.name&&n.createElement("span",{className:"form-error-text"},pe.name)),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"team-description"},"Description"),n.createElement("textarea",{id:"team-description",className:"form-control",value:le.description,onChange:function(e){return Se("description",e.target.value)},placeholder:"Brief description of the team's purpose",rows:"3",disabled:W})),n.createElement("div",{className:"form-row"},n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"team-manager"},"Manager"),n.createElement(l.A,{selectedUser:le.manager&&f.find((function(e){return e.id===le.manager}))||null,onSelect:function(e){return we(e?e.id:"")},placeholder:"Search and select manager",disabled:W,error:pe.manager,useBackendSearch:!1,allUsers:f}),pe.manager&&n.createElement("span",{className:"form-error-text"},pe.manager)),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"department"},"Department"),n.createElement("select",{id:"department",className:"form-control",value:le.department,onChange:function(e){return Se("department",e.target.value)},disabled:W},n.createElement("option",{value:""},"Select Department"),["Product","Devops","RebelCare","Strategy","Service Delivery","Client Services","Sales","Marketing","Operations","Finance","HR"].map((function(e){return n.createElement("option",{key:e,value:e},e)}))))),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Team Color"),n.createElement("div",{className:"team-management-color-options"},["#667eea","#764ba2","#f093fb","#f5576c","#4facfe","#00f2fe","#43e97b","#38f9d7","#ffecd2","#fcb69f"].map((function(e){return n.createElement("div",{key:e,className:"team-management-color-option ".concat(le.color===e?"team-management-color-option-selected":""),style:{backgroundColor:e},onClick:function(){return!W&&Se("color",e)}})})))),n.createElement("div",{className:"form-actions"},n.createElement("button",{type:"submit",className:"btn btn-primary",disabled:W},W?"Saving...":I?"Update Team":"Create Team"),n.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){Ne(),x("list")},disabled:W},"Cancel")))),"users"===O&&n.createElement(n.Fragment,null,n.createElement("div",{className:"team-management-sub-tabs"},n.createElement("button",{className:"team-management-sub-tab ".concat("list"===P?"team-management-sub-tab-active":""),onClick:function(){return x("list")}},"Users List"),n.createElement("button",{className:"team-management-sub-tab ".concat("form"===P?"team-management-sub-tab-active":""),onClick:function(){x("form"),ke()}},M?"Edit User":"Add New User"),n.createElement("button",{className:"team-management-sub-tab ".concat("import"===P?"team-management-sub-tab-active":""),onClick:function(){return x("import")}},"Import from Jira (",He.length,")")),"list"===P&&n.createElement("div",{className:"team-management-users-section"},n.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16}},n.createElement("h4",null,"Users"),n.createElement("button",{className:"btn btn-primary",disabled:Pe.length===f.length&&f.length>0,onClick:function(){return Fe(!0)}},"Bulk Add to Team")),Pe.length>0&&n.createElement("button",{className:"btn btn-danger",onClick:ze,disabled:W,style:{marginBottom:16}},"Delete Selected Users (",Pe.length,")"),n.createElement("div",{className:"requests-table-wrapper"},n.createElement("table",{className:"requests-table"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,n.createElement("input",{type:"checkbox",checked:Pe.length===f.length&&f.length>0,onChange:function(e){return xe(e.target.checked?f.map((function(e){return e.id})):[])}})),n.createElement("th",null,"Name"),n.createElement("th",null,"Email"),n.createElement("th",null,"Teams"),n.createElement("th",null,"Actions"))),n.createElement("tbody",null,f.map((function(e){return n.createElement("tr",{key:e.id},n.createElement("td",null,n.createElement("input",{type:"checkbox",checked:Pe.includes(e.id),onChange:function(t){return xe(t.target.checked?[].concat(N(Pe),[e.id]):Pe.filter((function(t){return t!==e.id})))}})),n.createElement("td",null,e.display_name||e.displayName||e.name),n.createElement("td",null,e.email_address||e.emailAddress||"-"),n.createElement("td",null,(e.team_memberships||[]).map((function(e){var t=m.find((function(t){return t.id===e.team_id}));return t?"".concat(t.name," (").concat(e.role,")"):e.team_id})).join(", ")),n.createElement("td",null,n.createElement("button",{className:"btn btn-sm btn-secondary",onClick:function(){return function(e){q(e),se({firstName:e.first_name||e.firstName||"",lastName:e.last_name||e.lastName||"",displayName:e.display_name||e.displayName||"",emailAddress:e.email_address||e.emailAddress||"",jiraAccountId:e.jira_account_id||e.accountId||"",employmentType:e.employment_type||e.employmentType||"full-time",hireDate:e.hire_date||e.hireDate||"",teamMemberships:e.team_memberships||[],capacity:e.capacity||40,isAdmin:!0===e.isAdmin,manager:e.manager||"",executiveManager:e.executive_manager||""}),e.availability&&Array.isArray(e.availability)&&de(e.availability),j("users"),x("form")}(e)},disabled:W},"Edit"),n.createElement("button",{className:"btn btn-sm btn-danger",onClick:function(){return je(e.id,e.display_name||e.displayName||e.name)},disabled:W},"Delete")))}))))),Ie&&n.createElement("div",{className:"modal-overlay"},n.createElement("div",{className:"modal-content",style:{maxWidth:400,margin:"auto",padding:24}},n.createElement("h4",null,"Add Selected Users to Team"),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Team"),n.createElement("select",{className:"form-control",value:Me,onChange:function(e){qe(e.target.value),Re(e.target.value)&&ge("Member")}},n.createElement("option",{value:""},"Select a team"),m.map((function(e){return n.createElement("option",{key:e.id,value:e.id},e.name)})))),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Role"),n.createElement("select",{className:"form-control",value:be,onChange:function(e){return ge(e.target.value)},disabled:Me&&Re(Me)},n.createElement("option",{value:"Member"},"Member"),n.createElement("option",{value:"Manager",disabled:Me&&Re(Me)},"Manager ",Me&&Re(Me)?"(Team already has a manager)":""))),n.createElement("div",{className:"form-actions",style:{marginTop:24}},n.createElement("button",{className:"btn btn-secondary",onClick:function(){return Fe(!1)}},"Cancel"),n.createElement("button",{className:"btn btn-primary",disabled:!Me,onClick:w(h().m((function e(){var t,a,n,r;return h().w((function(e){for(;;)switch(e.n){case 0:B(!0),t=v(Pe),e.p=1,n=h().m((function e(){var t,n;return h().w((function(e){for(;;)switch(e.n){case 0:if(t=a.value,!(n=f.find((function(e){return e.id===t})))||(n.team_memberships||[]).some((function(e){return e.team_id===Me}))){e.n=1;break}return e.n=1,k(b(b({},n),{},{team_memberships:[].concat(N(n.team_memberships||[]),[{team_id:Me,role:be}])}));case 1:return e.a(2)}}),e)})),t.s();case 2:if((a=t.n()).done){e.n=4;break}return e.d(p(n()),3);case 3:e.n=2;break;case 4:e.n=6;break;case 5:e.p=5,r=e.v,t.e(r);case 6:return e.p=6,t.f(),e.f(6);case 7:B(!1),Fe(!1),xe([]),qe(""),ge("Member"),_&&_();case 8:return e.a(2)}}),e,null,[[1,5,6,7]])})))},"Add to Team"))))),"form"===P&&n.createElement("form",{onSubmit:Oe,className:"team-management-user-form"},n.createElement("div",{className:"form-row"},n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"firstName"},"First Name *"),n.createElement("input",{type:"text",id:"firstName",className:"form-control ".concat(pe.firstName?"form-control-error":""),value:ce.firstName,onChange:function(e){return _e("firstName",e.target.value)},placeholder:"Enter first name",disabled:W}),pe.firstName&&n.createElement("span",{className:"form-error-text"},pe.firstName)),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"lastName"},"Last Name *"),n.createElement("input",{type:"text",id:"lastName",className:"form-control ".concat(pe.lastName?"form-control-error":""),value:ce.lastName,onChange:function(e){return _e("lastName",e.target.value)},placeholder:"Enter last name",disabled:W}),pe.lastName&&n.createElement("span",{className:"form-error-text"},pe.lastName))),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"emailAddress"},"Email Address"),n.createElement("input",{type:"email",id:"emailAddress",className:"form-control ".concat(pe.emailAddress?"form-control-error":""),value:ce.emailAddress,onChange:function(e){return _e("emailAddress",e.target.value)},placeholder:"Enter email address",disabled:W}),pe.emailAddress&&n.createElement("span",{className:"form-error-text"},pe.emailAddress)),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"displayName"},"Display Name"),n.createElement("input",{type:"text",id:"displayName",className:"form-control",value:ce.displayName,onChange:function(e){return _e("displayName",e.target.value)},placeholder:"Display name (auto-generated from first/last name)",disabled:W})),n.createElement("div",{className:"form-row"},n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"employmentType"},"Employment Type"),n.createElement("select",{id:"employmentType",className:"form-control",value:ce.employmentType,onChange:function(e){return _e("employmentType",e.target.value)},disabled:W},n.createElement("option",{value:"full-time"},"Full-time"),n.createElement("option",{value:"part-time"},"Part-time"),n.createElement("option",{value:"contractor"},"Contractor"))),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"hireDate"},"Hire Date"),n.createElement("input",{type:"date",id:"hireDate",className:"form-control",value:ce.hireDate,onChange:function(e){return _e("hireDate",e.target.value)},disabled:W}))),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Teams & Roles"),m.map((function(e){var t=ce.teamMemberships.find((function(t){return t.team_id===e.id})),a=f.some((function(t){return(t.team_memberships||[]).some((function(t){return t.team_id===e.id&&"Manager"===t.role}))}));return n.createElement("div",{key:e.id,style:{display:"flex",alignItems:"center",marginBottom:8}},n.createElement("input",{type:"checkbox",checked:!!t,onChange:function(t){t.target.checked?se((function(t){return b(b({},t),{},{teamMemberships:[].concat(N(t.teamMemberships),[{team_id:e.id,role:a?"Member":"Manager"}])})})):se((function(t){return b(b({},t),{},{teamMemberships:t.teamMemberships.filter((function(t){return t.team_id!==e.id}))})}))},disabled:W}),n.createElement("span",{style:{marginLeft:8,marginRight:8}},e.name),t&&n.createElement("select",{value:t.role,onChange:function(t){"Manager"===t.target.value&&a?T("This team already has a manager","error"):se((function(a){return b(b({},a),{},{teamMemberships:a.teamMemberships.map((function(a){return a.team_id===e.id?b(b({},a),{},{role:t.target.value}):a}))})}))},style:{marginLeft:8},disabled:W||a&&"Manager"!==t.role},n.createElement("option",{value:"Member"},"Member"),n.createElement("option",{value:"Manager",disabled:a},"Manager ",a?"(Team already has a manager)":"")))}))),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"jiraAccountId"},"Jira Account ID"),n.createElement("input",{type:"text",id:"jiraAccountId",className:"form-control",value:ce.jiraAccountId,onChange:function(e){return _e("jiraAccountId",e.target.value)},placeholder:"Optional: Link to Jira account",disabled:W})),n.createElement("div",{className:"form-group"},n.createElement("label",null,n.createElement("input",{type:"checkbox",checked:!0===ce.isAdmin,onChange:function(e){return se((function(t){return b(b({},t),{},{isAdmin:e.target.checked})}))},disabled:W})," ","Admin User")),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"manager"},"Manager"),n.createElement(l.A,{selectedUser:ce.manager&&f.find((function(e){return e.id===ce.manager}))||null,onSelect:function(e){return se((function(t){return b(b({},t),{},{manager:e?e.id:""})}))},placeholder:"Select manager",users:f,allUsers:f,disabled:W})),n.createElement("div",{className:"form-group"},n.createElement("label",{htmlFor:"executiveManager"},"Executive Manager"),n.createElement(l.A,{selectedUser:ce.executiveManager&&f.find((function(e){return e.id===ce.executiveManager}))||null,onSelect:function(e){return se((function(t){return b(b({},t),{},{executiveManager:e?e.id:""})}))},placeholder:"Select executive manager",users:f,allUsers:f,disabled:W})),n.createElement("div",{className:"team-management-availability-section"},n.createElement("h4",null,"Working Schedule"),n.createElement("p",{className:"team-management-help-text"},"Set the default working hours for this team member."),n.createElement("div",{className:"team-management-availability-grid"},me.map((function(e,t){return n.createElement("div",{key:e.dayOfWeek,className:"team-management-availability-day"},n.createElement("div",{className:"team-management-day-header"},n.createElement("label",{className:"team-management-checkbox-label"},n.createElement("input",{type:"checkbox",checked:e.isWorkingDay,onChange:function(e){return Ae(t,"isWorkingDay",e.target.checked)},disabled:W}),n.createElement("span",{className:"team-management-day-name"},e.dayName))),e.isWorkingDay&&n.createElement("div",{className:"team-management-day-details"},n.createElement("div",{className:"team-management-time-inputs"},n.createElement("input",{type:"time",value:e.startTime,onChange:function(e){return Ae(t,"startTime",e.target.value)},className:"form-control team-management-input-small",disabled:W}),n.createElement("span",null,"to"),n.createElement("input",{type:"time",value:e.endTime,onChange:function(e){return Ae(t,"endTime",e.target.value)},className:"form-control team-management-input-small",disabled:W})),n.createElement("div",{className:"team-management-hours-display"},e.hoursPerDay.toFixed(1)," hours")))}))),n.createElement("div",{className:"team-management-availability-summary"},n.createElement("strong",null,"Total weekly capacity: "),me.reduce((function(e,t){return e+(t.isWorkingDay?t.hoursPerDay:0)}),0).toFixed(1)," hours")),n.createElement("div",{className:"form-actions"},n.createElement("button",{type:"submit",className:"btn btn-primary",disabled:W},W?"Saving...":M?"Update User":"Create User"),n.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){ke(),x("list")},disabled:W},"Cancel"))),"import"===P&&n.createElement("div",{className:"team-management-import-section"},n.createElement("div",{className:"team-management-import-header"},n.createElement("div",{className:"team-management-import-title"},n.createElement("h4",null,"Import Users from Jira"),n.createElement("p",null,"Select Jira users to import into the PTO system. Users already in the system will not be shown.")),n.createElement("div",{className:"team-management-import-actions"},n.createElement("button",{onClick:function(){return he(0)},disabled:J,className:"btn btn-secondary"},n.createElement(c.A,{size:16,className:J?"team-management-spin":""}),"Refresh"),Z.length>0&&n.createElement("button",{onClick:Ee,disabled:ae,className:"btn btn-primary"},n.createElement(o.A,{size:16}),"Import ",Z.length," Selected",ae&&" (Importing...)"))),J&&0===G.length?n.createElement("div",{className:"team-management-loading-state"},n.createElement("div",{className:"team-management-loading-spinner"}),n.createElement("p",null,"Loading Jira users...")):0===He.length?n.createElement("div",{className:"team-management-empty-state"},n.createElement("div",{className:"team-management-empty-icon"},"✅"),n.createElement("h4",null,"All Jira Users Imported"),n.createElement("p",null,"All available Jira users from your organization are already in the system.")):n.createElement(n.Fragment,null,n.createElement("div",{className:"team-management-import-stats"},n.createElement("div",{className:"team-management-import-stat"},n.createElement("span",{className:"team-management-import-stat-label"},"Total Jira Users:"),n.createElement("span",{className:"team-management-import-stat-value"},K.total)),n.createElement("div",{className:"team-management-import-stat"},n.createElement("span",{className:"team-management-import-stat-label"},"Available to Import:"),n.createElement("span",{className:"team-management-import-stat-value"},He.length)),n.createElement("div",{className:"team-management-import-stat"},n.createElement("span",{className:"team-management-import-stat-label"},"Selected:"),n.createElement("span",{className:"team-management-import-stat-value"},Z.length))),n.createElement("div",{className:"team-management-jira-users-grid"},He.map((function(e){var t,a=Z.some((function(t){return t.accountId===e.accountId}));return n.createElement("div",{key:e.accountId,className:"team-management-jira-user-card"},n.createElement("div",{className:"team-management-jira-user-header"},n.createElement("label",{className:"team-management-jira-user-checkbox"},n.createElement("input",{type:"checkbox",checked:a,onChange:function(t){return function(e,t){ee((function(a){return t?[].concat(N(a),[e]):a.filter((function(t){return t.accountId!==e.accountId}))}))}(e,t.target.checked)},disabled:ae}),n.createElement("span",{className:"team-management-checkbox-custom"})),n.createElement("div",{className:"team-management-jira-user-avatar"},e.avatarUrl?n.createElement("img",{src:e.avatarUrl,alt:e.displayName}):n.createElement("div",{className:"team-management-avatar-placeholder"},(null===(t=e.displayName)||void 0===t?void 0:t.charAt(0))||"?"))),n.createElement("div",{className:"team-management-jira-user-info"},n.createElement("h5",{className:"team-management-jira-user-name"},e.displayName),n.createElement("div",{className:"team-management-jira-user-email"},e.emailAddress),n.createElement("div",{className:"team-management-jira-user-active"},e.active?"✅ Active":"❌ Inactive")),n.createElement("div",{className:"team-management-jira-user-actions"},n.createElement("button",{onClick:function(){return function(e){var t,a;se({firstName:(null===(t=e.displayName)||void 0===t?void 0:t.split(" ")[0])||"",lastName:(null===(a=e.displayName)||void 0===a?void 0:a.split(" ").slice(1).join(" "))||"",displayName:e.displayName||"",emailAddress:e.emailAddress||"",jiraAccountId:e.accountId||"",employmentType:"full-time",hireDate:"",teamMemberships:[],capacity:40,manager:"",executiveManager:""}),q(null),x("form")}(e)},className:"btn btn-sm btn-secondary",disabled:ae},n.createElement(s.A,{size:14}),"Create User")))}))),!K.isLast&&n.createElement("div",{className:"team-management-pagination"},n.createElement("button",{onClick:function(){return he(K.startAt+K.maxResults)},disabled:J,className:"btn btn-secondary"},n.createElement(u.A,{size:16}),"Load More Users",J&&" (Loading...)"),n.createElement("div",{className:"team-management-pagination-info"},"Showing ",G.length," of ",K.total," Jira users"))))))))}},9618:(e,t,a)=>{a.d(t,{A:()=>v});var n=a(6540),r=a(8697),l=a(2321);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u(){var e,t,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",r=a.toStringTag||"@@toStringTag";function l(a,n,r,l){var c=n&&n.prototype instanceof o?n:o,s=Object.create(c.prototype);return m(s,"_invoke",function(a,n,r){var l,o,c,s=0,u=r||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return l=t,o=0,c=e,d.n=a,i}};function f(a,n){for(o=a,c=n,t=0;!m&&s&&!r&&t<u.length;t++){var r,l=u[t],f=d.p,p=l[2];a>3?(r=p===n)&&(c=l[(o=l[4])?5:(o=3,3)],l[4]=l[5]=e):l[0]<=f&&((r=a<2&&f<l[1])?(o=0,d.v=n,d.n=l[1]):f<p&&(r=a<3||l[0]>n||n>p)&&(l[4]=a,l[5]=n,d.n=p,o=0))}if(r||a>1)return i;throw m=!0,n}return function(r,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),o=u,c=p;(t=o<2?e:c)||!m;){l||(o?o<3?(o>1&&(d.n=-1),f(o,c)):d.n=c:d.v=c);try{if(s=2,l){if(o||(r="next"),t=l[r]){if(!(t=t.call(l,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,o<2&&(o=0)}else 1===o&&(t=l.return)&&t.call(l),o<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),o=1);l=e}else if((t=(m=d.n<0)?c:a.call(n,d))!==i)break}catch(t){l=e,o=1,c=t}finally{s=1}}return{value:t,done:m}}}(a,r,l),!0),s}var i={};function o(){}function c(){}function s(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(m(t={},n,(function(){return this})),t),f=s.prototype=o.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,m(e,r,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=s,m(f,"constructor",s),m(s,"constructor",c),c.displayName="GeneratorFunction",m(s,r,"GeneratorFunction"),m(f),m(f,r,"Generator"),m(f,n,(function(){return this})),m(f,"toString",(function(){return"[object Generator]"})),(u=function(){return{w:l,m:p}})()}function m(e,t,a,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}m=function(e,t,a,n){if(t)r?r(e,t,{value:a,enumerable:!n,configurable:!n,writable:!n}):e[t]=a;else{var l=function(t,a){m(e,t,(function(e){return this._invoke(t,a,e)}))};l("next",0),l("throw",1),l("return",2)}},m(e,t,a,n)}function d(e,t,a,n,r,l,i){try{var o=e[l](i),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(n,r)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,i,o=[],c=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=l.call(a)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}const v=function(e){var t=e.request,a=e.onClose,i=e.onSave,o=e.currentUser,s=f((0,n.useState)({startDate:"",endDate:"",leaveType:"",reason:"",dailySchedules:[]}),2),m=s[0],p=s[1],v=f((0,n.useState)(""),2),y=v[0],b=v[1];(0,n.useEffect)((function(){t&&p({startDate:t.start_date,endDate:t.end_date,leaveType:t.leave_type,reason:t.reason||"",dailySchedules:t.daily_schedules||[]})}),[t]);var g=function(){var e,n=(e=u().m((function e(n){var r,c,s;return u().w((function(e){for(;;)switch(e.n){case 0:if(n.preventDefault(),b(""),e.p=1,"approved"!==t.status){e.n=2;break}if((r=new Date).setHours(0,0,0,0),!(new Date(t.start_date)<r)){e.n=2;break}return b("Cannot edit approved requests with past dates. Please contact an admin for assistance."),e.a(2);case 2:return e.n=3,(0,l.invoke)("editPTORequest",{requestId:t.id,editedBy:o.accountId,updatedData:{startDate:m.startDate,endDate:m.endDate,leaveType:m.leaveType,reason:m.reason,dailySchedules:m.dailySchedules}});case 3:(c=e.v).success?(i(c.data),a()):b(c.message||"Failed to update PTO request"),e.n=5;break;case 4:e.p=4,s=e.v,b("Failed to update PTO request: "+s.message);case 5:return e.a(2)}}),e,null,[[1,4]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var l=e.apply(t,a);function i(e){d(l,n,r,i,o,"next",e)}function o(e){d(l,n,r,i,o,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}();return n.createElement("div",{className:"modal-overlay"},n.createElement("div",{className:"modal-content"},n.createElement("div",{className:"modal-header"},n.createElement("h3",null,"Edit PTO Request"),n.createElement("button",{onClick:a,className:"modal-close"},n.createElement(r.A,{size:20}))),y&&n.createElement("div",{className:"alert alert-danger"},y),n.createElement("form",{onSubmit:g},n.createElement("div",{className:"form-group"},n.createElement("label",null,"Start Date"),n.createElement("input",{type:"date",value:m.startDate,onChange:function(e){return p((function(t){return c(c({},t),{},{startDate:e.target.value})}))},className:"form-control",required:!0})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"End Date"),n.createElement("input",{type:"date",value:m.endDate,onChange:function(e){return p((function(t){return c(c({},t),{},{endDate:e.target.value})}))},className:"form-control",required:!0})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Leave Type"),n.createElement("select",{value:m.leaveType,onChange:function(e){return p((function(t){return c(c({},t),{},{leaveType:e.target.value})}))},className:"form-control",required:!0},n.createElement("option",{value:"vacation"},"Vacation"),n.createElement("option",{value:"sick"},"Sick Leave"),n.createElement("option",{value:"personal"},"Personal Leave"),n.createElement("option",{value:"other"},"Other"))),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Reason"),n.createElement("textarea",{value:m.reason,onChange:function(e){return p((function(t){return c(c({},t),{},{reason:e.target.value})}))},className:"form-control",rows:"3"})),n.createElement("div",{className:"modal-footer"},n.createElement("button",{type:"button",onClick:a,className:"btn btn-secondary"},"Cancel"),n.createElement("button",{type:"submit",className:"btn btn-primary"},"Save Changes")))))}}}]);