(()=>{"use strict";var e,t,a,s={2898:(e,t,a)=>{a.d(t,{A:()=>b});var s=a(6540),l=a(2321),n=a(3893),r=a(2307),c=a(7235),m=a(4471),i=a(6316),d=a(8686),o=a(8309),u=a(3245),v=a(808),p=a(99);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){N(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const b=e=>{let{currentUser:t,isAdmin:a,showNotification:E}=e;const[N,b]=(0,s.useState)(null),[g,f]=(0,s.useState)("current_month"),[h,_]=(0,s.useState)("all"),[q,w]=(0,s.useState)([]),[D,O]=(0,s.useState)([]),[S,k]=(0,s.useState)([]),[A,T]=(0,s.useState)(!0),[j,C]=(0,s.useState)({}),[P,R]=(0,s.useState)(!1),[U,I]=(0,s.useState)({preset:"current_month",from:"",to:""});(0,s.useEffect)((()=>{L()}),[t]),(0,s.useEffect)((()=>{N&&z()}),[N,g]);const L=async()=>{T(!0);try{const e=await(0,l.invoke)("getTeams");if(e.success){const s=e.data||[],l=a?s:s.filter((e=>{var a,s;return(null===(a=e.manager)||void 0===a?void 0:a.accountId)===t.accountId||(null===(s=e.manager)||void 0===s?void 0:s.jira_account_id)===t.accountId}));w(l),l.length>0&&!N&&b(l[0])}if(null!=t&&t.emailAddress){const e=await(0,l.invoke)("getPendingRequests",{managerEmail:t.emailAddress});e.success&&k(e.data||[])}}catch(e){E("Failed to load manager data","error")}finally{T(!1)}},z=async()=>{if(N)try{const e=await(0,l.invoke)("getTeamPTORequests",{teamId:N.id,dateRange:g});e.success&&O(e.data||[])}catch(e){console.error("Error loading team requests:",e),O([])}},M=async(e,t)=>{C((t=>y(y({},t),{},{[e]:!0})));try{const a=await(0,l.invoke)("updatePTORequest",{requestId:e,status:t});a.success?(E("Request ".concat(t.toLowerCase()," successfully")),k((t=>t.filter((t=>t.id!==e)))),z()):E(a.message||"Failed to ".concat(t.toLowerCase()," request"),"error")}catch(e){E("Failed to ".concat(t.toLowerCase()," request"),"error")}finally{C((t=>y(y({},t),{},{[e]:!1})))}},x=(0,s.useMemo)((()=>{let e=D;return"all"!==h&&(e=e.filter((e=>e.requester_id===h))),e.sort(((e,t)=>new Date(t.submitted_at)-new Date(e.submitted_at)))}),[D,h]),B=(0,s.useMemo)((()=>{const e=x;return{totalRequests:e.length,approvedRequests:e.filter((e=>"approved"===e.status)).length,pendingRequests:e.filter((e=>"pending"===e.status)).length,declinedRequests:e.filter((e=>"declined"===e.status)).length,totalDaysOff:e.filter((e=>"approved"===e.status)).reduce(((e,t)=>e+(t.total_days||0)),0),ptoByLeaveType:e.filter((e=>"approved"===e.status)).reduce(((e,t)=>{const a=t.leave_type||"unknown";return e[a]=(e[a]||0)+(t.total_days||0),e}),{}),ptoByMember:e.filter((e=>"approved"===e.status)).reduce(((e,t)=>{const a=t.requester_name||"Unknown";return e[a]=(e[a]||0)+(t.total_days||0),e}),{}),ptoByWeekday:e.filter((e=>"approved"===e.status)).reduce(((e,t)=>{const a=new Date(t.start_date),s=new Date(t.end_date);for(let t=new Date(a);t<=s;t.setDate(t.getDate()+1)){const a=t.toLocaleDateString("en-US",{weekday:"long"});e[a]=(e[a]||0)+1}return e}),{})}}),[x]),F=(0,s.useMemo)((()=>{const e=new Date;return D.filter((t=>"approved"===t.status&&new Date(t.start_date)>=e)).sort(((e,t)=>new Date(e.start_date)-new Date(t.start_date))).slice(0,5)}),[D]),H=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),W=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return A?s.createElement("div",{className:"manager-loading"},s.createElement("div",{className:"loading-spinner"}),s.createElement("p",null,"Loading manager dashboard...")):0===q.length?s.createElement("div",{className:"manager-empty"},s.createElement(n.A,{size:48}),s.createElement("h3",null,"No Teams to Manage"),s.createElement("p",null,"You don't have any teams assigned to manage. Contact your administrator if this is incorrect.")):s.createElement("div",{className:"manager-dashboard"},s.createElement("div",{className:"manager-header"},s.createElement("div",{className:"manager-title-section"},s.createElement("h2",null,"Manager Dashboard"),s.createElement("p",null,"Manage team PTO requests and view analytics")),s.createElement("div",{className:"manager-controls"},s.createElement("select",{value:(null==N?void 0:N.id)||"",onChange:e=>b(q.find((t=>t.id===e.target.value))),className:"form-control"},q.map((e=>{var t;return s.createElement("option",{key:e.id,value:e.id},e.name," (",(null===(t=e.members)||void 0===t?void 0:t.length)||0," members)")}))),s.createElement(p.A,{value:U,onChange:I}))),s.createElement("div",{className:"manager-stats-grid"},s.createElement("div",{className:"stat-card stat-blue"},s.createElement("div",{className:"stat-icon"},s.createElement(r.A,{size:24})),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},B.totalRequests),s.createElement("div",{className:"stat-label"},"Total Requests"))),s.createElement("div",{className:"stat-card stat-yellow"},s.createElement("div",{className:"stat-icon"},s.createElement(c.A,{size:24})),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},S.length),s.createElement("div",{className:"stat-label"},"Pending Approval"))),s.createElement("div",{className:"stat-card stat-green"},s.createElement("div",{className:"stat-icon"},s.createElement(m.A,{size:24})),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},B.approvedRequests),s.createElement("div",{className:"stat-label"},"Approved"))),s.createElement("div",{className:"stat-card stat-purple"},s.createElement("div",{className:"stat-icon"},s.createElement(i.A,{size:24})),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},B.totalDaysOff),s.createElement("div",{className:"stat-label"},"Days Off")))),S.length>0&&s.createElement("div",{className:"card pending-approvals-card"},s.createElement("div",{className:"card-header"},s.createElement("h3",null,"Pending Approvals"),s.createElement("div",{className:"pending-count"},S.length," requests")),s.createElement("div",{className:"card-body"},s.createElement("div",{className:"pending-requests-list"},S.slice(0,5).map((e=>{var t;return s.createElement("div",{key:e.id,className:"pending-request-item"},s.createElement("div",{className:"request-info"},s.createElement("div",{className:"request-user"},s.createElement("div",{className:"user-avatar"},(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||s.createElement(d.A,{size:16})),s.createElement("div",{className:"user-details"},s.createElement("div",{className:"user-name"},e.requester_name),s.createElement("div",{className:"request-details"},(0,v.S0)(e.leave_type)," ",e.leave_type," • ",e.total_days," days"))),s.createElement("div",{className:"request-dates"},s.createElement("div",null,H(e.start_date)," - ",H(e.end_date)),s.createElement("div",{className:"submitted-date"},"Submitted ",W(e.submitted_at)))),s.createElement("div",{className:"request-actions-inline"},s.createElement("div",{className:"action-buttons-inline"},s.createElement("button",{onClick:()=>M(e.id,"approved"),disabled:j[e.id],className:"btn btn-sm btn-success"},j[e.id]?"...":"Approve"),s.createElement("button",{onClick:()=>M(e.id,"declined"),disabled:j[e.id],className:"btn btn-sm btn-danger"},j[e.id]?"...":"Decline"))))}))),S.length>5&&s.createElement("div",{className:"show-more"},s.createElement("p",{className:"text-sm text-gray-600"},S.length-5," more pending requests...")))),s.createElement("div",{className:"manager-content-grid"},s.createElement("div",{className:"card team-requests-card"},s.createElement("div",{className:"card-header"},s.createElement("h3",null,"Team Requests"),s.createElement("div",{className:"team-requests-controls"},s.createElement("select",{value:h,onChange:e=>_(e.target.value),className:"form-control"},s.createElement("option",{value:"all"},"All Members"),q.map((e=>s.createElement("option",{key:e.id,value:e.id},e.name)))),s.createElement("div",{className:"action-buttons-group"},s.createElement("button",{onClick:async()=>{if(N)try{const e=x.map((e=>({Date:(new Date).toLocaleDateString(),Manager:t.displayName,Team:N.name,Department:N.department||"",User:e.requester_name,"Start Date":e.start_date,"End Date":e.end_date,Period:"".concat(e.total_days," days"),"Leave Type":e.leave_type,Reason:e.reason||"",Status:e.status}))),a=Object.keys(e[0]||{}),s=[a.join(","),...e.map((e=>a.map((t=>'"'.concat((e[t]||"").toString().replace(/"/g,'""'),'"'))).join(",")))].join("\n"),l=new Blob([s],{type:"text/csv"}),n=URL.createObjectURL(l),r=document.createElement("a");r.href=n,r.download="team-pto-report-".concat(N.name,"-").concat(g,"-").concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n),E("Report downloaded successfully!")}catch(e){E("Failed to generate report","error")}},className:"btn btn-primary"},s.createElement(o.A,{size:16}),"Generate Report")))),s.createElement("div",{className:"card-body"},0===x.length?s.createElement("div",{className:"empty-state"},s.createElement(n.A,{size:48}),s.createElement("h4",null,"No Requests Found"),s.createElement("p",null,"No PTO requests found for the selected criteria.")):s.createElement("div",{className:"team-requests-list"},x.map((e=>{var t;return s.createElement("div",{key:e.id,className:"team-request-item"},s.createElement("div",{className:"request-header-row"},s.createElement("div",{className:"request-user-info"},s.createElement("div",{className:"user-avatar"},(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||"?"),s.createElement("div",{className:"user-details"},s.createElement("div",{className:"user-name"},e.requester_name),s.createElement("div",{className:"request-type"},(0,v.S0)(e.leave_type)," ",e.leave_type))),s.createElement("div",{className:"request-details-summary"},s.createElement("div",{className:"date-range"},H(e.start_date)," - ",H(e.end_date)),s.createElement("div",{className:"duration"},e.total_days," days")),s.createElement("div",{className:"request-status-section"},s.createElement(u.A,{status:e.status}),s.createElement("div",{className:"submitted-date"},W(e.submitted_at)))),e.reason&&s.createElement("div",{className:"request-reason-row"},s.createElement("span",{className:"reason-label"},"Reason:"),s.createElement("span",{className:"reason-text"},e.reason)))}))))),s.createElement("div",{className:"card upcoming-pto-card"},s.createElement("div",{className:"card-header"},s.createElement("h3",null,"Upcoming PTO")),s.createElement("div",{className:"card-body"},0===F.length?s.createElement("div",{className:"empty-state-small"},s.createElement(r.A,{size:32}),s.createElement("p",null,"No upcoming PTO scheduled")):s.createElement("div",{className:"upcoming-pto-list"},F.map((e=>{var t;return s.createElement("div",{key:e.id,className:"upcoming-pto-item"},s.createElement("div",{className:"pto-user"},s.createElement("div",{className:"user-avatar-small"},(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||"?"),s.createElement("div",{className:"user-info-small"},s.createElement("div",{className:"user-name-small"},e.requester_name),s.createElement("div",{className:"pto-type-small"},(0,v.S0)(e.leave_type)," ",e.leave_type))),s.createElement("div",{className:"pto-dates-small"},s.createElement("div",{className:"date-range-small"},H(e.start_date)," - ",H(e.end_date)),s.createElement("div",{className:"duration-small"},e.total_days," days")))}))))),s.createElement("div",{className:"card analytics-card"},s.createElement("div",{className:"card-header"},s.createElement("h3",null,"Team Analytics"),s.createElement("div",{className:"analytics-period"},g.replace("_"," ").replace(/\b\w/g,(e=>e.toUpperCase())))),s.createElement("div",{className:"card-body"},Object.keys(B.ptoByLeaveType).length>0&&s.createElement("div",{className:"analytics-section"},s.createElement("h4",null,"PTO by Leave Type"),s.createElement("div",{className:"analytics-items"},Object.entries(B.ptoByLeaveType).sort(((e,t)=>{let[,a]=e,[,s]=t;return s-a})).map((e=>{let[t,a]=e;return s.createElement("div",{key:t,className:"analytics-item"},s.createElement("span",{className:"item-icon"},(0,v.S0)(t)),s.createElement("span",{className:"item-label"},t.charAt(0).toUpperCase()+t.slice(1)),s.createElement("span",{className:"item-value"},a," days"))})))),Object.keys(B.ptoByMember).length>0&&s.createElement("div",{className:"analytics-section"},s.createElement("h4",null,"PTO by Team Member"),s.createElement("div",{className:"analytics-items"},Object.entries(B.ptoByMember).sort(((e,t)=>{let[,a]=e,[,s]=t;return s-a})).slice(0,5).map((e=>{let[t,a]=e;return s.createElement("div",{key:t,className:"analytics-item"},s.createElement("span",{className:"item-icon"},"👤"),s.createElement("span",{className:"item-label"},t),s.createElement("span",{className:"item-value"},a," days"))})))),Object.keys(B.ptoByWeekday).length>0&&s.createElement("div",{className:"analytics-section"},s.createElement("h4",null,"Most Popular Days Off"),s.createElement("div",{className:"analytics-items"},Object.entries(B.ptoByWeekday).sort(((e,t)=>{let[,a]=e,[,s]=t;return s-a})).map((e=>{let[t,a]=e;return s.createElement("div",{key:t,className:"analytics-item"},s.createElement("span",{className:"item-icon"},"📅"),s.createElement("span",{className:"item-label"},t),s.createElement("span",{className:"item-value"},a," days"))}))))))))}},3029:(e,t,a)=>{a.d(t,{A:()=>y});var s=a(6540),l=a(2307),n=a(5627),r=a(7235),c=a(6316),m=a(4945),i=a(3160),d=a(8188),o=a(2708),u=a(3245),v=a(808),p=a(99),E=a(9618);const y=e=>{let{requests:t,currentUser:a,onEditRequest:y,onCancelRequest:N}=e;const[b,g]=(0,s.useState)("all"),[f,h]=(0,s.useState)("all"),[_,q]=(0,s.useState)(!1),[w,D]=(0,s.useState)({preset:"all",from:"",to:""}),[O,S]=(0,s.useState)(null),k=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),A=e=>{if(e.requester_id!==a.accountId)return!1;if("pending"===e.status)return!0;if("approved"===e.status){const t=new Date;t.setHours(0,0,0,0);return new Date(e.start_date)>=t}return!1},T=(0,s.useMemo)((()=>{let e=Array.isArray(t)?[...t]:[];if(w&&"all"!==w.preset){let t,a;const s=new Date;switch(w.preset){case"current_year":t=new Date(s.getFullYear(),0,1);break;case"last_90_days":t=new Date(s),t.setDate(s.getDate()-90);break;case"last_30_days":t=new Date(s),t.setDate(s.getDate()-30);break;case"custom":t=w.from?new Date(w.from):null,a=w.to?new Date(w.to):null;break;default:t=null}e=e.filter((e=>{const s=new Date(e.submitted_at);return"custom"===w.preset?!(t&&s<t)&&!(a&&s>a):!t||s>=t}))}return f&&"all"!==f&&(e=e.filter((e=>e.status===f))),e}),[t,w,f]),j=(0,s.useMemo)((()=>{const e=Array.isArray(T)?T:[];return{totalRequests:e.length,pendingRequests:e.filter((e=>"pending"===e.status)).length,approvedRequests:e.filter((e=>"approved"===e.status)).length,declinedRequests:e.filter((e=>"declined"===e.status)).length,totalDays:e.filter((e=>"approved"===e.status)).reduce(((e,t)=>e+(t.total_days||0)),0),ptoByType:e.filter((e=>"approved"===e.status)).reduce(((e,t)=>{const a=t.leave_type||"unknown";return e[a]=(e[a]||0)+(t.total_days||0),e}),{})}}),[T]);return 0===t.length?s.createElement("div",{className:"requests-container"},s.createElement("div",{className:"card requests-card"},s.createElement("h2",{className:"card-title"},"My PTO Requests"),s.createElement("div",{className:"requests-empty"},s.createElement(l.A,{size:48,className:"requests-empty-icon"}),s.createElement("h3",{className:"requests-empty-title"},"No PTO requests found"),s.createElement("p",null,"You haven't submitted any PTO requests yet."),s.createElement("p",{className:"requests-empty-desc"},"Go to the Calendar tab to submit your first request!")))):s.createElement("div",{className:"requests-container"},s.createElement("div",{className:"requests-header-section"},s.createElement("div",{className:"requests-page-header"},s.createElement("h2",{className:"page-title"},"My PTO Requests"),s.createElement("div",{className:"requests-page-controls"},s.createElement("button",{onClick:()=>q(!_),className:"btn btn-secondary ".concat(_?"active":"")},s.createElement(n.A,{size:16}),"Filters"))),_&&s.createElement("div",{className:"filters-panel"},s.createElement("div",{className:"filters-row"},s.createElement("div",{className:"filter-group"},s.createElement("label",null,"Date Range"),s.createElement(p.A,{value:w,onChange:D})),s.createElement("div",{className:"filter-group"},s.createElement("label",null,"Status"),s.createElement("select",{value:f,onChange:e=>h(e.target.value),className:"form-control"},s.createElement("option",{value:"all"},"All Status"),s.createElement("option",{value:"pending"},"Pending"),s.createElement("option",{value:"approved"},"Approved"),s.createElement("option",{value:"declined"},"Declined"))))),s.createElement("div",{className:"summary-cards-container"},s.createElement("div",{className:"summary-card stat-blue"},s.createElement("div",{className:"summary-icon"},s.createElement(l.A,{size:20})),s.createElement("div",{className:"summary-content"},s.createElement("div",{className:"summary-value"},j.totalRequests),s.createElement("div",{className:"summary-label"},"Total"))),s.createElement("div",{className:"summary-card stat-yellow"},s.createElement("div",{className:"summary-icon"},s.createElement(r.A,{size:20})),s.createElement("div",{className:"summary-content"},s.createElement("div",{className:"summary-value"},j.pendingRequests),s.createElement("div",{className:"summary-label"},"Pending"))),s.createElement("div",{className:"summary-card stat-green"},s.createElement("div",{className:"summary-icon"},s.createElement(c.A,{size:20})),s.createElement("div",{className:"summary-content"},s.createElement("div",{className:"summary-value"},j.approvedRequests),s.createElement("div",{className:"summary-label"},"Approved"))),s.createElement("div",{className:"summary-card stat-red"},s.createElement("div",{className:"summary-icon"},s.createElement(m.A,{size:20})),s.createElement("div",{className:"summary-content"},s.createElement("div",{className:"summary-value"},j.declinedRequests),s.createElement("div",{className:"summary-label"},"Declined"))),s.createElement("div",{className:"summary-card stat-purple"},s.createElement("div",{className:"summary-icon"},s.createElement(i.A,{size:20})),s.createElement("div",{className:"summary-content"},s.createElement("div",{className:"summary-value"},j.totalDays),s.createElement("div",{className:"summary-label"},"Days Off"))))),s.createElement("div",{className:"requests-content"},Object.keys(j.ptoByType||{}).length>0&&s.createElement("div",{className:"card pto-breakdown-card"},s.createElement("div",{className:"card-header"},s.createElement("h3",null,"PTO Breakdown by Leave Type")),s.createElement("div",{className:"card-body"},s.createElement("div",{className:"pto-breakdown-grid"},Object.entries(j.ptoByType||{}).map((e=>{let[t,a]=e;return s.createElement("div",{key:t,className:"pto-breakdown-item"},s.createElement("div",{className:"breakdown-icon"},(0,v.S0)(t)),s.createElement("div",{className:"breakdown-details"},s.createElement("div",{className:"breakdown-type"},t.charAt(0).toUpperCase()+t.slice(1)),s.createElement("div",{className:"breakdown-days"},a," ",1===a?"day":"days")),s.createElement("div",{className:"breakdown-percentage"},j.totalDays>0?(a/j.totalDays*100).toFixed(1):"0.0","%"))}))))),s.createElement("div",{className:"card requests-list-card"},s.createElement("div",{className:"card-header"},s.createElement("h3",null,"Request History"),s.createElement("div",{className:"requests-count"},T.length," ",1===T.length?"request":"requests")),s.createElement("div",{className:"card-body"},0===T.length?s.createElement("div",{className:"no-results"},s.createElement("p",null,"No requests found for the selected filters.")):s.createElement("div",{className:"requests-list compact"},T.map((e=>s.createElement("div",{key:e.id,className:"request-item compact"},s.createElement("div",{className:"request-header-compact"},s.createElement("div",{className:"request-type-info"},s.createElement("span",{className:"request-emoji"},(0,v.S0)(e.leave_type)),s.createElement("div",{className:"request-title-group"},s.createElement("h4",{className:"request-title"},e.leave_type.charAt(0).toUpperCase()+e.leave_type.slice(1)),s.createElement("div",{className:"request-dates"},k(e.start_date)," - ",k(e.end_date)))),s.createElement("div",{className:"request-status-section"},s.createElement(u.A,{status:e.status}),s.createElement("div",{className:"request-duration"},e.total_days," ",1===e.total_days?"day":"days")),s.createElement("div",{className:"request-actions"},A(e)&&s.createElement("button",{onClick:()=>(e=>{A(e)&&S(e)})(e),className:"btn btn-sm btn-secondary",title:"Edit Request"},s.createElement(d.A,{size:14})),(e=>{if(e.requester_id!==a.accountId)return!1;if("approved"===e.status){const t=new Date(e.end_date),a=new Date;return a.setHours(0,0,0,0),t>=a}return"pending"===e.status})(e)&&s.createElement("button",{onClick:()=>N&&N(e),className:"btn btn-sm btn-danger",title:"Cancel Request"},s.createElement(o.A,{size:14})))),e.reason&&s.createElement("div",{className:"request-reason compact"},s.createElement("span",{className:"reason-label"},"Reason:"),s.createElement("span",{className:"reason-text"},e.reason)),s.createElement("div",{className:"request-metadata compact"},s.createElement("div",{className:"metadata-item"},s.createElement("span",{className:"metadata-label"},"Submitted:"),s.createElement("span",{className:"metadata-value"},k(e.submitted_at))),"pending"!==e.status&&e.reviewed_at&&s.createElement("div",{className:"metadata-item"},s.createElement("span",{className:"metadata-label"},"approved"===e.status?"Approved:":"Declined:"),s.createElement("span",{className:"metadata-value"},k(e.reviewed_at))))))))))),O&&s.createElement(E.A,{request:O,onClose:()=>S(null),onSave:e=>{y(e),S(null)},currentUser:a}))}},7892:(e,t,a)=>{a.d(t,{A:()=>w});var s=a(6540),l=a(2492),n=a(3893),r=a(4945),c=a(2762),m=a(7623),i=a(2307),d=a(8309),o=a(964),u=a(4796),v=a(8697),p=a(2321),E=a(5143),y=a(4506),N=a(5839),b=a(4143),g=a(2435);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){_(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function q(e){let{title:t,children:a,onClose:l}=e;return s.createElement("div",{className:"modal-overlay"},s.createElement("div",{className:"modal-content admin-modal"},s.createElement("div",{className:"modal-header"},s.createElement("h3",null,t),s.createElement("button",{className:"modal-close",onClick:l},s.createElement(v.A,{size:24}))),s.createElement("div",{className:"modal-body"},a)))}const w=e=>{let{currentUser:t,showNotification:a}=e;const[v,f]=(0,s.useState)("overview"),[_,w]=(0,s.useState)(!1),[D,O]=(0,s.useState)([]),[S,k]=(0,s.useState)([]),[A,T]=(0,s.useState)([]),[j,C]=(0,s.useState)([]),[P,R]=(0,s.useState)([]),[U,I]=(0,s.useState)(!1),[L,z]=(0,s.useState)(!1),[M,x]=(0,s.useState)(!1),[B,F]=(0,s.useState)(!1),[H,W]=(0,s.useState)(!1),[G,Y]=(0,s.useState)(!1),[J,V]=(0,s.useState)({startDate:"",endDate:"",requesterId:"",managerId:"",leaveType:""}),[K,Q]=(0,s.useState)({scope:"company",teamId:"",userId:"",startDate:"",endDate:"",status:"all"}),[X,Z]=(0,s.useState)(Date.now()),[$,ee]=(0,s.useState)({totalAdmins:0,totalTeams:0,totalUsers:0,totalRequests:0,approvedRequests:0,pendingRequests:0,declinedRequests:0});(0,s.useEffect)((()=>{te(),re()}),[]);const te=async()=>{w(!0);try{await Promise.all([ae(),se(),le(),ne()])}catch(e){a("Failed to load admin data","error")}finally{w(!1)}},ae=async()=>{try{const e=await(0,p.invoke)("getAdminUsers");if(e.success){const t=e.data||[],a=await(0,p.invoke)("getUsers"),s=a.success&&a.data||[],l=t.map((e=>s.find((t=>t.jira_account_id===e.accountId||t.email_address===e.emailAddress))||e));O(l)}}catch(e){console.error("Failed to load admin users:",e)}},se=async()=>{try{const e=await(0,p.invoke)("getTeams");e.success&&k(e.data||[])}catch(e){}},le=async()=>{try{const e=await(0,p.invoke)("getUsers");e.success&&T(e.data||[])}catch(e){}},ne=async()=>{try{const e=await(0,p.invoke)("getPTORequests");e.success&&C(e.data||[])}catch(e){}},re=async()=>{try{const e=await(0,p.invoke)("getInternalJiraUsers",{startAt:0,maxResults:50});e.success&&R(e.data.users||[])}catch(e){console.error("Failed to load Jira users:",e)}},ce=()=>{const e=A.map((e=>e.jira_account_id||e.email_address)).filter(Boolean);return P.filter((t=>!e.includes(t.accountId)&&!e.includes(t.emailAddress)))};(0,s.useEffect)((()=>{var e;ee({totalAdmins:D.length,totalTeams:S.length,totalUsers:A.length,totalRequests:j.length,pendingRequests:j.filter((e=>"pending"===e.status)).length,approvedRequests:j.filter((e=>"approved"===e.status)).length,declinedRequests:j.filter((e=>"declined"===e.status)).length,usersNotInSystem:(null===(e=ce())||void 0===e?void 0:e.length)||0})}),[D,S,A,j]);const me={requestsByWeekday:j.reduce(((e,t)=>{const a=new Date(t.start_date).toLocaleDateString("en-US",{weekday:"long"});return e[a]=(e[a]||0)+1,e}),{}),requestsByLeaveType:j.reduce(((e,t)=>(e[t.leave_type]=(e[t.leave_type]||0)+1,e)),{}),requestsByTeam:j.reduce(((e,t)=>{const a=A.find((e=>e.jira_account_id===t.requester_id||e.email_address===t.requester_email)),s=a?S.find((e=>e.id===a.team_id)):null,l=(null==s?void 0:s.name)||"Unassigned";return e[l]=(e[l]||0)+1,e}),{})};function ie(e,t){if(!Array.isArray(e)||0===e.length)return;const a=Object.keys(e[0]),s=[a.join(",")];for(const t of e)s.push(a.map((e=>{var a;return'"'+(null!==(a=t[e])&&void 0!==a?a:"").toString().replace(/"/g,'""')+'"'})).join(","));const l=s.join("\n"),n=new Blob([l],{type:"text/csv"}),r=URL.createObjectURL(n),c=document.createElement("a");c.href=r,c.download=t,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(r)}return s.createElement("div",{className:"admin-dashboard"},s.createElement("div",{className:"admin-tabs"},s.createElement("button",{className:"admin-tab ".concat("overview"===v?"active":""),onClick:()=>f("overview")},s.createElement(l.A,{size:16}),"Overview"),s.createElement("button",{className:"admin-tab ".concat("users"===v?"active":""),onClick:()=>f("users")},s.createElement(n.A,{size:16}),"Users"),s.createElement("button",{className:"admin-tab ".concat("analytics"===v?"active":""),onClick:()=>f("analytics")},s.createElement(r.A,{size:16}),"Analytics")),"overview"===v&&s.createElement("div",{className:"admin-section"},s.createElement("div",{className:"admin-stats-grid"},s.createElement("div",{className:"admin-stat-card admin-stat-purple"},s.createElement("div",{className:"stat-icon"},s.createElement(l.A,{size:24})),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},$.totalAdmins),s.createElement("div",{className:"stat-label"},"Admin Users"))),s.createElement("div",{className:"admin-stat-card admin-stat-blue"},s.createElement("div",{className:"stat-icon"},s.createElement(c.A,{size:24})),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},$.totalTeams),s.createElement("div",{className:"stat-label"},"Teams"))),s.createElement("div",{className:"admin-stat-card admin-stat-emerald"},s.createElement("div",{className:"stat-icon"},s.createElement(m.A,{size:24})),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},$.totalUsers),s.createElement("div",{className:"stat-label"},"Users"))),s.createElement("div",{className:"admin-stat-card admin-stat-indigo"},s.createElement("div",{className:"stat-icon"},s.createElement(i.A,{size:24})),s.createElement("div",{className:"stat-content"},s.createElement("div",{className:"stat-value"},$.totalRequests),s.createElement("div",{className:"stat-label"},"Total Requests"),s.createElement("div",{className:"stat-breakdown"},s.createElement("span",{className:"breakdown-item green"},$.approvedRequests," approved"),s.createElement("span",{className:"breakdown-item orange"},$.pendingRequests," pending"),s.createElement("span",{className:"breakdown-item red"},$.declinedRequests," declined"))))),s.createElement("div",{className:"card admin-actions-card"},s.createElement("div",{className:"card-header"},s.createElement("h3",null,"Actions")),s.createElement("div",{className:"card-body"},s.createElement("div",{className:"admin-actions-grid"},s.createElement("button",{onClick:()=>{Z(Date.now()),x(!0)},className:"admin-action-btn"},s.createElement("div",{className:"action-icon bg-green"},s.createElement(i.A,{size:20})),s.createElement("div",{className:"action-content"},s.createElement("div",{className:"action-title"},"Create PTO"),s.createElement("div",{className:"action-desc"},"Create PTO requests for users"))),s.createElement("button",{onClick:()=>F(!0),className:"admin-action-btn"},s.createElement("div",{className:"action-icon bg-blue"},s.createElement(d.A,{size:20})),s.createElement("div",{className:"action-content"},s.createElement("div",{className:"action-title"},"Generate Reports"),s.createElement("div",{className:"action-desc"},"Export detailed PTO reports"))),s.createElement("button",{onClick:()=>z(!0),className:"admin-action-btn"},s.createElement("div",{className:"action-icon bg-indigo"},s.createElement(o.A,{size:20})),s.createElement("div",{className:"action-content"},s.createElement("div",{className:"action-title"},"Manage Teams & Users"),s.createElement("div",{className:"action-desc"},"Advanced team and user management"))),s.createElement("button",{onClick:async()=>{try{const e=await(0,p.invoke)("debugStorage");e.success&&e.data?(e.data.users&&ie(e.data.users,"users.csv"),e.data.teams&&ie(e.data.teams,"teams.csv"),e.data.admins&&ie(e.data.admins.map((e=>({accountId:e}))),"admins.csv"),e.data.pto_requests&&ie(e.data.pto_requests,"pto_requests.csv"),e.data.pto_daily_schedules&&ie(e.data.pto_daily_schedules,"pto_daily_schedules.csv"),a("Database exported as CSV files!")):a("Failed to export database","error")}catch(e){a("Failed to export database","error")}},className:"admin-action-btn"},s.createElement("div",{className:"action-icon bg-yellow"},s.createElement(d.A,{size:20})),s.createElement("div",{className:"action-content"},s.createElement("div",{className:"action-title"},"Export Database"),s.createElement("div",{className:"action-desc"},"Download all tables as CSV"))),s.createElement("button",{onClick:()=>W(!0),className:"admin-action-btn"},s.createElement("div",{className:"action-icon bg-purple"},s.createElement(u.A,{size:20})),s.createElement("div",{className:"action-content"},s.createElement("div",{className:"action-title"},"Import PTOs"),s.createElement("div",{className:"action-desc"},"Import PTO daily schedules from CSV"))),s.createElement("button",{onClick:()=>Y(!0),className:"admin-action-btn"},s.createElement("div",{className:"action-icon bg-pink"},s.createElement(d.A,{size:20})),s.createElement("div",{className:"action-content"},s.createElement("div",{className:"action-title"},"Export Daily Schedules"),s.createElement("div",{className:"action-desc"},"Export PTO daily schedules")))))),s.createElement("div",{className:"card recent-activity-card"},s.createElement("div",{className:"card-header"},s.createElement("h3",null,"Recent PTO Activity")),s.createElement("div",{className:"card-body"},0===j.length?s.createElement("div",{className:"empty-state-small"},s.createElement(i.A,{size:32}),s.createElement("p",null,"No PTO requests yet")):s.createElement("div",{className:"recent-requests-list"},j.sort(((e,t)=>new Date(t.submitted_at)-new Date(e.submitted_at))).slice(0,5).map((e=>{var t;return s.createElement("div",{key:e.id,className:"recent-request-item"},s.createElement("div",{className:"request-avatar"},(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||"?"),s.createElement("div",{className:"request-details"},s.createElement("div",{className:"request-summary"},s.createElement("span",{className:"requester-name"},e.requester_name),s.createElement("span",{className:"request-action"},"requested ",e.leave_type)),s.createElement("div",{className:"request-meta"},new Date(e.start_date).toLocaleDateString()," • ",e.total_days," days")),s.createElement("div",{className:"request-status"},s.createElement("span",{className:"status-badge status-".concat(e.status)},e.status)))})))))),"users"===v&&s.createElement("div",{className:"admin-section"},s.createElement(b.A,{currentUser:t,showNotification:a,isAdmin:!0})),"analytics"===v&&s.createElement("div",{className:"admin-section"},s.createElement("div",{className:"section-header"},s.createElement("h3",null,"Analytics Dashboard")),s.createElement("div",{className:"analytics-grid"},s.createElement("div",{className:"card analytics-card"},s.createElement("div",{className:"card-header"},s.createElement("h4",null,"Requests by Status")),s.createElement("div",{className:"card-body"},s.createElement("div",{className:"analytics-chart"},s.createElement("div",{className:"chart-item"},s.createElement("div",{className:"chart-bar"},s.createElement("div",{className:"bar bar-green",style:{height:"".concat($.approvedRequests/Math.max($.totalRequests,1)*100,"%")}})),s.createElement("div",{className:"chart-label"},s.createElement("div",{className:"chart-value"},$.approvedRequests),s.createElement("div",{className:"chart-name"},"Approved"))),s.createElement("div",{className:"chart-item"},s.createElement("div",{className:"chart-bar"},s.createElement("div",{className:"bar bar-yellow",style:{height:"".concat($.pendingRequests/Math.max($.totalRequests,1)*100,"%")}})),s.createElement("div",{className:"chart-label"},s.createElement("div",{className:"chart-value"},$.pendingRequests),s.createElement("div",{className:"chart-name"},"Pending"))),s.createElement("div",{className:"chart-item"},s.createElement("div",{className:"chart-bar"},s.createElement("div",{className:"bar bar-red",style:{height:"".concat($.declinedRequests/Math.max($.totalRequests,1)*100,"%")}})),s.createElement("div",{className:"chart-label"},s.createElement("div",{className:"chart-value"},$.declinedRequests),s.createElement("div",{className:"chart-name"},"Declined")))))),s.createElement("div",{className:"card analytics-card"},s.createElement("div",{className:"card-header"},s.createElement("h4",null,"Requests by Leave Type")),s.createElement("div",{className:"card-body"},s.createElement("div",{className:"analytics-list"},Object.entries(me.requestsByLeaveType).sort(((e,t)=>{let[,a]=e,[,s]=t;return s-a})).map((e=>{let[t,a]=e;return s.createElement("div",{key:t,className:"analytics-item"},s.createElement("div",{className:"item-info"},s.createElement("span",{className:"item-icon"},"vacation"===t?"🏖️":"sick"===t?"🤒":"personal"===t?"👤":"🎉"),s.createElement("span",{className:"item-label"},t.charAt(0).toUpperCase()+t.slice(1))),s.createElement("div",{className:"item-value"},a))}))))),s.createElement("div",{className:"card analytics-card"},s.createElement("div",{className:"card-header"},s.createElement("h4",null,"Requests by Team")),s.createElement("div",{className:"card-body"},s.createElement("div",{className:"analytics-list"},Object.entries(me.requestsByTeam).sort(((e,t)=>{let[,a]=e,[,s]=t;return s-a})).map((e=>{let[t,a]=e;return s.createElement("div",{key:t,className:"analytics-item"},s.createElement("div",{className:"item-info"},s.createElement("span",{className:"item-icon"},"👥"),s.createElement("span",{className:"item-label"},t)),s.createElement("div",{className:"item-value"},a))}))))),s.createElement("div",{className:"card analytics-card"},s.createElement("div",{className:"card-header"},s.createElement("h4",null,"Requests by Weekday")),s.createElement("div",{className:"card-body"},s.createElement("div",{className:"analytics-list"},Object.entries(me.requestsByWeekday).sort(((e,t)=>{let[,a]=e,[,s]=t;return s-a})).map((e=>{let[t,a]=e;return s.createElement("div",{key:t,className:"analytics-item"},s.createElement("div",{className:"item-info"},s.createElement("span",{className:"item-icon"},"📅"),s.createElement("span",{className:"item-label"},t)),s.createElement("div",{className:"item-value"},a))}))))))),U&&s.createElement(q,{title:"Add Admin User",onClose:()=>I(!1)},s.createElement("div",{className:"add-admin-content"},s.createElement("p",null,"Grant admin privileges to a user. They will be able to manage teams, users, and all PTO requests."),s.createElement(E.A,{selectedUser:null,onSelect:async e=>{if(e)try{const s=await(0,p.invoke)("addAdminUser",{accountId:e.accountId,addedBy:t.accountId});s.success?(a("".concat(e.displayName," added as admin")),I(!1),ae()):a(s.message||"Failed to add admin","error")}catch(e){a("Failed to add admin user","error")}},placeholder:"Search and select user to grant admin privileges",useBackendSearch:!1}))),B&&s.createElement(q,{title:"Generate PTO Report",onClose:()=>F(!1)},s.createElement("div",{className:"report-config"},s.createElement("div",{className:"form-group"},s.createElement("label",null,"Report Scope"),s.createElement("select",{value:K.scope,onChange:e=>Q((t=>h(h({},t),{},{scope:e.target.value}))),className:"form-control"},s.createElement("option",{value:"company"},"Full Company"),s.createElement("option",{value:"team"},"Specific Team"),s.createElement("option",{value:"user"},"Specific User"))),"team"===K.scope&&s.createElement("div",{className:"form-group"},s.createElement("label",null,"Select Team"),s.createElement("select",{value:K.teamId,onChange:e=>Q((t=>h(h({},t),{},{teamId:e.target.value}))),className:"form-control"},s.createElement("option",{value:""},"Choose a team"),S.map((e=>s.createElement("option",{key:e.id,value:e.id},e.name))))),"user"===K.scope&&s.createElement("div",{className:"form-group"},s.createElement("label",null,"Select User"),s.createElement("select",{value:K.userId,onChange:e=>Q((t=>h(h({},t),{},{userId:e.target.value}))),className:"form-control"},s.createElement("option",{value:""},"Choose a user"),A.map((e=>s.createElement("option",{key:e.id,value:e.jira_account_id||e.id},e.display_name||e.displayName))))),s.createElement("div",{className:"form-row"},s.createElement("div",{className:"form-group"},s.createElement("label",null,"Start Date"),s.createElement("input",{type:"date",value:K.startDate,onChange:e=>Q((t=>h(h({},t),{},{startDate:e.target.value}))),className:"form-control"})),s.createElement("div",{className:"form-group"},s.createElement("label",null,"End Date"),s.createElement("input",{type:"date",value:K.endDate,onChange:e=>Q((t=>h(h({},t),{},{endDate:e.target.value}))),className:"form-control"}))),s.createElement("div",{className:"form-group"},s.createElement("label",null,"Status Filter"),s.createElement("select",{value:K.status,onChange:e=>Q((t=>h(h({},t),{},{status:e.target.value}))),className:"form-control"},s.createElement("option",{value:"all"},"All Status"),s.createElement("option",{value:"pending"},"Pending"),s.createElement("option",{value:"approved"},"Approved"),s.createElement("option",{value:"declined"},"Declined"))),s.createElement("div",{className:"form-actions"},s.createElement("button",{onClick:()=>F(!1),className:"btn btn-secondary"},"Cancel"),s.createElement("button",{onClick:async()=>{try{let e=[...j];if("team"===K.scope&&K.teamId){const t=A.filter((e=>(e.team_ids||[]).includes(K.teamId))).map((e=>e.jira_account_id||e.id));e=e.filter((e=>t.includes(e.requester_id)))}else"user"===K.scope&&K.userId&&(e=e.filter((e=>e.requester_id===K.userId)));K.startDate&&K.endDate&&(e=e.filter((e=>{const t=new Date(e.start_date),a=new Date(K.startDate),s=new Date(K.endDate);return t>=a&&t<=s}))),"all"!==K.status&&(e=e.filter((e=>e.status===K.status)));const t=e.map((e=>{const t=A.find((t=>t.jira_account_id===e.requester_id||t.email_address===e.requester_email)),a=t?S.filter((e=>(t.team_ids||[]).includes(e.id))):[];return{Date:(new Date).toLocaleDateString(),Manager:e.manager_name||"",Team:a.map((e=>e.name)).join(", "),Department:a.length>0?a[0].department:"",User:e.requester_name,"Start Date":e.start_date,"End Date":e.end_date,"Total Days":e.total_days||0,"Leave Type":e.leave_type,Reason:e.reason||"",Status:e.status,"Submitted Date":e.submitted_at}})),s=Object.keys(t[0]||{}),l=[s.join(","),...t.map((e=>s.map((t=>'"'.concat((e[t]||"").toString().replace(/"/g,'""'),'"'))).join(",")))].join("\n"),n=new Blob([l],{type:"text/csv"}),r=URL.createObjectURL(n),c=document.createElement("a");c.href=r,c.download="pto-admin-report-".concat(K.scope,"-").concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(r),a("Report downloaded successfully!"),F(!1)}catch(e){a("Failed to generate report","error")}},className:"btn btn-primary"},s.createElement(d.A,{size:16}),"Generate Report")))),L&&s.createElement(N.A,{isOpen:L,onClose:()=>z(!1),teams:S,users:A,onSaveTeam:async e=>{await(0,p.invoke)(e.id?"updateTeam":"createTeam",e),se()},onDeleteTeam:async e=>{await(0,p.invoke)("deleteTeam",{teamId:e,deletedBy:t.accountId}),se()},onSaveUser:async e=>{await(0,p.invoke)(e.id?"updateUser":"createUser",e),le()},onDeleteUser:async e=>{await(0,p.invoke)("deleteUser",{userId:e,deletedBy:t.accountId}),le()},showNotification:a,onRefresh:te}),M&&s.createElement(y.A,{key:X,isAdminMode:!0,onClose:()=>x(!1),onSubmit:async e=>{var s;if(null!=e&&e.targetUser)try{const l=(s=e.manager)?h(h({},s),{},{accountId:s.accountId||s.jira_account_id||s.id,displayName:s.displayName||s.display_name||s.name,emailAddress:s.emailAddress||s.email_address,avatarUrl:s.avatarUrl||s.avatar_url}):null,n=await(0,p.invoke)("submitPTOForUser",{requestData:{requester_id:e.targetUser.accountId,requester_name:e.targetUser.displayName,requester_email:e.targetUser.emailAddress,manager_id:(null==l?void 0:l.accountId)||"admin",manager_name:(null==l?void 0:l.displayName)||t.displayName,manager_email:(null==l?void 0:l.emailAddress)||t.emailAddress,start_date:e.startDate,end_date:e.endDate,leave_type:e.leaveType||"vacation",reason:e.reason||"Admin created",status:"approved",total_days:e.totalDays,total_hours:e.totalHours,daily_schedules:e.dailySchedules},submittedBy:t.accountId});n.success?(a("PTO request created for ".concat(e.targetUser.displayName)),x(!1),ne()):a(n.message||"Failed to create PTO request","error")}catch(e){a("Failed to create PTO request","error")}else a("Please select a user for PTO","error")},allUsers:A,allTeams:S,allRequests:j,currentUser:t,isAdmin:!0}),H&&s.createElement(g.A,{isOpen:H,onClose:()=>W(!1),currentUser:t,showNotification:a,onImportSuccess:ne}),G&&s.createElement(q,{title:"Export PTO Daily Schedules",onClose:()=>Y(!1)},s.createElement("div",{className:"export-filters"},s.createElement("div",{className:"form-row"},s.createElement("div",{className:"form-group"},s.createElement("label",null,"Start Date"),s.createElement("input",{type:"date",value:J.startDate,onChange:e=>V((t=>h(h({},t),{},{startDate:e.target.value}))),className:"form-control"})),s.createElement("div",{className:"form-group"},s.createElement("label",null,"End Date"),s.createElement("input",{type:"date",value:J.endDate,onChange:e=>V((t=>h(h({},t),{},{endDate:e.target.value}))),className:"form-control"}))),s.createElement("div",{className:"form-group"},s.createElement("label",null,"Requester"),s.createElement("select",{value:J.requesterId,onChange:e=>V((t=>h(h({},t),{},{requesterId:e.target.value}))),className:"form-control"},s.createElement("option",{value:""},"All Requesters"),A.map((e=>s.createElement("option",{key:e.id,value:e.jira_account_id||e.id},e.display_name||e.displayName))))),s.createElement("div",{className:"form-group"},s.createElement("label",null,"Manager"),s.createElement("select",{value:J.managerId,onChange:e=>V((t=>h(h({},t),{},{managerId:e.target.value}))),className:"form-control"},s.createElement("option",{value:""},"All Managers"),A.map((e=>s.createElement("option",{key:e.id,value:e.jira_account_id||e.id},e.display_name||e.displayName))))),s.createElement("div",{className:"form-group"},s.createElement("label",null,"Leave Type"),s.createElement("select",{value:J.leaveType,onChange:e=>V((t=>h(h({},t),{},{leaveType:e.target.value}))),className:"form-control"},s.createElement("option",{value:""},"All Types"),s.createElement("option",{value:"vacation"},"Vacation"),s.createElement("option",{value:"sick"},"Sick Leave"),s.createElement("option",{value:"personal"},"Personal Leave"),s.createElement("option",{value:"holiday"},"Holiday"),s.createElement("option",{value:"other leave type"},"Other Leave Type"))),s.createElement("div",{className:"form-actions"},s.createElement("button",{onClick:()=>Y(!1),className:"btn btn-secondary"},"Cancel"),s.createElement("button",{onClick:async()=>{try{const e=await(0,p.invoke)("exportPTODailySchedules",{filters:J});e.success?(ie(e.data,"pto_daily_schedules.csv"),a("Daily schedules exported successfully!"),Y(!1)):a(e.message||"Failed to export daily schedules","error")}catch(e){a("Failed to export daily schedules","error")}},className:"btn btn-primary"},s.createElement(d.A,{size:16}),"Export Schedules")))))}},9681:(e,t,a)=>{a.d(t,{A:()=>u});var s=a(6540),l=a(5627),n=a(697),r=a(4506),c=a(808),m=a(9618);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const u=e=>{let{events:t,onDateSelect:a,selectedDates:i,onSubmitPTO:o,currentUser:u,allUsers:v,allTeams:p,isAdmin:E}=e;const[y,N]=(0,s.useState)(new Date),[b,g]=(0,s.useState)(!1),[f,h]=(0,s.useState)({team:"all",user:"all",leaveType:"all",status:"all"}),[_,q]=(0,s.useState)(!1),[w,D]=(0,s.useState)(null),[O,S]=(0,s.useState)(""),k=null==v?void 0:v.find((e=>e.jira_account_id===(null==u?void 0:u.accountId)||e.email_address===(null==u?void 0:u.emailAddress))),A=e=>e.toISOString().split("T")[0],T=()=>t?t.filter((e=>{if("all"!==f.team){const t=null==v?void 0:v.find((t=>t.jira_account_id===e.requester_id||t.email_address===e.requester_email));if(!t||t.team_id!==f.team)return!1}if("me"===f.user){if(e.requester_id!==(null==u?void 0:u.accountId)&&e.requester_email!==(null==u?void 0:u.emailAddress))return!1}else if("all"!==f.user){const t=null==v?void 0:v.find((e=>e.jira_account_id===f.user||e.id===f.user));if(t&&e.requester_id!==t.jira_account_id&&e.requester_email!==t.email_address)return!1}return("all"===f.leaveType||e.leave_type===f.leaveType)&&("all"===f.status||e.status===f.status)})):[],j=e=>{N((t=>{const a=new Date(t);return a.setMonth(t.getMonth()+e),a}))},C=(e,t)=>{h((a=>d(d({},a),{},{[e]:t})))},P=()=>Object.values(f).some((e=>"all"!==e)),R=e=>{if(!e)return!1;if(e.requester_id!==u.accountId)return!1;if("pending"===e.status)return!0;if("approved"===e.status){const t=new Date;t.setHours(0,0,0,0);return new Date(e.start_date)>=t}return!1},U=(e=>{const t=e.getFullYear(),a=e.getMonth(),s=new Date(t,a,1),l=new Date(t,a+1,0).getDate(),n=s.getDay(),r=[];for(let e=0;e<n;e++)r.push(null);for(let e=1;e<=l;e++)r.push(new Date(t,a,e));return r})(y);return s.createElement("div",{className:"card calendar-card"},s.createElement("div",{className:"calendar-header"},s.createElement("div",{className:"calendar-header-controls"},s.createElement("button",{onClick:()=>j(-1),className:"calendar-nav-btn"},"←"),s.createElement("h2",{className:"calendar-title"},["January","February","March","April","May","June","July","August","September","October","November","December"][y.getMonth()]," ",y.getFullYear()),s.createElement("button",{onClick:()=>j(1),className:"calendar-nav-btn"},"→")),s.createElement("div",{className:"calendar-header-actions"},s.createElement("button",{onClick:()=>q(!_),className:"btn btn-secondary calendar-filter-btn ".concat(P()?"has-filters":"")},s.createElement(l.A,{size:16}),s.createElement("span",null,"Filters"),P()&&s.createElement("span",{className:"filter-indicator"},"●")),i.length>0&&s.createElement("button",{onClick:()=>g(!0),className:"btn btn-primary calendar-submit-btn"},s.createElement(n.A,{size:16}),s.createElement("span",null,"Request PTO (",i.length," days)")))),_&&s.createElement("div",{className:"calendar-filters-panel"},s.createElement("div",{className:"filters-grid"},s.createElement("div",{className:"filter-group"},s.createElement("label",null,"Team"),s.createElement("select",{value:f.team,onChange:e=>C("team",e.target.value),className:"form-control"},s.createElement("option",{value:"all"},"All Teams"),(p?E?p:p.filter((e=>{var t,a;return(null===(t=e.manager)||void 0===t?void 0:t.accountId)===(null==u?void 0:u.accountId)||(null===(a=e.manager)||void 0===a?void 0:a.jira_account_id)===(null==u?void 0:u.accountId)})):[]).map((e=>s.createElement("option",{key:e.id,value:e.id},e.name))))),s.createElement("div",{className:"filter-group"},s.createElement("label",null,"User"),s.createElement("select",{value:f.user,onChange:e=>C("user",e.target.value),className:"form-control"},s.createElement("option",{value:"all"},"All Users"),s.createElement("option",{value:"me"},"Me"),null==v?void 0:v.map((e=>s.createElement("option",{key:e.id,value:e.jira_account_id||e.id},e.display_name||e.displayName))))),s.createElement("div",{className:"filter-group"},s.createElement("label",null,"Leave Type"),s.createElement("select",{value:f.leaveType,onChange:e=>C("leaveType",e.target.value),className:"form-control"},s.createElement("option",{value:"all"},"All Types"),["vacation","sick","personal","holiday","other leave type"].map((e=>s.createElement("option",{key:e,value:e},e.charAt(0).toUpperCase()+e.slice(1)))))),s.createElement("div",{className:"filter-group"},s.createElement("label",null,"Status"),s.createElement("select",{value:f.status,onChange:e=>C("status",e.target.value),className:"form-control"},s.createElement("option",{value:"all"},"All Status"),["pending","approved","declined"].map((e=>s.createElement("option",{key:e,value:e},e.charAt(0).toUpperCase()+e.slice(1))))))),s.createElement("div",{className:"filters-actions"},s.createElement("button",{onClick:()=>{h({team:"all",user:"all",leaveType:"all",status:"all"})},className:"btn btn-secondary"},"Clear All"),s.createElement("button",{onClick:()=>q(!1),className:"btn btn-primary"},"Apply Filters"))),s.createElement("div",{className:"calendar-info"},s.createElement("p",null,"💡 Click on dates to select them for your PTO request. Selected dates will be highlighted in blue.",P()&&s.createElement("span",null," • Filters are active - some events may be hidden."))),s.createElement("div",{className:"calendar-grid"},s.createElement("div",{className:"calendar-days-header"},["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e=>s.createElement("div",{key:e,className:"calendar-day-label"},e)))),s.createElement("div",{className:"calendar-days-grid"},U.map(((e,l)=>{if(!e)return s.createElement("div",{key:l,className:"calendar-day calendar-day-empty"});const n=(r=e,i.includes(A(r)));var r;(e=>{const t=A(e);T().some((e=>t>=e.start_date&&t<=e.end_date))})(e);const m=(e=>{const t=A(e);return T().filter((e=>t>=e.start_date&&t<=e.end_date))})(e),d=e.toDateString()===(new Date).toDateString(),o=e<new Date((new Date).setHours(0,0,0,0));return s.createElement("div",{key:e.toISOString(),onClick:()=>(e=>{const s=A(e),l=t.filter((e=>(e.requester_id===u.accountId||e.requester_email===u.emailAddress)&&s>=e.start_date&&s<=e.end_date)),n=l.find(R);n?D(n):l.length>0?S("You already have a PTO request this day and it is not editable."):!e||e<new Date((new Date).setHours(0,0,0,0))||a(e)})(e),className:"calendar-day"+(o?" calendar-day-past":" calendar-day-active")+(n?" calendar-day-selected":"")+(d?" calendar-day-today":"")},s.createElement("div",{className:"calendar-day-inner"},s.createElement("span",{className:"calendar-day-number"+(d?" calendar-day-number-today":"")+(o?" calendar-day-number-past":"")},e.getDate()),s.createElement("div",{className:"calendar-day-events"},m.slice(0,2).map(((e,t)=>s.createElement("div",{key:"".concat(e.id,"-").concat(t),className:"calendar-event"+("approved"===e.status?" calendar-event-approved":"")+("pending"===e.status?" calendar-event-pending":"")+("declined"===e.status?" calendar-event-declined":""),title:"".concat(e.requester_name,": ").concat(e.reason)},s.createElement("span",null,(0,c.S0)(e.leave_type)),s.createElement("span",{className:"calendar-event-name"},e.requester_name)))),m.length>2&&s.createElement("div",{className:"calendar-event-more"},"+",m.length-2," more"))))})))),s.createElement("div",{className:"calendar-legend"},s.createElement("div",{className:"calendar-legend-item"},s.createElement("span",{className:"calendar-legend-dot calendar-event-approved"}),s.createElement("span",null,"Approved")),s.createElement("div",{className:"calendar-legend-item"},s.createElement("span",{className:"calendar-legend-dot calendar-event-pending"}),s.createElement("span",null,"Pending")),s.createElement("div",{className:"calendar-legend-item"},s.createElement("span",{className:"calendar-legend-dot calendar-event-declined"}),s.createElement("span",null,"Declined")),s.createElement("div",{className:"calendar-legend-item"},s.createElement("span",{className:"calendar-legend-dot calendar-day-selected"}),s.createElement("span",null,"Selected"))),b&&s.createElement(r.A,{selectedDates:i,onClose:()=>g(!1),onSubmit:async e=>{const t=await o(e);null!=t&&t.success&&g(!1)},currentUser:u,currentUserData:k,userManager:(()=>{if(null==k||!k.team_id)return null;const e=null==p?void 0:p.find((e=>e.id===k.team_id));return null!=e&&e.manager?e.manager:null})(),allUsers:v,allTeams:p,allRequests:t,isAdmin:E}),w&&s.createElement(m.A,{request:w,onClose:()=>D(null),onSave:()=>{D(null)},currentUser:u}),O&&s.createElement("div",{className:"modal-overlay"},s.createElement("div",{className:"modal-content",style:{maxWidth:400,margin:"auto",padding:24,textAlign:"center"}},s.createElement("div",{style:{marginBottom:16}},s.createElement("span",{role:"img","aria-label":"info",style:{fontSize:32}},"ℹ️")),s.createElement("div",{style:{marginBottom:16}},O),s.createElement("button",{className:"btn btn-primary",onClick:()=>S("")},"OK"))))}}},l={};function n(e){var t=l[e];if(void 0!==t)return t.exports;var a=l[e]={exports:{}};return s[e].call(a.exports,a,a.exports,n),a.exports}n.m=s,e=[],n.O=(t,a,s,l)=>{if(!a){var r=1/0;for(d=0;d<e.length;d++){a=e[d][0],s=e[d][1],l=e[d][2];for(var c=!0,m=0;m<a.length;m++)(!1&l||r>=l)&&Object.keys(n.O).every((e=>n.O[e](a[m])))?a.splice(m--,1):(c=!1,l<r&&(r=l));if(c){e.splice(d--,1);var i=s();void 0!==i&&(t=i)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[a,s,l]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},a=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,n.t=function(e,s){if(1&s&&(e=this(e)),8&s)return e;if("object"==typeof e&&e){if(4&s&&e.__esModule)return e;if(16&s&&"function"==typeof e.then)return e}var l=Object.create(null);n.r(l);var r={};t=t||[null,a({}),a([]),a(a)];for(var c=2&s&&e;"object"==typeof c&&!~t.indexOf(c);c=a(c))Object.getOwnPropertyNames(c).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,n.d(l,r),l},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={625:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var s,l,r=a[0],c=a[1],m=a[2],i=0;if(r.some((t=>0!==e[t]))){for(s in c)n.o(c,s)&&(n.m[s]=c[s]);if(m)var d=m(n)}for(t&&t(a);i<r.length;i++)l=r[i],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(d)},a=self.webpackChunkpto_request_app=self.webpackChunkpto_request_app||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var r=n.O(void 0,[96,865],(()=>n(2605)));r=n.O(r)})();