/*! For license information please see main-ab94b605.9156ccf1e3ea4dffa02e.js.LICENSE.txt */
"use strict";(this.webpackChunkpto_request_app=this.webpackChunkpto_request_app||[]).push([[6],{7049:(e,t,a)=>{a.d(t,{A:()=>ke});var n=a(6540),r=a(2492),l=a(3893),c=a(4945),i=a(2762),o=a(7623),s=a(2307),u=a(8309),m=a(4796),d=a(418),p=a(827),v=a(964),f=a(8697),E=a(2321),y=a(2795),b=a(5741),g=a(1393),h=a(8445),_=a(697),N=a(8188),w=a(2708),k=a(8686);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function O(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){C(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function D(){var e,t,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",r=a.toStringTag||"@@toStringTag";function l(a,n,r,l){var o=n&&n.prototype instanceof i?n:i,s=Object.create(o.prototype);return j(s,"_invoke",function(a,n,r){var l,i,o,s=0,u=r||[],m=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,a){return l=t,i=0,o=e,d.n=a,c}};function p(a,n){for(i=a,o=n,t=0;!m&&s&&!r&&t<u.length;t++){var r,l=u[t],p=d.p,v=l[2];a>3?(r=v===n)&&(o=l[(i=l[4])?5:(i=3,3)],l[4]=l[5]=e):l[0]<=p&&((r=a<2&&p<l[1])?(i=0,d.v=n,d.n=l[1]):p<v&&(r=a<3||l[0]>n||n>v)&&(l[4]=a,l[5]=n,d.n=v,i=0))}if(r||a>1)return c;throw m=!0,n}return function(r,u,v){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&p(u,v),i=u,o=v;(t=i<2?e:o)||!m;){l||(i?i<3?(i>1&&(d.n=-1),p(i,o)):d.n=o:d.v=o);try{if(s=2,l){if(i||(r="next"),t=l[r]){if(!(t=t.call(l,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,i<2&&(i=0)}else 1===i&&(t=l.return)&&t.call(l),i<2&&(o=TypeError("The iterator does not provide a '"+r+"' method"),i=1);l=e}else if((t=(m=d.n<0)?o:a.call(n,d))!==c)break}catch(t){l=e,i=1,o=t}finally{s=1}}return{value:t,done:m}}}(a,r,l),!0),s}var c={};function i(){}function o(){}function s(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(j(t={},n,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,j(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return o.prototype=s,j(m,"constructor",s),j(s,"constructor",o),o.displayName="GeneratorFunction",j(s,r,"GeneratorFunction"),j(m),j(m,r,"Generator"),j(m,n,(function(){return this})),j(m,"toString",(function(){return"[object Generator]"})),(D=function(){return{w:l,m:d}})()}function j(e,t,a,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}j=function(e,t,a,n){if(t)r?r(e,t,{value:a,enumerable:!n,configurable:!n,writable:!n}):e[t]=a;else{var l=function(t,a){j(e,t,(function(e){return this._invoke(t,a,e)}))};l("next",0),l("throw",1),l("return",2)}},j(e,t,a,n)}function P(e,t,a,n,r,l,c){try{var i=e[l](c),o=i.value}catch(e){return void a(e)}i.done?t(o):Promise.resolve(o).then(n,r)}function I(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var l=e.apply(t,a);function c(e){P(l,n,r,c,i,"next",e)}function i(e){P(l,n,r,c,i,"throw",e)}c(void 0)}))}}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,c,i=[],o=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(n=l.call(a)).done)&&(i.push(n.value),i.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{if(!o&&null!=a.return&&(c=a.return(),Object(c)!==c))return}finally{if(s)throw r}}return i}}(e,t)||q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){if(e){if("string"==typeof e)return R(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var U=function(e){var t=e.isOpen,a=e.onClose,r=e.teamData,l=e.setTeamData,c=e.onSave,i=e.isEditing,o=e.loading;e.users;return t?n.createElement("div",{className:"modal-overlay"},n.createElement("div",{className:"modal-content",style:{maxWidth:"600px"}},n.createElement("div",{className:"modal-header"},n.createElement("h3",null,i?"Edit Team":"Create New Team"),n.createElement("button",{className:"modal-close-btn",onClick:a},n.createElement(f.A,{size:20}))),n.createElement("div",{className:"modal-body"},n.createElement("div",{className:"form-grid"},n.createElement("div",{className:"form-group"},n.createElement("label",null,"Team Name *"),n.createElement("input",{type:"text",value:r.team_name,onChange:function(e){return l(A(A({},r),{},{team_name:e.target.value}))},placeholder:"Enter team name",required:!0})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Department"),n.createElement("input",{type:"text",value:r.team_department,onChange:function(e){return l(A(A({},r),{},{team_department:e.target.value}))},placeholder:"Enter department"})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Business Unit"),n.createElement("input",{type:"text",value:r.team_business_unit,onChange:function(e){return l(A(A({},r),{},{team_business_unit:e.target.value}))},placeholder:"Enter business unit"})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Manager Name"),n.createElement("input",{type:"text",value:r.team_manager_name,onChange:function(e){return l(A(A({},r),{},{team_manager_name:e.target.value}))},placeholder:"Enter manager name"})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Manager ID (Jira Account ID)"),n.createElement("input",{type:"text",value:r.team_manager_id,onChange:function(e){return l(A(A({},r),{},{team_manager_id:e.target.value}))},placeholder:"Enter manager Jira account ID"})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Manager Email"),n.createElement("input",{type:"email",value:r.team_manager_email,onChange:function(e){return l(A(A({},r),{},{team_manager_email:e.target.value}))},placeholder:"Enter manager email"})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Executive Manager Name"),n.createElement("input",{type:"text",value:r.team_executive_manager_name,onChange:function(e){return l(A(A({},r),{},{team_executive_manager_name:e.target.value}))},placeholder:"Enter executive manager name"})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Executive Manager ID (Jira Account ID)"),n.createElement("input",{type:"text",value:r.team_executive_manager_id,onChange:function(e){return l(A(A({},r),{},{team_executive_manager_id:e.target.value}))},placeholder:"Enter executive manager Jira account ID"})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Executive Manager Email"),n.createElement("input",{type:"email",value:r.team_executive_manager_email,onChange:function(e){return l(A(A({},r),{},{team_executive_manager_email:e.target.value}))},placeholder:"Enter executive manager email"})))),n.createElement("div",{className:"modal-footer"},n.createElement("button",{className:"btn btn-secondary",onClick:a,disabled:o},"Cancel"),n.createElement("button",{className:"btn btn-primary",onClick:c,disabled:o||!r.team_name.trim()},o?"Saving...":i?"Update Team":"Create Team")))):null},F=function(e){var t=e.isOpen,a=e.onClose,r=e.userData,l=e.setUserData,c=e.onSave,i=e.isEditing,o=e.loading,s=e.teams;if(!t)return null;var u=function(e,t,a){l(A(A({},r),{},{standard_availability:A(A({},r.standard_availability),{},C({},e,A(A({},r.standard_availability[e]),{},C({},t,a))))}))};return n.createElement("div",{className:"modal-overlay"},n.createElement("div",{className:"modal-content",style:{maxWidth:"800px",maxHeight:"90vh",overflowY:"auto"}},n.createElement("div",{className:"modal-header"},n.createElement("h3",null,i?"Edit User":"Create New User"),n.createElement("button",{className:"modal-close-btn",onClick:a},n.createElement(f.A,{size:20}))),n.createElement("div",{className:"modal-body"},n.createElement("div",{className:"form-sections"},n.createElement("div",{className:"form-section"},n.createElement("h4",null,"Basic Information"),n.createElement("div",{className:"form-grid"},n.createElement("div",{className:"form-group"},n.createElement("label",null,"Display Name *"),n.createElement("input",{type:"text",value:r.display_name,onChange:function(e){return l(A(A({},r),{},{display_name:e.target.value}))},placeholder:"Enter display name",required:!0})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Email Address *"),n.createElement("input",{type:"email",value:r.email_address,onChange:function(e){return l(A(A({},r),{},{email_address:e.target.value}))},placeholder:"Enter email address",required:!0})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Jira Account ID"),n.createElement("input",{type:"text",value:r.jira_account_id,onChange:function(e){return l(A(A({},r),{},{jira_account_id:e.target.value}))},placeholder:"Enter Jira account ID"})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Hiring Date"),n.createElement("input",{type:"date",value:r.hiring_date,onChange:function(e){return l(A(A({},r),{},{hiring_date:e.target.value}))}})))),n.createElement("div",{className:"form-section"},n.createElement("h4",null,"Employment Information"),n.createElement("div",{className:"form-grid"},n.createElement("div",{className:"form-group"},n.createElement("label",null,"Employment Type"),n.createElement("select",{value:r.employment_type,onChange:function(e){var t="full_time"===e.target.value?40:20;l(A(A({},r),{},{employment_type:e.target.value,capacity:t}))}},n.createElement("option",{value:"full_time"},"Full Time (40h/week)"),n.createElement("option",{value:"part_time"},"Part Time (20h/week)"))),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Capacity (hours/week)"),n.createElement("input",{type:"number",value:r.capacity,onChange:function(e){return l(A(A({},r),{},{capacity:parseInt(e.target.value)||0}))},min:"1",max:"60"})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"PTO Accountability Type"),n.createElement("select",{value:r.pto_accountability_type,onChange:function(e){return l(A(A({},r),{},{pto_accountability_type:e.target.value}))}},n.createElement("option",{value:"standard_year"},"Standard Year"),n.createElement("option",{value:"work_year"},"Work Year"))))),n.createElement("div",{className:"form-section"},n.createElement("h4",null,"Permissions"),n.createElement("div",{className:"form-group"},n.createElement("label",{className:"checkbox-label"},n.createElement("input",{type:"checkbox",checked:r.isAdmin,onChange:function(e){return l(A(A({},r),{},{isAdmin:e.target.checked}))}}),n.createElement("span",null,"Is Admin")))),n.createElement("div",{className:"form-section"},n.createElement("h4",null,"Team Memberships"),n.createElement("div",{className:"team-memberships"},0===s.length?n.createElement("p",null,"No teams available. Create teams first."):s.map((function(e){var t=r.team_memberships.find((function(t){return t.team_id===(e.team_id||e.id)}));return n.createElement("div",{key:e.team_id||e.id,className:"team-membership-item"},n.createElement("div",{className:"team-info"},n.createElement(g.A,{size:16}),n.createElement("span",null,e.team_name||e.name)),n.createElement("select",{value:(null==t?void 0:t.role)||"",onChange:function(t){return a=e.team_id||e.id,n=t.target.value,c=r.team_memberships.findIndex((function(e){return e.team_id===a})),i=O(r.team_memberships),-1!==c?n?i[c]={team_id:a,role:n}:i.splice(c,1):n&&i.push({team_id:a,role:n}),void l(A(A({},r),{},{team_memberships:i}));var a,n,c,i}},n.createElement("option",{value:""},"No Role"),n.createElement("option",{value:"Member"},"Member"),n.createElement("option",{value:"Manager"},"Manager"),n.createElement("option",{value:"Executive Manager"},"Executive Manager")))})))),n.createElement("div",{className:"form-section"},n.createElement("h4",null,"Standard Availability"),n.createElement("div",{className:"availability-grid"},Object.entries(r.standard_availability).map((function(e){var t=x(e,2),a=t[0],r=t[1];return n.createElement("div",{key:a,className:"availability-day"},n.createElement("div",{className:"day-header"},n.createElement("label",{className:"checkbox-label"},n.createElement("input",{type:"checkbox",checked:r.working,onChange:function(e){return u(a,"working",e.target.checked)}}),n.createElement("span",null,a.charAt(0).toUpperCase()+a.slice(1)))),r.working&&n.createElement("div",{className:"hours-input"},n.createElement("input",{type:"number",value:r.hours,onChange:function(e){return u(a,"hours",parseInt(e.target.value)||0)},min:"0",max:"12",step:"0.5"}),n.createElement("span",null,"hours")))})))),n.createElement("div",{className:"form-section"},n.createElement("h4",null,"PTO Allowances (Days per Period)"),n.createElement("div",{className:"form-grid"},n.createElement("div",{className:"form-group"},n.createElement("label",null,"Vacation Days"),n.createElement("input",{type:"number",value:r.pto_available_in_the_period.vacation,onChange:function(e){return l(A(A({},r),{},{pto_available_in_the_period:A(A({},r.pto_available_in_the_period),{},{vacation:parseInt(e.target.value)||0}),remaining_pto_days_in_period:A(A({},r.remaining_pto_days_in_period),{},{vacation:parseInt(e.target.value)||0})}))},min:"0"})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Holiday Days"),n.createElement("input",{type:"number",value:r.pto_available_in_the_period.holiday,onChange:function(e){return l(A(A({},r),{},{pto_available_in_the_period:A(A({},r.pto_available_in_the_period),{},{holiday:parseInt(e.target.value)||0}),remaining_pto_days_in_period:A(A({},r.remaining_pto_days_in_period),{},{holiday:parseInt(e.target.value)||0})}))},min:"0"})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Personal Days"),n.createElement("input",{type:"number",value:r.pto_available_in_the_period.personal,onChange:function(e){return l(A(A({},r),{},{pto_available_in_the_period:A(A({},r.pto_available_in_the_period),{},{personal:parseInt(e.target.value)||0}),remaining_pto_days_in_period:A(A({},r.remaining_pto_days_in_period),{},{personal:parseInt(e.target.value)||0})}))},min:"0"})))))),n.createElement("div",{className:"modal-footer"},n.createElement("button",{className:"btn btn-secondary",onClick:a,disabled:o},"Cancel"),n.createElement("button",{className:"btn btn-primary",onClick:c,disabled:o||!r.display_name.trim()||!r.email_address.trim()},o?"Saving...":i?"Update User":"Create User"))))};const z=function(e){var t=e.isOpen,a=e.onClose,r=e.showNotification,c=e.onRefresh,i=x((0,n.useState)("teams"),2),o=i[0],s=i[1],u=x((0,n.useState)(!1),2),m=u[0],d=u[1],p=x((0,n.useState)([]),2),v=p[0],y=p[1],b=x((0,n.useState)([]),2),S=b[0],O=b[1],T=x((0,n.useState)(""),2),C=T[0],j=T[1],P=x((0,n.useState)(!1),2),q=P[0],R=P[1],z=x((0,n.useState)(!1),2),L=z[0],M=z[1],B=x((0,n.useState)(null),2),G=B[0],V=B[1],W=x((0,n.useState)(null),2),J=W[0],H=W[1],Y=x((0,n.useState)({team_id:"",team_name:"",team_department:"",team_business_unit:"",team_manager_name:"",team_manager_id:"",team_manager_email:"",team_executive_manager_name:"",team_executive_manager_id:"",team_executive_manager_email:""}),2),K=Y[0],$=Y[1],Q=x((0,n.useState)({user_id:"",jira_account_id:"",display_name:"",email_address:"",team_memberships:[],employment_type:"full_time",capacity:40,standard_availability:{monday:{working:!0,hours:8},tuesday:{working:!0,hours:8},wednesday:{working:!0,hours:8},thursday:{working:!0,hours:8},friday:{working:!0,hours:8},saturday:{working:!1,hours:0},sunday:{working:!1,hours:0}},isAdmin:!1,isManager:[],isExecutive_Manager:[],pto_accountability_type:"standard_year",pto_available_in_the_period:{vacation:20,holiday:10,personal:1},hiring_date:"",used_pto_days_in_period:{vacation:0,holiday:0,personal:0},remaining_pto_days_in_period:{vacation:20,holiday:10,personal:1}}),2),X=Q[0],Z=Q[1];(0,n.useEffect)((function(){t&&ee()}),[t]);var ee=function(){var e=I(D().m((function e(){var t,a,n,l,c;return D().w((function(e){for(;;)switch(e.n){case 0:return d(!0),e.p=1,e.n=2,Promise.all([(0,E.invoke)("getAllTeams"),(0,E.invoke)("getAllUsers")]);case 2:t=e.v,a=x(t,2),n=a[0],l=a[1],n.success&&y(n.data||[]),l.success&&O(l.data||[]),e.n=4;break;case 3:e.p=3,c=e.v,console.error("Error loading data:",c),r("Error loading data","error");case 4:return e.p=4,d(!1),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})));return function(){return e.apply(this,arguments)}}(),te=function(){$({team_id:"",team_name:"",team_department:"",team_business_unit:"",team_manager_name:"",team_manager_id:"",team_manager_email:"",team_executive_manager_name:"",team_executive_manager_id:"",team_executive_manager_email:""}),V(null)},ae=function(){Z({user_id:"",jira_account_id:"",display_name:"",email_address:"",team_memberships:[],employment_type:"full_time",capacity:40,standard_availability:{monday:{working:!0,hours:8},tuesday:{working:!0,hours:8},wednesday:{working:!0,hours:8},thursday:{working:!0,hours:8},friday:{working:!0,hours:8},saturday:{working:!1,hours:0},sunday:{working:!1,hours:0}},isAdmin:!1,isManager:[],isExecutive_Manager:[],pto_accountability_type:"standard_year",pto_available_in_the_period:{vacation:20,holiday:10,personal:1},hiring_date:"",used_pto_days_in_period:{vacation:0,holiday:0,personal:0},remaining_pto_days_in_period:{vacation:20,holiday:10,personal:1}}),H(null)},ne=function(){var e=I(D().m((function e(){var t,a,n;return D().w((function(e){for(;;)switch(e.n){case 0:return d(!0),e.p=1,t=A(A({},K),{},{updated_at:(new Date).toISOString()}),G?t.team_id=G.team_id||G.id:t.created_at=(new Date).toISOString(),e.n=2,(0,E.invoke)(G?"updateTeam":"createTeam",t);case 2:(a=e.v).success?(r("Team ".concat(G?"updated":"created"," successfully"),"success"),R(!1),te(),ee(),null==c||c()):r(a.message||"Error saving team","error"),e.n=4;break;case 3:e.p=3,n=e.v,console.error("Error saving team:",n),r("Error saving team","error");case 4:return e.p=4,d(!1),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=I(D().m((function e(t){var a,n;return D().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm('Are you sure you want to delete team "'.concat(t.team_name||t.name,'"?'))){e.n=1;break}return e.a(2);case 1:return d(!0),e.p=2,e.n=3,(0,E.invoke)("deleteTeam",{team_id:t.team_id||t.id});case 3:(a=e.v).success?(r("Team deleted successfully","success"),ee(),null==c||c()):r(a.message||"Error deleting team","error"),e.n=5;break;case 4:e.p=4,n=e.v,console.error("Error deleting team:",n),r("Error deleting team","error");case 5:return e.p=5,d(!1),e.f(5);case 6:return e.a(2)}}),e,null,[[2,4,5,6]])})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=I(D().m((function e(){var t,a,n;return D().w((function(e){for(;;)switch(e.n){case 0:return d(!0),e.p=1,t=A(A({},X),{},{updated_at:(new Date).toISOString()}),J?t.user_id=J.user_id||J.id:t.created_at=(new Date).toISOString(),e.n=2,(0,E.invoke)(J?"updateUser":"createUser",t);case 2:(a=e.v).success?(r("User ".concat(J?"updated":"created"," successfully"),"success"),M(!1),ae(),ee(),null==c||c()):r(a.message||"Error saving user","error"),e.n=4;break;case 3:e.p=3,n=e.v,console.error("Error saving user:",n),r("Error saving user","error");case 4:return e.p=4,d(!1),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=I(D().m((function e(t){var a,n;return D().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm('Are you sure you want to delete user "'.concat(t.display_name,'"?'))){e.n=1;break}return e.a(2);case 1:return d(!0),e.p=2,e.n=3,(0,E.invoke)("deleteUser",{user_id:t.user_id||t.id});case 3:(a=e.v).success?(r("User deleted successfully","success"),ee(),null==c||c()):r(a.message||"Error deleting user","error"),e.n=5;break;case 4:e.p=4,n=e.v,console.error("Error deleting user:",n),r("Error deleting user","error");case 5:return e.p=5,d(!1),e.f(5);case 6:return e.a(2)}}),e,null,[[2,4,5,6]])})));return function(t){return e.apply(this,arguments)}}(),ie=v.filter((function(e){return(e.team_name||e.name||"").toLowerCase().includes(C.toLowerCase())||(e.team_department||e.department||"").toLowerCase().includes(C.toLowerCase())})),oe=S.filter((function(e){return(e.display_name||"").toLowerCase().includes(C.toLowerCase())||(e.email_address||"").toLowerCase().includes(C.toLowerCase())}));return t?n.createElement(n.Fragment,null,n.createElement("div",{className:"modal-overlay"},n.createElement("div",{className:"modal-content",style:{maxWidth:"1200px",width:"90vw",height:"80vh"}},n.createElement("div",{className:"modal-header"},n.createElement("h2",null,"Teams & Users Management"),n.createElement("button",{className:"modal-close-btn",onClick:a},n.createElement(f.A,{size:20}))),n.createElement("div",{className:"tabs-container"},n.createElement("div",{className:"tabs-nav"},n.createElement("button",{className:"tab ".concat("teams"===o?"active":""),onClick:function(){return s("teams")}},n.createElement(g.A,{size:16}),"Teams (",v.length,")"),n.createElement("button",{className:"tab ".concat("users"===o?"active":""),onClick:function(){return s("users")}},n.createElement(l.A,{size:16}),"Users (",S.length,")")),n.createElement("div",{className:"tab-content"},n.createElement("div",{className:"action-bar"},n.createElement("div",{className:"search-container"},n.createElement(h.A,{size:16}),n.createElement("input",{type:"text",placeholder:"Search ".concat(o,"..."),value:C,onChange:function(e){return j(e.target.value)},className:"search-input"})),n.createElement("div",{className:"action-buttons"},n.createElement("button",{className:"btn btn-primary",onClick:"teams"===o?function(){te(),R(!0)}:function(){ae(),M(!0)}},n.createElement(_.A,{size:16}),"Add ","teams"===o?"Team":"User"))),"teams"===o&&n.createElement("div",{className:"data-table-container"},m?n.createElement("div",{className:"loading-state"},"Loading teams..."):0===ie.length?n.createElement("div",{className:"empty-state"},n.createElement(g.A,{size:48}),n.createElement("h3",null,"No teams found"),n.createElement("p",null,"Create your first team to get started")):n.createElement("div",{className:"data-table"},n.createElement("div",{className:"table-header"},n.createElement("div",null,"Team Name"),n.createElement("div",null,"Department"),n.createElement("div",null,"Business Unit"),n.createElement("div",null,"Manager"),n.createElement("div",null,"Actions")),ie.map((function(e){return n.createElement("div",{key:e.team_id||e.id,className:"table-row"},n.createElement("div",{className:"cell-primary"},n.createElement(g.A,{size:16}),e.team_name||e.name),n.createElement("div",null,e.team_department||e.department||"-"),n.createElement("div",null,e.team_business_unit||e.business_unit||"-"),n.createElement("div",null,e.team_manager_name||"-"),n.createElement("div",{className:"actions-cell"},n.createElement("button",{className:"btn-icon",onClick:function(){return function(e){$({team_id:e.team_id||e.id,team_name:e.team_name||e.name||"",team_department:e.team_department||e.department||"",team_business_unit:e.team_business_unit||e.business_unit||"",team_manager_name:e.team_manager_name||"",team_manager_id:e.team_manager_id||"",team_manager_email:e.team_manager_email||"",team_executive_manager_name:e.team_executive_manager_name||"",team_executive_manager_id:e.team_executive_manager_id||"",team_executive_manager_email:e.team_executive_manager_email||""}),V(e),R(!0)}(e)},title:"Edit team"},n.createElement(N.A,{size:14})),n.createElement("button",{className:"btn-icon btn-danger",onClick:function(){return re(e)},title:"Delete team"},n.createElement(w.A,{size:14}))))})))),"users"===o&&n.createElement("div",{className:"data-table-container"},m?n.createElement("div",{className:"loading-state"},"Loading users..."):0===oe.length?n.createElement("div",{className:"empty-state"},n.createElement(k.A,{size:48}),n.createElement("h3",null,"No users found"),n.createElement("p",null,"Add your first user to get started")):n.createElement("div",{className:"data-table"},n.createElement("div",{className:"table-header"},n.createElement("div",null,"Display Name"),n.createElement("div",null,"Email"),n.createElement("div",null,"Employment Type"),n.createElement("div",null,"Teams"),n.createElement("div",null,"Admin"),n.createElement("div",null,"Actions")),oe.map((function(e){return n.createElement("div",{key:e.user_id||e.id,className:"table-row"},n.createElement("div",{className:"cell-primary"},n.createElement(k.A,{size:16}),e.display_name),n.createElement("div",null,e.email_address||"-"),n.createElement("div",null,n.createElement("span",{className:"badge ".concat("full_time"===e.employment_type?"badge-success":"badge-warning")},"full_time"===e.employment_type?"Full Time":"Part Time")),n.createElement("div",null,(e.team_memberships||[]).length," teams"),n.createElement("div",null,e.isAdmin?n.createElement("span",{className:"badge badge-info"},"Admin"):"-"),n.createElement("div",{className:"actions-cell"},n.createElement("button",{className:"btn-icon",onClick:function(){return function(e){Z({user_id:e.user_id||e.id,jira_account_id:e.jira_account_id||"",display_name:e.display_name||"",email_address:e.email_address||"",team_memberships:e.team_memberships||[],employment_type:e.employment_type||"full_time",capacity:e.capacity||40,standard_availability:e.standard_availability||{monday:{working:!0,hours:8},tuesday:{working:!0,hours:8},wednesday:{working:!0,hours:8},thursday:{working:!0,hours:8},friday:{working:!0,hours:8},saturday:{working:!1,hours:0},sunday:{working:!1,hours:0}},isAdmin:e.isAdmin||!1,isManager:e.isManager||[],isExecutive_Manager:e.isExecutive_Manager||[],pto_accountability_type:e.pto_accountability_type||"standard_year",pto_available_in_the_period:e.pto_available_in_the_period||{vacation:20,holiday:10,personal:1},hiring_date:e.hiring_date||"",used_pto_days_in_period:e.used_pto_days_in_period||{vacation:0,holiday:0,personal:0},remaining_pto_days_in_period:e.remaining_pto_days_in_period||{vacation:20,holiday:10,personal:1}}),H(e),M(!0)}(e)},title:"Edit user"},n.createElement(N.A,{size:14})),n.createElement("button",{className:"btn-icon btn-danger",onClick:function(){return ce(e)},title:"Delete user"},n.createElement(w.A,{size:14}))))})))))))),q&&n.createElement(U,{isOpen:q,onClose:function(){R(!1),te()},teamData:K,setTeamData:$,onSave:ne,isEditing:!!G,loading:m,users:S}),L&&n.createElement(F,{isOpen:L,onClose:function(){M(!1),ae()},userData:X,setUserData:Z,onSave:le,isEditing:!!J,loading:m,teams:v})):null};var L=a(4471),M=a(7235),B=a(4934),G=a(7946),V=a(5653);function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(Object(a),!0).forEach((function(t){Y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Y(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=W(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==W(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function K(){var e,t,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",r=a.toStringTag||"@@toStringTag";function l(a,n,r,l){var o=n&&n.prototype instanceof i?n:i,s=Object.create(o.prototype);return $(s,"_invoke",function(a,n,r){var l,i,o,s=0,u=r||[],m=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,a){return l=t,i=0,o=e,d.n=a,c}};function p(a,n){for(i=a,o=n,t=0;!m&&s&&!r&&t<u.length;t++){var r,l=u[t],p=d.p,v=l[2];a>3?(r=v===n)&&(o=l[(i=l[4])?5:(i=3,3)],l[4]=l[5]=e):l[0]<=p&&((r=a<2&&p<l[1])?(i=0,d.v=n,d.n=l[1]):p<v&&(r=a<3||l[0]>n||n>v)&&(l[4]=a,l[5]=n,d.n=v,i=0))}if(r||a>1)return c;throw m=!0,n}return function(r,u,v){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&p(u,v),i=u,o=v;(t=i<2?e:o)||!m;){l||(i?i<3?(i>1&&(d.n=-1),p(i,o)):d.n=o:d.v=o);try{if(s=2,l){if(i||(r="next"),t=l[r]){if(!(t=t.call(l,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,i<2&&(i=0)}else 1===i&&(t=l.return)&&t.call(l),i<2&&(o=TypeError("The iterator does not provide a '"+r+"' method"),i=1);l=e}else if((t=(m=d.n<0)?o:a.call(n,d))!==c)break}catch(t){l=e,i=1,o=t}finally{s=1}}return{value:t,done:m}}}(a,r,l),!0),s}var c={};function i(){}function o(){}function s(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):($(t={},n,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,$(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return o.prototype=s,$(m,"constructor",s),$(s,"constructor",o),o.displayName="GeneratorFunction",$(s,r,"GeneratorFunction"),$(m),$(m,r,"Generator"),$(m,n,(function(){return this})),$(m,"toString",(function(){return"[object Generator]"})),(K=function(){return{w:l,m:d}})()}function $(e,t,a,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}$=function(e,t,a,n){if(t)r?r(e,t,{value:a,enumerable:!n,configurable:!n,writable:!n}):e[t]=a;else{var l=function(t,a){$(e,t,(function(e){return this._invoke(t,a,e)}))};l("next",0),l("throw",1),l("return",2)}},$(e,t,a,n)}function Q(e,t,a,n,r,l,c){try{var i=e[l](c),o=i.value}catch(e){return void a(e)}i.done?t(o):Promise.resolve(o).then(n,r)}function X(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var l=e.apply(t,a);function c(e){Q(l,n,r,c,i,"next",e)}function i(e){Q(l,n,r,c,i,"throw",e)}c(void 0)}))}}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,c,i=[],o=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(n=l.call(a)).done)&&(i.push(n.value),i.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{if(!o&&null!=a.return&&(c=a.return(),Object(c)!==c))return}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}const te=function(e){var t=e.currentUser,a=e.showNotification,r=e.isAdmin,l=Z((0,n.useState)(null),2),c=l[0],i=l[1],o=Z((0,n.useState)({startDate:new Date((new Date).getFullYear(),0,1).toISOString().split("T")[0],endDate:new Date((new Date).getFullYear(),11,31).toISOString().split("T")[0]}),2),u=o[0],m=o[1],d=Z((0,n.useState)([]),2),p=d[0],v=d[1],f=Z((0,n.useState)(!1),2),b=(f[0],f[1]),g=Z((0,n.useState)(null),2),h=g[0],_=g[1];(0,n.useEffect)((function(){c&&N()}),[c,u]);var N=function(){var e=X(K().m((function e(){var t;return K().w((function(e){for(;;)switch(e.n){case 0:return b(!0),e.p=1,e.n=2,(0,E.invoke)("getPTORequests",{requester_id:c.accountId,startDate:u.startDate,endDate:u.endDate});case 2:(t=e.v).success&&v(t.data||[]),e.n=4;break;case 3:e.p=3,e.v,a("Failed to load PTO requests","error");case 4:return e.p=4,b(!1),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=X(K().m((function e(t){return K().w((function(e){for(;;)switch(e.n){case 0:a("PTO request updated successfully"),N();case 1:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=X(K().m((function e(n){var r;return K().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm("Are you sure you want to delete this PTO request?")){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,(0,E.invoke)("adminDeletePTORequest",{requestId:n.id,adminId:t.accountId,reason:"Admin deletion"});case 2:(r=e.v).success?(a("PTO request deleted successfully"),N()):a(r.message||"Failed to delete request","error"),e.n=4;break;case 3:e.p=3,e.v,a("Failed to delete PTO request","error");case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}(),O={totalDays:p.reduce((function(e,t){return e+(t.total_days||0)}),0),approved:p.filter((function(e){return"approved"===e.status})).length,pending:p.filter((function(e){return"pending"===e.status})).length,declined:p.filter((function(e){return"declined"===e.status})).length};return n.createElement("div",{className:"user-pto-management"},n.createElement("div",{className:"user-pto-header"},n.createElement("h2",null,"User PTO Management"),n.createElement("div",{className:"user-pto-controls"},n.createElement(y.A,{selectedUser:c,onSelect:i,placeholder:"Search and select user",useBackendSearch:!0}),n.createElement("div",{className:"date-range-filter"},n.createElement("input",{type:"date",value:u.startDate,onChange:function(e){return m((function(t){return H(H({},t),{},{startDate:e.target.value})}))},className:"form-control"}),n.createElement("span",null,"to"),n.createElement("input",{type:"date",value:u.endDate,onChange:function(e){return m((function(t){return H(H({},t),{},{endDate:e.target.value})}))},className:"form-control"})))),c&&n.createElement(n.Fragment,null,n.createElement("div",{className:"summary-cards"},n.createElement("div",{className:"summary-card"},n.createElement("div",{className:"card-icon"},n.createElement(s.A,{size:24})),n.createElement("div",{className:"card-content"},n.createElement("div",{className:"card-value"},O.totalDays),n.createElement("div",{className:"card-label"},"Total PTO Days"))),n.createElement("div",{className:"summary-card approved"},n.createElement("div",{className:"card-icon"},n.createElement(L.A,{size:24})),n.createElement("div",{className:"card-content"},n.createElement("div",{className:"card-value"},O.approved),n.createElement("div",{className:"card-label"},"Approved"))),n.createElement("div",{className:"summary-card pending"},n.createElement("div",{className:"card-icon"},n.createElement(M.A,{size:24})),n.createElement("div",{className:"card-content"},n.createElement("div",{className:"card-value"},O.pending),n.createElement("div",{className:"card-label"},"Pending")))),n.createElement("div",{className:"requests-table-container"},n.createElement("table",{className:"requests-table"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"PTO Date"),n.createElement("th",null,"Leave Type"),n.createElement("th",null,"Period"),n.createElement("th",null,"Days"),n.createElement("th",null,"Reason"),n.createElement("th",null,"Status"),r&&n.createElement("th",null,"Actions"))),n.createElement("tbody",null,p.map((function(e){return n.createElement("tr",{key:e.id},n.createElement("td",null,new Date(e.start_date).toLocaleDateString()),n.createElement("td",null,n.createElement("span",{className:"leave-type ".concat(e.leave_type)},e.leave_type)),n.createElement("td",null,e.start_date===e.end_date?new Date(e.start_date).toLocaleDateString():"".concat(new Date(e.start_date).toLocaleDateString()," - ").concat(new Date(e.end_date).toLocaleDateString())),n.createElement("td",null,e.total_days),n.createElement("td",null,e.reason),n.createElement("td",null,n.createElement("span",{className:"status-badge status-".concat(e.status)},e.status)),r&&n.createElement("td",{className:"actions"},n.createElement("button",{onClick:function(){return function(e){_(e)}(e)},className:"action-btn edit",title:"Edit request"},n.createElement(B.A,{size:16})),n.createElement("button",{onClick:function(){return S(e)},className:"action-btn delete",title:"Delete request"},n.createElement(w.A,{size:16}))))})),0===p.length&&n.createElement("tr",null,n.createElement("td",{colSpan:r?7:6,className:"empty-state"},n.createElement("div",{className:"empty-content"},n.createElement(s.A,{size:24}),n.createElement("p",null,"No PTO requests found for this period")))))))),!c&&n.createElement("div",{className:"empty-state"},n.createElement("div",{className:"empty-content"},n.createElement(G.A,{size:32}),n.createElement("p",null,"Select a user to view their PTO requests"))),h&&n.createElement(V.A,{request:h,onClose:function(){return _(null)},onSave:k,currentUser:t}))};function ae(){var e,t,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",r=a.toStringTag||"@@toStringTag";function l(a,n,r,l){var o=n&&n.prototype instanceof i?n:i,s=Object.create(o.prototype);return ne(s,"_invoke",function(a,n,r){var l,i,o,s=0,u=r||[],m=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,a){return l=t,i=0,o=e,d.n=a,c}};function p(a,n){for(i=a,o=n,t=0;!m&&s&&!r&&t<u.length;t++){var r,l=u[t],p=d.p,v=l[2];a>3?(r=v===n)&&(o=l[(i=l[4])?5:(i=3,3)],l[4]=l[5]=e):l[0]<=p&&((r=a<2&&p<l[1])?(i=0,d.v=n,d.n=l[1]):p<v&&(r=a<3||l[0]>n||n>v)&&(l[4]=a,l[5]=n,d.n=v,i=0))}if(r||a>1)return c;throw m=!0,n}return function(r,u,v){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&p(u,v),i=u,o=v;(t=i<2?e:o)||!m;){l||(i?i<3?(i>1&&(d.n=-1),p(i,o)):d.n=o:d.v=o);try{if(s=2,l){if(i||(r="next"),t=l[r]){if(!(t=t.call(l,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,i<2&&(i=0)}else 1===i&&(t=l.return)&&t.call(l),i<2&&(o=TypeError("The iterator does not provide a '"+r+"' method"),i=1);l=e}else if((t=(m=d.n<0)?o:a.call(n,d))!==c)break}catch(t){l=e,i=1,o=t}finally{s=1}}return{value:t,done:m}}}(a,r,l),!0),s}var c={};function i(){}function o(){}function s(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(ne(t={},n,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,ne(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return o.prototype=s,ne(m,"constructor",s),ne(s,"constructor",o),o.displayName="GeneratorFunction",ne(s,r,"GeneratorFunction"),ne(m),ne(m,r,"Generator"),ne(m,n,(function(){return this})),ne(m,"toString",(function(){return"[object Generator]"})),(ae=function(){return{w:l,m:d}})()}function ne(e,t,a,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}ne=function(e,t,a,n){if(t)r?r(e,t,{value:a,enumerable:!n,configurable:!n,writable:!n}):e[t]=a;else{var l=function(t,a){ne(e,t,(function(e){return this._invoke(t,a,e)}))};l("next",0),l("throw",1),l("return",2)}},ne(e,t,a,n)}function re(e,t,a,n,r,l,c){try{var i=e[l](c),o=i.value}catch(e){return void a(e)}i.done?t(o):Promise.resolve(o).then(n,r)}function le(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var l=e.apply(t,a);function c(e){re(l,n,r,c,i,"next",e)}function i(e){re(l,n,r,c,i,"throw",e)}c(void 0)}))}}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,c,i=[],o=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(n=l.call(a)).done)&&(i.push(n.value),i.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{if(!o&&null!=a.return&&(c=a.return(),Object(c)!==c))return}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ie(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function oe(e){var t=e.value,a=e.max;return n.createElement("div",{className:"progress-bar",style:{width:"100%",background:"#e0e0e0",borderRadius:6,margin:"10px 0"}},n.createElement("div",{style:{width:"".concat(t/a*100,"%"),background:"#00b38f",height:16,borderRadius:6,transition:"width 0.2s"}}))}const se=function(e){var t,a=e.isOpen,r=e.onClose,l=e.showNotification,c=ce((0,n.useState)(1),2),i=c[0],o=c[1],s=ce((0,n.useState)(null),2),u=(s[0],s[1]),m=ce((0,n.useState)([]),2),d=m[0],p=m[1],v=ce((0,n.useState)(null),2),y=v[0],b=v[1],g=ce((0,n.useState)(!1),2),h=g[0],_=g[1],N=ce((0,n.useState)(null),2),w=N[0],k=N[1],S=ce((0,n.useState)(!1),2),O=S[0],T=S[1],A=ce((0,n.useState)(!1),2),C=A[0],D=A[1],j=ce((0,n.useState)(!1),2),P=j[0],I=j[1],x=ce((0,n.useState)({currentBatch:0,totalBatches:1}),2),q=x[0],R=x[1],U=ce((0,n.useState)(null),2),F=U[0],z=U[1],L=ce((0,n.useState)(!1),2),M=L[0],B=L[1];(0,n.useEffect)((function(){a||(o(1),u(null),p([]),b(null),_(!1),k(null),T(!1),D(!1),I(!1),R({currentBatch:0,totalBatches:1}),z(null),B(!1))}),[a]);var G=function(){var e=le(ae().m((function e(){var t,a;return ae().w((function(e){for(;;)switch(e.n){case 0:return _(!0),k(null),T(!1),e.p=1,e.n=2,(0,E.invoke)("preValidatePTOImportData",{importData:d});case 2:t=e.v,k(t.summary),T(0===t.summary.missingRequesters.length&&0===t.summary.missingManagers.length&&0===t.summary.invalidLeaveTypes.length&&0===t.summary.invalidHours.length&&0===t.summary.invalidStatuses.length),l("Validation complete. Review the details below."),e.n=4;break;case 3:e.p=3,a=e.v,k(null),l("Validation failed: "+(a.message||a.toString()),"error");case 4:_(!1);case 5:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=le(ae().m((function e(){var t,a;return ae().w((function(e){for(;;)switch(e.n){case 0:return D(!0),z(null),e.p=1,e.n=2,(0,E.invoke)("preparePTOImportData",{importData:d});case 2:t=e.v,console.log("preparePTOImportData response:",t),t.success&&t.enrichedCount>0?(o(3),l("Data prepared. Ready for import.")):l(t.message||"Preparation failed.","error"),e.n=4;break;case 3:e.p=3,a=e.v,l("Preparation error: "+(a.message||a.toString()),"error");case 4:D(!1);case 5:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=le(ae().m((function e(){var t,a,n,r,c;return ae().w((function(e){for(;;)switch(e.n){case 0:I(!0),R({currentBatch:0,totalBatches:1}),z(null),e.p=1,t=!1,a=0,n=null;case 2:if(t){e.n=5;break}return e.n=3,(0,E.invoke)("importPTODailySchedulesChunked",{batchIndex:a});case 3:return(r=e.v).progress&&(R({currentBatch:r.progress.currentBatch,totalBatches:r.progress.totalBatches}),a=r.progress.currentBatch,r.progress.totalBatches),r.finished&&(n=r.result,t=!0),e.n=4,new Promise((function(e){return setTimeout(e,300)}));case 4:e.n=2;break;case 5:z(n),l(n.message,n.success?void 0:"error"),I(!1),o(4),e.n=7;break;case 6:e.p=6,c=e.v,l("Import failed: "+(c.message||c.toString()),"error"),I(!1);case 7:return e.a(2)}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();return a?n.createElement("div",{className:"modal-overlay"},n.createElement("div",{className:"modal-content",style:{maxWidth:560,margin:"auto"}},n.createElement("div",{className:"modal-header"},n.createElement("h3",null,"Import PTO Daily Schedules"),n.createElement("button",{className:"modal-close",onClick:r},n.createElement(f.A,{size:20}))),n.createElement("div",{className:"modal-body"},1===i&&n.createElement(n.Fragment,null,n.createElement("h4",null,"Step 1: Upload CSV File"),n.createElement("input",{type:"file",accept:".csv",onChange:function(e){var t=e.target.files[0];if(!t)return b("No file selected."),p([]),void u(null);u(t),b(null);var a=new FileReader;a.onload=function(e){try{var t=e.target.result.trim().split("\n");if(t.length<2)throw new Error("File must have a header and at least one data row.");var a=t[0].split(",").map((function(e){return e.trim()})),n=t.slice(1).filter((function(e){return e.trim()})).map((function(e){var t=e.split(",").map((function(e){return e.trim().replace(/^"|"$/g,"")})),n={};return a.forEach((function(e,a){var r;return n[e]=null!==(r=t[a])&&void 0!==r?r:""})),n}));p(n),o(2)}catch(e){b(e.message),p([])}},a.onerror=function(){return b("Could not read file.")},a.readAsText(t)},disabled:h||C||P}),y&&n.createElement("div",{style:{color:"red",marginTop:10}},y),d.length>0&&n.createElement("div",{style:{marginTop:10}},n.createElement("div",null,"Records loaded: ",n.createElement("b",null,d.length)),n.createElement("button",{className:"btn btn-primary",onClick:G},"Validate Data"))),2===i&&n.createElement(n.Fragment,null,n.createElement("h4",null,"Step 2: Validate Data"),n.createElement("button",{className:"btn btn-secondary",onClick:G,disabled:h||C},"Run Validation"),h&&n.createElement("div",{style:{marginTop:10}},n.createElement("span",{className:"spinner"})," Validating..."),w&&n.createElement("div",{style:{marginTop:16}},n.createElement("div",null,n.createElement("b",null,"Total records:")," ",w.totalRecords),n.createElement("div",null,n.createElement("b",null,"Unique requesters:")," ",w.uniqueRequesters," (",w.missingRequesters.length," missing)"),w.missingRequesters.length>0&&n.createElement("div",{style:{color:"red"}},"Missing requesters: ",w.missingRequesters.join(", ")),n.createElement("div",null,n.createElement("b",null,"Unique managers:")," ",w.uniqueManagers," (",w.missingManagers.length," missing)"),w.missingManagers.length>0&&n.createElement("div",{style:{color:"red"}},"Missing managers: ",w.missingManagers.join(", ")),w.invalidLeaveTypes.length>0&&n.createElement("div",{style:{color:"red"}},"Invalid leave types: ",w.invalidLeaveTypes.map((function(e){return"row ".concat(e.row,": ").concat(e.value)})).join(", ")),w.invalidHours.length>0&&n.createElement("div",{style:{color:"red"}},"Invalid hours: ",w.invalidHours.map((function(e){return"row ".concat(e.row,": ").concat(e.value)})).join(", ")),w.invalidStatuses.length>0&&n.createElement("div",{style:{color:"red"}},"Invalid statuses: ",w.invalidStatuses.map((function(e){return"row ".concat(e.row,": ").concat(e.value)})).join(", ")),w.invalidDates.length>0&&n.createElement("div",{style:{color:"red"}},"Invalid dates: ",w.invalidDates.map((function(e){return"row ".concat(e.row,": ").concat(e.value)})).join(", ")),w.missingFields.length>0&&n.createElement("div",{style:{color:"red"}},"Missing fields: ",w.missingFields.map((function(e){return"row ".concat(e.row,": ").concat(e.fields.join(", "))})).join("; ")),w.duplicateRecords.length>0&&n.createElement("div",{style:{color:"orange"}},"Duplicates: ",w.duplicateRecords.map((function(e){return"row ".concat(e.row)})).join(", "))),n.createElement("div",{style:{marginTop:16}},n.createElement("button",{className:"btn btn-primary",disabled:!w||!O||C,onClick:V},"Prepare Data for Import"),n.createElement("button",{className:"btn",onClick:function(){return o(1)}},"Back"))),(null==F||null===(t=F.errors)||void 0===t?void 0:t.length)>0&&n.createElement("div",{className:"alert alert-danger"},n.createElement("ul",null,F.errors.map((function(e,t){return n.createElement("li",{key:t},"Row ".concat(e.row,": ").concat(e.error," ").concat(e.error2))})))),3===i&&n.createElement(n.Fragment,null,n.createElement("h4",null,"Step 3: Confirm and Import"),n.createElement("div",{className:"alert alert-warning",style:{marginBottom:16}},n.createElement("strong",null,"Warning:")," This import will ",n.createElement("b",null,"REPLACE ALL")," existing PTO daily schedules in the system!"),n.createElement("label",{style:{display:"block",margin:"10px 0"}},n.createElement("input",{type:"checkbox",checked:M,onChange:function(e){return B(e.target.checked)}})," I understand this will delete all current PTO daily schedules and replace with my uploaded data."),n.createElement("button",{className:"btn btn-primary",onClick:W,disabled:!M||P},P?"Importing...":"Start Import"),P&&n.createElement("div",{style:{marginTop:16}},n.createElement(oe,{value:q.currentBatch,max:q.totalBatches}),n.createElement("div",null,"Importing batch ",q.currentBatch," of ",q.totalBatches,"..."))),4===i&&F&&n.createElement(n.Fragment,null,n.createElement("h4",null,"Import Complete"),n.createElement("div",{className:F.success?"alert alert-success":"alert alert-danger"},F.message),n.createElement("div",null,n.createElement("div",null,n.createElement("b",null,"Total records:")," ",F.data.totalRecords),n.createElement("div",null,n.createElement("b",null,"Imported:")," ",F.data.importedRecords),n.createElement("div",null,n.createElement("b",null,"Failed:")," ",F.data.failedRecords),F.data.errors&&F.data.errors.length>0&&n.createElement("div",null,n.createElement("b",null,"Errors:"),n.createElement("ul",null,F.data.errors.slice(0,10).map((function(e,t){return n.createElement("li",{key:t},e.record?"Row ".concat(e.record):""," ",e.error)}))))),n.createElement("button",{className:"btn btn-primary",onClick:r},"Close"))))):null};function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function me(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=_e(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return c=e.done,e},e:function(e){i=!0,l=e},f:function(){try{c||null==a.return||a.return()}finally{if(i)throw l}}}}function de(e){return function(e){if(Array.isArray(e))return Ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_e(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ve(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(a),!0).forEach((function(t){fe(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function fe(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=ue(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ue(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ee(){var e,t,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",r=a.toStringTag||"@@toStringTag";function l(a,n,r,l){var o=n&&n.prototype instanceof i?n:i,s=Object.create(o.prototype);return ye(s,"_invoke",function(a,n,r){var l,i,o,s=0,u=r||[],m=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,a){return l=t,i=0,o=e,d.n=a,c}};function p(a,n){for(i=a,o=n,t=0;!m&&s&&!r&&t<u.length;t++){var r,l=u[t],p=d.p,v=l[2];a>3?(r=v===n)&&(o=l[(i=l[4])?5:(i=3,3)],l[4]=l[5]=e):l[0]<=p&&((r=a<2&&p<l[1])?(i=0,d.v=n,d.n=l[1]):p<v&&(r=a<3||l[0]>n||n>v)&&(l[4]=a,l[5]=n,d.n=v,i=0))}if(r||a>1)return c;throw m=!0,n}return function(r,u,v){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&p(u,v),i=u,o=v;(t=i<2?e:o)||!m;){l||(i?i<3?(i>1&&(d.n=-1),p(i,o)):d.n=o:d.v=o);try{if(s=2,l){if(i||(r="next"),t=l[r]){if(!(t=t.call(l,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,i<2&&(i=0)}else 1===i&&(t=l.return)&&t.call(l),i<2&&(o=TypeError("The iterator does not provide a '"+r+"' method"),i=1);l=e}else if((t=(m=d.n<0)?o:a.call(n,d))!==c)break}catch(t){l=e,i=1,o=t}finally{s=1}}return{value:t,done:m}}}(a,r,l),!0),s}var c={};function i(){}function o(){}function s(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(ye(t={},n,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,ye(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return o.prototype=s,ye(m,"constructor",s),ye(s,"constructor",o),o.displayName="GeneratorFunction",ye(s,r,"GeneratorFunction"),ye(m),ye(m,r,"Generator"),ye(m,n,(function(){return this})),ye(m,"toString",(function(){return"[object Generator]"})),(Ee=function(){return{w:l,m:d}})()}function ye(e,t,a,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}ye=function(e,t,a,n){if(t)r?r(e,t,{value:a,enumerable:!n,configurable:!n,writable:!n}):e[t]=a;else{var l=function(t,a){ye(e,t,(function(e){return this._invoke(t,a,e)}))};l("next",0),l("throw",1),l("return",2)}},ye(e,t,a,n)}function be(e,t,a,n,r,l,c){try{var i=e[l](c),o=i.value}catch(e){return void a(e)}i.done?t(o):Promise.resolve(o).then(n,r)}function ge(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var l=e.apply(t,a);function c(e){be(l,n,r,c,i,"next",e)}function i(e){be(l,n,r,c,i,"throw",e)}c(void 0)}))}}function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,c,i=[],o=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(n=l.call(a)).done)&&(i.push(n.value),i.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{if(!o&&null!=a.return&&(c=a.return(),Object(c)!==c))return}finally{if(s)throw r}}return i}}(e,t)||_e(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){if(e){if("string"==typeof e)return Ne(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ne(e,t):void 0}}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function we(e){var t=e.title,a=e.children,r=e.onClose;return n.createElement("div",{className:"modal-overlay"},n.createElement("div",{className:"modal-content admin-modal"},n.createElement("div",{className:"modal-header"},n.createElement("h3",null,t),n.createElement("button",{className:"modal-close",onClick:r},n.createElement(f.A,{size:24}))),n.createElement("div",{className:"modal-body"},a)))}const ke=function(e){var t=e.currentUser,a=e.showNotification,f=he((0,n.useState)("overview"),2),g=f[0],h=f[1],_=he((0,n.useState)(!1),2),N=_[0],w=_[1],k=he((0,n.useState)([]),2),S=k[0],O=k[1],T=he((0,n.useState)([]),2),A=T[0],C=T[1],D=he((0,n.useState)([]),2),j=D[0],P=D[1],I=he((0,n.useState)([]),2),x=I[0],q=I[1],R=he((0,n.useState)([]),2),U=R[0],F=R[1],L=he((0,n.useState)(!1),2),M=L[0],B=L[1],G=he((0,n.useState)(!1),2),V=G[0],W=G[1],J=he((0,n.useState)(!1),2),H=J[0],Y=J[1],K=he((0,n.useState)(!1),2),$=K[0],Q=K[1],X=he((0,n.useState)(!1),2),Z=X[0],ee=X[1],ae=he((0,n.useState)(!1),2),ne=ae[0],re=ae[1],le=he((0,n.useState)(!1),2),ce=le[0],ie=le[1],oe=he((0,n.useState)({startDate:"",endDate:"",requesterId:"",managerId:"",leaveType:""}),2),pe=oe[0],fe=oe[1],ye=he((0,n.useState)({scope:"company",teamId:"",userId:"",startDate:"",endDate:"",status:"all"}),2),be=ye[0],_e=ye[1],Ne=he((0,n.useState)(Date.now()),2),ke=Ne[0],Se=Ne[1],Oe=he((0,n.useState)({totalAdmins:0,totalTeams:0,totalUsers:0,totalRequests:0,approvedRequests:0,pendingRequests:0,declinedRequests:0}),2),Te=Oe[0],Ae=Oe[1],Ce=(0,n.useRef)(),De=he((0,n.useState)("actions"),2),je=De[0],Pe=De[1],Ie=he((0,n.useState)("users"),2),xe=Ie[0],qe=Ie[1];(0,n.useEffect)((function(){Re(),Me()}),[]);var Re=function(){var e=ge(Ee().m((function e(){return Ee().w((function(e){for(;;)switch(e.n){case 0:return w(!0),e.p=1,e.n=2,Promise.all([Ue(),Fe(),ze(),Le()]);case 2:e.n=4;break;case 3:e.p=3,e.v,a("Failed to load admin data","error");case 4:return e.p=4,w(!1),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})));return function(){return e.apply(this,arguments)}}(),Ue=function(){var e=ge(Ee().m((function e(){var t,a,n,r,l,c;return Ee().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,E.invoke)("getAdminUsers");case 1:if(!(t=e.v).success){e.n=3;break}return a=t.data||[],e.n=2,(0,E.invoke)("getAllUsers");case 2:n=e.v,r=n.success&&n.data||[],l=a.map((function(e){return r.find((function(t){return t.jira_account_id===e.accountId||t.email_address===e.emailAddress}))||e})),O(l);case 3:e.n=5;break;case 4:e.p=4,c=e.v,console.error("Failed to load admin users:",c);case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e=ge(Ee().m((function e(){var t;return Ee().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,E.invoke)("getTeams");case 1:(t=e.v).success&&C(t.data||[]),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}(),ze=function(){var e=ge(Ee().m((function e(){var t;return Ee().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,E.invoke)("getAllUsers");case 1:(t=e.v).success&&P(t.data||[]),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=ge(Ee().m((function e(){var t;return Ee().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,E.invoke)("getPTORequests");case 1:(t=e.v).success&&q(t.data||[]),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=ge(Ee().m((function e(){var t,a;return Ee().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,E.invoke)("getInternalJiraUsers",{startAt:0,maxResults:50});case 1:(t=e.v).success&&F(t.data.users||[]),e.n=3;break;case 2:e.p=2,a=e.v,console.error("Failed to load Jira users:",a);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=ge(Ee().m((function e(n){var r;return Ee().w((function(e){for(;;)switch(e.n){case 0:if(n){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,(0,E.invoke)("addAdminUser",{accountId:n.accountId,addedBy:t.accountId});case 2:(r=e.v).success?(a("".concat(n.displayName," added as admin")),B(!1),Ue()):a(r.message||"Failed to add admin","error"),e.n=4;break;case 3:e.p=3,e.v,a("Failed to add admin user","error");case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}(),Ge=function(){var e=ge(Ee().m((function e(n){var r,l;return Ee().w((function(e){for(;;)switch(e.n){case 0:if(null!=n&&n.targetUser){e.n=1;break}return a("Please select a user for PTO","error"),e.a(2);case 1:return e.p=1,c=n.manager,r=c?ve(ve({},c),{},{accountId:c.accountId||c.jira_account_id||c.id,displayName:c.displayName||c.display_name||c.name,emailAddress:c.emailAddress||c.email_address,avatarUrl:c.avatarUrl||c.avatar_url}):null,e.n=2,(0,E.invoke)("submitPTOForUser",{requestData:{requester_id:n.targetUser.accountId,requester_name:n.targetUser.displayName,requester_email:n.targetUser.emailAddress,manager_id:(null==r?void 0:r.accountId)||"admin",manager_name:(null==r?void 0:r.displayName)||t.displayName,manager_email:(null==r?void 0:r.emailAddress)||t.emailAddress,start_date:n.startDate,end_date:n.endDate,leave_type:n.leaveType||"vacation",reason:n.reason||"Admin created",status:"approved",total_days:n.totalDays,total_hours:n.totalHours,daily_schedules:n.dailySchedules},submittedBy:t.accountId});case 2:(l=e.v).success?(a("PTO request created for ".concat(n.targetUser.displayName)),Y(!1),Le()):a(l.message||"Failed to create PTO request","error"),e.n=4;break;case 3:e.p=3,e.v,a("Failed to create PTO request","error");case 4:return e.a(2)}var c}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=ge(Ee().m((function e(){var t,n,r,l,c,i,o,s,u;return Ee().w((function(e){for(;;)switch(e.n){case 0:try{t=de(x),"team"===be.scope&&be.teamId?(n=j.filter((function(e){return(e.team_ids||[]).includes(be.teamId)})),r=n.map((function(e){return e.jira_account_id||e.id})),t=t.filter((function(e){return r.includes(e.requester_id)}))):"user"===be.scope&&be.userId&&(t=t.filter((function(e){return e.requester_id===be.userId}))),be.startDate&&be.endDate&&(t=t.filter((function(e){var t=new Date(e.start_date),a=new Date(be.startDate),n=new Date(be.endDate);return t>=a&&t<=n}))),"all"!==be.status&&(t=t.filter((function(e){return e.status===be.status}))),l=t.map((function(e){var t=j.find((function(t){return t.jira_account_id===e.requester_id||t.email_address===e.requester_email})),a=t?A.filter((function(e){return(t.team_ids||[]).includes(e.id)})):[];return{Date:(new Date).toLocaleDateString(),Manager:e.manager_name||"",Team:a.map((function(e){return e.name})).join(", "),Department:a.length>0?a[0].department:"",User:e.requester_name,"Start Date":e.start_date,"End Date":e.end_date,"Total Days":e.total_days||0,"Leave Type":e.leave_type,Reason:e.reason||"",Status:e.status,"Submitted Date":e.submitted_at}})),c=Object.keys(l[0]||{}),i=[c.join(",")].concat(de(l.map((function(e){return c.map((function(t){return'"'.concat((e[t]||"").toString().replace(/"/g,'""'),'"')})).join(",")})))).join("\n"),o=new Blob([i],{type:"text/csv"}),s=URL.createObjectURL(o),(u=document.createElement("a")).href=s,u.download="pto-admin-report-".concat(be.scope,"-").concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(s),a("Report downloaded successfully!"),Q(!1)}catch(e){a("Failed to generate report","error")}case 1:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}();(0,n.useEffect)((function(){var e,t;Ae({totalAdmins:S.length,totalTeams:A.length,totalUsers:j.length,totalRequests:x.length,pendingRequests:x.filter((function(e){return"pending"===e.status})).length,approvedRequests:x.filter((function(e){return"approved"===e.status})).length,declinedRequests:x.filter((function(e){return"declined"===e.status})).length,usersNotInSystem:(null===(t=j.map((function(e){return e.jira_account_id||e.email_address})).filter(Boolean),e=U.filter((function(e){return!t.includes(e.accountId)&&!t.includes(e.emailAddress)})))||void 0===e?void 0:e.length)||0})}),[S,A,j,x]);var We={requestsByWeekday:x.reduce((function(e,t){var a=new Date(t.start_date).toLocaleDateString("en-US",{weekday:"long"});return e[a]=(e[a]||0)+1,e}),{}),requestsByLeaveType:x.reduce((function(e,t){return e[t.leave_type]=(e[t.leave_type]||0)+1,e}),{}),requestsByTeam:x.reduce((function(e,t){var a=j.find((function(e){return e.jira_account_id===t.requester_id||e.email_address===t.requester_email})),n=a?A.find((function(e){return e.id===a.team_id})):null,r=(null==n?void 0:n.name)||"Unassigned";return e[r]=(e[r]||0)+1,e}),{})};function Je(e,t){if(Array.isArray(e)&&0!==e.length){var a,n=Object.keys(e[0]),r=[n.join(",")],l=me(e);try{var c=function(){var e=a.value;r.push(n.map((function(t){var a;return'"'+(null!==(a=e[t])&&void 0!==a?a:"").toString().replace(/"/g,'""')+'"'})).join(","))};for(l.s();!(a=l.n()).done;)c()}catch(e){l.e(e)}finally{l.f()}var i=r.join("\n"),o=new Blob([i],{type:"text/csv"}),s=URL.createObjectURL(o),u=document.createElement("a");u.href=s,u.download=t,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(s)}}var He=function(){var e=ge(Ee().m((function e(){var t;return Ee().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,E.invoke)("debugStorage");case 1:(t=e.v).success&&t.data?(t.data.users&&Je(t.data.users,"users.csv"),t.data.teams&&Je(t.data.teams,"teams.csv"),t.data.admins&&Je(t.data.admins.map((function(e){return{accountId:e}})),"admins.csv"),t.data.pto_requests&&Je(t.data.pto_requests,"pto_requests.csv"),t.data.pto_daily_schedules&&Je(t.data.pto_daily_schedules,"pto_daily_schedules.csv"),a("Database exported as CSV files!")):a("Failed to export database","error"),e.n=3;break;case 2:e.p=2,e.v,a("Failed to export database","error");case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}(),Ye=function(){var e=ge(Ee().m((function e(){var t;return Ee().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,E.invoke)("exportPTODailySchedules",{filters:pe});case 1:(t=e.v).success?(Je(t.data,"pto_daily_schedules.csv"),a("Daily schedules exported successfully!"),re(!1)):a(t.message||"Failed to export daily schedules","error"),e.n=3;break;case 2:e.p=2,e.v,a("Failed to export daily schedules","error");case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}();return n.createElement("div",{className:"admin-dashboard"},n.createElement("div",{className:"admin-tabs"},n.createElement("button",{className:"admin-tab ".concat("overview"===g?"active":""),onClick:function(){return h("overview")}},n.createElement(r.A,{size:16}),"Overview"),n.createElement("button",{className:"admin-tab ".concat("users"===g?"active":""),onClick:function(){return h("users")}},n.createElement(l.A,{size:16}),"Users"),n.createElement("button",{className:"admin-tab ".concat("analytics"===g?"active":""),onClick:function(){return h("analytics")}},n.createElement(c.A,{size:16}),"Analytics"),n.createElement("button",{className:"admin-tab".concat("actions"===je?" active":""),onClick:function(){return Pe("actions")}},"Actions"),n.createElement("button",{className:"admin-tab".concat("pto-balances"===je?" active":""),onClick:function(){return Pe("pto-balances")}},"PTO Balances")),"overview"===g&&n.createElement("div",{className:"admin-section"},n.createElement("div",{className:"admin-stats-grid"},n.createElement("div",{className:"admin-stat-card admin-stat-purple"},n.createElement("div",{className:"stat-icon"},n.createElement(r.A,{size:24})),n.createElement("div",{className:"stat-content"},n.createElement("div",{className:"stat-value"},Te.totalAdmins),n.createElement("div",{className:"stat-label"},"Admin Users"))),n.createElement("div",{className:"admin-stat-card admin-stat-blue"},n.createElement("div",{className:"stat-icon"},n.createElement(i.A,{size:24})),n.createElement("div",{className:"stat-content"},n.createElement("div",{className:"stat-value"},Te.totalTeams),n.createElement("div",{className:"stat-label"},"Teams"))),n.createElement("div",{className:"admin-stat-card admin-stat-emerald"},n.createElement("div",{className:"stat-icon"},n.createElement(o.A,{size:24})),n.createElement("div",{className:"stat-content"},n.createElement("div",{className:"stat-value"},Te.totalUsers),n.createElement("div",{className:"stat-label"},"Users"))),n.createElement("div",{className:"admin-stat-card admin-stat-indigo"},n.createElement("div",{className:"stat-icon"},n.createElement(s.A,{size:24})),n.createElement("div",{className:"stat-content"},n.createElement("div",{className:"stat-value"},Te.totalRequests),n.createElement("div",{className:"stat-label"},"Total Requests"),n.createElement("div",{className:"stat-breakdown"},n.createElement("span",{className:"breakdown-item green"},Te.approvedRequests," approved"),n.createElement("span",{className:"breakdown-item orange"},Te.pendingRequests," pending"),n.createElement("span",{className:"breakdown-item red"},Te.declinedRequests," declined"))))),n.createElement("div",{className:"card admin-actions-card"},n.createElement("div",{className:"card-header"},n.createElement("h3",null,"Actions")),n.createElement("div",{className:"card-body"},n.createElement("div",{className:"admin-actions-grid"},n.createElement("button",{onClick:function(){Se(Date.now()),Y(!0)},className:"admin-action-btn"},n.createElement("div",{className:"action-icon bg-green"},n.createElement(s.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"Create PTO"),n.createElement("div",{className:"action-desc"},"Create PTO requests for users"))),n.createElement("button",{onClick:function(){return Q(!0)},className:"admin-action-btn"},n.createElement("div",{className:"action-icon bg-blue"},n.createElement(u.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"Generate Reports"),n.createElement("div",{className:"action-desc"},"Export detailed PTO reports"))),n.createElement("button",{onClick:function(){return W(!0)},className:"admin-action-btn"},n.createElement("div",{className:"action-icon bg-indigo"},n.createElement(l.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"Manage Teams & Users"),n.createElement("div",{className:"action-desc"},"Advanced team and user management"))),n.createElement("button",{onClick:He,className:"admin-action-btn"},n.createElement("div",{className:"action-icon bg-yellow"},n.createElement(u.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"Export Database"),n.createElement("div",{className:"action-desc"},"Download all tables as CSV"))),n.createElement("button",{onClick:function(){return ee(!0)},className:"admin-action-btn"},n.createElement("div",{className:"action-icon bg-purple"},n.createElement(m.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"Import PTOs"),n.createElement("div",{className:"action-desc"},"Import PTO daily schedules from CSV"))),n.createElement("button",{onClick:function(){return re(!0)},className:"admin-action-btn"},n.createElement("div",{className:"action-icon bg-pink"},n.createElement(u.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"Export Daily Schedules"),n.createElement("div",{className:"action-desc"},"Export PTO daily schedules"))),n.createElement("button",{onClick:ge(Ee().m((function e(){var t,n,r,l,c,i,o,s,u;return Ee().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm("This will check all teams and fix any manager fields that are objects. Proceed?")){e.n=1;break}return e.a(2);case 1:return w(!0),e.p=2,e.n=3,(0,E.invoke)("getTeams");case 3:if((t=e.v).success){e.n=4;break}throw new Error("Failed to fetch teams");case 4:n=t.data||[],r=0,l=me(n),e.p=5,l.s();case 6:if((c=l.n()).done){e.n=9;break}if(!(i=c.value).manager||"object"!==ue(i.manager)){e.n=8;break}if(!(o=i.manager.jira_account_id||i.manager.accountId||i.manager.id||null)){e.n=8;break}return e.n=7,(0,E.invoke)("updateTeam",ve(ve({},i),{},{manager:o}));case 7:r++;case 8:e.n=6;break;case 9:e.n=11;break;case 10:e.p=10,s=e.v,l.e(s);case 11:return e.p=11,l.f(),e.f(11);case 12:a("✅ Fixed ".concat(r," teams with object managers.")),Fe(),e.n=14;break;case 13:e.p=13,u=e.v,a("Failed to fix teams: "+u.message,"error");case 14:return e.p=14,w(!1),e.f(14);case 15:return e.a(2)}}),e,null,[[5,10,11,12],[2,13,14,15]])}))),className:"admin-action-btn"},n.createElement("div",{className:"action-icon bg-orange"},n.createElement(d.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"Fix Team Managers"),n.createElement("div",{className:"action-desc"},"Convert all manager fields to IDs"))),n.createElement("button",{onClick:ge(Ee().m((function e(){var n,r;return Ee().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm("⚠️ WARNING: This will DELETE ALL PTO data (requests + daily schedules). This cannot be undone. Are you sure?")){e.n=1;break}return e.a(2);case 1:if(window.confirm("Final confirmation: Delete ALL PTO data? Type YES to confirm.")){e.n=2;break}return e.a(2);case 2:return w(!0),e.p=3,e.n=4,(0,E.invoke)("cleanupPTODatabase",{adminId:t.accountId,confirmDelete:!0});case 4:(n=e.v).success?(a("✅ Cleanup complete: ".concat(n.data.deletedCount," items removed")),Re()):a(n.message||"Cleanup failed","error"),e.n=6;break;case 5:e.p=5,r=e.v,a("Cleanup failed: "+r.message,"error");case 6:return e.p=6,w(!1),e.f(6);case 7:return e.a(2)}}),e,null,[[3,5,6,7]])}))),className:"admin-action-btn",disabled:N},n.createElement("div",{className:"action-icon bg-red"},n.createElement(d.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"🗑️ Cleanup PTO Database"),n.createElement("div",{className:"action-desc"},"Delete ALL PTO requests and schedules"))),n.createElement("button",{onClick:ge(Ee().m((function e(){var t,n;return Ee().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm("This will remove old conflicting database tables (pto_teams, pto_balances). Proceed?")){e.n=1;break}return e.a(2);case 1:return w(!0),e.p=2,e.n=3,(0,E.invoke)("cleanupConflictingTables");case 3:(t=e.v).success?(a("✅ Cleanup complete: Removed tables: ".concat(t.removedTables.join(", "))),Re()):a(t.message||"Cleanup failed","error"),e.n=5;break;case 4:e.p=4,n=e.v,a("Cleanup failed: "+n.message,"error");case 5:return e.p=5,w(!1),e.f(5);case 6:return e.a(2)}}),e,null,[[2,4,5,6]])}))),className:"admin-action-btn",disabled:N},n.createElement("div",{className:"action-icon bg-purple"},n.createElement(d.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"🧹 Cleanup DB Schema"),n.createElement("div",{className:"action-desc"},"Remove conflicting database tables"))),n.createElement("button",{onClick:ge(Ee().m((function e(){var n,r;return Ee().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm("⚠️ WARNING: This will DELETE ALL PTO data (requests + daily schedules). This cannot be undone. Are you sure?")){e.n=1;break}return e.a(2);case 1:if(window.confirm("Final confirmation: Delete ALL PTO data? Type YES to confirm.")){e.n=2;break}return e.a(2);case 2:return w(!0),e.p=3,e.n=4,(0,E.invoke)("cleanupPTODatabase",{adminId:t.accountId,confirmDelete:!0});case 4:(n=e.v).success?(a("✅ Cleanup complete: ".concat(n.data.deletedCount," items removed")),Re()):a(n.message||"Cleanup failed","error"),e.n=6;break;case 5:e.p=5,r=e.v,a("Cleanup failed: "+r.message,"error");case 6:return e.p=6,w(!1),e.f(6);case 7:return e.a(2)}}),e,null,[[3,5,6,7]])}))),className:"admin-action-btn",disabled:N},n.createElement("div",{className:"action-icon bg-red"},n.createElement(d.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"🗑️ Cleanup PTO Database"),n.createElement("div",{className:"action-desc"},"Delete ALL PTO requests and schedules"))),n.createElement("button",{onClick:ge(Ee().m((function e(){var t,n,r,l;return Ee().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,E.invoke)("checkStorageSizes");case 1:(t=e.v).success?(n=t.data,r="📊 Storage Report (".concat(n.totalSizeKB,"KB / ").concat(n.maxAllowedKB,"KB max):\n\n"),Object.entries(n.tables).forEach((function(e){var t=he(e,2),a=t[0],n=t[1];r+="".concat(a,": ").concat(n.records," records, ").concat(n.sizeKB,"KB\n")})),n.totalSize>.8*n.maxAllowed&&(r+="\n⚠️ WARNING: Storage is over 80% full!"),alert(r)):a("Failed to check storage sizes","error"),e.n=3;break;case 2:e.p=2,l=e.v,a("Storage check failed: "+l.message,"error");case 3:return e.a(2)}}),e,null,[[0,2]])}))),className:"admin-action-btn"},n.createElement("div",{className:"action-icon bg-yellow"},n.createElement(p.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"📊 Check Storage"),n.createElement("div",{className:"action-desc"},"View storage usage by table"))),n.createElement("button",{onClick:ge(Ee().m((function e(){var t,n;return Ee().w((function(e){for(;;)switch(e.n){case 0:if(!window.confirm("This will migrate your database to the new structure. This process will backup and restructure your existing data. Proceed?")){e.n=5;break}return w(!0),e.p=1,e.n=2,(0,E.invoke)("migrateDatabaseStructure");case 2:(t=e.v).success?(a("✅ Migration completed: ".concat(t.data.migratedUsers," users, ").concat(t.data.migratedTeams," teams, ").concat(t.data.migratedPtoRequests," PTO requests migrated.")),loadStats()):a(t.message||"Migration failed","error"),e.n=4;break;case 3:e.p=3,n=e.v,a("Migration failed: "+n.message,"error");case 4:return e.p=4,w(!1),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])}))),className:"admin-action-btn",disabled:N},n.createElement("div",{className:"action-icon bg-blue"},n.createElement(v.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"🔄 Migrate Database"),n.createElement("div",{className:"action-desc"},"Restructure database to new schema"))),n.createElement("button",{onClick:function(){return ie(!0)},className:"admin-action-btn"},n.createElement("div",{className:"action-icon bg-orange"},n.createElement(m.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"Import Database"),n.createElement("div",{className:"action-desc"},"Upload a JSON file to replace all data")))))),n.createElement("div",{className:"card recent-activity-card"},n.createElement("div",{className:"card-header"},n.createElement("h3",null,"Recent PTO Activity")),n.createElement("div",{className:"card-body"},0===x.length?n.createElement("div",{className:"empty-state-small"},n.createElement(s.A,{size:32}),n.createElement("p",null,"No PTO requests yet")):n.createElement("div",{className:"recent-requests-list"},x.sort((function(e,t){return new Date(t.submitted_at)-new Date(e.submitted_at)})).slice(0,5).map((function(e){var t;return n.createElement("div",{key:e.id,className:"recent-request-item"},n.createElement("div",{className:"request-avatar"},(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||"?"),n.createElement("div",{className:"request-details"},n.createElement("div",{className:"request-summary"},n.createElement("span",{className:"requester-name"},e.requester_name),n.createElement("span",{className:"request-action"},"requested ",e.leave_type)),n.createElement("div",{className:"request-meta"},new Date(e.start_date).toLocaleDateString()," • ",e.total_days," days")),n.createElement("div",{className:"request-status"},n.createElement("span",{className:"status-badge status-".concat(e.status)},e.status)))})))))),"users"===g&&n.createElement("div",{className:"admin-section"},n.createElement(te,{currentUser:t,showNotification:a,isAdmin:!0})),"analytics"===g&&n.createElement("div",{className:"admin-section"},n.createElement("div",{className:"section-header"},n.createElement("h3",null,"Analytics Dashboard")),n.createElement("div",{className:"analytics-grid"},n.createElement("div",{className:"card analytics-card"},n.createElement("div",{className:"card-header"},n.createElement("h4",null,"Requests by Weekday")),n.createElement("div",{className:"card-body"},n.createElement("div",{className:"analytics-list"},Object.entries(We.requestsByWeekday).sort((function(e,t){var a=he(e,2)[1];return he(t,2)[1]-a})).map((function(e){var t=he(e,2),a=t[0],r=t[1];return n.createElement("div",{key:a,className:"analytics-item"},n.createElement("div",{className:"item-info"},n.createElement("span",{className:"item-icon"},"📅"),n.createElement("span",{className:"item-label"},a)),n.createElement("div",{className:"item-value"},r))}))))))),M&&n.createElement(we,{title:"Add Admin User",onClose:function(){return B(!1)}},n.createElement("div",{className:"add-admin-content"},n.createElement("p",null,"Grant admin privileges to a user. They will be able to manage teams, users, and all PTO requests."),n.createElement(y.A,{selectedUser:null,onSelect:Be,placeholder:"Search and select user to grant admin privileges",useBackendSearch:!1}))),$&&n.createElement(we,{title:"Generate PTO Report",onClose:function(){return Q(!1)}},n.createElement("div",{className:"report-config"},n.createElement("div",{className:"form-group"},n.createElement("label",null,"Report Scope"),n.createElement("select",{value:be.scope,onChange:function(e){return _e((function(t){return ve(ve({},t),{},{scope:e.target.value})}))},className:"form-control"},n.createElement("option",{value:"company"},"Full Company"),n.createElement("option",{value:"team"},"Specific Team"),n.createElement("option",{value:"user"},"Specific User"))),"team"===be.scope&&n.createElement("div",{className:"form-group"},n.createElement("label",null,"Select Team"),n.createElement("select",{value:be.teamId,onChange:function(e){return _e((function(t){return ve(ve({},t),{},{teamId:e.target.value})}))},className:"form-control"},n.createElement("option",{value:""},"Choose a team"),A.map((function(e){return n.createElement("option",{key:e.id,value:e.id},e.name)})))),"user"===be.scope&&n.createElement("div",{className:"form-group"},n.createElement("label",null,"Select User"),n.createElement("select",{value:be.userId,onChange:function(e){return _e((function(t){return ve(ve({},t),{},{userId:e.target.value})}))},className:"form-control"},n.createElement("option",{value:""},"Choose a user"),j.map((function(e){return n.createElement("option",{key:e.id,value:e.jira_account_id||e.id},e.display_name||e.displayName)})))),n.createElement("div",{className:"form-row"},n.createElement("div",{className:"form-group"},n.createElement("label",null,"Start Date"),n.createElement("input",{type:"date",value:be.startDate,onChange:function(e){return _e((function(t){return ve(ve({},t),{},{startDate:e.target.value})}))},className:"form-control"})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"End Date"),n.createElement("input",{type:"date",value:be.endDate,onChange:function(e){return _e((function(t){return ve(ve({},t),{},{endDate:e.target.value})}))},className:"form-control"}))),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Status Filter"),n.createElement("select",{value:be.status,onChange:function(e){return _e((function(t){return ve(ve({},t),{},{status:e.target.value})}))},className:"form-control"},n.createElement("option",{value:"all"},"All Status"),n.createElement("option",{value:"pending"},"Pending"),n.createElement("option",{value:"approved"},"Approved"),n.createElement("option",{value:"declined"},"Declined"))),n.createElement("div",{className:"form-actions"},n.createElement("button",{onClick:function(){return Q(!1)},className:"btn btn-secondary"},"Cancel"),n.createElement("button",{onClick:Ve,className:"btn btn-primary"},n.createElement(u.A,{size:16}),"Generate Report")))),V&&n.createElement(z,{isOpen:V,onClose:function(){return W(!1)},showNotification:a,onRefresh:Re}),H&&n.createElement(b.A,{key:ke,isAdminMode:!0,onClose:function(){return Y(!1)},onSubmit:Ge,allUsers:j,allTeams:A,allRequests:x,currentUser:t,isAdmin:!0}),Z&&n.createElement(se,{isOpen:Z,onClose:function(){return ee(!1)},currentUser:t,showNotification:a,onImportSuccess:Le}),ne&&n.createElement(we,{title:"Export PTO Daily Schedules",onClose:function(){return re(!1)}},n.createElement("div",{className:"export-filters"},n.createElement("div",{className:"form-row"},n.createElement("div",{className:"form-group"},n.createElement("label",null,"Start Date"),n.createElement("input",{type:"date",value:pe.startDate,onChange:function(e){return fe((function(t){return ve(ve({},t),{},{startDate:e.target.value})}))},className:"form-control"})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"End Date"),n.createElement("input",{type:"date",value:pe.endDate,onChange:function(e){return fe((function(t){return ve(ve({},t),{},{endDate:e.target.value})}))},className:"form-control"}))),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Requester"),n.createElement("select",{value:pe.requesterId,onChange:function(e){return fe((function(t){return ve(ve({},t),{},{requesterId:e.target.value})}))},className:"form-control"},n.createElement("option",{value:""},"All Requesters"),j.map((function(e){return n.createElement("option",{key:e.id,value:e.jira_account_id||e.id},e.display_name||e.displayName)})))),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Manager"),n.createElement("select",{value:pe.managerId,onChange:function(e){return fe((function(t){return ve(ve({},t),{},{managerId:e.target.value})}))},className:"form-control"},n.createElement("option",{value:""},"All Managers"),j.map((function(e){return n.createElement("option",{key:e.id,value:e.jira_account_id||e.id},e.display_name||e.displayName)})))),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Leave Type"),n.createElement("select",{value:pe.leaveType,onChange:function(e){return fe((function(t){return ve(ve({},t),{},{leaveType:e.target.value})}))},className:"form-control"},n.createElement("option",{value:""},"All Types"),n.createElement("option",{value:"vacation"},"Vacation"),n.createElement("option",{value:"sick"},"Sick Leave"),n.createElement("option",{value:"personal"},"Personal Leave"),n.createElement("option",{value:"holiday"},"Holiday"),n.createElement("option",{value:"other leave type"},"Other Leave Type"))),n.createElement("div",{className:"form-actions"},n.createElement("button",{onClick:function(){return re(!1)},className:"btn btn-secondary"},"Cancel"),n.createElement("button",{onClick:Ye,className:"btn btn-primary"},n.createElement(u.A,{size:16}),"Export Schedules"),n.createElement("button",{onClick:ge(Ee().m((function e(){var t,n,r,l,c;return Ee().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,E.invoke)("debugStorage");case 1:if(t=e.v,console.log("🔍 DEBUG Storage Response:",t),!t.success){e.n=3;break}return n=t.data.summary,a("Storage Debug: ".concat(n.ptoRequestCount," PTO requests, ").concat(n.ptoScheduleCount," daily schedules"),"info"),e.n=2,(0,E.invoke)("getPTORequests");case 2:r=e.v,console.log("🔍 DEBUG getPTORequests Response:",r),r.success&&a("getPTORequests returned: ".concat((null===(l=r.data)||void 0===l?void 0:l.length)||0," total events"),"info");case 3:e.n=5;break;case 4:e.p=4,c=e.v,console.error("Debug error:",c),a("Debug failed: "+c.message,"error");case 5:return e.a(2)}}),e,null,[[0,4]])}))),className:"btn btn-secondary"},n.createElement(u.A,{size:16}),"Debug Storage")))),ce&&n.createElement("div",{className:"modal-overlay"},n.createElement("div",{className:"modal-content",style:{maxWidth:400,margin:"auto",padding:24}},n.createElement("h4",null,"Import Database"),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Table to Replace"),n.createElement("select",{className:"form-control",value:xe,onChange:function(e){return qe(e.target.value)}},[{value:"users",label:"Users"},{value:"teams",label:"Teams"},{value:"pto_balances",label:"PTO Balances"}].map((function(e){return n.createElement("option",{key:e.value,value:e.value},e.label)})))),n.createElement("div",{className:"form-group"},n.createElement("label",null,"CSV File"),n.createElement("input",{type:"file",accept:".csv",ref:Ce,onChange:function(){var e=ge(Ee().m((function e(t){var n,r;return Ee().w((function(e){for(;;)switch(e.n){case 0:if(n=t.target.files[0]){e.n=1;break}return e.a(2);case 1:(r=new FileReader).onload=function(){var e=ge(Ee().m((function e(t){var n,r,l,c;return Ee().w((function(e){for(;;)switch(e.n){case 0:if(n=t.target.result,r=n.split(/\r?\n/).filter(Boolean),l=r[0].split(",").map((function(e){return e.trim()})),c=r.slice(1).map((function(e){var t=e.split(","),a={};return l.forEach((function(e,n){a[e]=t[n]})),a})),window.confirm("This will replace all data in the '".concat(xe,"' table. Proceed?"))){e.n=1;break}return e.a(2);case 1:return e.n=2,(0,E.invoke)("importDatabase",{table:xe,data:c});case 2:if(ie(!1),a("Imported ".concat(c.length," records into ").concat(xe,"."),"success"),"users"!==xe){e.n=3;break}return e.n=3,loadUsers();case 3:if("teams"!==xe){e.n=4;break}return e.n=4,loadTeams();case 4:if("pto_requests"!==xe){e.n=5;break}return e.n=5,Le();case 5:if("pto_daily_schedules"!==xe){e.n=6;break}return e.n=6,Le();case 6:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.readAsText(n);case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}()})),n.createElement("div",{className:"form-actions"},n.createElement("button",{className:"btn btn-secondary",onClick:function(){return ie(!1)}},"Cancel")))))}}}]);