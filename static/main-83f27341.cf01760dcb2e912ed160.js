/*! For license information please see main-83f27341.cf01760dcb2e912ed160.js.LICENSE.txt */
(()=>{"use strict";var e,t={2898:(e,t,a)=>{a.d(t,{A:()=>D});var n=a(6540),r=a(2321),l=a(3893),c=a(2307),s=a(7235),o=a(4471),i=a(6316),u=a(8686),m=a(8309),d=a(3245),f=a(808),v=a(99);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){g(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function h(){var e,t,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",r=a.toStringTag||"@@toStringTag";function l(a,n,r,l){var o=n&&n.prototype instanceof s?n:s,i=Object.create(o.prototype);return N(i,"_invoke",function(a,n,r){var l,s,o,i=0,u=r||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return l=t,s=0,o=e,d.n=a,c}};function f(a,n){for(s=a,o=n,t=0;!m&&i&&!r&&t<u.length;t++){var r,l=u[t],f=d.p,v=l[2];a>3?(r=v===n)&&(o=l[(s=l[4])?5:(s=3,3)],l[4]=l[5]=e):l[0]<=f&&((r=a<2&&f<l[1])?(s=0,d.v=n,d.n=l[1]):f<v&&(r=a<3||l[0]>n||n>v)&&(l[4]=a,l[5]=n,d.n=v,s=0))}if(r||a>1)return c;throw m=!0,n}return function(r,u,v){if(i>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,v),s=u,o=v;(t=s<2?e:o)||!m;){l||(s?s<3?(s>1&&(d.n=-1),f(s,o)):d.n=o:d.v=o);try{if(i=2,l){if(s||(r="next"),t=l[r]){if(!(t=t.call(l,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,s<2&&(s=0)}else 1===s&&(t=l.return)&&t.call(l),s<2&&(o=TypeError("The iterator does not provide a '"+r+"' method"),s=1);l=e}else if((t=(m=d.n<0)?o:a.call(n,d))!==c)break}catch(t){l=e,s=1,o=t}finally{i=1}}return{value:t,done:m}}}(a,r,l),!0),i}var c={};function s(){}function o(){}function i(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(N(t={},n,(function(){return this})),t),m=i.prototype=s.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,N(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return o.prototype=i,N(m,"constructor",i),N(i,"constructor",o),o.displayName="GeneratorFunction",N(i,r,"GeneratorFunction"),N(m),N(m,r,"Generator"),N(m,n,(function(){return this})),N(m,"toString",(function(){return"[object Generator]"})),(h=function(){return{w:l,m:d}})()}function N(e,t,a,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}N=function(e,t,a,n){if(t)r?r(e,t,{value:a,enumerable:!n,configurable:!n,writable:!n}):e[t]=a;else{var l=function(t,a){N(e,t,(function(e){return this._invoke(t,a,e)}))};l("next",0),l("throw",1),l("return",2)}},N(e,t,a,n)}function w(e,t,a,n,r,l,c){try{var s=e[l](c),o=s.value}catch(e){return void a(e)}s.done?t(o):Promise.resolve(o).then(n,r)}function _(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var l=e.apply(t,a);function c(e){w(l,n,r,c,s,"next",e)}function s(e){w(l,n,r,c,s,"throw",e)}c(void 0)}))}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,c,s=[],o=!0,i=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(n=l.call(a)).done)&&(s.push(n.value),s.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{if(!o&&null!=a.return&&(c=a.return(),Object(c)!==c))return}finally{if(i)throw r}}return s}}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return O(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}const D=function(e){var t=e.currentUser,a=e.isAdmin,p=e.showNotification,E=S((0,n.useState)(null),2),N=E[0],w=E[1],k=S((0,n.useState)("current_month"),2),O=k[0],D=(k[1],S((0,n.useState)("all"),2)),A=D[0],T=D[1],q=S((0,n.useState)([]),2),j=q[0],P=q[1],C=S((0,n.useState)([]),2),R=C[0],I=C[1],U=S((0,n.useState)([]),2),x=U[0],F=U[1],L=S((0,n.useState)(!0),2),B=L[0],z=L[1],M=S((0,n.useState)({}),2),G=M[0],W=M[1],Y=S((0,n.useState)(!1),2),H=(Y[0],Y[1],S((0,n.useState)({preset:"current_month",from:"",to:""}),2)),K=H[0],V=H[1];(0,n.useEffect)((function(){J()}),[t]),(0,n.useEffect)((function(){N&&$()}),[N,O]);var J=function(){var e=_(h().m((function e(){var n,l,c,s;return h().w((function(e){for(;;)switch(e.n){case 0:return z(!0),e.p=1,e.n=2,(0,r.invoke)("getTeams");case 2:if((n=e.v).success&&(l=n.data||[],c=a?l:l.filter((function(e){var a,n;return(null===(a=e.manager)||void 0===a?void 0:a.accountId)===t.accountId||(null===(n=e.manager)||void 0===n?void 0:n.jira_account_id)===t.accountId})),P(c),c.length>0&&!N&&w(c[0])),null==t||!t.emailAddress){e.n=4;break}return e.n=3,(0,r.invoke)("getPendingRequests",{managerEmail:t.emailAddress});case 3:(s=e.v).success&&F(s.data||[]);case 4:e.n=6;break;case 5:e.p=5,e.v,p("Failed to load manager data","error");case 6:return e.p=6,z(!1),e.f(6);case 7:return e.a(2)}}),e,null,[[1,5,6,7]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=_(h().m((function e(){var t,a;return h().w((function(e){for(;;)switch(e.n){case 0:if(N){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,(0,r.invoke)("getTeamPTORequests",{teamId:N.id,dateRange:O});case 2:(t=e.v).success&&I(t.data||[]),e.n=4;break;case 3:e.p=3,a=e.v,console.error("Error loading team requests:",a),I([]);case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=_(h().m((function e(t,a){var n;return h().w((function(e){for(;;)switch(e.n){case 0:return W((function(e){return b(b({},e),{},g({},t,!0))})),e.p=1,e.n=2,(0,r.invoke)("updatePTORequest",{requestId:t,status:a});case 2:(n=e.v).success?(p("Request ".concat(a.toLowerCase()," successfully")),F((function(e){return e.filter((function(e){return e.id!==t}))})),$()):p(n.message||"Failed to ".concat(a.toLowerCase()," request"),"error"),e.n=4;break;case 3:e.p=3,e.v,p("Failed to ".concat(a.toLowerCase()," request"),"error");case 4:return e.p=4,W((function(e){return b(b({},e),{},g({},t,!1))})),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})));return function(t,a){return e.apply(this,arguments)}}(),X=function(){var e=_(h().m((function e(){var a,n,r,l,c,s;return h().w((function(e){for(;;)switch(e.n){case 0:if(N){e.n=1;break}return e.a(2);case 1:try{a=Z.map((function(e){return{Date:(new Date).toLocaleDateString(),Manager:t.displayName,Team:N.name,Department:N.department||"",User:e.requester_name,"Start Date":e.start_date,"End Date":e.end_date,Period:"".concat(e.total_days," days"),"Leave Type":e.leave_type,Reason:e.reason||"",Status:e.status}})),n=Object.keys(a[0]||{}),r=[n.join(",")].concat(y(a.map((function(e){return n.map((function(t){return'"'.concat((e[t]||"").toString().replace(/"/g,'""'),'"')})).join(",")})))).join("\n"),l=new Blob([r],{type:"text/csv"}),c=URL.createObjectURL(l),(s=document.createElement("a")).href=c,s.download="team-pto-report-".concat(N.name,"-").concat(O,"-").concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(c),p("Report downloaded successfully!")}catch(e){p("Failed to generate report","error")}case 2:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=(0,n.useMemo)((function(){var e=R;return"all"!==A&&(e=e.filter((function(e){return e.requester_id===A}))),e.sort((function(e,t){return new Date(t.submitted_at)-new Date(e.submitted_at)}))}),[R,A]),ee=(0,n.useMemo)((function(){var e=Z;return{totalRequests:e.length,approvedRequests:e.filter((function(e){return"approved"===e.status})).length,pendingRequests:e.filter((function(e){return"pending"===e.status})).length,declinedRequests:e.filter((function(e){return"declined"===e.status})).length,totalDaysOff:e.filter((function(e){return"approved"===e.status})).reduce((function(e,t){return e+(t.total_days||0)}),0),ptoByLeaveType:e.filter((function(e){return"approved"===e.status})).reduce((function(e,t){var a=t.leave_type||"unknown";return e[a]=(e[a]||0)+(t.total_days||0),e}),{}),ptoByMember:e.filter((function(e){return"approved"===e.status})).reduce((function(e,t){var a=t.requester_name||"Unknown";return e[a]=(e[a]||0)+(t.total_days||0),e}),{}),ptoByWeekday:e.filter((function(e){return"approved"===e.status})).reduce((function(e,t){for(var a=new Date(t.start_date),n=new Date(t.end_date),r=new Date(a);r<=n;r.setDate(r.getDate()+1)){var l=r.toLocaleDateString("en-US",{weekday:"long"});e[l]=(e[l]||0)+1}return e}),{})}}),[Z]),te=(0,n.useMemo)((function(){var e=new Date;return R.filter((function(t){return"approved"===t.status&&new Date(t.start_date)>=e})).sort((function(e,t){return new Date(e.start_date)-new Date(t.start_date)})).slice(0,5)}),[R]),ae=function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},ne=function(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return B?n.createElement("div",{className:"manager-loading"},n.createElement("div",{className:"loading-spinner"}),n.createElement("p",null,"Loading manager dashboard...")):0===j.length?n.createElement("div",{className:"manager-empty"},n.createElement(l.A,{size:48}),n.createElement("h3",null,"No Teams to Manage"),n.createElement("p",null,"You don't have any teams assigned to manage. Contact your administrator if this is incorrect.")):n.createElement("div",{className:"manager-dashboard"},n.createElement("div",{className:"manager-header"},n.createElement("div",{className:"manager-title-section"},n.createElement("h2",null,"Manager Dashboard"),n.createElement("p",null,"Manage team PTO requests and view analytics")),n.createElement("div",{className:"manager-controls"},n.createElement("select",{value:(null==N?void 0:N.id)||"",onChange:function(e){return w(j.find((function(t){return t.id===e.target.value})))},className:"form-control"},j.map((function(e){var t;return n.createElement("option",{key:e.id,value:e.id},e.name," (",(null===(t=e.members)||void 0===t?void 0:t.length)||0," members)")}))),n.createElement(v.A,{value:K,onChange:V}))),n.createElement("div",{className:"manager-stats-grid"},n.createElement("div",{className:"stat-card stat-blue"},n.createElement("div",{className:"stat-icon"},n.createElement(c.A,{size:24})),n.createElement("div",{className:"stat-content"},n.createElement("div",{className:"stat-value"},ee.totalRequests),n.createElement("div",{className:"stat-label"},"Total Requests"))),n.createElement("div",{className:"stat-card stat-yellow"},n.createElement("div",{className:"stat-icon"},n.createElement(s.A,{size:24})),n.createElement("div",{className:"stat-content"},n.createElement("div",{className:"stat-value"},x.length),n.createElement("div",{className:"stat-label"},"Pending Approval"))),n.createElement("div",{className:"stat-card stat-green"},n.createElement("div",{className:"stat-icon"},n.createElement(o.A,{size:24})),n.createElement("div",{className:"stat-content"},n.createElement("div",{className:"stat-value"},ee.approvedRequests),n.createElement("div",{className:"stat-label"},"Approved"))),n.createElement("div",{className:"stat-card stat-purple"},n.createElement("div",{className:"stat-icon"},n.createElement(i.A,{size:24})),n.createElement("div",{className:"stat-content"},n.createElement("div",{className:"stat-value"},ee.totalDaysOff),n.createElement("div",{className:"stat-label"},"Days Off")))),x.length>0&&n.createElement("div",{className:"card pending-approvals-card"},n.createElement("div",{className:"card-header"},n.createElement("h3",null,"Pending Approvals"),n.createElement("div",{className:"pending-count"},x.length," requests")),n.createElement("div",{className:"card-body"},n.createElement("div",{className:"pending-requests-list"},x.slice(0,5).map((function(e){var t;return n.createElement("div",{key:e.id,className:"pending-request-item"},n.createElement("div",{className:"request-info"},n.createElement("div",{className:"request-user"},n.createElement("div",{className:"user-avatar"},(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||n.createElement(u.A,{size:16})),n.createElement("div",{className:"user-details"},n.createElement("div",{className:"user-name"},e.requester_name),n.createElement("div",{className:"request-details"},(0,f.S0)(e.leave_type)," ",e.leave_type," • ",e.total_days," days"))),n.createElement("div",{className:"request-dates"},n.createElement("div",null,ae(e.start_date)," - ",ae(e.end_date)),n.createElement("div",{className:"submitted-date"},"Submitted ",ne(e.submitted_at)))),n.createElement("div",{className:"request-actions-inline"},n.createElement("div",{className:"action-buttons-inline"},n.createElement("button",{onClick:function(){return Q(e.id,"approved")},disabled:G[e.id],className:"btn btn-sm btn-success"},G[e.id]?"...":"Approve"),n.createElement("button",{onClick:function(){return Q(e.id,"declined")},disabled:G[e.id],className:"btn btn-sm btn-danger"},G[e.id]?"...":"Decline"))))}))),x.length>5&&n.createElement("div",{className:"show-more"},n.createElement("p",{className:"text-sm text-gray-600"},x.length-5," more pending requests...")))),n.createElement("div",{className:"manager-content-grid"},n.createElement("div",{className:"card team-requests-card"},n.createElement("div",{className:"card-header"},n.createElement("h3",null,"Team Requests"),n.createElement("div",{className:"team-requests-controls"},n.createElement("select",{value:A,onChange:function(e){return T(e.target.value)},className:"form-control"},n.createElement("option",{value:"all"},"All Members"),j.map((function(e){return n.createElement("option",{key:e.id,value:e.id},e.name)}))),n.createElement("div",{className:"action-buttons-group"},n.createElement("button",{onClick:X,className:"btn btn-primary"},n.createElement(m.A,{size:16}),"Generate Report")))),n.createElement("div",{className:"card-body"},0===Z.length?n.createElement("div",{className:"empty-state"},n.createElement(l.A,{size:48}),n.createElement("h4",null,"No Requests Found"),n.createElement("p",null,"No PTO requests found for the selected criteria.")):n.createElement("div",{className:"team-requests-list"},Z.map((function(e){var t;return n.createElement("div",{key:e.id,className:"team-request-item"},n.createElement("div",{className:"request-header-row"},n.createElement("div",{className:"request-user-info"},n.createElement("div",{className:"user-avatar"},(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||"?"),n.createElement("div",{className:"user-details"},n.createElement("div",{className:"user-name"},e.requester_name),n.createElement("div",{className:"request-type"},(0,f.S0)(e.leave_type)," ",e.leave_type))),n.createElement("div",{className:"request-details-summary"},n.createElement("div",{className:"date-range"},ae(e.start_date)," - ",ae(e.end_date)),n.createElement("div",{className:"duration"},e.total_days," days")),n.createElement("div",{className:"request-status-section"},n.createElement(d.A,{status:e.status}),n.createElement("div",{className:"submitted-date"},ne(e.submitted_at)))),e.reason&&n.createElement("div",{className:"request-reason-row"},n.createElement("span",{className:"reason-label"},"Reason:"),n.createElement("span",{className:"reason-text"},e.reason)))}))))),n.createElement("div",{className:"card upcoming-pto-card"},n.createElement("div",{className:"card-header"},n.createElement("h3",null,"Upcoming PTO")),n.createElement("div",{className:"card-body"},0===te.length?n.createElement("div",{className:"empty-state-small"},n.createElement(c.A,{size:32}),n.createElement("p",null,"No upcoming PTO scheduled")):n.createElement("div",{className:"upcoming-pto-list"},te.map((function(e){var t;return n.createElement("div",{key:e.id,className:"upcoming-pto-item"},n.createElement("div",{className:"pto-user"},n.createElement("div",{className:"user-avatar-small"},(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||"?"),n.createElement("div",{className:"user-info-small"},n.createElement("div",{className:"user-name-small"},e.requester_name),n.createElement("div",{className:"pto-type-small"},(0,f.S0)(e.leave_type)," ",e.leave_type))),n.createElement("div",{className:"pto-dates-small"},n.createElement("div",{className:"date-range-small"},ae(e.start_date)," - ",ae(e.end_date)),n.createElement("div",{className:"duration-small"},e.total_days," days")))}))))),n.createElement("div",{className:"card analytics-card"},n.createElement("div",{className:"card-header"},n.createElement("h3",null,"Team Analytics"),n.createElement("div",{className:"analytics-period"},O.replace("_"," ").replace(/\b\w/g,(function(e){return e.toUpperCase()})))),n.createElement("div",{className:"card-body"},Object.keys(ee.ptoByLeaveType).length>0&&n.createElement("div",{className:"analytics-section"},n.createElement("h4",null,"PTO by Leave Type"),n.createElement("div",{className:"analytics-items"},Object.entries(ee.ptoByLeaveType).sort((function(e,t){var a=S(e,2)[1];return S(t,2)[1]-a})).map((function(e){var t=S(e,2),a=t[0],r=t[1];return n.createElement("div",{key:a,className:"analytics-item"},n.createElement("span",{className:"item-icon"},(0,f.S0)(a)),n.createElement("span",{className:"item-label"},a.charAt(0).toUpperCase()+a.slice(1)),n.createElement("span",{className:"item-value"},r," days"))})))),Object.keys(ee.ptoByMember).length>0&&n.createElement("div",{className:"analytics-section"},n.createElement("h4",null,"PTO by Team Member"),n.createElement("div",{className:"analytics-items"},Object.entries(ee.ptoByMember).sort((function(e,t){var a=S(e,2)[1];return S(t,2)[1]-a})).slice(0,5).map((function(e){var t=S(e,2),a=t[0],r=t[1];return n.createElement("div",{key:a,className:"analytics-item"},n.createElement("span",{className:"item-icon"},"👤"),n.createElement("span",{className:"item-label"},a),n.createElement("span",{className:"item-value"},r," days"))})))),Object.keys(ee.ptoByWeekday).length>0&&n.createElement("div",{className:"analytics-section"},n.createElement("h4",null,"Most Popular Days Off"),n.createElement("div",{className:"analytics-items"},Object.entries(ee.ptoByWeekday).sort((function(e,t){var a=S(e,2)[1];return S(t,2)[1]-a})).map((function(e){var t=S(e,2),a=t[0],r=t[1];return n.createElement("div",{key:a,className:"analytics-item"},n.createElement("span",{className:"item-icon"},"📅"),n.createElement("span",{className:"item-label"},a),n.createElement("span",{className:"item-value"},r," days"))}))))))))}},3029:(e,t,a)=>{a.d(t,{A:()=>O});var n=a(6540),r=a(2307),l=a(5627),c=a(6316),s=a(4945),o=a(8188),i=a(2708),u=a(3245),m=a(808),d=a(99),f=a(9618);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){E(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function E(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(){var e,t,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",r=a.toStringTag||"@@toStringTag";function l(a,n,r,l){var o=n&&n.prototype instanceof s?n:s,i=Object.create(o.prototype);return h(i,"_invoke",function(a,n,r){var l,s,o,i=0,u=r||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return l=t,s=0,o=e,d.n=a,c}};function f(a,n){for(s=a,o=n,t=0;!m&&i&&!r&&t<u.length;t++){var r,l=u[t],f=d.p,v=l[2];a>3?(r=v===n)&&(o=l[(s=l[4])?5:(s=3,3)],l[4]=l[5]=e):l[0]<=f&&((r=a<2&&f<l[1])?(s=0,d.v=n,d.n=l[1]):f<v&&(r=a<3||l[0]>n||n>v)&&(l[4]=a,l[5]=n,d.n=v,s=0))}if(r||a>1)return c;throw m=!0,n}return function(r,u,v){if(i>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,v),s=u,o=v;(t=s<2?e:o)||!m;){l||(s?s<3?(s>1&&(d.n=-1),f(s,o)):d.n=o:d.v=o);try{if(i=2,l){if(s||(r="next"),t=l[r]){if(!(t=t.call(l,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,s<2&&(s=0)}else 1===s&&(t=l.return)&&t.call(l),s<2&&(o=TypeError("The iterator does not provide a '"+r+"' method"),s=1);l=e}else if((t=(m=d.n<0)?o:a.call(n,d))!==c)break}catch(t){l=e,s=1,o=t}finally{i=1}}return{value:t,done:m}}}(a,r,l),!0),i}var c={};function s(){}function o(){}function i(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(h(t={},n,(function(){return this})),t),m=i.prototype=s.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,h(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return o.prototype=i,h(m,"constructor",i),h(i,"constructor",o),o.displayName="GeneratorFunction",h(i,r,"GeneratorFunction"),h(m),h(m,r,"Generator"),h(m,n,(function(){return this})),h(m,"toString",(function(){return"[object Generator]"})),(g=function(){return{w:l,m:d}})()}function h(e,t,a,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}h=function(e,t,a,n){if(t)r?r(e,t,{value:a,enumerable:!n,configurable:!n,writable:!n}):e[t]=a;else{var l=function(t,a){h(e,t,(function(e){return this._invoke(t,a,e)}))};l("next",0),l("throw",1),l("return",2)}},h(e,t,a,n)}function N(e,t,a,n,r,l,c){try{var s=e[l](c),o=s.value}catch(e){return void a(e)}s.done?t(o):Promise.resolve(o).then(n,r)}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,c,s=[],o=!0,i=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(n=l.call(a)).done)&&(s.push(n.value),s.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{if(!o&&null!=a.return&&(c=a.return(),Object(c)!==c))return}finally{if(i)throw r}}return s}}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return S(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var k=[{key:"vacation",label:"Vacation",color:"stat-blue"},{key:"holiday",label:"Holiday",color:"stat-yellow"},{key:"personal",label:"Personal",color:"stat-purple"}];const O=function(e){var t=e.requests,a=e.currentUser,v=e.onEditRequest,p=e.onCancelRequest,E=w((0,n.useState)("all"),2),h=(E[0],E[1],w((0,n.useState)("all"),2)),_=h[0],S=h[1],O=w((0,n.useState)(!1),2),D=O[0],A=O[1],T=w((0,n.useState)({preset:"all",from:"",to:""}),2),q=T[0],j=T[1],P=w((0,n.useState)(null),2),C=P[0],R=P[1],I=w((0,n.useState)(null),2),U=I[0],x=I[1],F=w((0,n.useState)(!0),2),L=F[0],B=F[1],z=w((0,n.useState)(null),2),M=(z[0],z[1]);(0,n.useEffect)((function(){function e(){var t;return t=g().m((function e(){var t,n;return g().w((function(e){for(;;)switch(e.n){case 0:return B(!0),M(null),e.p=1,e.n=2,window.forgeResolver.invoke("getUserPTOBalances",{accountId:a.accountId});case 2:(t=e.v).success?x(t.data):M(t.message||"Failed to fetch PTO balances"),e.n=4;break;case 3:e.p=3,n=e.v,M(n.message||"Failed to fetch PTO balances");case 4:return e.p=4,B(!1),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})),e=function(){var e=this,a=arguments;return new Promise((function(n,r){var l=t.apply(e,a);function c(e){N(l,n,r,c,s,"next",e)}function s(e){N(l,n,r,c,s,"throw",e)}c(void 0)}))},e.apply(this,arguments)}null!=a&&a.accountId&&function(){e.apply(this,arguments)}()}),[null==a?void 0:a.accountId]);var G=function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},W=function(e){if(e.requester_id!==a.accountId)return!1;if("pending"===e.status)return!0;if("approved"===e.status){var t=new Date;return t.setHours(0,0,0,0),new Date(e.start_date)>=t}return!1},Y=(0,n.useMemo)((function(){var e=Array.isArray(t)?b(t):[];if(q&&"all"!==q.preset){var a,n,r=new Date;switch(q.preset){case"current_year":a=new Date(r.getFullYear(),0,1),n=new Date(r.getFullYear(),11,31);break;case"last_90_days":(a=new Date(r)).setDate(r.getDate()-90),n=r;break;case"last_30_days":(a=new Date(r)).setDate(r.getDate()-30),n=r;break;case"custom":a=q.from?new Date(q.from):null,n=q.to?new Date(q.to):null;break;default:a=null,n=null}e=e.filter((function(e){var t=new Date(e.start_date),r=new Date(e.end_date);return"custom"===q.preset?!(a&&r<a)&&!(n&&t>n):(!a||r>=a)&&(!n||t<=n)}))}return _&&"all"!==_&&(e=e.filter((function(e){return e.status===_}))),e}),[t,q,_]),H=(0,n.useMemo)((function(){return b(Y).sort((function(e,t){return new Date(t.start_date)-new Date(e.start_date)}))}),[Y]),K=(0,n.useMemo)((function(){var e=Array.isArray(Y)?Y:[];return{totalRequests:e.length,pendingRequests:e.filter((function(e){return"pending"===e.status})).length,approvedRequests:e.filter((function(e){return"approved"===e.status})).length,declinedRequests:e.filter((function(e){return"declined"===e.status})).length,totalDays:e.filter((function(e){return"approved"===e.status})).reduce((function(e,t){return e+(t.total_days||0)}),0),ptoByType:e.filter((function(e){return"approved"===e.status})).reduce((function(e,t){var a=t.leave_type||"unknown";return e[a]=(e[a]||0)+(t.total_days||0),e}),{})}}),[Y]),V=(0,n.useMemo)((function(){return(Array.isArray(t)?t:[]).filter((function(e){return"approved"===e.status}))}),[t]),J=["vacation","holiday","personal"].reduce((function(e,t){return e[t]=V.filter((function(e){return e.leave_type===t})).reduce((function(e,t){return e+(t.total_days||0)}),0),e}),{}),$=(Object.values(J).reduce((function(e,t){return e+t}),0),V.filter((function(e){return"sick"===e.leave_type})).reduce((function(e,t){return e+(t.total_days||0)}),0),(0,n.useMemo)((function(){var e=[];return H.forEach((function(t){for(var a=new Date(t.start_date),n=new Date(t.end_date),r=new Date(a);r<=n;r.setDate(r.getDate()+1)){var l=new Date(r);e.push(y(y({},t),{},{scheduled_date:new Date(l)}))}})),e.sort((function(e,t){return t.scheduled_date-e.scheduled_date}))}),[H])),Q=(0,n.useMemo)((function(){var e=["vacation","holiday","personal"].reduce((function(e,t){return e[t]=$.filter((function(e){return e.leave_type===t})).length,e}),{});return{daysOffBreakdown:e,totalDaysOff:Object.values(e).reduce((function(e,t){return e+t}),0),sickDays:$.filter((function(e){return"sick"===e.leave_type})).length,ptoByType:$.reduce((function(e,t){return e[t.leave_type]=(e[t.leave_type]||0)+1,e}),{}),totalScheduled:$.length}}),[$]);return 0===t.length?n.createElement("div",{className:"requests-container"},n.createElement("div",{className:"card requests-card"},n.createElement("h2",{className:"card-title"},"My PTO Requests"),n.createElement("div",{className:"requests-empty"},n.createElement(r.A,{size:48,className:"requests-empty-icon"}),n.createElement("h3",{className:"requests-empty-title"},"No PTO requests found"),n.createElement("p",null,"You haven't submitted any PTO requests yet."),n.createElement("p",{className:"requests-empty-desc"},"Go to the Calendar tab to submit your first request!")))):n.createElement("div",{className:"requests-container"},n.createElement("div",{className:"requests-header-section"},n.createElement("div",{className:"requests-page-header"},n.createElement("h2",{className:"page-title"},"My PTO Requests"),n.createElement("div",{className:"requests-counts-header"},n.createElement("span",{className:"requests-count total"},"Total: ",t.length),n.createElement("span",{className:"requests-count pending"},"Pending: ",K.pendingRequests),n.createElement("span",{className:"requests-count approved"},"Approved: ",K.approvedRequests)),n.createElement("div",{className:"requests-page-controls"},n.createElement("button",{onClick:function(){return A(!D)},className:"btn btn-secondary ".concat(D?"active":"")},n.createElement(l.A,{size:16}),"Filters"))),D&&n.createElement("div",{className:"filters-panel"},n.createElement("div",{className:"filters-row"},n.createElement("div",{className:"filter-group"},n.createElement("label",null,"Date Range"),n.createElement(d.A,{value:q,onChange:j})),n.createElement("div",{className:"filter-group"},n.createElement("label",null,"Status"),n.createElement("select",{value:_,onChange:function(e){return S(e.target.value)},className:"form-control"},n.createElement("option",{value:"all"},"All Status"),n.createElement("option",{value:"pending"},"Pending"),n.createElement("option",{value:"approved"},"Approved"),n.createElement("option",{value:"declined"},"Declined"))))),n.createElement("div",{className:"summary-cards-container pto-balances-cards"},k.map((function(e){var t,a;return n.createElement("div",{key:e.key,className:"summary-card ".concat(e.color)},n.createElement("div",{className:"summary-icon"},(0,m.S0)(e.key)),n.createElement("div",{className:"summary-content"},n.createElement("div",{className:"summary-value"},L?"...":null!==(t=null==U||null===(a=U[e.key])||void 0===a?void 0:a.remaining_days)&&void 0!==t?t:"-"),n.createElement("div",{className:"summary-label"},"Available ",e.label," Days")))})),n.createElement("div",{className:"summary-card stat-green"},n.createElement("div",{className:"summary-icon"},n.createElement(c.A,{size:20})),n.createElement("div",{className:"summary-content"},n.createElement("div",{className:"summary-value"},Q.totalDaysOff),n.createElement("div",{className:"summary-label"},"Days Off"),n.createElement("div",{className:"summary-breakdown"},Object.keys(Q.daysOffBreakdown).map((function(e){return n.createElement("div",{key:e,className:"breakdown-row"},n.createElement("span",{className:"breakdown-label"},e.charAt(0).toUpperCase()+e.slice(1),":"),n.createElement("span",{className:"breakdown-value"},Q.daysOffBreakdown[e]))}))))),n.createElement("div",{className:"summary-card stat-red"},n.createElement("div",{className:"summary-icon"},n.createElement(s.A,{size:20})),n.createElement("div",{className:"summary-content"},n.createElement("div",{className:"summary-value"},Q.sickDays),n.createElement("div",{className:"summary-label"},"Sick Days")))),Object.keys(Q.ptoByType||{}).length>0&&n.createElement("div",{className:"card pto-breakdown-card restyled"},n.createElement("div",{className:"card-header"},n.createElement("h3",null,"PTO Breakdown by Leave Type")),n.createElement("div",{className:"card-body"},n.createElement("div",{className:"pto-breakdown-flex"},Object.entries(Q.ptoByType||{}).map((function(e){var t=w(e,2),a=t[0],r=t[1];return n.createElement("div",{key:a,className:"pto-breakdown-pill pill-".concat(a)},n.createElement("span",{className:"pill-emoji"},(0,m.S0)(a)),n.createElement("span",{className:"pill-type"},a.charAt(0).toUpperCase()+a.slice(1)),n.createElement("span",{className:"pill-days"},r," ",1===r?"day":"days"),n.createElement("span",{className:"pill-percent"},Q.totalScheduled>0?(r/Q.totalScheduled*100).toFixed(1):"0.0","%"))})))))),n.createElement("div",{className:"requests-content"},n.createElement("div",{className:"card requests-list-card"},n.createElement("div",{className:"card-header"},n.createElement("h3",null,"Request History"),n.createElement("div",{className:"requests-count"},Y.length," ",1===Y.length?"request":"requests")),n.createElement("div",{className:"card-body"},0===Y.length?n.createElement("div",{className:"no-results"},n.createElement("p",null,"No requests found for the selected filters.")):n.createElement("div",{className:"requests-table-wrapper"},n.createElement("table",{className:"requests-table"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Type"),n.createElement("th",null,"Date"),n.createElement("th",null,"Status"),n.createElement("th",null,"Reason"),n.createElement("th",null,"Submitted"),n.createElement("th",null,"Reviewed"),n.createElement("th",null,"Actions"))),n.createElement("tbody",null,$.map((function(e,t){return n.createElement("tr",{key:e.id+"-"+e.scheduled_date.toISOString(),className:"request-row"},n.createElement("td",null,n.createElement("span",{className:"request-emoji"},(0,m.S0)(e.leave_type)),e.leave_type.charAt(0).toUpperCase()+e.leave_type.slice(1)),n.createElement("td",null,G(e.scheduled_date)),n.createElement("td",null,n.createElement(u.A,{status:e.status})),n.createElement("td",null,e.reason||"-"),n.createElement("td",null,G(e.submitted_at)),n.createElement("td",null,"pending"!==e.status&&e.reviewed_at?G(e.reviewed_at):"-"),n.createElement("td",null,W(e)&&n.createElement("button",{onClick:function(){var t;W(t=e)&&R(t)},className:"btn btn-sm btn-secondary",title:"Edit Request"},n.createElement(o.A,{size:14})),function(e){if(e.requester_id!==a.accountId)return!1;if("approved"===e.status){var t=new Date(e.end_date),n=new Date;return n.setHours(0,0,0,0),t>=n}return"pending"===e.status}(e)&&n.createElement("button",{onClick:function(){return p&&p(e)},className:"btn btn-sm btn-danger",title:"Cancel Request"},n.createElement(i.A,{size:14}))))})))))))),C&&n.createElement(f.A,{request:C,onClose:function(){return R(null)},onSave:function(e){v(e),R(null)},currentUser:a}))}},7892:(e,t,a)=>{a.d(t,{A:()=>U});var n=a(6540),r=a(2492),l=a(3893),c=a(4945),s=a(2762),o=a(7623),i=a(2307),u=a(8309),m=a(964),d=a(4796),f=a(418),v=a(827),p=a(8697),y=a(2321),E=a(5143),b=a(4506),g=a(5839),h=a(4143),N=a(2435);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function _(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=C(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return c=e.done,e},e:function(e){s=!0,l=e},f:function(){try{c||null==a.return||a.return()}finally{if(s)throw l}}}}function S(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||C(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){D(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function A(){var e,t,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",r=a.toStringTag||"@@toStringTag";function l(a,n,r,l){var o=n&&n.prototype instanceof s?n:s,i=Object.create(o.prototype);return T(i,"_invoke",function(a,n,r){var l,s,o,i=0,u=r||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return l=t,s=0,o=e,d.n=a,c}};function f(a,n){for(s=a,o=n,t=0;!m&&i&&!r&&t<u.length;t++){var r,l=u[t],f=d.p,v=l[2];a>3?(r=v===n)&&(o=l[(s=l[4])?5:(s=3,3)],l[4]=l[5]=e):l[0]<=f&&((r=a<2&&f<l[1])?(s=0,d.v=n,d.n=l[1]):f<v&&(r=a<3||l[0]>n||n>v)&&(l[4]=a,l[5]=n,d.n=v,s=0))}if(r||a>1)return c;throw m=!0,n}return function(r,u,v){if(i>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,v),s=u,o=v;(t=s<2?e:o)||!m;){l||(s?s<3?(s>1&&(d.n=-1),f(s,o)):d.n=o:d.v=o);try{if(i=2,l){if(s||(r="next"),t=l[r]){if(!(t=t.call(l,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,s<2&&(s=0)}else 1===s&&(t=l.return)&&t.call(l),s<2&&(o=TypeError("The iterator does not provide a '"+r+"' method"),s=1);l=e}else if((t=(m=d.n<0)?o:a.call(n,d))!==c)break}catch(t){l=e,s=1,o=t}finally{i=1}}return{value:t,done:m}}}(a,r,l),!0),i}var c={};function s(){}function o(){}function i(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(T(t={},n,(function(){return this})),t),m=i.prototype=s.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,T(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return o.prototype=i,T(m,"constructor",i),T(i,"constructor",o),o.displayName="GeneratorFunction",T(i,r,"GeneratorFunction"),T(m),T(m,r,"Generator"),T(m,n,(function(){return this})),T(m,"toString",(function(){return"[object Generator]"})),(A=function(){return{w:l,m:d}})()}function T(e,t,a,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}T=function(e,t,a,n){if(t)r?r(e,t,{value:a,enumerable:!n,configurable:!n,writable:!n}):e[t]=a;else{var l=function(t,a){T(e,t,(function(e){return this._invoke(t,a,e)}))};l("next",0),l("throw",1),l("return",2)}},T(e,t,a,n)}function q(e,t,a,n,r,l,c){try{var s=e[l](c),o=s.value}catch(e){return void a(e)}s.done?t(o):Promise.resolve(o).then(n,r)}function j(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var l=e.apply(t,a);function c(e){q(l,n,r,c,s,"next",e)}function s(e){q(l,n,r,c,s,"throw",e)}c(void 0)}))}}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,c,s=[],o=!0,i=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(n=l.call(a)).done)&&(s.push(n.value),s.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{if(!o&&null!=a.return&&(c=a.return(),Object(c)!==c))return}finally{if(i)throw r}}return s}}(e,t)||C(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){if(e){if("string"==typeof e)return R(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function I(e){var t=e.title,a=e.children,r=e.onClose;return n.createElement("div",{className:"modal-overlay"},n.createElement("div",{className:"modal-content admin-modal"},n.createElement("div",{className:"modal-header"},n.createElement("h3",null,t),n.createElement("button",{className:"modal-close",onClick:r},n.createElement(p.A,{size:24}))),n.createElement("div",{className:"modal-body"},a)))}const U=function(e){var t=e.currentUser,a=e.showNotification,p=P((0,n.useState)("overview"),2),k=p[0],T=p[1],q=P((0,n.useState)(!1),2),C=q[0],R=q[1],U=P((0,n.useState)([]),2),x=U[0],F=U[1],L=P((0,n.useState)([]),2),B=L[0],z=L[1],M=P((0,n.useState)([]),2),G=M[0],W=M[1],Y=P((0,n.useState)([]),2),H=Y[0],K=Y[1],V=P((0,n.useState)([]),2),J=V[0],$=V[1],Q=P((0,n.useState)(!1),2),X=Q[0],Z=Q[1],ee=P((0,n.useState)(!1),2),te=ee[0],ae=ee[1],ne=P((0,n.useState)(!1),2),re=ne[0],le=ne[1],ce=P((0,n.useState)(!1),2),se=ce[0],oe=ce[1],ie=P((0,n.useState)(!1),2),ue=ie[0],me=ie[1],de=P((0,n.useState)(!1),2),fe=de[0],ve=de[1],pe=P((0,n.useState)(!1),2),ye=pe[0],Ee=pe[1],be=P((0,n.useState)({startDate:"",endDate:"",requesterId:"",managerId:"",leaveType:""}),2),ge=be[0],he=be[1],Ne=P((0,n.useState)({scope:"company",teamId:"",userId:"",startDate:"",endDate:"",status:"all"}),2),we=Ne[0],_e=Ne[1],Se=P((0,n.useState)(Date.now()),2),ke=Se[0],Oe=Se[1],De=P((0,n.useState)({totalAdmins:0,totalTeams:0,totalUsers:0,totalRequests:0,approvedRequests:0,pendingRequests:0,declinedRequests:0}),2),Ae=De[0],Te=De[1],qe=(0,n.useRef)(),je=P((0,n.useState)("actions"),2),Pe=je[0],Ce=je[1],Re=P((0,n.useState)([]),2),Ie=Re[0],Ue=Re[1],xe=P((0,n.useState)(!1),2),Fe=xe[0],Le=xe[1],Be=P((0,n.useState)((new Date).getFullYear()),2),ze=Be[0],Me=(Be[1],P((0,n.useState)({}),2)),Ge=Me[0],We=Me[1],Ye=P((0,n.useState)({user:"",leaveType:"",year:""}),2),He=Ye[0],Ke=Ye[1],Ve=P((0,n.useState)(""),2),Je=Ve[0],$e=Ve[1],Qe=P((0,n.useState)(!1),2),Xe=Qe[0],Ze=Qe[1],et=P((0,n.useState)({user_id:"",leave_type:"",allocated_days:0,year:(new Date).getFullYear()}),2),tt=et[0],at=et[1],nt=P((0,n.useState)("users"),2),rt=nt[0],lt=nt[1];(0,n.useEffect)((function(){ct(),mt()}),[]);var ct=function(){var e=j(A().m((function e(){return A().w((function(e){for(;;)switch(e.n){case 0:return R(!0),e.p=1,e.n=2,Promise.all([st(),ot(),it(),ut()]);case 2:e.n=4;break;case 3:e.p=3,e.v,a("Failed to load admin data","error");case 4:return e.p=4,R(!1),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})));return function(){return e.apply(this,arguments)}}(),st=function(){var e=j(A().m((function e(){var t,a,n,r,l,c;return A().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,y.invoke)("getAdminUsers");case 1:if(!(t=e.v).success){e.n=3;break}return a=t.data||[],e.n=2,(0,y.invoke)("getUsers");case 2:n=e.v,r=n.success&&n.data||[],l=a.map((function(e){return r.find((function(t){return t.jira_account_id===e.accountId||t.email_address===e.emailAddress}))||e})),F(l);case 3:e.n=5;break;case 4:e.p=4,c=e.v,console.error("Failed to load admin users:",c);case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(){return e.apply(this,arguments)}}(),ot=function(){var e=j(A().m((function e(){var t;return A().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,y.invoke)("getTeams");case 1:(t=e.v).success&&z(t.data||[]),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}(),it=function(){var e=j(A().m((function e(){var t;return A().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,y.invoke)("getUsers");case 1:(t=e.v).success&&W(t.data||[]),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}(),ut=function(){var e=j(A().m((function e(){var t;return A().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,y.invoke)("getPTORequests");case 1:(t=e.v).success&&K(t.data||[]),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}(),mt=function(){var e=j(A().m((function e(){var t,a;return A().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,y.invoke)("getInternalJiraUsers",{startAt:0,maxResults:50});case 1:(t=e.v).success&&$(t.data.users||[]),e.n=3;break;case 2:e.p=2,a=e.v,console.error("Failed to load Jira users:",a);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}(),dt=function(){var e=j(A().m((function e(n){var r;return A().w((function(e){for(;;)switch(e.n){case 0:if(n){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,(0,y.invoke)("addAdminUser",{accountId:n.accountId,addedBy:t.accountId});case 2:(r=e.v).success?(a("".concat(n.displayName," added as admin")),Z(!1),st()):a(r.message||"Failed to add admin","error"),e.n=4;break;case 3:e.p=3,e.v,a("Failed to add admin user","error");case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}(),ft=function(){var e=j(A().m((function e(n){var r,l;return A().w((function(e){for(;;)switch(e.n){case 0:if(null!=n&&n.targetUser){e.n=1;break}return a("Please select a user for PTO","error"),e.a(2);case 1:return e.p=1,c=n.manager,r=c?O(O({},c),{},{accountId:c.accountId||c.jira_account_id||c.id,displayName:c.displayName||c.display_name||c.name,emailAddress:c.emailAddress||c.email_address,avatarUrl:c.avatarUrl||c.avatar_url}):null,e.n=2,(0,y.invoke)("submitPTOForUser",{requestData:{requester_id:n.targetUser.accountId,requester_name:n.targetUser.displayName,requester_email:n.targetUser.emailAddress,manager_id:(null==r?void 0:r.accountId)||"admin",manager_name:(null==r?void 0:r.displayName)||t.displayName,manager_email:(null==r?void 0:r.emailAddress)||t.emailAddress,start_date:n.startDate,end_date:n.endDate,leave_type:n.leaveType||"vacation",reason:n.reason||"Admin created",status:"approved",total_days:n.totalDays,total_hours:n.totalHours,daily_schedules:n.dailySchedules},submittedBy:t.accountId});case 2:(l=e.v).success?(a("PTO request created for ".concat(n.targetUser.displayName)),le(!1),ut()):a(l.message||"Failed to create PTO request","error"),e.n=4;break;case 3:e.p=3,e.v,a("Failed to create PTO request","error");case 4:return e.a(2)}var c}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}(),vt=function(){var e=j(A().m((function e(){var t,n,r,l,c,s,o,i,u;return A().w((function(e){for(;;)switch(e.n){case 0:try{t=S(H),"team"===we.scope&&we.teamId?(n=G.filter((function(e){return(e.team_ids||[]).includes(we.teamId)})),r=n.map((function(e){return e.jira_account_id||e.id})),t=t.filter((function(e){return r.includes(e.requester_id)}))):"user"===we.scope&&we.userId&&(t=t.filter((function(e){return e.requester_id===we.userId}))),we.startDate&&we.endDate&&(t=t.filter((function(e){var t=new Date(e.start_date),a=new Date(we.startDate),n=new Date(we.endDate);return t>=a&&t<=n}))),"all"!==we.status&&(t=t.filter((function(e){return e.status===we.status}))),l=t.map((function(e){var t=G.find((function(t){return t.jira_account_id===e.requester_id||t.email_address===e.requester_email})),a=t?B.filter((function(e){return(t.team_ids||[]).includes(e.id)})):[];return{Date:(new Date).toLocaleDateString(),Manager:e.manager_name||"",Team:a.map((function(e){return e.name})).join(", "),Department:a.length>0?a[0].department:"",User:e.requester_name,"Start Date":e.start_date,"End Date":e.end_date,"Total Days":e.total_days||0,"Leave Type":e.leave_type,Reason:e.reason||"",Status:e.status,"Submitted Date":e.submitted_at}})),c=Object.keys(l[0]||{}),s=[c.join(",")].concat(S(l.map((function(e){return c.map((function(t){return'"'.concat((e[t]||"").toString().replace(/"/g,'""'),'"')})).join(",")})))).join("\n"),o=new Blob([s],{type:"text/csv"}),i=URL.createObjectURL(o),(u=document.createElement("a")).href=i,u.download="pto-admin-report-".concat(we.scope,"-").concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(i),a("Report downloaded successfully!"),oe(!1)}catch(e){a("Failed to generate report","error")}case 1:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}();(0,n.useEffect)((function(){var e,t;Te({totalAdmins:x.length,totalTeams:B.length,totalUsers:G.length,totalRequests:H.length,pendingRequests:H.filter((function(e){return"pending"===e.status})).length,approvedRequests:H.filter((function(e){return"approved"===e.status})).length,declinedRequests:H.filter((function(e){return"declined"===e.status})).length,usersNotInSystem:(null===(t=G.map((function(e){return e.jira_account_id||e.email_address})).filter(Boolean),e=J.filter((function(e){return!t.includes(e.accountId)&&!t.includes(e.emailAddress)})))||void 0===e?void 0:e.length)||0})}),[x,B,G,H]);var pt={requestsByWeekday:H.reduce((function(e,t){var a=new Date(t.start_date).toLocaleDateString("en-US",{weekday:"long"});return e[a]=(e[a]||0)+1,e}),{}),requestsByLeaveType:H.reduce((function(e,t){return e[t.leave_type]=(e[t.leave_type]||0)+1,e}),{}),requestsByTeam:H.reduce((function(e,t){var a=G.find((function(e){return e.jira_account_id===t.requester_id||e.email_address===t.requester_email})),n=a?B.find((function(e){return e.id===a.team_id})):null,r=(null==n?void 0:n.name)||"Unassigned";return e[r]=(e[r]||0)+1,e}),{})};function yt(e,t){if(Array.isArray(e)&&0!==e.length){var a,n=Object.keys(e[0]),r=[n.join(",")],l=_(e);try{var c=function(){var e=a.value;r.push(n.map((function(t){var a;return'"'+(null!==(a=e[t])&&void 0!==a?a:"").toString().replace(/"/g,'""')+'"'})).join(","))};for(l.s();!(a=l.n()).done;)c()}catch(e){l.e(e)}finally{l.f()}var s=r.join("\n"),o=new Blob([s],{type:"text/csv"}),i=URL.createObjectURL(o),u=document.createElement("a");u.href=i,u.download=t,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(i)}}var Et=function(){var e=j(A().m((function e(){var t;return A().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,y.invoke)("debugStorage");case 1:(t=e.v).success&&t.data?(t.data.users&&yt(t.data.users,"users.csv"),t.data.teams&&yt(t.data.teams,"teams.csv"),t.data.admins&&yt(t.data.admins.map((function(e){return{accountId:e}})),"admins.csv"),t.data.pto_requests&&yt(t.data.pto_requests,"pto_requests.csv"),t.data.pto_daily_schedules&&yt(t.data.pto_daily_schedules,"pto_daily_schedules.csv"),a("Database exported as CSV files!")):a("Failed to export database","error"),e.n=3;break;case 2:e.p=2,e.v,a("Failed to export database","error");case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}(),bt=function(){var e=j(A().m((function e(){var t;return A().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,y.invoke)("exportPTODailySchedules",{filters:ge});case 1:(t=e.v).success?(yt(t.data,"pto_daily_schedules.csv"),a("Daily schedules exported successfully!"),ve(!1)):a(t.message||"Failed to export daily schedules","error"),e.n=3;break;case 2:e.p=2,e.v,a("Failed to export daily schedules","error");case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}(),gt=function(){var e=j(A().m((function e(){var t;return A().w((function(e){for(;;)switch(e.n){case 0:return Le(!0),e.p=1,e.n=2,(0,y.invoke)("getAllPTOBalances",{year:ze});case 2:t=e.v,Ue(t.success?t.data:[]),e.n=4;break;case 3:e.p=3,e.v,a("Failed to load PTO balances","error");case 4:return e.p=4,Le(!1),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])})));return function(){return e.apply(this,arguments)}}();(0,n.useEffect)((function(){"pto-balances"===Pe&&gt()}),[Pe,ze]);var ht=Ie.filter((function(e){var t,a,n=G.find((function(t){return t.id===e.user_id})),r=!He.user||e.user_id===He.user,l=!He.leaveType||e.leave_type===He.leaveType,c=!He.year||String(e.year)===String(He.year),s=!Je||n&&((null===(t=n.display_name)||void 0===t?void 0:t.toLowerCase().includes(Je.toLowerCase()))||(null===(a=n.email_address)||void 0===a?void 0:a.toLowerCase().includes(Je.toLowerCase())));return r&&l&&c&&s})),Nt=Array.from(new Set(Ie.map((function(e){return e.leave_type})))),wt=Array.from(new Set(Ie.map((function(e){return e.year})))),_t=ht.reduce((function(e,t){return e.allocated+=t.allocated_days,e.used+=t.used_days,e.remaining+=t.allocated_days-t.used_days,e}),{allocated:0,used:0,remaining:0});return n.createElement("div",{className:"admin-dashboard"},n.createElement("div",{className:"admin-tabs"},n.createElement("button",{className:"admin-tab ".concat("overview"===k?"active":""),onClick:function(){return T("overview")}},n.createElement(r.A,{size:16}),"Overview"),n.createElement("button",{className:"admin-tab ".concat("users"===k?"active":""),onClick:function(){return T("users")}},n.createElement(l.A,{size:16}),"Users"),n.createElement("button",{className:"admin-tab ".concat("analytics"===k?"active":""),onClick:function(){return T("analytics")}},n.createElement(c.A,{size:16}),"Analytics"),n.createElement("button",{className:"admin-tab".concat("actions"===Pe?" active":""),onClick:function(){return Ce("actions")}},"Actions"),n.createElement("button",{className:"admin-tab".concat("pto-balances"===Pe?" active":""),onClick:function(){return Ce("pto-balances")}},"PTO Balances")),"overview"===k&&n.createElement("div",{className:"admin-section"},n.createElement("div",{className:"admin-stats-grid"},n.createElement("div",{className:"admin-stat-card admin-stat-purple"},n.createElement("div",{className:"stat-icon"},n.createElement(r.A,{size:24})),n.createElement("div",{className:"stat-content"},n.createElement("div",{className:"stat-value"},Ae.totalAdmins),n.createElement("div",{className:"stat-label"},"Admin Users"))),n.createElement("div",{className:"admin-stat-card admin-stat-blue"},n.createElement("div",{className:"stat-icon"},n.createElement(s.A,{size:24})),n.createElement("div",{className:"stat-content"},n.createElement("div",{className:"stat-value"},Ae.totalTeams),n.createElement("div",{className:"stat-label"},"Teams"))),n.createElement("div",{className:"admin-stat-card admin-stat-emerald"},n.createElement("div",{className:"stat-icon"},n.createElement(o.A,{size:24})),n.createElement("div",{className:"stat-content"},n.createElement("div",{className:"stat-value"},Ae.totalUsers),n.createElement("div",{className:"stat-label"},"Users"))),n.createElement("div",{className:"admin-stat-card admin-stat-indigo"},n.createElement("div",{className:"stat-icon"},n.createElement(i.A,{size:24})),n.createElement("div",{className:"stat-content"},n.createElement("div",{className:"stat-value"},Ae.totalRequests),n.createElement("div",{className:"stat-label"},"Total Requests"),n.createElement("div",{className:"stat-breakdown"},n.createElement("span",{className:"breakdown-item green"},Ae.approvedRequests," approved"),n.createElement("span",{className:"breakdown-item orange"},Ae.pendingRequests," pending"),n.createElement("span",{className:"breakdown-item red"},Ae.declinedRequests," declined"))))),n.createElement("div",{className:"card admin-actions-card"},n.createElement("div",{className:"card-header"},n.createElement("h3",null,"Actions")),n.createElement("div",{className:"card-body"},n.createElement("div",{className:"admin-actions-grid"},n.createElement("button",{onClick:function(){Oe(Date.now()),le(!0)},className:"admin-action-btn"},n.createElement("div",{className:"action-icon bg-green"},n.createElement(i.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"Create PTO"),n.createElement("div",{className:"action-desc"},"Create PTO requests for users"))),n.createElement("button",{onClick:function(){return oe(!0)},className:"admin-action-btn"},n.createElement("div",{className:"action-icon bg-blue"},n.createElement(u.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"Generate Reports"),n.createElement("div",{className:"action-desc"},"Export detailed PTO reports"))),n.createElement("button",{onClick:function(){return ae(!0)},className:"admin-action-btn"},n.createElement("div",{className:"action-icon bg-indigo"},n.createElement(m.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"Manage Teams & Users"),n.createElement("div",{className:"action-desc"},"Advanced team and user management"))),n.createElement("button",{onClick:Et,className:"admin-action-btn"},n.createElement("div",{className:"action-icon bg-yellow"},n.createElement(u.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"Export Database"),n.createElement("div",{className:"action-desc"},"Download all tables as CSV"))),n.createElement("button",{onClick:function(){return me(!0)},className:"admin-action-btn"},n.createElement("div",{className:"action-icon bg-purple"},n.createElement(d.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"Import PTOs"),n.createElement("div",{className:"action-desc"},"Import PTO daily schedules from CSV"))),n.createElement("button",{onClick:function(){return ve(!0)},className:"admin-action-btn"},n.createElement("div",{className:"action-icon bg-pink"},n.createElement(u.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"Export Daily Schedules"),n.createElement("div",{className:"action-desc"},"Export PTO daily schedules"))),n.createElement("button",{onClick:j(A().m((function e(){var t,n,r,l,c,s,o,i,u;return A().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm("This will check all teams and fix any manager fields that are objects. Proceed?")){e.n=1;break}return e.a(2);case 1:return R(!0),e.p=2,e.n=3,(0,y.invoke)("getTeams");case 3:if((t=e.v).success){e.n=4;break}throw new Error("Failed to fetch teams");case 4:n=t.data||[],r=0,l=_(n),e.p=5,l.s();case 6:if((c=l.n()).done){e.n=9;break}if(!(s=c.value).manager||"object"!==w(s.manager)){e.n=8;break}if(!(o=s.manager.jira_account_id||s.manager.accountId||s.manager.id||null)){e.n=8;break}return e.n=7,(0,y.invoke)("updateTeam",O(O({},s),{},{manager:o}));case 7:r++;case 8:e.n=6;break;case 9:e.n=11;break;case 10:e.p=10,i=e.v,l.e(i);case 11:return e.p=11,l.f(),e.f(11);case 12:a("✅ Fixed ".concat(r," teams with object managers.")),ot(),e.n=14;break;case 13:e.p=13,u=e.v,a("Failed to fix teams: "+u.message,"error");case 14:return e.p=14,R(!1),e.f(14);case 15:return e.a(2)}}),e,null,[[5,10,11,12],[2,13,14,15]])}))),className:"admin-action-btn"},n.createElement("div",{className:"action-icon bg-orange"},n.createElement(f.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"Fix Team Managers"),n.createElement("div",{className:"action-desc"},"Convert all manager fields to IDs"))),n.createElement("button",{onClick:j(A().m((function e(){var n,r;return A().w((function(e){for(;;)switch(e.n){case 0:if(window.confirm("⚠️ WARNING: This will DELETE ALL PTO data (requests + daily schedules). This cannot be undone. Are you sure?")){e.n=1;break}return e.a(2);case 1:if(window.confirm("Final confirmation: Delete ALL PTO data? Type YES to confirm.")){e.n=2;break}return e.a(2);case 2:return R(!0),e.p=3,e.n=4,(0,y.invoke)("cleanupPTODatabase",{adminId:t.accountId,confirmDelete:!0});case 4:(n=e.v).success?(a("✅ Cleanup complete: ".concat(n.data.deletedCount," items removed")),ct()):a(n.message||"Cleanup failed","error"),e.n=6;break;case 5:e.p=5,r=e.v,a("Cleanup failed: "+r.message,"error");case 6:return e.p=6,R(!1),e.f(6);case 7:return e.a(2)}}),e,null,[[3,5,6,7]])}))),className:"admin-action-btn",disabled:C},n.createElement("div",{className:"action-icon bg-red"},n.createElement(f.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"🗑️ Cleanup PTO Database"),n.createElement("div",{className:"action-desc"},"Delete ALL PTO requests and schedules"))),n.createElement("button",{onClick:j(A().m((function e(){var t,n,r,l;return A().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,y.invoke)("checkStorageSizes");case 1:(t=e.v).success?(n=t.data,r="📊 Storage Report (".concat(n.totalSizeKB,"KB / ").concat(n.maxAllowedKB,"KB max):\n\n"),Object.entries(n.tables).forEach((function(e){var t=P(e,2),a=t[0],n=t[1];r+="".concat(a,": ").concat(n.records," records, ").concat(n.sizeKB,"KB\n")})),n.totalSize>.8*n.maxAllowed&&(r+="\n⚠️ WARNING: Storage is over 80% full!"),alert(r)):a("Failed to check storage sizes","error"),e.n=3;break;case 2:e.p=2,l=e.v,a("Storage check failed: "+l.message,"error");case 3:return e.a(2)}}),e,null,[[0,2]])}))),className:"admin-action-btn"},n.createElement("div",{className:"action-icon bg-yellow"},n.createElement(v.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"📊 Check Storage"),n.createElement("div",{className:"action-desc"},"View storage usage by table"))),n.createElement("button",{onClick:j(A().m((function e(){var t,n;return A().w((function(e){for(;;)switch(e.n){case 0:if(!window.confirm("This will migrate your database to the new structure. This process will backup and restructure your existing data. Proceed?")){e.n=5;break}return R(!0),e.p=1,e.n=2,(0,y.invoke)("migrateDatabaseStructure");case 2:(t=e.v).success?(a("✅ Migration completed: ".concat(t.data.migratedUsers," users, ").concat(t.data.migratedTeams," teams, ").concat(t.data.migratedPtoRequests," PTO requests migrated.")),loadStats()):a(t.message||"Migration failed","error"),e.n=4;break;case 3:e.p=3,n=e.v,a("Migration failed: "+n.message,"error");case 4:return e.p=4,R(!1),e.f(4);case 5:return e.a(2)}}),e,null,[[1,3,4,5]])}))),className:"admin-action-btn",disabled:C},n.createElement("div",{className:"action-icon bg-blue"},n.createElement(m.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"🔄 Migrate Database"),n.createElement("div",{className:"action-desc"},"Restructure database to new schema"))),n.createElement("button",{onClick:function(){return Ee(!0)},className:"admin-action-btn"},n.createElement("div",{className:"action-icon bg-orange"},n.createElement(d.A,{size:20})),n.createElement("div",{className:"action-content"},n.createElement("div",{className:"action-title"},"Import Database"),n.createElement("div",{className:"action-desc"},"Upload a JSON file to replace all data")))))),n.createElement("div",{className:"card recent-activity-card"},n.createElement("div",{className:"card-header"},n.createElement("h3",null,"Recent PTO Activity")),n.createElement("div",{className:"card-body"},0===H.length?n.createElement("div",{className:"empty-state-small"},n.createElement(i.A,{size:32}),n.createElement("p",null,"No PTO requests yet")):n.createElement("div",{className:"recent-requests-list"},H.sort((function(e,t){return new Date(t.submitted_at)-new Date(e.submitted_at)})).slice(0,5).map((function(e){var t;return n.createElement("div",{key:e.id,className:"recent-request-item"},n.createElement("div",{className:"request-avatar"},(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||"?"),n.createElement("div",{className:"request-details"},n.createElement("div",{className:"request-summary"},n.createElement("span",{className:"requester-name"},e.requester_name),n.createElement("span",{className:"request-action"},"requested ",e.leave_type)),n.createElement("div",{className:"request-meta"},new Date(e.start_date).toLocaleDateString()," • ",e.total_days," days")),n.createElement("div",{className:"request-status"},n.createElement("span",{className:"status-badge status-".concat(e.status)},e.status)))})))))),"users"===k&&n.createElement("div",{className:"admin-section"},n.createElement(h.A,{currentUser:t,showNotification:a,isAdmin:!0})),"analytics"===k&&n.createElement("div",{className:"admin-section"},n.createElement("div",{className:"section-header"},n.createElement("h3",null,"Analytics Dashboard")),n.createElement("div",{className:"analytics-grid"},n.createElement("div",{className:"card analytics-card"},n.createElement("div",{className:"card-header"},n.createElement("h4",null,"Requests by Weekday")),n.createElement("div",{className:"card-body"},n.createElement("div",{className:"analytics-list"},Object.entries(pt.requestsByWeekday).sort((function(e,t){var a=P(e,2)[1];return P(t,2)[1]-a})).map((function(e){var t=P(e,2),a=t[0],r=t[1];return n.createElement("div",{key:a,className:"analytics-item"},n.createElement("div",{className:"item-info"},n.createElement("span",{className:"item-icon"},"📅"),n.createElement("span",{className:"item-label"},a)),n.createElement("div",{className:"item-value"},r))}))))))),"pto-balances"===Pe&&n.createElement("div",{className:"admin-section"},n.createElement("div",{className:"section-header"},n.createElement("h3",null,"PTO Balances"),n.createElement("div",{style:{display:"flex",gap:8,alignItems:"center"}},n.createElement("label",null,"Year: "),n.createElement("select",{value:He.year,onChange:function(e){return Ke((function(t){return O(O({},t),{},{year:e.target.value})}))}},n.createElement("option",{value:""},"All"),wt.map((function(e){return n.createElement("option",{key:e,value:e},e)}))),n.createElement("label",null,"Leave Type: "),n.createElement("select",{value:He.leaveType,onChange:function(e){return Ke((function(t){return O(O({},t),{},{leaveType:e.target.value})}))}},n.createElement("option",{value:""},"All"),Nt.map((function(e){return n.createElement("option",{key:e,value:e},e)}))),n.createElement("label",null,"User: "),n.createElement("select",{value:He.user,onChange:function(e){return Ke((function(t){return O(O({},t),{},{user:e.target.value})}))}},n.createElement("option",{value:""},"All"),G.map((function(e){return n.createElement("option",{key:e.id,value:e.id},e.display_name," (",e.email_address,")")}))),n.createElement("input",{type:"text",placeholder:"Search user...",value:Je,onChange:function(e){return $e(e.target.value)},style:{marginLeft:8}}),n.createElement("button",{className:"btn btn-primary",onClick:function(){return Ze(!0)}},"Add PTO Balance"))),Fe?n.createElement("div",{className:"loading-container"},n.createElement("div",{className:"loading-spinner"}),"Loading..."):n.createElement("table",{className:"requests-table"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"User"),n.createElement("th",null,"Email"),n.createElement("th",null,"Leave Type"),n.createElement("th",null,"Allocated"),n.createElement("th",null,"Used"),n.createElement("th",null,"Remaining"),n.createElement("th",null,"Year"),n.createElement("th",null,"Actions"))),n.createElement("tbody",null,ht.map((function(e,t){var a,r,l,c,s=G.find((function(t){return t.id===e.user_id}));return n.createElement("tr",{key:t},n.createElement("td",null,(null==s?void 0:s.display_name)||e.user_id),n.createElement("td",null,(null==s?void 0:s.email_address)||""),n.createElement("td",null,e.leave_type),n.createElement("td",null,n.createElement("input",{type:"number",value:null!==(a=null===(r=Ge[t])||void 0===r?void 0:r.allocated_days)&&void 0!==a?a:e.allocated_days,min:0,onChange:function(e){return We((function(a){return O(O({},a),{},D({},t,O(O({},a[t]),{},{allocated_days:Number(e.target.value)})))}))}})),n.createElement("td",null,e.used_days),n.createElement("td",null,(null!==(l=null===(c=Ge[t])||void 0===c?void 0:c.allocated_days)&&void 0!==l?l:e.allocated_days)-e.used_days),n.createElement("td",null,e.year),n.createElement("td",{style:{display:"flex",gap:4}},n.createElement("button",{className:"btn btn-sm btn-primary",onClick:j(A().m((function a(){var n,r;return A().w((function(a){for(;;)switch(a.n){case 0:return Le(!0),a.n=1,(0,y.invoke)("setPTOBalance",O(O({},e),{},{allocated_days:null!==(n=null===(r=Ge[t])||void 0===r?void 0:r.allocated_days)&&void 0!==n?n:e.allocated_days}));case 1:return We((function(e){return O(O({},e),{},D({},t,void 0))})),a.n=2,gt();case 2:return a.a(2)}}),a)})))},"Save"),n.createElement("button",{className:"btn btn-sm btn-danger",onClick:j(A().m((function t(){return A().w((function(t){for(;;)switch(t.n){case 0:if(window.confirm("Delete this PTO balance?")){t.n=1;break}return t.a(2);case 1:return Le(!0),t.n=2,(0,y.invoke)("deletePTOBalance",{user_id:e.user_id,leave_type:e.leave_type,year:e.year});case 2:return t.n=3,gt();case 3:return t.a(2)}}),t)})))},"Delete")))})),n.createElement("tr",{style:{fontWeight:"bold",background:"#f9fafb"}},n.createElement("td",{colSpan:3},"Total"),n.createElement("td",null,_t.allocated),n.createElement("td",null,_t.used),n.createElement("td",null,_t.remaining),n.createElement("td",{colSpan:2})))),Xe&&n.createElement("div",{className:"modal-overlay"},n.createElement("div",{className:"modal-content",style:{maxWidth:400,margin:"auto",padding:24}},n.createElement("h4",null,"Add PTO Balance"),n.createElement("div",{className:"form-group"},n.createElement("label",null,"User"),n.createElement("select",{className:"form-control",value:tt.user_id,onChange:function(e){return at((function(t){return O(O({},t),{},{user_id:e.target.value})}))}},n.createElement("option",{value:""},"Select user"),G.map((function(e){return n.createElement("option",{key:e.id,value:e.id},e.display_name," (",e.email_address,")")})))),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Leave Type"),n.createElement("input",{className:"form-control",value:tt.leave_type,onChange:function(e){return at((function(t){return O(O({},t),{},{leave_type:e.target.value})}))},placeholder:"e.g. vacation"})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Allocated Days"),n.createElement("input",{className:"form-control",type:"number",value:tt.allocated_days,min:0,onChange:function(e){return at((function(t){return O(O({},t),{},{allocated_days:Number(e.target.value)})}))}})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Year"),n.createElement("input",{className:"form-control",type:"number",value:tt.year,onChange:function(e){return at((function(t){return O(O({},t),{},{year:Number(e.target.value)})}))}})),n.createElement("div",{className:"form-actions"},n.createElement("button",{className:"btn btn-secondary",onClick:function(){return Ze(!1)}},"Cancel"),n.createElement("button",{className:"btn btn-primary",onClick:j(A().m((function e(){return A().w((function(e){for(;;)switch(e.n){case 0:if(tt.user_id&&tt.leave_type&&tt.year){e.n=1;break}return a("All fields required","error"),e.a(2);case 1:return Le(!0),e.n=2,(0,y.invoke)("setPTOBalance",O(O({},tt),{},{used_days:0,remaining_days:tt.allocated_days}));case 2:return Ze(!1),at({user_id:"",leave_type:"",allocated_days:0,year:(new Date).getFullYear()}),e.n=3,gt();case 3:return e.a(2)}}),e)})))},"Add"))))),X&&n.createElement(I,{title:"Add Admin User",onClose:function(){return Z(!1)}},n.createElement("div",{className:"add-admin-content"},n.createElement("p",null,"Grant admin privileges to a user. They will be able to manage teams, users, and all PTO requests."),n.createElement(E.A,{selectedUser:null,onSelect:dt,placeholder:"Search and select user to grant admin privileges",useBackendSearch:!1}))),se&&n.createElement(I,{title:"Generate PTO Report",onClose:function(){return oe(!1)}},n.createElement("div",{className:"report-config"},n.createElement("div",{className:"form-group"},n.createElement("label",null,"Report Scope"),n.createElement("select",{value:we.scope,onChange:function(e){return _e((function(t){return O(O({},t),{},{scope:e.target.value})}))},className:"form-control"},n.createElement("option",{value:"company"},"Full Company"),n.createElement("option",{value:"team"},"Specific Team"),n.createElement("option",{value:"user"},"Specific User"))),"team"===we.scope&&n.createElement("div",{className:"form-group"},n.createElement("label",null,"Select Team"),n.createElement("select",{value:we.teamId,onChange:function(e){return _e((function(t){return O(O({},t),{},{teamId:e.target.value})}))},className:"form-control"},n.createElement("option",{value:""},"Choose a team"),B.map((function(e){return n.createElement("option",{key:e.id,value:e.id},e.name)})))),"user"===we.scope&&n.createElement("div",{className:"form-group"},n.createElement("label",null,"Select User"),n.createElement("select",{value:we.userId,onChange:function(e){return _e((function(t){return O(O({},t),{},{userId:e.target.value})}))},className:"form-control"},n.createElement("option",{value:""},"Choose a user"),G.map((function(e){return n.createElement("option",{key:e.id,value:e.jira_account_id||e.id},e.display_name||e.displayName)})))),n.createElement("div",{className:"form-row"},n.createElement("div",{className:"form-group"},n.createElement("label",null,"Start Date"),n.createElement("input",{type:"date",value:we.startDate,onChange:function(e){return _e((function(t){return O(O({},t),{},{startDate:e.target.value})}))},className:"form-control"})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"End Date"),n.createElement("input",{type:"date",value:we.endDate,onChange:function(e){return _e((function(t){return O(O({},t),{},{endDate:e.target.value})}))},className:"form-control"}))),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Status Filter"),n.createElement("select",{value:we.status,onChange:function(e){return _e((function(t){return O(O({},t),{},{status:e.target.value})}))},className:"form-control"},n.createElement("option",{value:"all"},"All Status"),n.createElement("option",{value:"pending"},"Pending"),n.createElement("option",{value:"approved"},"Approved"),n.createElement("option",{value:"declined"},"Declined"))),n.createElement("div",{className:"form-actions"},n.createElement("button",{onClick:function(){return oe(!1)},className:"btn btn-secondary"},"Cancel"),n.createElement("button",{onClick:vt,className:"btn btn-primary"},n.createElement(u.A,{size:16}),"Generate Report")))),te&&n.createElement(g.A,{isOpen:te,onClose:function(){return ae(!1)},teams:B,users:G,onSaveTeam:function(){var e=j(A().m((function e(t){return A().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,y.invoke)(t.id?"updateTeam":"createTeam",t);case 1:ot();case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),onDeleteTeam:function(){var e=j(A().m((function e(a){return A().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,y.invoke)("deleteTeam",{teamId:a,deletedBy:t.accountId});case 1:ot();case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),onSaveUser:function(){var e=j(A().m((function e(t){return A().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,y.invoke)(t.id?"updateUser":"createUser",t);case 1:it();case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),onDeleteUser:function(){var e=j(A().m((function e(a){return A().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,y.invoke)("deleteUser",{userId:a,deletedBy:t.accountId});case 1:it();case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),showNotification:a,onRefresh:ct}),re&&n.createElement(b.A,{key:ke,isAdminMode:!0,onClose:function(){return le(!1)},onSubmit:ft,allUsers:G,allTeams:B,allRequests:H,currentUser:t,isAdmin:!0}),ue&&n.createElement(N.A,{isOpen:ue,onClose:function(){return me(!1)},currentUser:t,showNotification:a,onImportSuccess:ut}),fe&&n.createElement(I,{title:"Export PTO Daily Schedules",onClose:function(){return ve(!1)}},n.createElement("div",{className:"export-filters"},n.createElement("div",{className:"form-row"},n.createElement("div",{className:"form-group"},n.createElement("label",null,"Start Date"),n.createElement("input",{type:"date",value:ge.startDate,onChange:function(e){return he((function(t){return O(O({},t),{},{startDate:e.target.value})}))},className:"form-control"})),n.createElement("div",{className:"form-group"},n.createElement("label",null,"End Date"),n.createElement("input",{type:"date",value:ge.endDate,onChange:function(e){return he((function(t){return O(O({},t),{},{endDate:e.target.value})}))},className:"form-control"}))),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Requester"),n.createElement("select",{value:ge.requesterId,onChange:function(e){return he((function(t){return O(O({},t),{},{requesterId:e.target.value})}))},className:"form-control"},n.createElement("option",{value:""},"All Requesters"),G.map((function(e){return n.createElement("option",{key:e.id,value:e.jira_account_id||e.id},e.display_name||e.displayName)})))),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Manager"),n.createElement("select",{value:ge.managerId,onChange:function(e){return he((function(t){return O(O({},t),{},{managerId:e.target.value})}))},className:"form-control"},n.createElement("option",{value:""},"All Managers"),G.map((function(e){return n.createElement("option",{key:e.id,value:e.jira_account_id||e.id},e.display_name||e.displayName)})))),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Leave Type"),n.createElement("select",{value:ge.leaveType,onChange:function(e){return he((function(t){return O(O({},t),{},{leaveType:e.target.value})}))},className:"form-control"},n.createElement("option",{value:""},"All Types"),n.createElement("option",{value:"vacation"},"Vacation"),n.createElement("option",{value:"sick"},"Sick Leave"),n.createElement("option",{value:"personal"},"Personal Leave"),n.createElement("option",{value:"holiday"},"Holiday"),n.createElement("option",{value:"other leave type"},"Other Leave Type"))),n.createElement("div",{className:"form-actions"},n.createElement("button",{onClick:function(){return ve(!1)},className:"btn btn-secondary"},"Cancel"),n.createElement("button",{onClick:bt,className:"btn btn-primary"},n.createElement(u.A,{size:16}),"Export Schedules"),n.createElement("button",{onClick:j(A().m((function e(){var t,n,r,l,c;return A().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,(0,y.invoke)("debugStorage");case 1:if(t=e.v,console.log("🔍 DEBUG Storage Response:",t),!t.success){e.n=3;break}return n=t.data.summary,a("Storage Debug: ".concat(n.ptoRequestCount," PTO requests, ").concat(n.ptoScheduleCount," daily schedules"),"info"),e.n=2,(0,y.invoke)("getPTORequests");case 2:r=e.v,console.log("🔍 DEBUG getPTORequests Response:",r),r.success&&a("getPTORequests returned: ".concat((null===(l=r.data)||void 0===l?void 0:l.length)||0," total events"),"info");case 3:e.n=5;break;case 4:e.p=4,c=e.v,console.error("Debug error:",c),a("Debug failed: "+c.message,"error");case 5:return e.a(2)}}),e,null,[[0,4]])}))),className:"btn btn-secondary"},n.createElement(u.A,{size:16}),"Debug Storage")))),ye&&n.createElement("div",{className:"modal-overlay"},n.createElement("div",{className:"modal-content",style:{maxWidth:400,margin:"auto",padding:24}},n.createElement("h4",null,"Import Database"),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Table to Replace"),n.createElement("select",{className:"form-control",value:rt,onChange:function(e){return lt(e.target.value)}},[{value:"users",label:"Users"},{value:"teams",label:"Teams"},{value:"pto_balances",label:"PTO Balances"}].map((function(e){return n.createElement("option",{key:e.value,value:e.value},e.label)})))),n.createElement("div",{className:"form-group"},n.createElement("label",null,"CSV File"),n.createElement("input",{type:"file",accept:".csv",ref:qe,onChange:function(){var e=j(A().m((function e(t){var n,r;return A().w((function(e){for(;;)switch(e.n){case 0:if(n=t.target.files[0]){e.n=1;break}return e.a(2);case 1:(r=new FileReader).onload=function(){var e=j(A().m((function e(t){var n,r,l,c;return A().w((function(e){for(;;)switch(e.n){case 0:if(n=t.target.result,r=n.split(/\r?\n/).filter(Boolean),l=r[0].split(",").map((function(e){return e.trim()})),c=r.slice(1).map((function(e){var t=e.split(","),a={};return l.forEach((function(e,n){a[e]=t[n]})),a})),window.confirm("This will replace all data in the '".concat(rt,"' table. Proceed?"))){e.n=1;break}return e.a(2);case 1:return e.n=2,(0,y.invoke)("importDatabase",{table:rt,data:c});case 2:if(Ee(!1),a("Imported ".concat(c.length," records into ").concat(rt,"."),"success"),"users"!==rt){e.n=3;break}return e.n=3,loadUsers();case 3:if("teams"!==rt){e.n=4;break}return e.n=4,loadTeams();case 4:if("pto_balances"!==rt){e.n=5;break}return e.n=5,gt();case 5:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.readAsText(n);case 2:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}()})),n.createElement("div",{className:"form-actions"},n.createElement("button",{className:"btn btn-secondary",onClick:function(){return Ee(!1)}},"Cancel")))))}},9681:(e,t,a)=>{a.d(t,{A:()=>b});var n=a(6540),r=a(5627),l=a(697),c=a(4506),s=a(808),o=a(9618);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function u(){var e,t,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",r=a.toStringTag||"@@toStringTag";function l(a,n,r,l){var o=n&&n.prototype instanceof s?n:s,i=Object.create(o.prototype);return m(i,"_invoke",function(a,n,r){var l,s,o,i=0,u=r||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return l=t,s=0,o=e,d.n=a,c}};function f(a,n){for(s=a,o=n,t=0;!m&&i&&!r&&t<u.length;t++){var r,l=u[t],f=d.p,v=l[2];a>3?(r=v===n)&&(o=l[(s=l[4])?5:(s=3,3)],l[4]=l[5]=e):l[0]<=f&&((r=a<2&&f<l[1])?(s=0,d.v=n,d.n=l[1]):f<v&&(r=a<3||l[0]>n||n>v)&&(l[4]=a,l[5]=n,d.n=v,s=0))}if(r||a>1)return c;throw m=!0,n}return function(r,u,v){if(i>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,v),s=u,o=v;(t=s<2?e:o)||!m;){l||(s?s<3?(s>1&&(d.n=-1),f(s,o)):d.n=o:d.v=o);try{if(i=2,l){if(s||(r="next"),t=l[r]){if(!(t=t.call(l,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,s<2&&(s=0)}else 1===s&&(t=l.return)&&t.call(l),s<2&&(o=TypeError("The iterator does not provide a '"+r+"' method"),s=1);l=e}else if((t=(m=d.n<0)?o:a.call(n,d))!==c)break}catch(t){l=e,s=1,o=t}finally{i=1}}return{value:t,done:m}}}(a,r,l),!0),i}var c={};function s(){}function o(){}function i(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(m(t={},n,(function(){return this})),t),f=i.prototype=s.prototype=Object.create(d);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,m(e,r,"GeneratorFunction")),e.prototype=Object.create(f),e}return o.prototype=i,m(f,"constructor",i),m(i,"constructor",o),o.displayName="GeneratorFunction",m(i,r,"GeneratorFunction"),m(f),m(f,r,"Generator"),m(f,n,(function(){return this})),m(f,"toString",(function(){return"[object Generator]"})),(u=function(){return{w:l,m:v}})()}function m(e,t,a,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}m=function(e,t,a,n){if(t)r?r(e,t,{value:a,enumerable:!n,configurable:!n,writable:!n}):e[t]=a;else{var l=function(t,a){m(e,t,(function(e){return this._invoke(t,a,e)}))};l("next",0),l("throw",1),l("return",2)}},m(e,t,a,n)}function d(e,t,a,n,r,l,c){try{var s=e[l](c),o=s.value}catch(e){return void a(e)}s.done?t(o):Promise.resolve(o).then(n,r)}function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,c,s=[],o=!0,i=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(n=l.call(a)).done)&&(s.push(n.value),s.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{if(!o&&null!=a.return&&(c=a.return(),Object(c)!==c))return}finally{if(i)throw r}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}const b=function(e){var t=e.events,a=e.onDateSelect,i=e.selectedDates,m=e.onSubmitPTO,f=e.currentUser,E=e.allUsers,b=e.allTeams,g=e.isAdmin,h=y((0,n.useState)(new Date),2),N=h[0],w=h[1],_=y((0,n.useState)(!1),2),S=_[0],k=_[1],O=y((0,n.useState)({team:"all",user:"all",leaveType:"all",status:"all"}),2),D=O[0],A=O[1],T=y((0,n.useState)(!1),2),q=T[0],j=T[1],P=y((0,n.useState)(null),2),C=P[0],R=P[1],I=y((0,n.useState)(""),2),U=I[0],x=I[1],F=y((0,n.useState)(!1),2),L=F[0],B=F[1],z=y((0,n.useState)([]),2),M=z[0],G=z[1],W=y((0,n.useState)(null),2),Y=W[0],H=W[1],K=null==E?void 0:E.find((function(e){return e.jira_account_id===(null==f?void 0:f.accountId)||e.email_address===(null==f?void 0:f.emailAddress)})),V=function(e){return e.toISOString().split("T")[0]},J=function(){return t?t.filter((function(e){if("all"!==D.team){var t=null==E?void 0:E.find((function(t){return t.jira_account_id===e.requester_id||t.email_address===e.requester_email}));if(!t||String(t.team_id)!==String(D.team))return!1}if("me"===D.user){if(e.requester_id!==(null==f?void 0:f.accountId)&&e.requester_email!==(null==f?void 0:f.emailAddress))return!1}else if("all"!==D.user){var a=null==E?void 0:E.find((function(e){return e.jira_account_id===D.user||e.id===D.user}));if(a&&e.requester_id!==a.jira_account_id&&e.requester_email!==a.email_address)return!1}return("all"===D.leaveType||e.leave_type===D.leaveType)&&("all"===D.status||e.status===D.status)})):[]},$=function(e){w((function(t){var a=new Date(t);return a.setMonth(t.getMonth()+e),a}))},Q=function(e,t){A((function(a){return v(v({},a),{},p({},e,t))}))},X=function(){return Object.values(D).some((function(e){return"all"!==e}))},Z=function(){var e,t=(e=u().m((function e(t){var a;return u().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,m(t);case 1:null!=(a=e.v)&&a.success&&k(!1);case 2:return e.a(2)}}),e)})),function(){var t=this,a=arguments;return new Promise((function(n,r){var l=e.apply(t,a);function c(e){d(l,n,r,c,s,"next",e)}function s(e){d(l,n,r,c,s,"throw",e)}c(void 0)}))});return function(e){return t.apply(this,arguments)}}(),ee=function(e){if(!e)return!1;if(e.requester_id!==f.accountId)return!1;if("pending"===e.status)return!0;if("approved"===e.status){var t=new Date;return t.setHours(0,0,0,0),new Date(e.start_date)>=t}return!1},te=function(e){for(var t=e.getFullYear(),a=e.getMonth(),n=new Date(t,a,1),r=new Date(t,a+1,0).getDate(),l=n.getDay(),c=[],s=0;s<l;s++)c.push(null);for(var o=1;o<=r;o++)c.push(new Date(t,a,o));return c}(N);return n.createElement("div",{className:"card calendar-card"},n.createElement("div",{className:"calendar-header"},n.createElement("div",{className:"calendar-header-controls"},n.createElement("button",{onClick:function(){return $(-1)},className:"calendar-nav-btn"},"←"),n.createElement("h2",{className:"calendar-title"},["January","February","March","April","May","June","July","August","September","October","November","December"][N.getMonth()]," ",N.getFullYear()),n.createElement("button",{onClick:function(){return $(1)},className:"calendar-nav-btn"},"→")),n.createElement("div",{className:"calendar-header-actions"},n.createElement("button",{onClick:function(){return j(!q)},className:"btn btn-secondary calendar-filter-btn ".concat(X()?"has-filters":"")},n.createElement(r.A,{size:16}),n.createElement("span",null,"Filters"),X()&&n.createElement("span",{className:"filter-indicator"},"●")),i.filter((function(e){return new Date(e)>=new Date((new Date).setHours(0,0,0,0))})).length>0&&n.createElement("button",{onClick:function(){return k(!0)},className:"btn btn-primary calendar-submit-btn"},n.createElement(l.A,{size:16}),n.createElement("span",null,"Request PTO (",i.filter((function(e){return new Date(e)>=new Date((new Date).setHours(0,0,0,0))})).length," days)")))),q&&n.createElement("div",{className:"calendar-filters-panel"},n.createElement("div",{className:"filters-grid"},n.createElement("div",{className:"filter-group"},n.createElement("label",null,"Team"),n.createElement("select",{value:D.team,onChange:function(e){return Q("team",e.target.value)},className:"form-control"},n.createElement("option",{value:"all"},"All Teams"),(b?g?b:b.filter((function(e){var t,a;return(null===(t=e.manager)||void 0===t?void 0:t.accountId)===(null==f?void 0:f.accountId)||(null===(a=e.manager)||void 0===a?void 0:a.jira_account_id)===(null==f?void 0:f.accountId)})):[]).map((function(e){return n.createElement("option",{key:e.id,value:e.id},e.name)})))),n.createElement("div",{className:"filter-group"},n.createElement("label",null,"User"),n.createElement("select",{value:D.user,onChange:function(e){return Q("user",e.target.value)},className:"form-control"},n.createElement("option",{value:"all"},"All Users"),n.createElement("option",{value:"me"},"Me"),null==E?void 0:E.map((function(e){return n.createElement("option",{key:e.id,value:e.jira_account_id||e.id},e.display_name||e.displayName)})))),n.createElement("div",{className:"filter-group"},n.createElement("label",null,"Leave Type"),n.createElement("select",{value:D.leaveType,onChange:function(e){return Q("leaveType",e.target.value)},className:"form-control"},n.createElement("option",{value:"all"},"All Types"),["vacation","sick","personal","holiday","other leave type"].map((function(e){return n.createElement("option",{key:e,value:e},e.charAt(0).toUpperCase()+e.slice(1))})))),n.createElement("div",{className:"filter-group"},n.createElement("label",null,"Status"),n.createElement("select",{value:D.status,onChange:function(e){return Q("status",e.target.value)},className:"form-control"},n.createElement("option",{value:"all"},"All Status"),["pending","approved","declined"].map((function(e){return n.createElement("option",{key:e,value:e},e.charAt(0).toUpperCase()+e.slice(1))}))))),n.createElement("div",{className:"filters-actions"},n.createElement("button",{onClick:function(){A({team:"all",user:"all",leaveType:"all",status:"all"})},className:"btn btn-secondary"},"Clear All"),n.createElement("button",{onClick:function(){return j(!1)},className:"btn btn-primary"},"Apply Filters"))),n.createElement("div",{className:"calendar-info"},n.createElement("p",null,"💡 Click on dates to select them for your PTO request. Selected dates will be highlighted in blue.",X()&&n.createElement("span",null," • Filters are active - some events may be hidden."))),n.createElement("div",{className:"calendar-grid"},n.createElement("div",{className:"calendar-days-header"},["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((function(e){return n.createElement("div",{key:e,className:"calendar-day-label"},e)}))),n.createElement("div",{className:"calendar-days-grid"},te.map((function(e,r){if(!e)return n.createElement("div",{key:r,className:"calendar-day calendar-day-empty"});var l,c=(l=e,i.includes(V(l))),o=(function(e){var t=V(e);J().some((function(e){return t>=e.start_date&&t<=e.end_date}))}(e),function(e){var t=V(e);return J().filter((function(e){return t>=e.start_date&&t<=e.end_date}))}(e)),u=e.toDateString()===(new Date).toDateString(),m=e<new Date((new Date).setHours(0,0,0,0));return n.createElement("div",{key:e.toISOString(),onClick:function(){return function(e){var n=V(e),r=t.filter((function(e){return(e.requester_id===f.accountId||e.requester_email===f.emailAddress)&&n>=e.start_date&&n<=e.end_date})),l=r.find(ee);l?R(l):r.length>0?x("You already have a PTO request this day and it is not editable."):!e||e<new Date((new Date).setHours(0,0,0,0))||a(e)}(e)},className:"calendar-day"+(m?" calendar-day-past":" calendar-day-active")+(c?" calendar-day-selected":"")+(u?" calendar-day-today":"")},n.createElement("div",{className:"calendar-day-inner"},n.createElement("span",{className:"calendar-day-number"+(u?" calendar-day-number-today":"")+(m?" calendar-day-number-past":"")},e.getDate()),n.createElement("div",{className:"calendar-day-events"},o.slice(0,2).map((function(e,t){return n.createElement("div",{key:"".concat(e.id,"-").concat(t),className:"calendar-event"+("approved"===e.status?" calendar-event-approved":"")+("pending"===e.status?" calendar-event-pending":"")+("declined"===e.status?" calendar-event-declined":""),title:"".concat(e.requester_name,": ").concat(e.reason)},n.createElement("span",null,(0,s.S0)(e.leave_type)),n.createElement("span",{className:"calendar-event-name"},e.requester_name))})),o.length>2&&n.createElement("button",{className:"calendar-event-more",onClick:function(t){t.stopPropagation(),G(o),H(e),B(!0)},type:"button",tabIndex:0,"aria-label":"Show all events for ".concat(e.toDateString())},"+",o.length-2," more"))))})))),n.createElement("div",{className:"calendar-legend"},n.createElement("div",{className:"calendar-legend-item"},n.createElement("span",{className:"calendar-legend-dot calendar-event-approved"}),n.createElement("span",null,"Approved")),n.createElement("div",{className:"calendar-legend-item"},n.createElement("span",{className:"calendar-legend-dot calendar-event-pending"}),n.createElement("span",null,"Pending")),n.createElement("div",{className:"calendar-legend-item"},n.createElement("span",{className:"calendar-legend-dot calendar-event-declined"}),n.createElement("span",null,"Declined")),n.createElement("div",{className:"calendar-legend-item"},n.createElement("span",{className:"calendar-legend-dot calendar-day-selected"}),n.createElement("span",null,"Selected"))),S&&n.createElement(c.A,{selectedDates:i.filter((function(e){return new Date(e)>=new Date((new Date).setHours(0,0,0,0))})),onClose:function(){return k(!1)},onSubmit:Z,currentUser:f,currentUserData:K,userManager:function(){if(null==K||!K.team_id)return null;var e=null==b?void 0:b.find((function(e){return e.id===K.team_id}));return null!=e&&e.manager?e.manager:null}(),allUsers:E,allTeams:b,allRequests:t,isAdmin:g}),C&&n.createElement(o.A,{request:C,onClose:function(){return R(null)},onSave:function(){R(null)},currentUser:f}),U&&n.createElement("div",{className:"modal-overlay"},n.createElement("div",{className:"modal-content",style:{maxWidth:400,margin:"auto",padding:24,textAlign:"center"}},n.createElement("div",{style:{marginBottom:16}},n.createElement("span",{role:"img","aria-label":"info",style:{fontSize:32}},"ℹ️")),n.createElement("div",{style:{marginBottom:16}},U),n.createElement("button",{className:"btn btn-primary",onClick:function(){return x("")}},"OK"))),L&&n.createElement("div",{className:"modal-overlay",onClick:function(){return B(!1)}},n.createElement("div",{className:"modal-content",style:{maxWidth:400,margin:"auto",padding:24},onClick:function(e){return e.stopPropagation()}},n.createElement("div",{style:{marginBottom:16,fontWeight:600,fontSize:18}},"Events for ",Y&&Y.toLocaleDateString()),n.createElement("div",{style:{maxHeight:300,overflowY:"auto"}},M.map((function(e,t){return n.createElement("div",{key:e.id+"-"+t,className:"calendar-event"+("approved"===e.status?" calendar-event-approved":"")+("pending"===e.status?" calendar-event-pending":"")+("declined"===e.status?" calendar-event-declined":""),style:{marginBottom:6}},n.createElement("span",null,(0,s.S0)(e.leave_type)),n.createElement("span",{className:"calendar-event-name"},e.requester_name),n.createElement("span",{style:{marginLeft:8,fontSize:12,color:"#888"}},"(",e.status,")"))}))),n.createElement("button",{className:"btn btn-primary",style:{marginTop:16},onClick:function(){return B(!1)}},"Close"))))}}},a={};function n(e){var r=a[e];if(void 0!==r)return r.exports;var l=a[e]={exports:{}};return t[e].call(l.exports,l,l.exports,n),l.exports}n.m=t,e=[],n.O=(t,a,r,l)=>{if(!a){var c=1/0;for(u=0;u<e.length;u++){for(var[a,r,l]=e[u],s=!0,o=0;o<a.length;o++)(!1&l||c>=l)&&Object.keys(n.O).every((e=>n.O[e](a[o])))?a.splice(o--,1):(s=!1,l<c&&(c=l));if(s){e.splice(u--,1);var i=r();void 0!==i&&(t=i)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[a,r,l]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={625:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var r,l,[c,s,o]=a,i=0;if(c.some((t=>0!==e[t]))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(o)var u=o(n)}for(t&&t(a);i<c.length;i++)l=c[i],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(u)},a=this.webpackChunkpto_request_app=this.webpackChunkpto_request_app||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var r=n.O(void 0,[96,357,286,656],(()=>n(6483)));r=n.O(r)})();