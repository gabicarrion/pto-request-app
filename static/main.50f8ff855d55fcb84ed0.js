(()=>{"use strict";var e,t={3152:(e,t,a)=>{var r=a(6540),s=a(5338),l=a(2307),n=a(7235),c=a(7623),m=a(2492),i=a(8686),o=a(2321);const d=e=>{let{message:t,type:a,onClose:s}=e;return r.createElement("div",{className:"fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ".concat("success"===a?"bg-green-500 text-white":"bg-red-500 text-white")},r.createElement("div",{className:"flex items-center justify-between"},r.createElement("span",null,t),r.createElement("button",{onClick:s,className:"ml-4 text-white hover:text-gray-200"},"Ã—")))};var u=a(2762),v=a(3893),p=a(4945),y=a(4471),E=a(8309),N=a(964),g=a(8697),b=a(8445);const f=e=>{var t;let{selectedUser:a,onSelect:s,placeholder:l="Search for a user",disabled:n=!1,required:c=!1,error:m=null}=e;const[d,u]=(0,r.useState)(!1),[v,p]=(0,r.useState)(""),[y,E]=(0,r.useState)([]),[N,f]=(0,r.useState)(!1),[h,w]=(0,r.useState)(null),D=(0,r.useRef)(null),T=(0,r.useRef)(null),O=(0,r.useCallback)(function(e,t){let a;return function(){for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];const n=()=>{clearTimeout(a),e(...s)};clearTimeout(a),a=setTimeout(n,t)}}((async e=>{if(e.length<2)E([]);else{f(!0),w(null);try{console.log("ðŸ” Searching users:",e);const t=await(0,o.invoke)("getJiraUsers",{query:e});if(!t.success)throw new Error(t.message||"Failed to search users");E(t.data||[])}catch(e){console.error("âŒ Error searching users:",e),w(e.message),E([])}finally{f(!1)}}}),300),[]);return(0,r.useEffect)((()=>{const e=e=>{D.current&&!D.current.contains(e.target)&&(u(!1),p(""),E([]))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]),(0,r.useEffect)((()=>{const e=e=>{"Escape"===e.key&&d&&(u(!1),p(""),E([]))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[d]),r.createElement("div",{className:"relative",ref:D},r.createElement("div",{onClick:()=>{n||(u(!0),setTimeout((()=>{var e;null===(e=T.current)||void 0===e||e.focus()}),100))},className:"flex items-center justify-between p-3 border rounded-md cursor-pointer transition-colors ".concat(n?"bg-gray-100 cursor-not-allowed border-gray-200":d?"border-blue-500 ring-2 ring-blue-200":m?"border-red-300 hover:border-red-400":"border-gray-300 hover:border-gray-400")},a?r.createElement("div",{className:"flex items-center space-x-3 flex-1"},r.createElement("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center text-white text-sm font-semibold"},a.avatarUrl?r.createElement("img",{src:a.avatarUrl,alt:a.displayName,className:"w-8 h-8 rounded-full"}):(null===(t=a.displayName)||void 0===t?void 0:t.charAt(0))||r.createElement(i.A,{size:16})),r.createElement("div",{className:"flex-1"},r.createElement("div",{className:"font-medium text-gray-900"},a.displayName),r.createElement("div",{className:"text-sm text-gray-600"},a.emailAddress)),!n&&r.createElement("button",{onClick:e=>{e.stopPropagation(),s(null)},className:"p-1 hover:bg-gray-100 rounded transition-colors"},r.createElement(g.A,{size:16,className:"text-gray-400"}))):r.createElement("div",{className:"flex items-center space-x-3 text-gray-500"},r.createElement(b.A,{size:16}),r.createElement("span",null,l),c&&r.createElement("span",{className:"text-red-500"},"*"))),m&&r.createElement("div",{className:"mt-1 text-sm text-red-600"},m),d&&r.createElement("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-md shadow-lg z-50 max-h-80 overflow-hidden"},r.createElement("div",{className:"p-3 border-b border-gray-200"},r.createElement("div",{className:"relative"},r.createElement(b.A,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),r.createElement("input",{ref:T,type:"text",value:v,onChange:e=>{const t=e.target.value;p(t),O(t)},placeholder:"Type to search users...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}))),r.createElement("div",{className:"max-h-60 overflow-y-auto"},N?r.createElement("div",{className:"p-4 text-center text-gray-500"},r.createElement("div",{className:"flex items-center justify-center space-x-2"},r.createElement("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"}),r.createElement("span",null,"Searching..."))):h?r.createElement("div",{className:"p-4 text-center text-red-600"},r.createElement("div",{className:"text-sm"},"Error: ",h)):v.length<2?r.createElement("div",{className:"p-4 text-center text-gray-500"},r.createElement("div",{className:"text-sm"},"Type at least 2 characters to search")):0===y.length?r.createElement("div",{className:"p-4 text-center text-gray-500"},r.createElement("div",{className:"text-sm"},"No users found")):r.createElement("div",{className:"divide-y divide-gray-100"},y.map((e=>{var t;return r.createElement("div",{key:e.accountId,onClick:()=>(e=>{s(e),u(!1),p(""),E([])})(e),className:"p-3 hover:bg-gray-50 cursor-pointer transition-colors"},r.createElement("div",{className:"flex items-center space-x-3"},r.createElement("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center text-white text-sm font-semibold"},e.avatarUrl?r.createElement("img",{src:e.avatarUrl,alt:e.displayName,className:"w-8 h-8 rounded-full"}):(null===(t=e.displayName)||void 0===t?void 0:t.charAt(0))||r.createElement(i.A,{size:16})),r.createElement("div",{className:"flex-1"},r.createElement("div",{className:"font-medium text-gray-900"},e.displayName),r.createElement("div",{className:"text-sm text-gray-600"},e.emailAddress))))}))))))};var h=a(418),w=a(2708);const D={vacation:{id:"vacation",label:"ðŸ–ï¸ Vacation",emoji:"ðŸ–ï¸",color:"bg-blue-100 text-blue-800"},sick:{id:"sick",label:"ðŸ¤’ Sick Leave",emoji:"ðŸ¤’",color:"bg-red-100 text-red-800"},personal:{id:"personal",label:"ðŸ‘¤ Personal Day",emoji:"ðŸ‘¤",color:"bg-purple-100 text-purple-800"},holiday:{id:"holiday",label:"ðŸŽ‰ Holiday",emoji:"ðŸŽ‰",color:"bg-green-100 text-green-800"}},T=e=>{var t;return(null===(t=D[e.toLowerCase()])||void 0===t?void 0:t.emoji)||"ðŸ“…"};function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){_(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const q=e=>{var t,a,s,n;let{selectedDates:c=[],onClose:m,onSubmit:o,currentUser:d,currentUserData:u,userManager:v,allUsers:p=[],allTeams:y=[],allRequests:E=[],isAdmin:N=!1,isAdminMode:b=!1}=e;const[D,O]=(0,r.useState)({targetUser:d,manager:v,startDate:c[0]||"",endDate:c[c.length-1]||"",reason:"",dailySchedules:[]}),[_,q]=(0,r.useState)({}),[S,A]=(0,r.useState)(!1);(0,r.useEffect)((()=>{N||u||A(!0);const e=c.map((e=>({date:e,type:"FULL_DAY",leaveType:"vacation"})));O((t=>k(k({},t),{},{targetUser:N?t.targetUser:d,manager:v||t.manager,startDate:c[0]||"",endDate:c[c.length-1]||"",dailySchedules:e})))}),[c,d,u,v,N]),(0,r.useEffect)((()=>{if(D.startDate&&D.endDate){const e=new Date(D.startDate),t=new Date(D.endDate),a=[];for(let r=new Date(e);r<=t;r.setDate(r.getDate()+1))a.push(r.toISOString().split("T")[0]);const r=D.dailySchedules.filter((e=>a.includes(e.date))),s=a.filter((e=>!r.find((t=>t.date===e)))).map((e=>({date:e,type:"FULL_DAY",leaveType:"vacation"})));O((e=>k(k({},e),{},{dailySchedules:[...r,...s].sort(((e,t)=>new Date(e.date)-new Date(t.date)))})))}}),[D.startDate,D.endDate]);const x=(e,t,a)=>{O((r=>k(k({},r),{},{dailySchedules:r.dailySchedules.map(((r,s)=>s===e?k(k({},r),{},{[t]:a}):r))})))},P=[{value:"FULL_DAY",label:"Full Day (8h)"},{value:"HALF_DAY_MORNING",label:"Morning Half (4h)"},{value:"HALF_DAY_AFTERNOON",label:"Afternoon Half (4h)"}],C=[{value:"vacation",label:"ðŸ–ï¸ Vacation",emoji:"ðŸ–ï¸"},{value:"sick",label:"ðŸ¤’ Sick Leave",emoji:"ðŸ¤’"},{value:"personal",label:"ðŸ‘¤ Personal Day",emoji:"ðŸ‘¤"},{value:"holiday",label:"ðŸŽ‰ Holiday",emoji:"ðŸŽ‰"}];return r.createElement("div",{className:"modal-overlay"},r.createElement("div",{className:"modal-content pto-submission-modal"},r.createElement("div",{className:"modal-header"},r.createElement("h3",{className:"modal-title"},r.createElement(l.A,{size:22,style:{marginRight:8,marginBottom:-3}}),N?"Create PTO Request (Admin)":"Submit PTO Request"),r.createElement("button",{onClick:m,className:"modal-close"},r.createElement(g.A,{size:24}))),r.createElement("div",{className:"modal-body"},S&&r.createElement("div",{className:"alert alert-warning"},r.createElement(h.A,{size:20}),r.createElement("div",null,r.createElement("strong",null,"User Not in System"),r.createElement("p",null,"Your user is not added to Team Manager. Please ask HR to update it."))),r.createElement("div",{className:"form-section"},r.createElement("label",{className:"form-label"},"Employee ",N?"*":""),N?r.createElement(f,{selectedUser:D.targetUser,onSelect:e=>{O((t=>k(k({},t),{},{targetUser:e})));const t=p.find((t=>t.jira_account_id===(null==e?void 0:e.accountId)||t.email_address===(null==e?void 0:e.emailAddress)));if(null!=t&&t.team_id){const e=y.find((e=>e.id===t.team_id));null!=e&&e.manager&&O((t=>k(k({},t),{},{manager:e.manager})))}},placeholder:"Search and select employee",required:!0,error:_.targetUser}):r.createElement("div",{className:"user-display"},r.createElement("div",{className:"user-avatar"},null!=d&&d.avatarUrl?r.createElement("img",{src:d.avatarUrl,alt:d.displayName}):r.createElement("div",{className:"avatar-placeholder"},(null==d||null===(t=d.displayName)||void 0===t?void 0:t.charAt(0))||r.createElement(i.A,{size:16}))),r.createElement("div",{className:"user-info"},r.createElement("div",{className:"user-name"},null==d?void 0:d.displayName),r.createElement("div",{className:"user-email"},null==d?void 0:d.emailAddress)))),!N&&r.createElement("div",{className:"form-section"},r.createElement("label",{className:"form-label"},"Manager *"),D.manager?r.createElement("div",{className:"user-display"},r.createElement("div",{className:"user-avatar"},D.manager.avatarUrl?r.createElement("img",{src:D.manager.avatarUrl,alt:D.manager.displayName}):r.createElement("div",{className:"avatar-placeholder"},(null===(a=D.manager.displayName)||void 0===a?void 0:a.charAt(0))||r.createElement(i.A,{size:16}))),r.createElement("div",{className:"user-info"},r.createElement("div",{className:"user-name"},D.manager.displayName),r.createElement("div",{className:"user-email"},D.manager.emailAddress))):r.createElement(f,{selectedUser:D.manager,onSelect:e=>O((t=>k(k({},t),{},{manager:e}))),placeholder:"Search and select your manager",required:!0,error:_.manager}),_.manager&&r.createElement("div",{className:"error-text"},_.manager)),r.createElement("div",{className:"form-section"},r.createElement("div",{className:"form-row"},r.createElement("div",{className:"form-group"},r.createElement("label",{className:"form-label"},"Start Date *"),r.createElement("input",{type:"date",value:D.startDate,onChange:e=>O((t=>k(k({},t),{},{startDate:e.target.value}))),className:"form-control ".concat(_.startDate?"error":""),min:(new Date).toISOString().split("T")[0]}),_.startDate&&r.createElement("div",{className:"error-text"},_.startDate)),r.createElement("div",{className:"form-group"},r.createElement("label",{className:"form-label"},"End Date *"),r.createElement("input",{type:"date",value:D.endDate,onChange:e=>O((t=>k(k({},t),{},{endDate:e.target.value}))),className:"form-control ".concat(_.endDate?"error":""),min:D.startDate||(new Date).toISOString().split("T")[0]}),_.endDate&&r.createElement("div",{className:"error-text"},_.endDate)))),r.createElement("div",{className:"form-section"},r.createElement("label",{className:"form-label"},"Reason (Optional)"),r.createElement("textarea",{value:D.reason,onChange:e=>O((t=>k(k({},t),{},{reason:e.target.value}))),className:"form-control",rows:"3",placeholder:"Please provide additional details about your PTO request"})),D.dailySchedules.length>0&&r.createElement("div",{className:"form-section"},r.createElement("div",{className:"schedule-header"},r.createElement("label",{className:"form-label"},"Schedule Details"),r.createElement("div",{className:"quick-actions"},r.createElement("span",{className:"quick-actions-label"},"Mark all days:"),C.map((e=>r.createElement("button",{key:e.value,type:"button",onClick:()=>{return t=e.value,void O((e=>k(k({},e),{},{dailySchedules:e.dailySchedules.map((e=>k(k({},e),{},{leaveType:t})))})));var t},className:"btn btn-sm btn-secondary",title:"Mark all days as ".concat(e.label)},r.createElement("span",null,e.emoji),r.createElement("span",null,e.value)))))),r.createElement("div",{className:"schedule-list"},D.dailySchedules.map(((e,t)=>r.createElement("div",{key:e.date,className:"schedule-day-row"},r.createElement("div",{className:"schedule-day-info"},r.createElement("div",{className:"day-date"},new Date(e.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}))),r.createElement("div",{className:"schedule-controls"},r.createElement("select",{value:e.leaveType,onChange:e=>x(t,"leaveType",e.target.value),className:"form-control schedule-select"},C.map((e=>r.createElement("option",{key:e.value,value:e.value},e.label)))),r.createElement("select",{value:e.type,onChange:e=>x(t,"type",e.target.value),className:"form-control schedule-select"},P.map((e=>r.createElement("option",{key:e.value,value:e.value},e.label)))),r.createElement("button",{type:"button",onClick:()=>(e=>{O((t=>k(k({},t),{},{dailySchedules:t.dailySchedules.filter(((t,a)=>a!==e))})))})(t),className:"btn btn-sm btn-danger",title:"Remove this day"},r.createElement(w.A,{size:14}))))))),_.dailySchedules&&r.createElement("div",{className:"error-text"},_.dailySchedules)),D.dailySchedules.length>0&&r.createElement("div",{className:"form-section"},r.createElement("div",{className:"request-summary"},r.createElement("h4",null,"Request Summary"),r.createElement("div",{className:"summary-grid"},r.createElement("div",{className:"summary-item"},r.createElement("span",{className:"summary-label"},"Total Days:"),r.createElement("span",{className:"summary-value"},D.dailySchedules.reduce(((e,t)=>e+("FULL_DAY"===t.type?1:.5)),0))),r.createElement("div",{className:"summary-item"},r.createElement("span",{className:"summary-label"},"Total Hours:"),r.createElement("span",{className:"summary-value"},D.dailySchedules.reduce(((e,t)=>e+("FULL_DAY"===t.type?8:4)),0),"h")),r.createElement("div",{className:"summary-item"},r.createElement("span",{className:"summary-label"},"Date Range:"),r.createElement("span",{className:"summary-value"},D.startDate&&D.endDate&&"".concat(new Date(D.startDate).toLocaleDateString()," - ").concat(new Date(D.endDate).toLocaleDateString()))),r.createElement("div",{className:"summary-item"},r.createElement("span",{className:"summary-label"},N?"For User:":"Manager:"),r.createElement("span",{className:"summary-value"},N?(null===(s=D.targetUser)||void 0===s?void 0:s.displayName)||"Not selected":(null===(n=D.manager)||void 0===n?void 0:n.displayName)||"Not selected"))),r.createElement("div",{className:"leave-type-breakdown"},r.createElement("span",{className:"breakdown-label"},"Leave Types:"),r.createElement("div",{className:"breakdown-items"},Object.entries(D.dailySchedules.reduce(((e,t)=>(e[t.leaveType]=(e[t.leaveType]||0)+("FULL_DAY"===t.type?1:.5),e)),{})).map((e=>{let[t,a]=e;return r.createElement("span",{key:t,className:"breakdown-item"},T(t)," ",t,": ",a," days")})))))),_.duplicate&&r.createElement("div",{className:"alert alert-error"},r.createElement(h.A,{size:20}),r.createElement("div",null,r.createElement("strong",null,"Scheduling Conflict"),r.createElement("p",null,_.duplicate))),r.createElement("div",{className:"form-actions"},r.createElement("button",{type:"button",onClick:m,className:"btn btn-secondary"},"Cancel"),r.createElement("button",{type:"button",onClick:()=>{var e;if(!(()=>{var e,t;const a={};D.targetUser||(a.targetUser="User is required"),N||D.manager||(a.manager="Manager is required"),D.startDate||(a.startDate="Start date is required"),D.endDate||(a.endDate="End date is required"),D.startDate&&D.endDate&&new Date(D.startDate)>new Date(D.endDate)&&(a.endDate="End date must be after start date"),0===D.dailySchedules.length&&(a.dailySchedules="Please select at least one day");const r=(null===(e=D.targetUser)||void 0===e?void 0:e.accountId)||(null===(t=D.targetUser)||void 0===t?void 0:t.jira_account_id);if(r){const e=D.dailySchedules.filter((e=>E.some((t=>{var a;return(t.requester_id===r||t.requester_email===(null===(a=D.targetUser)||void 0===a?void 0:a.emailAddress))&&"declined"!==t.status&&t.start_date<=e.date&&t.end_date>=e.date}))));e.length>0&&(a.duplicate="This user already has PTO requests for: ".concat(e.map((e=>new Date(e.date).toLocaleDateString())).join(", ")))}return q(a),0===Object.keys(a).length})())return;const t=D.dailySchedules.reduce(((e,t)=>e+("FULL_DAY"===t.type?1:.5)),0),a=D.dailySchedules.reduce(((e,t)=>e+("FULL_DAY"===t.type?8:4)),0),r=k({reporter:N?D.targetUser:d,manager:D.manager,startDate:D.startDate,endDate:D.endDate,leaveType:(null===(e=D.dailySchedules[0])||void 0===e?void 0:e.leaveType)||"vacation",reason:D.reason,dailySchedules:D.dailySchedules,totalDays:t,totalHours:a},N&&{targetUser:D.targetUser});o(r)},disabled:!D.targetUser||!N&&!D.manager||!D.startDate||!D.endDate||0===D.dailySchedules.length||!!_.duplicate||S,className:"btn btn-primary"},N?"Create PTO Request":"Submit Request")),N&&r.createElement("div",{className:"admin-notice"},r.createElement("strong",null,"Admin Mode:")," This PTO request will be created with admin privileges."),0===D.dailySchedules.length&&r.createElement("div",{className:"instructions"},r.createElement("strong",null,"Tip:")," Select start and end dates to configure your PTO schedule, or go back to select dates on the calendar."))))};function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){x(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const P=function(e){let{isOpen:t,onClose:a,teams:s,users:l,onSaveTeam:n,onDeleteTeam:c,onSaveUser:m,onDeleteUser:i,showNotification:o,onRefresh:d}=e;const[u,v]=(0,r.useState)("teams"),[p,y]=(0,r.useState)("list"),[E,N]=(0,r.useState)(null),[g,b]=(0,r.useState)(null),[h,w]=(0,r.useState)(!1),[D,T]=(0,r.useState)({name:"",description:"",teamLead:null,department:"",color:"#667eea"}),[O,k]=(0,r.useState)({firstName:"",lastName:"",displayName:"",jiraAccountId:"",employmentType:"full-time",hireDate:"",teamId:"",capacity:40}),[_,q]=(0,r.useState)([{dayOfWeek:1,dayName:"Monday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:2,dayName:"Tuesday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:3,dayName:"Wednesday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:4,dayName:"Thursday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:5,dayName:"Friday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:6,dayName:"Saturday",isWorkingDay:!1,startTime:"",endTime:"",hoursPerDay:0},{dayOfWeek:7,dayName:"Sunday",isWorkingDay:!1,startTime:"",endTime:"",hoursPerDay:0}]),[S,x]=(0,r.useState)({}),P=()=>{T({name:"",description:"",teamLead:null,department:"",color:"#667eea"}),x({}),N(null)},C=()=>{k({firstName:"",lastName:"",displayName:"",jiraAccountId:"",employmentType:"full-time",hireDate:"",teamId:"",capacity:40}),q([{dayOfWeek:1,dayName:"Monday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:2,dayName:"Tuesday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:3,dayName:"Wednesday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:4,dayName:"Thursday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:5,dayName:"Friday",isWorkingDay:!0,startTime:"09:00",endTime:"17:00",hoursPerDay:8},{dayOfWeek:6,dayName:"Saturday",isWorkingDay:!1,startTime:"",endTime:"",hoursPerDay:0},{dayOfWeek:7,dayName:"Sunday",isWorkingDay:!1,startTime:"",endTime:"",hoursPerDay:0}]),x({}),b(null)};(0,r.useEffect)((()=>{(O.firstName||O.lastName)&&k((e=>A(A({},e),{},{displayName:"".concat(O.firstName," ").concat(O.lastName).trim()})))}),[O.firstName,O.lastName]),(0,r.useEffect)((()=>{const e=_.reduce(((e,t)=>e+(t.isWorkingDay?t.hoursPerDay:0)),0);k((t=>A(A({},t),{},{capacity:e})))}),[_]);const j=(e,t)=>{T((a=>A(A({},a),{},{[e]:t}))),S[e]&&x((t=>A(A({},t),{},{[e]:null})))},U=e=>{b(e),k({firstName:e.first_name||e.firstName||"",lastName:e.last_name||e.lastName||"",displayName:e.display_name||e.displayName||"",jiraAccountId:e.jira_account_id||e.accountId||"",employmentType:e.employment_type||e.employmentType||"full-time",hireDate:e.hire_date||e.hireDate||"",teamId:e.team_id||e.teamId||"",capacity:e.capacity||40}),e.availability&&Array.isArray(e.availability)&&q(e.availability),v("users"),y("form")},R=(e,t)=>{k((a=>A(A({},a),{},{[e]:t}))),S[e]&&x((t=>A(A({},t),{},{[e]:null})))},L=(e,t,a)=>{q((r=>{const s=[...r];if(s[e]=A(A({},s[e]),{},{[t]:a}),"startTime"===t||"endTime"===t){const t=s[e];if(t.startTime&&t.endTime&&t.isWorkingDay){const a=new Date("2000-01-01T".concat(t.startTime)),r=(new Date("2000-01-01T".concat(t.endTime))-a)/36e5;s[e].hoursPerDay=Math.max(0,r)}}return"isWorkingDay"!==t||a||(s[e].startTime="",s[e].endTime="",s[e].hoursPerDay=0),s}))},I=async(e,t)=>{if(window.confirm('Are you sure you want to delete the user "'.concat(t,'"? This action cannot be undone.'))){w(!0);try{await i(e),o("User deleted successfully"),d&&d()}catch(e){o("Failed to delete user","error")}finally{w(!1)}}},F=e=>l.filter((t=>t.team_id===e||t.teamId===e)),z=()=>l.filter((e=>!e.team_id&&!e.teamId));return t?r.createElement("div",{className:"modal-overlay"},r.createElement("div",{className:"modal-content team-management-modal"},r.createElement("div",{className:"modal-header"},r.createElement("h3",null,"Team & User Management"),r.createElement("button",{className:"modal-close",onClick:a},"Ã—")),r.createElement("div",{className:"modal-body"},r.createElement("div",{className:"main-tab-navigation"},r.createElement("button",{className:"main-tab-btn ".concat("teams"===u?"active":""),onClick:()=>{v("teams"),y("list"),P(),C()}},"ðŸ‘¥ Teams (",s.length,")"),r.createElement("button",{className:"main-tab-btn ".concat("users"===u?"active":""),onClick:()=>{v("users"),y("list"),P(),C()}},"ðŸ‘¤ Users (",l.length,")")),"teams"===u&&r.createElement(r.Fragment,null,r.createElement("div",{className:"sub-tab-navigation"},r.createElement("button",{className:"tab-btn ".concat("list"===p?"active":""),onClick:()=>y("list")},"Teams List"),r.createElement("button",{className:"tab-btn ".concat("form"===p?"active":""),onClick:()=>{y("form"),P()}},E?"Edit Team":"Add New Team")),"list"===p&&r.createElement("div",{className:"teams-section"},0===s.length?r.createElement("div",{className:"empty-state"},r.createElement("div",{className:"empty-icon"},"ðŸ‘¥"),r.createElement("h4",null,"No Teams Created"),r.createElement("p",null,"Create your first team to organize your resources"),r.createElement("button",{className:"btn btn-primary",onClick:()=>{P(),y("form")}},"Create First Team")):r.createElement("div",{className:"teams-grid"},s.map((e=>{var t,a;const s=F(e.id);return r.createElement("div",{key:e.id,className:"team-card",style:{borderLeftColor:e.color}},r.createElement("div",{className:"team-header"},r.createElement("h4",null,e.name),r.createElement("div",{className:"team-actions"},r.createElement("button",{className:"btn btn-sm btn-secondary",onClick:()=>(e=>{N(e);let t=null;e.team_lead&&("string"==typeof e.team_lead?t=l.find((t=>t.display_name===e.team_lead||t.displayName===e.team_lead||t.name===e.team_lead))||null:"object"==typeof e.team_lead&&(t=e.team_lead)),T({name:e.name||"",description:e.description||"",teamLead:t,department:e.department||"",color:e.color||"#667eea"}),y("form")})(e),disabled:h},"Edit"),r.createElement("button",{className:"btn btn-sm btn-danger",onClick:()=>(async(e,t)=>{if(window.confirm('Are you sure you want to delete the team "'.concat(t,'"? This action cannot be undone.'))){w(!0);try{await c(e),o("Team deleted successfully"),d&&d()}catch(e){o("Failed to delete team","error")}finally{w(!1)}}})(e.id,e.name),disabled:h},"Delete"))),e.description&&r.createElement("p",{className:"team-description"},e.description),r.createElement("div",{className:"team-meta"},e.department&&r.createElement("span",{className:"team-department"},"ðŸ“ ",e.department),(e.team_lead||(null===(t=e.manager)||void 0===t?void 0:t.displayName))&&r.createElement("span",{className:"team-lead"},"ðŸ‘¤ ",e.team_lead||(null===(a=e.manager)||void 0===a?void 0:a.displayName)),r.createElement("span",{className:"member-count"},s.length," members")),s.length>0&&r.createElement("div",{className:"team-members-preview"},r.createElement("h5",null,"Members:"),r.createElement("div",{className:"members-list"},s.slice(0,3).map((e=>{var t;return r.createElement("div",{key:e.id,className:"member-preview"},r.createElement("div",{className:"member-avatar-small"},e.avatar_url||e.avatarUrl?r.createElement("img",{src:e.avatar_url||e.avatarUrl,alt:e.display_name||e.displayName}):r.createElement("div",{className:"avatar-placeholder-small"},(null===(t=e.display_name||e.displayName||e.name)||void 0===t?void 0:t.charAt(0))||"?")),r.createElement("span",{className:"member-name-small"},e.display_name||e.displayName||e.name))})),s.length>3&&r.createElement("div",{className:"more-members"},"+",s.length-3," more"))))})))),"form"===p&&r.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return D.name.trim()||(e.name="Team name is required"),x(e),0===Object.keys(e).length})()){w(!0);try{var t,a;const e={id:null==E?void 0:E.id,name:D.name,description:D.description,team_lead:(null===(t=D.teamLead)||void 0===t?void 0:t.displayName)||(null===(a=D.teamLead)||void 0===a?void 0:a.display_name)||"",teamLeadUser:D.teamLead,department:D.department,color:D.color,manager:(null==E?void 0:E.manager)||D.teamLead||null,members:(null==E?void 0:E.members)||[]};await n(e),o(E?"Team updated successfully":"Team created successfully"),P(),y("list"),d&&d()}catch(e){o("Failed to save team","error")}finally{w(!1)}}},className:"team-form"},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"team-name"},"Team Name *"),r.createElement("input",{type:"text",id:"team-name",className:"form-control ".concat(S.name?"error":""),value:D.name,onChange:e=>j("name",e.target.value),placeholder:"Enter team name",disabled:h}),S.name&&r.createElement("span",{className:"error-text"},S.name)),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"team-description"},"Description"),r.createElement("textarea",{id:"team-description",className:"form-control",value:D.description,onChange:e=>j("description",e.target.value),placeholder:"Brief description of the team's purpose",rows:"3",disabled:h})),r.createElement("div",{className:"form-row"},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"team-lead"},"Team Lead"),r.createElement(f,{selectedUser:D.teamLead,onSelect:e=>{T((t=>A(A({},t),{},{teamLead:e}))),S.teamLead&&x((e=>A(A({},e),{},{teamLead:null})))},placeholder:"Search and select team lead",disabled:h,error:S.teamLead}),S.teamLead&&r.createElement("span",{className:"error-text"},S.teamLead)),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"department"},"Department"),r.createElement("select",{id:"department",className:"form-control",value:D.department,onChange:e=>j("department",e.target.value),disabled:h},r.createElement("option",{value:""},"Select Department"),["Product","Devops","RebelCare","Strategy","Service Delivery","Client Services"].map((e=>r.createElement("option",{key:e,value:e},e)))))),r.createElement("div",{className:"form-group"},r.createElement("label",null,"Team Color"),r.createElement("div",{className:"color-options"},["#667eea","#764ba2","#f093fb","#f5576c","#4facfe","#00f2fe","#43e97b","#38f9d7","#ffecd2","#fcb69f"].map((e=>r.createElement("div",{key:e,className:"color-option ".concat(D.color===e?"selected":""),style:{backgroundColor:e},onClick:()=>!h&&j("color",e)}))))),r.createElement("div",{className:"form-actions"},r.createElement("button",{type:"submit",className:"btn btn-primary",disabled:h},h?"Saving...":E?"Update Team":"Create Team"),r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:()=>{P(),y("list")},disabled:h},"Cancel")))),"users"===u&&r.createElement(r.Fragment,null,r.createElement("div",{className:"sub-tab-navigation"},r.createElement("button",{className:"tab-btn ".concat("list"===p?"active":""),onClick:()=>y("list")},"Users List"),r.createElement("button",{className:"tab-btn ".concat("form"===p?"active":""),onClick:()=>{y("form"),C()}},g?"Edit User":"Add New User")),"list"===p&&r.createElement("div",{className:"users-section"},0===l.length?r.createElement("div",{className:"empty-state"},r.createElement("div",{className:"empty-icon"},"ðŸ‘¤"),r.createElement("h4",null,"No Users Created"),r.createElement("p",null,"Add your first team member to get started"),r.createElement("button",{className:"btn btn-primary",onClick:()=>{C(),y("form")}},"Add First User")):r.createElement(r.Fragment,null,s.map((e=>{const t=F(e.id);return 0===t.length?null:r.createElement("div",{key:e.id,className:"team-users-section"},r.createElement("h4",{style:{color:e.color}},e.name," (",t.length," members)"),r.createElement("div",{className:"users-grid"},t.map((e=>{var t,a;return r.createElement("div",{key:e.id,className:"user-card"},r.createElement("div",{className:"user-avatar"},e.avatar_url||e.avatarUrl?r.createElement("img",{src:e.avatar_url||e.avatarUrl,alt:e.display_name||e.displayName}):r.createElement("div",{className:"avatar-placeholder"},(null===(t=e.display_name||e.displayName||e.name)||void 0===t?void 0:t.charAt(0))||"?")),r.createElement("div",{className:"user-info"},r.createElement("h5",null,e.display_name||e.displayName||e.name),r.createElement("p",{className:"user-role"},null===(a=e.employment_type||e.employmentType)||void 0===a?void 0:a.replace("-"," ")),r.createElement("div",{className:"user-capacity"},e.capacity||40,"h/week capacity")),r.createElement("div",{className:"user-actions"},r.createElement("button",{className:"btn btn-sm btn-secondary",onClick:()=>U(e),disabled:h},"Edit"),r.createElement("button",{className:"btn btn-sm btn-danger",onClick:()=>I(e.id,e.display_name||e.displayName||e.name),disabled:h},"Delete")))}))))})),z().length>0&&r.createElement("div",{className:"team-users-section"},r.createElement("h4",{style:{color:"#6c757d"}},"Unassigned Users (",z().length,")"),r.createElement("div",{className:"users-grid"},z().map((e=>{var t,a;return r.createElement("div",{key:e.id,className:"user-card"},r.createElement("div",{className:"user-avatar"},e.avatar_url||e.avatarUrl?r.createElement("img",{src:e.avatar_url||e.avatarUrl,alt:e.display_name||e.displayName}):r.createElement("div",{className:"avatar-placeholder"},(null===(t=e.display_name||e.displayName||e.name)||void 0===t?void 0:t.charAt(0))||"?")),r.createElement("div",{className:"user-info"},r.createElement("h5",null,e.display_name||e.displayName||e.name),r.createElement("p",{className:"user-role"},null===(a=e.employment_type||e.employmentType)||void 0===a?void 0:a.replace("-"," ")),r.createElement("div",{className:"user-capacity"},e.capacity||40,"h/week capacity")),r.createElement("div",{className:"user-actions"},r.createElement("button",{className:"btn btn-sm btn-secondary",onClick:()=>U(e),disabled:h},"Edit"),r.createElement("button",{className:"btn btn-sm btn-danger",onClick:()=>I(e.id,e.display_name||e.displayName||e.name),disabled:h},"Delete")))})))))),"form"===p&&r.createElement("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return O.firstName.trim()||(e.firstName="First name is required"),O.lastName.trim()||(e.lastName="Last name is required"),x(e),0===Object.keys(e).length})()){w(!0);try{const e={id:null==g?void 0:g.id,first_name:O.firstName,last_name:O.lastName,display_name:O.displayName,jira_account_id:O.jiraAccountId,employment_type:O.employmentType,hire_date:O.hireDate,team_id:O.teamId,capacity:O.capacity,availability:_};await m(e),o(g?"User updated successfully":"User created successfully"),C(),y("list"),d&&d()}catch(e){o("Failed to save user","error")}finally{w(!1)}}},className:"user-form"},r.createElement("div",{className:"form-row"},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"firstName"},"First Name *"),r.createElement("input",{type:"text",id:"firstName",className:"form-control ".concat(S.firstName?"error":""),value:O.firstName,onChange:e=>R("firstName",e.target.value),placeholder:"Enter first name",disabled:h}),S.firstName&&r.createElement("span",{className:"error-text"},S.firstName)),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"lastName"},"Last Name *"),r.createElement("input",{type:"text",id:"lastName",className:"form-control ".concat(S.lastName?"error":""),value:O.lastName,onChange:e=>R("lastName",e.target.value),placeholder:"Enter last name",disabled:h}),S.lastName&&r.createElement("span",{className:"error-text"},S.lastName))),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"displayName"},"Display Name"),r.createElement("input",{type:"text",id:"displayName",className:"form-control",value:O.displayName,onChange:e=>R("displayName",e.target.value),placeholder:"Display name (auto-generated from first/last name)",disabled:h})),r.createElement("div",{className:"form-row"},r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"employmentType"},"Employment Type"),r.createElement("select",{id:"employmentType",className:"form-control",value:O.employmentType,onChange:e=>R("employmentType",e.target.value),disabled:h},r.createElement("option",{value:"full-time"},"Full-time"),r.createElement("option",{value:"part-time"},"Part-time"),r.createElement("option",{value:"contractor"},"Contractor"))),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"hireDate"},"Hire Date"),r.createElement("input",{type:"date",id:"hireDate",className:"form-control",value:O.hireDate,onChange:e=>R("hireDate",e.target.value),disabled:h}))),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"teamId"},"Team"),r.createElement("select",{id:"teamId",className:"form-control",value:O.teamId||"",onChange:e=>R("teamId",e.target.value),disabled:h},r.createElement("option",{value:""},"Select a team (optional)"),s.map((e=>r.createElement("option",{key:e.id,value:e.id},e.name))))),r.createElement("div",{className:"form-group"},r.createElement("label",{htmlFor:"jiraAccountId"},"Jira Account ID"),r.createElement("input",{type:"text",id:"jiraAccountId",className:"form-control",value:O.jiraAccountId,onChange:e=>R("jiraAccountId",e.target.value),placeholder:"Optional: Link to Jira account",disabled:h})),r.createElement("div",{className:"availability-section"},r.createElement("h4",null,"Working Schedule"),r.createElement("p",{className:"help-text"},"Set the default working hours for this team member."),r.createElement("div",{className:"availability-grid"},_.map(((e,t)=>r.createElement("div",{key:e.dayOfWeek,className:"availability-day"},r.createElement("div",{className:"day-header"},r.createElement("label",{className:"checkbox-label"},r.createElement("input",{type:"checkbox",checked:e.isWorkingDay,onChange:e=>L(t,"isWorkingDay",e.target.checked),disabled:h}),r.createElement("span",{className:"day-name"},e.dayName))),e.isWorkingDay&&r.createElement("div",{className:"day-details"},r.createElement("div",{className:"time-inputs"},r.createElement("input",{type:"time",value:e.startTime,onChange:e=>L(t,"startTime",e.target.value),className:"form-control input-small",disabled:h}),r.createElement("span",null,"to"),r.createElement("input",{type:"time",value:e.endTime,onChange:e=>L(t,"endTime",e.target.value),className:"form-control input-small",disabled:h})),r.createElement("div",{className:"hours-display"},e.hoursPerDay.toFixed(1)," hours")))))),r.createElement("div",{className:"availability-summary"},r.createElement("strong",null,"Total weekly capacity: "),_.reduce(((e,t)=>e+(t.isWorkingDay?t.hoursPerDay:0)),0).toFixed(1)," hours")),r.createElement("div",{className:"form-actions"},r.createElement("button",{type:"submit",className:"btn btn-primary",disabled:h},h?"Saving...":g?"Update User":"Create User"),r.createElement("button",{type:"button",className:"btn btn-secondary",onClick:()=>{C(),y("list")},disabled:h},"Cancel"))))),r.createElement("div",{className:"modal-footer"},r.createElement("button",{className:"btn btn-secondary",onClick:a,disabled:h},"Close")))):null};function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){U(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function U(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function R(e){let{title:t,children:a,onClose:s}=e;return r.createElement("div",{className:"modal-overlay"},r.createElement("div",{className:"modal-content admin-modal"},r.createElement("div",{className:"modal-header"},r.createElement("h3",null,t),r.createElement("button",{className:"modal-close",onClick:s},r.createElement(g.A,{size:24}))),r.createElement("div",{className:"modal-body"},a)))}const L=e=>{let{currentUser:t,showNotification:a}=e;const[s,i]=(0,r.useState)("overview"),[d,g]=(0,r.useState)(!1),[b,h]=(0,r.useState)([]),[w,D]=(0,r.useState)([]),[T,O]=(0,r.useState)([]),[k,_]=(0,r.useState)([]),[S,A]=(0,r.useState)([]),[x,C]=(0,r.useState)(!1),[U,L]=(0,r.useState)(!1),[I,F]=(0,r.useState)(!1),[z,M]=(0,r.useState)(!1),[W,B]=(0,r.useState)(null),[Y,H]=(0,r.useState)({scope:"company",teamId:"",userId:"",startDate:"",endDate:"",status:"all"});(0,r.useEffect)((()=>{J(),X()}),[]);const J=async()=>{g(!0);try{await Promise.all([G(),V(),K(),Q()])}catch(e){a("Failed to load admin data","error")}finally{g(!1)}},G=async()=>{try{const e=await(0,o.invoke)("getAdminUsers");e.success&&h(e.data||[])}catch(e){}},V=async()=>{try{const e=await(0,o.invoke)("getTeams");e.success&&D(e.data||[])}catch(e){}},K=async()=>{try{const e=await(0,o.invoke)("getUsers");e.success&&O(e.data||[])}catch(e){}},Q=async()=>{try{const e=await(0,o.invoke)("getPTORequests");e.success&&_(e.data||[])}catch(e){}},X=async()=>{try{const e=await(0,o.invoke)("getInternalJiraUsers",{projectKey:"DEFAULT",startAt:0,maxResults:100});e.success&&A(e.data.users||[])}catch(e){console.error("Failed to load Jira users:",e)}},Z=()=>{const e=T.map((e=>e.jira_account_id||e.email_address)).filter(Boolean);return S.filter((t=>!e.includes(t.accountId)&&!e.includes(t.emailAddress)))},$={totalAdmins:b.length,totalTeams:w.length,totalUsers:T.length,totalRequests:k.length,pendingRequests:k.filter((e=>"pending"===e.status)).length,approvedRequests:k.filter((e=>"approved"===e.status)).length,declinedRequests:k.filter((e=>"declined"===e.status)).length,usersNotInSystem:Z().length},ee={requestsByWeekday:k.reduce(((e,t)=>{const a=new Date(t.start_date).toLocaleDateString("en-US",{weekday:"long"});return e[a]=(e[a]||0)+1,e}),{}),requestsByLeaveType:k.reduce(((e,t)=>(e[t.leave_type]=(e[t.leave_type]||0)+1,e)),{}),requestsByTeam:k.reduce(((e,t)=>{const a=T.find((e=>e.jira_account_id===t.requester_id||e.email_address===t.requester_email)),r=a?w.find((e=>e.id===a.team_id)):null,s=(null==r?void 0:r.name)||"Unassigned";return e[s]=(e[s]||0)+1,e}),{}),requestsByUser:k.reduce(((e,t)=>(e[t.requester_name]=(e[t.requester_name]||0)+1,e)),{})};return r.createElement("div",{className:"admin-dashboard"},r.createElement("div",{className:"admin-tabs"},r.createElement("button",{className:"admin-tab ".concat("overview"===s?"active":""),onClick:()=>i("overview")},r.createElement(m.A,{size:16}),"Overview"),r.createElement("button",{className:"admin-tab ".concat("teams"===s?"active":""),onClick:()=>i("teams")},r.createElement(u.A,{size:16}),"Teams"),r.createElement("button",{className:"admin-tab ".concat("users"===s?"active":""),onClick:()=>i("users")},r.createElement(v.A,{size:16}),"Users"),r.createElement("button",{className:"admin-tab ".concat("analytics"===s?"active":""),onClick:()=>i("analytics")},r.createElement(p.A,{size:16}),"Analytics")),"overview"===s&&r.createElement("div",{className:"admin-section"},r.createElement("div",{className:"admin-stats-grid"},r.createElement("div",{className:"admin-stat-card admin-stat-purple"},r.createElement("div",{className:"stat-icon"},r.createElement(m.A,{size:24})),r.createElement("div",{className:"stat-content"},r.createElement("div",{className:"stat-value"},$.totalAdmins),r.createElement("div",{className:"stat-label"},"Admin Users"))),r.createElement("div",{className:"admin-stat-card admin-stat-blue"},r.createElement("div",{className:"stat-icon"},r.createElement(u.A,{size:24})),r.createElement("div",{className:"stat-content"},r.createElement("div",{className:"stat-value"},$.totalTeams),r.createElement("div",{className:"stat-label"},"Teams"))),r.createElement("div",{className:"admin-stat-card admin-stat-emerald"},r.createElement("div",{className:"stat-icon"},r.createElement(c.A,{size:24})),r.createElement("div",{className:"stat-content"},r.createElement("div",{className:"stat-value"},$.totalUsers),r.createElement("div",{className:"stat-label"},"Users"))),r.createElement("div",{className:"admin-stat-card admin-stat-indigo"},r.createElement("div",{className:"stat-icon"},r.createElement(l.A,{size:24})),r.createElement("div",{className:"stat-content"},r.createElement("div",{className:"stat-value"},$.totalRequests),r.createElement("div",{className:"stat-label"},"Total Requests"))),r.createElement("div",{className:"admin-stat-card admin-stat-yellow"},r.createElement("div",{className:"stat-icon"},r.createElement(n.A,{size:24})),r.createElement("div",{className:"stat-content"},r.createElement("div",{className:"stat-value"},$.pendingRequests),r.createElement("div",{className:"stat-label"},"Pending"))),r.createElement("div",{className:"admin-stat-card admin-stat-green"},r.createElement("div",{className:"stat-icon"},r.createElement(y.A,{size:24})),r.createElement("div",{className:"stat-content"},r.createElement("div",{className:"stat-value"},$.approvedRequests),r.createElement("div",{className:"stat-label"},"Approved")))),r.createElement("div",{className:"card admin-actions-card"},r.createElement("div",{className:"card-header"},r.createElement("h3",null,"Actions")),r.createElement("div",{className:"card-body"},r.createElement("div",{className:"admin-actions-grid"},r.createElement("button",{onClick:()=>C(!0),className:"admin-action-btn"},r.createElement("div",{className:"action-icon bg-purple"},r.createElement(m.A,{size:20})),r.createElement("div",{className:"action-content"},r.createElement("div",{className:"action-title"},"Add Admin"),r.createElement("div",{className:"action-desc"},"Grant admin privileges to users"))),r.createElement("button",{onClick:()=>F(!0),className:"admin-action-btn"},r.createElement("div",{className:"action-icon bg-green"},r.createElement(l.A,{size:20})),r.createElement("div",{className:"action-content"},r.createElement("div",{className:"action-title"},"Create PTO"),r.createElement("div",{className:"action-desc"},"Create PTO requests for users"))),r.createElement("button",{onClick:()=>M(!0),className:"admin-action-btn"},r.createElement("div",{className:"action-icon bg-blue"},r.createElement(E.A,{size:20})),r.createElement("div",{className:"action-content"},r.createElement("div",{className:"action-title"},"Generate Reports"),r.createElement("div",{className:"action-desc"},"Export detailed PTO reports"))),r.createElement("button",{onClick:()=>L(!0),className:"admin-action-btn"},r.createElement("div",{className:"action-icon bg-indigo"},r.createElement(N.A,{size:20})),r.createElement("div",{className:"action-content"},r.createElement("div",{className:"action-title"},"Manage Teams & Users"),r.createElement("div",{className:"action-desc"},"Advanced team and user management")))))),r.createElement("div",{className:"card recent-activity-card"},r.createElement("div",{className:"card-header"},r.createElement("h3",null,"Recent PTO Activity")),r.createElement("div",{className:"card-body"},0===k.length?r.createElement("div",{className:"empty-state-small"},r.createElement(l.A,{size:32}),r.createElement("p",null,"No PTO requests yet")):r.createElement("div",{className:"recent-requests-list"},k.sort(((e,t)=>new Date(t.submitted_at)-new Date(e.submitted_at))).slice(0,5).map((e=>{var t;return r.createElement("div",{key:e.id,className:"recent-request-item"},r.createElement("div",{className:"request-avatar"},(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||"?"),r.createElement("div",{className:"request-details"},r.createElement("div",{className:"request-summary"},r.createElement("span",{className:"requester-name"},e.requester_name),r.createElement("span",{className:"request-action"},"requested ",e.leave_type)),r.createElement("div",{className:"request-meta"},new Date(e.start_date).toLocaleDateString()," â€¢ ",e.total_days," days")),r.createElement("div",{className:"request-status"},r.createElement("span",{className:"status-badge status-".concat(e.status)},e.status)))})))))),"teams"===s&&r.createElement("div",{className:"admin-section"},r.createElement("div",{className:"section-header"},r.createElement("h3",null,"Teams Management"),r.createElement("button",{onClick:()=>L(!0),className:"btn btn-primary"},r.createElement(u.A,{size:16}),"Manage Teams")),r.createElement("div",{className:"teams-grid"},w.map((e=>{var t,a,s;return r.createElement("div",{key:e.id,className:"team-card"},r.createElement("div",{className:"team-header"},r.createElement("div",{className:"team-color",style:{backgroundColor:e.color}}),r.createElement("div",{className:"team-info"},r.createElement("h4",null,e.name),e.description&&r.createElement("p",null,e.description))),r.createElement("div",{className:"team-stats"},r.createElement("div",{className:"team-stat"},r.createElement("span",{className:"stat-label"},"Members:"),r.createElement("span",{className:"stat-value"},(null===(t=e.members)||void 0===t?void 0:t.length)||0)),r.createElement("div",{className:"team-stat"},r.createElement("span",{className:"stat-label"},"Department:"),r.createElement("span",{className:"stat-value"},e.department||"N/A")),r.createElement("div",{className:"team-stat"},r.createElement("span",{className:"stat-label"},"Lead:"),r.createElement("span",{className:"stat-value"},e.team_lead||"N/A"))),r.createElement("div",{className:"team-members-preview"},null===(a=e.members)||void 0===a?void 0:a.slice(0,3).map((e=>{var t,a;return r.createElement("div",{key:e.id,className:"member-avatar"},(null===(t=e.display_name)||void 0===t?void 0:t.charAt(0))||(null===(a=e.displayName)||void 0===a?void 0:a.charAt(0))||"?")})),(null===(s=e.members)||void 0===s?void 0:s.length)>3&&r.createElement("div",{className:"member-avatar more"},"+",e.members.length-3)))})),0===w.length&&r.createElement("div",{className:"empty-state"},r.createElement(u.A,{size:48}),r.createElement("h4",null,"No Teams Created"),r.createElement("p",null,"Create your first team to organize users."),r.createElement("button",{onClick:()=>L(!0),className:"btn btn-primary"},"Create Team")))),"users"===s&&r.createElement("div",{className:"admin-section"},r.createElement("div",{className:"section-header"},r.createElement("h3",null,"Users Management"),r.createElement("button",{onClick:()=>L(!0),className:"btn btn-primary"},r.createElement(v.A,{size:16}),"Manage Users")),r.createElement("div",{className:"users-stats-grid"},r.createElement("div",{className:"stat-card stat-blue"},r.createElement("div",{className:"stat-content"},r.createElement("div",{className:"stat-value"},$.totalUsers),r.createElement("div",{className:"stat-label"},"Total Users in System"))),r.createElement("div",{className:"stat-card stat-orange"},r.createElement("div",{className:"stat-content"},r.createElement("div",{className:"stat-value"},$.usersNotInSystem),r.createElement("div",{className:"stat-label"},"Jira Users Not in System")))),Z().length>0&&r.createElement("div",{className:"card users-not-in-system-card"},r.createElement("div",{className:"card-header"},r.createElement("h4",null,"Jira Users Not Added to System"),r.createElement("div",{className:"users-count"},Z().length," users")),r.createElement("div",{className:"card-body"},r.createElement("p",{className:"help-text"},"These internal Jira users are not added to the PTO system. Consider adding them to teams for proper PTO management."),r.createElement("div",{className:"users-not-in-system-list"},Z().slice(0,10).map((e=>{var t;return r.createElement("div",{key:e.accountId,className:"user-not-in-system-item"},r.createElement("div",{className:"user-info"},r.createElement("div",{className:"user-avatar"},(null===(t=e.displayName)||void 0===t?void 0:t.charAt(0))||"?"),r.createElement("div",{className:"user-details"},r.createElement("div",{className:"user-name"},e.displayName),r.createElement("div",{className:"user-email"},e.emailAddress))),r.createElement("button",{onClick:()=>{L(!0)},className:"btn btn-sm btn-secondary"},"Add to System"))})),Z().length>10&&r.createElement("div",{className:"show-more-users"},"+",Z().length-10," more users")))),r.createElement("div",{className:"card current-users-card"},r.createElement("div",{className:"card-header"},r.createElement("h4",null,"Current Users in System")),r.createElement("div",{className:"card-body"},r.createElement("div",{className:"users-grid"},T.map((e=>{var t,a;const s=w.find((t=>t.id===e.team_id));return r.createElement("div",{key:e.id,className:"user-card"},r.createElement("div",{className:"user-avatar"},(null===(t=e.display_name)||void 0===t?void 0:t.charAt(0))||(null===(a=e.displayName)||void 0===a?void 0:a.charAt(0))||"?"),r.createElement("div",{className:"user-info"},r.createElement("div",{className:"user-name"},e.display_name||e.displayName),r.createElement("div",{className:"user-email"},e.email_address||e.emailAddress),r.createElement("div",{className:"user-team"},s?s.name:"No Team")))})))))),"analytics"===s&&r.createElement("div",{className:"admin-section"},r.createElement("div",{className:"section-header"},r.createElement("h3",null,"Analytics Dashboard")),r.createElement("div",{className:"analytics-grid"},r.createElement("div",{className:"card analytics-card"},r.createElement("div",{className:"card-header"},r.createElement("h4",null,"Requests by Status")),r.createElement("div",{className:"card-body"},r.createElement("div",{className:"analytics-chart"},r.createElement("div",{className:"chart-item"},r.createElement("div",{className:"chart-bar"},r.createElement("div",{className:"bar bar-green",style:{height:"".concat($.approvedRequests/Math.max($.totalRequests,1)*100,"%")}})),r.createElement("div",{className:"chart-label"},r.createElement("div",{className:"chart-value"},$.approvedRequests),r.createElement("div",{className:"chart-name"},"Approved"))),r.createElement("div",{className:"chart-item"},r.createElement("div",{className:"chart-bar"},r.createElement("div",{className:"bar bar-yellow",style:{height:"".concat($.pendingRequests/Math.max($.totalRequests,1)*100,"%")}})),r.createElement("div",{className:"chart-label"},r.createElement("div",{className:"chart-value"},$.pendingRequests),r.createElement("div",{className:"chart-name"},"Pending"))),r.createElement("div",{className:"chart-item"},r.createElement("div",{className:"chart-bar"},r.createElement("div",{className:"bar bar-red",style:{height:"".concat($.declinedRequests/Math.max($.totalRequests,1)*100,"%")}})),r.createElement("div",{className:"chart-label"},r.createElement("div",{className:"chart-value"},$.declinedRequests),r.createElement("div",{className:"chart-name"},"Declined")))))),r.createElement("div",{className:"card analytics-card"},r.createElement("div",{className:"card-header"},r.createElement("h4",null,"Requests by Leave Type")),r.createElement("div",{className:"card-body"},r.createElement("div",{className:"analytics-list"},Object.entries(ee.requestsByLeaveType).sort(((e,t)=>{let[,a]=e,[,r]=t;return r-a})).map((e=>{let[t,a]=e;return r.createElement("div",{key:t,className:"analytics-item"},r.createElement("div",{className:"item-info"},r.createElement("span",{className:"item-icon"},"vacation"===t?"ðŸ–ï¸":"sick"===t?"ðŸ¤’":"personal"===t?"ðŸ‘¤":"ðŸŽ‰"),r.createElement("span",{className:"item-label"},t.charAt(0).toUpperCase()+t.slice(1))),r.createElement("div",{className:"item-value"},a))}))))),r.createElement("div",{className:"card analytics-card"},r.createElement("div",{className:"card-header"},r.createElement("h4",null,"Requests by Team")),r.createElement("div",{className:"card-body"},r.createElement("div",{className:"analytics-list"},Object.entries(ee.requestsByTeam).sort(((e,t)=>{let[,a]=e,[,r]=t;return r-a})).map((e=>{let[t,a]=e;return r.createElement("div",{key:t,className:"analytics-item"},r.createElement("div",{className:"item-info"},r.createElement("span",{className:"item-icon"},"ðŸ‘¥"),r.createElement("span",{className:"item-label"},t)),r.createElement("div",{className:"item-value"},a))}))))),r.createElement("div",{className:"card analytics-card"},r.createElement("div",{className:"card-header"},r.createElement("h4",null,"Requests by Weekday")),r.createElement("div",{className:"card-body"},r.createElement("div",{className:"analytics-list"},Object.entries(ee.requestsByWeekday).sort(((e,t)=>{let[,a]=e,[,r]=t;return r-a})).map((e=>{let[t,a]=e;return r.createElement("div",{key:t,className:"analytics-item"},r.createElement("div",{className:"item-info"},r.createElement("span",{className:"item-icon"},"ðŸ“…"),r.createElement("span",{className:"item-label"},t)),r.createElement("div",{className:"item-value"},a))}))))))),x&&r.createElement(R,{title:"Add Admin User",onClose:()=>C(!1)},r.createElement("div",{className:"add-admin-content"},r.createElement("p",null,"Grant admin privileges to a user. They will be able to manage teams, users, and all PTO requests."),r.createElement(f,{selectedUser:null,onSelect:async e=>{if(e)try{const r=await(0,o.invoke)("addAdminUser",{accountId:e.accountId,addedBy:t.accountId});r.success?(a("".concat(e.displayName," added as admin")),C(!1),G()):a(r.message||"Failed to add admin","error")}catch(e){a("Failed to add admin user","error")}},placeholder:"Search and select user to grant admin privileges",required:!0}))),z&&r.createElement(R,{title:"Generate PTO Report",onClose:()=>M(!1)},r.createElement("div",{className:"report-config"},r.createElement("div",{className:"form-group"},r.createElement("label",null,"Report Scope"),r.createElement("select",{value:Y.scope,onChange:e=>H((t=>j(j({},t),{},{scope:e.target.value}))),className:"form-control"},r.createElement("option",{value:"company"},"Full Company"),r.createElement("option",{value:"team"},"Specific Team"),r.createElement("option",{value:"user"},"Specific User"))),"team"===Y.scope&&r.createElement("div",{className:"form-group"},r.createElement("label",null,"Select Team"),r.createElement("select",{value:Y.teamId,onChange:e=>H((t=>j(j({},t),{},{teamId:e.target.value}))),className:"form-control"},r.createElement("option",{value:""},"Choose a team"),w.map((e=>r.createElement("option",{key:e.id,value:e.id},e.name))))),"user"===Y.scope&&r.createElement("div",{className:"form-group"},r.createElement("label",null,"Select User"),r.createElement("select",{value:Y.userId,onChange:e=>H((t=>j(j({},t),{},{userId:e.target.value}))),className:"form-control"},r.createElement("option",{value:""},"Choose a user"),T.map((e=>r.createElement("option",{key:e.id,value:e.jira_account_id||e.id},e.display_name||e.displayName))))),r.createElement("div",{className:"form-row"},r.createElement("div",{className:"form-group"},r.createElement("label",null,"Start Date"),r.createElement("input",{type:"date",value:Y.startDate,onChange:e=>H((t=>j(j({},t),{},{startDate:e.target.value}))),className:"form-control"})),r.createElement("div",{className:"form-group"},r.createElement("label",null,"End Date"),r.createElement("input",{type:"date",value:Y.endDate,onChange:e=>H((t=>j(j({},t),{},{endDate:e.target.value}))),className:"form-control"}))),r.createElement("div",{className:"form-group"},r.createElement("label",null,"Status Filter"),r.createElement("select",{value:Y.status,onChange:e=>H((t=>j(j({},t),{},{status:e.target.value}))),className:"form-control"},r.createElement("option",{value:"all"},"All Status"),r.createElement("option",{value:"pending"},"Pending"),r.createElement("option",{value:"approved"},"Approved"),r.createElement("option",{value:"declined"},"Declined"))),r.createElement("div",{className:"form-actions"},r.createElement("button",{onClick:()=>M(!1),className:"btn btn-secondary"},"Cancel"),r.createElement("button",{onClick:async()=>{try{let e=[...k];if("team"===Y.scope&&Y.teamId){const t=T.filter((e=>e.team_id===Y.teamId)).map((e=>e.jira_account_id||e.id));e=e.filter((e=>t.includes(e.requester_id)))}else"user"===Y.scope&&Y.userId&&(e=e.filter((e=>e.requester_id===Y.userId)));Y.startDate&&Y.endDate&&(e=e.filter((e=>{const t=new Date(e.start_date),a=new Date(Y.startDate),r=new Date(Y.endDate);return t>=a&&t<=r}))),"all"!==Y.status&&(e=e.filter((e=>e.status===Y.status)));const t=e.map((e=>{const t=T.find((t=>t.jira_account_id===e.requester_id||t.email_address===e.requester_email)),a=t?w.find((e=>e.id===t.team_id)):null;return{Date:(new Date).toLocaleDateString(),Manager:e.manager_name||"",Team:(null==a?void 0:a.name)||"Unassigned",Department:(null==a?void 0:a.department)||"",User:e.requester_name,"Start Date":e.start_date,"End Date":e.end_date,"Total Days":e.total_days||0,"Leave Type":e.leave_type,Reason:e.reason||"","Manager Comment":e.reviewer_comments||"",Status:e.status,"Submitted Date":e.submitted_at}})),r=Object.keys(t[0]||{}),s=[r.join(","),...t.map((e=>r.map((t=>'"'.concat((e[t]||"").toString().replace(/"/g,'""'),'"'))).join(",")))].join("\n"),l=new Blob([s],{type:"text/csv"}),n=URL.createObjectURL(l),c=document.createElement("a");c.href=n,c.download="pto-admin-report-".concat(Y.scope,"-").concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(n),a("Report downloaded successfully!"),M(!1)}catch(e){a("Failed to generate report","error")}},className:"btn btn-primary"},r.createElement(E.A,{size:16}),"Generate Report")))),U&&r.createElement(P,{isOpen:U,onClose:()=>L(!1),teams:w,users:T,onSaveTeam:async e=>{await(0,o.invoke)(e.id?"updateTeam":"createTeam",e),V()},onDeleteTeam:async e=>{await(0,o.invoke)("deleteTeam",{teamId:e,deletedBy:t.accountId}),V()},onSaveUser:async e=>{await(0,o.invoke)(e.id?"updateUser":"createUser",e),K()},onDeleteUser:async e=>{await(0,o.invoke)("deleteUser",{userId:e,deletedBy:t.accountId}),K()},showNotification:a,onRefresh:J}),I&&r.createElement(q,{isAdminMode:!0,onClose:()=>{F(!1),B(null)},onSubmit:async e=>{if(null!=e&&e.targetUser)try{var r,s,l;const n=await(0,o.invoke)("submitPTOForUser",{requestData:{requester_id:e.targetUser.accountId,requester_name:e.targetUser.displayName,requester_email:e.targetUser.emailAddress,manager_id:(null===(r=e.manager)||void 0===r?void 0:r.accountId)||"admin",manager_name:(null===(s=e.manager)||void 0===s?void 0:s.displayName)||t.displayName,manager_email:(null===(l=e.manager)||void 0===l?void 0:l.emailAddress)||t.emailAddress,start_date:e.startDate,end_date:e.endDate,leave_type:e.leaveType||"vacation",reason:e.reason||"Admin created",status:"approved",total_days:e.totalDays,total_hours:e.totalHours,daily_schedules:e.dailySchedules},submittedBy:t.accountId});n.success?(a("PTO request created for ".concat(e.targetUser.displayName)),F(!1),B(null),Q()):a(n.message||"Failed to create PTO request","error")}catch(e){a("Failed to create PTO request","error")}else a("Please select a user for PTO","error")},targetUser:W,allUsers:T,allTeams:w,allRequests:k,currentUser:t}))};var I=a(6316),F=a(3160),z=a(7946),M=a(180);const W=e=>{let{status:t}=e;const a=(e=>{const t={pending:{bg:"bg-yellow-100",text:"text-yellow-800",icon:z.A,label:"Pending"},approved:{bg:"bg-green-100",text:"text-green-800",icon:y.A,label:"Approved"},declined:{bg:"bg-red-100",text:"text-red-800",icon:M.A,label:"Declined"}};return t[e.toLowerCase()]||t.pending})(t),s=a.icon;return r.createElement("span",{className:"inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ".concat(a.bg," ").concat(a.text)},r.createElement(s,{size:12}),r.createElement("span",null,a.label))};function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(Object(a),!0).forEach((function(t){H(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function H(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const J=e=>{var t;let{currentUser:a,isAdmin:s,showNotification:c}=e;const[m,d]=(0,r.useState)(null),[u,p]=(0,r.useState)("current_month"),[N,g]=(0,r.useState)("all"),[b,f]=(0,r.useState)([]),[h,w]=(0,r.useState)([]),[D,O]=(0,r.useState)([]),[k,_]=(0,r.useState)(!0),[q,S]=(0,r.useState)({}),[A,x]=(0,r.useState)({}),[P,C]=(0,r.useState)(!1);(0,r.useEffect)((()=>{j()}),[a]),(0,r.useEffect)((()=>{m&&U()}),[m,u]);const j=async()=>{_(!0);try{const e=await(0,o.invoke)("getTeams");if(e.success){const t=e.data||[],r=s?t:t.filter((e=>{var t,r;return(null===(t=e.manager)||void 0===t?void 0:t.accountId)===a.accountId||(null===(r=e.manager)||void 0===r?void 0:r.jira_account_id)===a.accountId}));f(r),r.length>0&&!m&&d(r[0])}if(null!=a&&a.emailAddress){const e=await(0,o.invoke)("getPendingRequests",{managerEmail:a.emailAddress});e.success&&O(e.data||[])}}catch(e){c("Failed to load manager data","error")}finally{_(!1)}},U=async()=>{if(m)try{const e=await(0,o.invoke)("getTeamPTORequests",{teamId:m.id,dateRange:u});e.success&&w(e.data||[])}catch(e){console.error("Error loading team requests:",e),w([])}},R=async(e,t)=>{const a=A[e]||"";S((t=>Y(Y({},t),{},{[e]:!0})));try{const r=await(0,o.invoke)("updatePTORequest",{requestId:e,status:t,comment:a});r.success?(c("Request ".concat(t.toLowerCase()," successfully")),O((t=>t.filter((t=>t.id!==e)))),x((t=>Y(Y({},t),{},{[e]:""}))),U()):c(r.message||"Failed to ".concat(t.toLowerCase()," request"),"error")}catch(e){c("Failed to ".concat(t.toLowerCase()," request"),"error")}finally{S((t=>Y(Y({},t),{},{[e]:!1})))}},L=(0,r.useMemo)((()=>{let e=h;return"all"!==N&&(e=e.filter((e=>e.requester_id===N))),e.sort(((e,t)=>new Date(t.submitted_at)-new Date(e.submitted_at)))}),[h,N]),z=(0,r.useMemo)((()=>{const e=L;return{totalRequests:e.length,approvedRequests:e.filter((e=>"approved"===e.status)).length,pendingRequests:e.filter((e=>"pending"===e.status)).length,declinedRequests:e.filter((e=>"declined"===e.status)).length,totalDaysOff:e.filter((e=>"approved"===e.status)).reduce(((e,t)=>e+(t.total_days||0)),0),ptoByLeaveType:e.filter((e=>"approved"===e.status)).reduce(((e,t)=>{const a=t.leave_type||"unknown";return e[a]=(e[a]||0)+(t.total_days||0),e}),{}),ptoByMember:e.filter((e=>"approved"===e.status)).reduce(((e,t)=>{const a=t.requester_name||"Unknown";return e[a]=(e[a]||0)+(t.total_days||0),e}),{}),ptoByWeekday:e.filter((e=>"approved"===e.status)).reduce(((e,t)=>{const a=new Date(t.start_date),r=new Date(t.end_date);for(let t=new Date(a);t<=r;t.setDate(t.getDate()+1)){const a=t.toLocaleDateString("en-US",{weekday:"long"});e[a]=(e[a]||0)+1}return e}),{})}}),[L]),M=(0,r.useMemo)((()=>{const e=new Date;return h.filter((t=>"approved"===t.status&&new Date(t.start_date)>=e)).sort(((e,t)=>new Date(e.start_date)-new Date(t.start_date))).slice(0,5)}),[h]),B=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),H=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return k?r.createElement("div",{className:"manager-loading"},r.createElement("div",{className:"loading-spinner"}),r.createElement("p",null,"Loading manager dashboard...")):0===b.length?r.createElement("div",{className:"manager-empty"},r.createElement(v.A,{size:48}),r.createElement("h3",null,"No Teams to Manage"),r.createElement("p",null,"You don't have any teams assigned to manage. Contact your administrator if this is incorrect.")):r.createElement("div",{className:"manager-dashboard"},r.createElement("div",{className:"manager-header"},r.createElement("div",{className:"manager-title-section"},r.createElement("h2",null,"Manager Dashboard"),r.createElement("p",null,"Manage team PTO requests and view analytics")),r.createElement("div",{className:"manager-controls"},r.createElement("select",{value:(null==m?void 0:m.id)||"",onChange:e=>d(b.find((t=>t.id===e.target.value))),className:"form-control"},b.map((e=>{var t;return r.createElement("option",{key:e.id,value:e.id},e.name," (",(null===(t=e.members)||void 0===t?void 0:t.length)||0," members)")}))),r.createElement("select",{value:u,onChange:e=>p(e.target.value),className:"form-control"},r.createElement("option",{value:"current_month"},"This Month"),r.createElement("option",{value:"next_month"},"Next Month"),r.createElement("option",{value:"next_3_months"},"Next 3 Months"),r.createElement("option",{value:"current_year"},"This Year"),r.createElement("option",{value:"all"},"All Time")))),r.createElement("div",{className:"manager-stats-grid"},r.createElement("div",{className:"stat-card stat-blue"},r.createElement("div",{className:"stat-icon"},r.createElement(l.A,{size:24})),r.createElement("div",{className:"stat-content"},r.createElement("div",{className:"stat-value"},z.totalRequests),r.createElement("div",{className:"stat-label"},"Total Requests"))),r.createElement("div",{className:"stat-card stat-yellow"},r.createElement("div",{className:"stat-icon"},r.createElement(n.A,{size:24})),r.createElement("div",{className:"stat-content"},r.createElement("div",{className:"stat-value"},z.pendingRequests),r.createElement("div",{className:"stat-label"},"Pending Approval"))),r.createElement("div",{className:"stat-card stat-green"},r.createElement("div",{className:"stat-icon"},r.createElement(y.A,{size:24})),r.createElement("div",{className:"stat-content"},r.createElement("div",{className:"stat-value"},z.approvedRequests),r.createElement("div",{className:"stat-label"},"Approved"))),r.createElement("div",{className:"stat-card stat-purple"},r.createElement("div",{className:"stat-icon"},r.createElement(I.A,{size:24})),r.createElement("div",{className:"stat-content"},r.createElement("div",{className:"stat-value"},z.totalDaysOff),r.createElement("div",{className:"stat-label"},"Days Off")))),D.length>0&&r.createElement("div",{className:"card pending-approvals-card"},r.createElement("div",{className:"card-header"},r.createElement("h3",null,"Pending Approvals"),r.createElement("div",{className:"pending-count"},D.length," requests")),r.createElement("div",{className:"card-body"},r.createElement("div",{className:"pending-requests-list"},D.slice(0,3).map((e=>{var t;return r.createElement("div",{key:e.id,className:"pending-request-item"},r.createElement("div",{className:"request-info"},r.createElement("div",{className:"request-user"},r.createElement("div",{className:"user-avatar"},(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||r.createElement(i.A,{size:16})),r.createElement("div",{className:"user-details"},r.createElement("div",{className:"user-name"},e.requester_name),r.createElement("div",{className:"request-details"},T(e.leave_type)," ",e.leave_type," â€¢ ",e.total_days," days"))),r.createElement("div",{className:"request-dates"},r.createElement("div",null,B(e.start_date)," - ",B(e.end_date)),r.createElement("div",{className:"submitted-date"},"Submitted ",H(e.submitted_at)))),r.createElement("div",{className:"request-actions-inline"},r.createElement("textarea",{placeholder:"Add comment (optional)",value:A[e.id]||"",onChange:t=>x((a=>Y(Y({},a),{},{[e.id]:t.target.value}))),className:"comment-input-small",rows:"2"}),r.createElement("div",{className:"action-buttons-inline"},r.createElement("button",{onClick:()=>R(e.id,"approved"),disabled:q[e.id],className:"btn btn-sm btn-success"},q[e.id]?"...":"Approve"),r.createElement("button",{onClick:()=>R(e.id,"declined"),disabled:q[e.id],className:"btn btn-sm btn-danger"},q[e.id]?"...":"Decline"))))}))),D.length>3&&r.createElement("div",{className:"show-more"},r.createElement("button",{className:"btn btn-secondary"},"View All ",D.length," Pending Requests")))),r.createElement("div",{className:"manager-content-grid"},r.createElement("div",{className:"card analytics-card"},r.createElement("div",{className:"card-header"},r.createElement("h3",null,"Team Analytics"),r.createElement("div",{className:"analytics-period"},u.replace("_"," ").replace(/\b\w/g,(e=>e.toUpperCase())))),r.createElement("div",{className:"card-body"},Object.keys(z.ptoByLeaveType).length>0&&r.createElement("div",{className:"analytics-section"},r.createElement("h4",null,"PTO by Leave Type"),r.createElement("div",{className:"analytics-items"},Object.entries(z.ptoByLeaveType).map((e=>{let[t,a]=e;return r.createElement("div",{key:t,className:"analytics-item"},r.createElement("span",{className:"item-icon"},T(t)),r.createElement("span",{className:"item-label"},t.charAt(0).toUpperCase()+t.slice(1)),r.createElement("span",{className:"item-value"},a," days"))})))),Object.keys(z.ptoByMember).length>0&&r.createElement("div",{className:"analytics-section"},r.createElement("h4",null,"PTO by Team Member"),r.createElement("div",{className:"analytics-items"},Object.entries(z.ptoByMember).sort(((e,t)=>{let[,a]=e,[,r]=t;return r-a})).slice(0,5).map((e=>{let[t,a]=e;return r.createElement("div",{key:t,className:"analytics-item"},r.createElement("span",{className:"item-icon"},"ðŸ‘¤"),r.createElement("span",{className:"item-label"},t),r.createElement("span",{className:"item-value"},a," days"))})))),Object.keys(z.ptoByWeekday).length>0&&r.createElement("div",{className:"analytics-section"},r.createElement("h4",null,"Most Popular Days Off"),r.createElement("div",{className:"analytics-items"},Object.entries(z.ptoByWeekday).sort(((e,t)=>{let[,a]=e,[,r]=t;return r-a})).map((e=>{let[t,a]=e;return r.createElement("div",{key:t,className:"analytics-item"},r.createElement("span",{className:"item-icon"},"ðŸ“…"),r.createElement("span",{className:"item-label"},t),r.createElement("span",{className:"item-value"},a," days"))})))))),r.createElement("div",{className:"card upcoming-pto-card"},r.createElement("div",{className:"card-header"},r.createElement("h3",null,"Upcoming PTO")),r.createElement("div",{className:"card-body"},0===M.length?r.createElement("div",{className:"empty-state-small"},r.createElement(l.A,{size:32}),r.createElement("p",null,"No upcoming PTO scheduled")):r.createElement("div",{className:"upcoming-pto-list"},M.map((e=>{var t;return r.createElement("div",{key:e.id,className:"upcoming-pto-item"},r.createElement("div",{className:"pto-user"},r.createElement("div",{className:"user-avatar-small"},(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||"?"),r.createElement("div",{className:"user-info-small"},r.createElement("div",{className:"user-name-small"},e.requester_name),r.createElement("div",{className:"pto-type-small"},T(e.leave_type)," ",e.leave_type))),r.createElement("div",{className:"pto-dates-small"},r.createElement("div",{className:"date-range-small"},B(e.start_date)," - ",B(e.end_date)),r.createElement("div",{className:"duration-small"},e.total_days," days")))})))))),r.createElement("div",{className:"card team-requests-card"},r.createElement("div",{className:"card-header"},r.createElement("h3",null,"Team Requests"),r.createElement("div",{className:"team-requests-controls"},r.createElement("select",{value:N,onChange:e=>g(e.target.value),className:"form-control"},r.createElement("option",{value:"all"},"All Members"),null==m||null===(t=m.members)||void 0===t?void 0:t.map((e=>r.createElement("option",{key:e.id,value:e.jira_account_id||e.id},e.display_name||e.displayName)))),r.createElement("div",{className:"action-buttons-group"},r.createElement("button",{onClick:()=>{c("Redirecting to team calendar view...","info")},className:"btn btn-secondary"},r.createElement(F.A,{size:16}),"View Calendar"),r.createElement("button",{onClick:async()=>{if(m)try{const e=L.map((e=>({Date:(new Date).toLocaleDateString(),Manager:a.displayName,Team:m.name,Department:m.department||"",User:e.requester_name,"Start Date":e.start_date,"End Date":e.end_date,Period:"".concat(e.total_days," days"),"Leave Type":e.leave_type,Reason:e.reason||"","Manager Comment":e.reviewer_comments||"",Status:e.status}))),t=Object.keys(e[0]||{}),r=[t.join(","),...e.map((e=>t.map((t=>'"'.concat((e[t]||"").toString().replace(/"/g,'""'),'"'))).join(",")))].join("\n"),s=new Blob([r],{type:"text/csv"}),l=URL.createObjectURL(s),n=document.createElement("a");n.href=l,n.download="team-pto-report-".concat(m.name,"-").concat(u,"-").concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l),c("Report downloaded successfully!")}catch(e){c("Failed to generate report","error")}},className:"btn btn-primary"},r.createElement(E.A,{size:16}),"Generate Report")))),r.createElement("div",{className:"card-body"},0===L.length?r.createElement("div",{className:"empty-state"},r.createElement(v.A,{size:48}),r.createElement("h4",null,"No Requests Found"),r.createElement("p",null,"No PTO requests found for the selected criteria.")):r.createElement("div",{className:"team-requests-list"},L.map((e=>{var t;return r.createElement("div",{key:e.id,className:"team-request-item"},r.createElement("div",{className:"request-header-row"},r.createElement("div",{className:"request-user-info"},r.createElement("div",{className:"user-avatar"},(null===(t=e.requester_name)||void 0===t?void 0:t.charAt(0))||"?"),r.createElement("div",{className:"user-details"},r.createElement("div",{className:"user-name"},e.requester_name),r.createElement("div",{className:"request-type"},T(e.leave_type)," ",e.leave_type))),r.createElement("div",{className:"request-details-summary"},r.createElement("div",{className:"date-range"},B(e.start_date)," - ",B(e.end_date)),r.createElement("div",{className:"duration"},e.total_days," days")),r.createElement("div",{className:"request-status-section"},r.createElement(W,{status:e.status}),r.createElement("div",{className:"submitted-date"},H(e.submitted_at)))),e.reason&&r.createElement("div",{className:"request-reason-row"},r.createElement("span",{className:"reason-label"},"Reason:"),r.createElement("span",{className:"reason-text"},e.reason)),e.reviewer_comments&&r.createElement("div",{className:"request-comments-row"},r.createElement("span",{className:"comments-label"},"Manager Comments:"),r.createElement("span",{className:"comments-text"},e.reviewer_comments)))}))))))};var G=a(5627),V=a(697);function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(Object(a),!0).forEach((function(t){X(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function X(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Z=e=>{let{events:t,onDateSelect:a,selectedDates:s,onSubmitPTO:l,currentUser:n,allUsers:c,allTeams:m,isAdmin:i}=e;const[o,d]=(0,r.useState)(new Date),[u,v]=(0,r.useState)(!1),[p,y]=(0,r.useState)({team:"all",user:"all",leaveType:"all",status:"all"}),[E,N]=(0,r.useState)(!1),g=null==c?void 0:c.find((e=>e.jira_account_id===(null==n?void 0:n.accountId)||e.email_address===(null==n?void 0:n.emailAddress))),b=e=>e.toISOString().split("T")[0],f=()=>t?t.filter((e=>{if("all"!==p.team){const t=null==c?void 0:c.find((t=>t.jira_account_id===e.requester_id||t.email_address===e.requester_email));if(!t||t.team_id!==p.team)return!1}if("me"===p.user){if(e.requester_id!==(null==n?void 0:n.accountId)&&e.requester_email!==(null==n?void 0:n.emailAddress))return!1}else if("all"!==p.user&&e.requester_id!==p.user&&e.requester_email!==p.user)return!1;return("all"===p.leaveType||e.leave_type===p.leaveType)&&("all"===p.status||e.status===p.status)})):[],h=e=>{d((t=>{const a=new Date(t);return a.setMonth(t.getMonth()+e),a}))},w=(e,t)=>{y((a=>Q(Q({},a),{},{[e]:t})))},D=()=>Object.values(p).some((e=>"all"!==e)),O=(e=>{const t=e.getFullYear(),a=e.getMonth(),r=new Date(t,a,1),s=new Date(t,a+1,0).getDate(),l=r.getDay(),n=[];for(let e=0;e<l;e++)n.push(null);for(let e=1;e<=s;e++)n.push(new Date(t,a,e));return n})(o);return r.createElement("div",{className:"card calendar-card"},r.createElement("div",{className:"calendar-header"},r.createElement("div",{className:"calendar-header-controls"},r.createElement("button",{onClick:()=>h(-1),className:"calendar-nav-btn"},"â†"),r.createElement("h2",{className:"calendar-title"},["January","February","March","April","May","June","July","August","September","October","November","December"][o.getMonth()]," ",o.getFullYear()),r.createElement("button",{onClick:()=>h(1),className:"calendar-nav-btn"},"â†’")),r.createElement("div",{className:"calendar-header-actions"},r.createElement("button",{onClick:()=>N(!E),className:"btn btn-secondary calendar-filter-btn ".concat(D()?"has-filters":"")},r.createElement(G.A,{size:16}),r.createElement("span",null,"Filters"),D()&&r.createElement("span",{className:"filter-indicator"},"â—")),s.length>0&&r.createElement("button",{onClick:()=>v(!0),className:"btn btn-primary calendar-submit-btn"},r.createElement(V.A,{size:16}),r.createElement("span",null,"Request PTO (",s.length," days)")))),E&&r.createElement("div",{className:"calendar-filters-panel"},r.createElement("div",{className:"filters-grid"},r.createElement("div",{className:"filter-group"},r.createElement("label",null,"Team"),r.createElement("select",{value:p.team,onChange:e=>w("team",e.target.value),className:"form-control"},r.createElement("option",{value:"all"},"All Teams"),(m?i?m:m.filter((e=>{var t,a;return(null===(t=e.manager)||void 0===t?void 0:t.accountId)===(null==n?void 0:n.accountId)||(null===(a=e.manager)||void 0===a?void 0:a.jira_account_id)===(null==n?void 0:n.accountId)})):[]).map((e=>r.createElement("option",{key:e.id,value:e.id},e.name))))),r.createElement("div",{className:"filter-group"},r.createElement("label",null,"User"),r.createElement("select",{value:p.user,onChange:e=>w("user",e.target.value),className:"form-control"},r.createElement("option",{value:"all"},"All Users"),r.createElement("option",{value:"me"},"Me"),null==c?void 0:c.map((e=>r.createElement("option",{key:e.id,value:e.jira_account_id||e.id},e.display_name||e.displayName))))),r.createElement("div",{className:"filter-group"},r.createElement("label",null,"Leave Type"),r.createElement("select",{value:p.leaveType,onChange:e=>w("leaveType",e.target.value),className:"form-control"},r.createElement("option",{value:"all"},"All Types"),["vacation","sick","personal","holiday"].map((e=>r.createElement("option",{key:e,value:e},e.charAt(0).toUpperCase()+e.slice(1)))))),r.createElement("div",{className:"filter-group"},r.createElement("label",null,"Status"),r.createElement("select",{value:p.status,onChange:e=>w("status",e.target.value),className:"form-control"},r.createElement("option",{value:"all"},"All Status"),["pending","approved","declined"].map((e=>r.createElement("option",{key:e,value:e},e.charAt(0).toUpperCase()+e.slice(1))))))),r.createElement("div",{className:"filters-actions"},r.createElement("button",{onClick:()=>{y({team:"all",user:"all",leaveType:"all",status:"all"})},className:"btn btn-secondary"},"Clear All"),r.createElement("button",{onClick:()=>N(!1),className:"btn btn-primary"},"Apply Filters"))),r.createElement("div",{className:"calendar-info"},r.createElement("p",null,"ðŸ’¡ Click on dates to select them for your PTO request. Selected dates will be highlighted in blue.",D()&&r.createElement("span",null," â€¢ Filters are active - some events may be hidden."))),r.createElement("div",{className:"calendar-days-row"},["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e=>r.createElement("div",{key:e,className:"calendar-day-label"},e)))),r.createElement("div",{className:"calendar-days-row"},O.map(((e,t)=>{if(!e)return r.createElement("div",{key:t,className:"calendar-day calendar-day-empty"});const l=(n=e,s.includes(b(n)));var n;(e=>{const t=b(e);f().some((e=>t>=e.start_date&&t<=e.end_date))})(e);const c=(e=>{const t=b(e);return f().filter((e=>t>=e.start_date&&t<=e.end_date))})(e),m=e.toDateString()===(new Date).toDateString(),i=e<new Date((new Date).setHours(0,0,0,0));return r.createElement("div",{key:e.toISOString(),onClick:()=>!i&&a(e),className:"calendar-day"+(i?" calendar-day-past":" calendar-day-active")+(l?" calendar-day-selected":"")+(m?" calendar-day-today":"")},r.createElement("div",{className:"calendar-day-inner"},r.createElement("span",{className:"calendar-day-number"+(m?" calendar-day-number-today":"")+(i?" calendar-day-number-past":"")},e.getDate()),r.createElement("div",{className:"calendar-day-events"},c.slice(0,2).map(((e,t)=>r.createElement("div",{key:"".concat(e.id,"-").concat(t),className:"calendar-event"+("approved"===e.status?" calendar-event-approved":"")+("pending"===e.status?" calendar-event-pending":"")+("declined"===e.status?" calendar-event-declined":""),title:"".concat(e.requester_name,": ").concat(e.reason)},r.createElement("span",null,T(e.leave_type)),r.createElement("span",{className:"calendar-event-name"},e.requester_name)))),c.length>2&&r.createElement("div",{className:"calendar-event-more"},"+",c.length-2," more"))))}))),r.createElement("div",{className:"calendar-legend"},r.createElement("div",{className:"calendar-legend-item"},r.createElement("span",{className:"calendar-legend-dot calendar-event-approved"}),r.createElement("span",null,"Approved")),r.createElement("div",{className:"calendar-legend-item"},r.createElement("span",{className:"calendar-legend-dot calendar-event-pending"}),r.createElement("span",null,"Pending")),r.createElement("div",{className:"calendar-legend-item"},r.createElement("span",{className:"calendar-legend-dot calendar-event-declined"}),r.createElement("span",null,"Declined")),r.createElement("div",{className:"calendar-legend-item"},r.createElement("span",{className:"calendar-legend-dot calendar-day-selected"}),r.createElement("span",null,"Selected"))),u&&r.createElement(q,{selectedDates:s,onClose:()=>v(!1),onSubmit:async e=>{const t=await l(e);null!=t&&t.success&&v(!1)},currentUser:n,currentUserData:g,userManager:(()=>{if(null==g||!g.team_id)return null;const e=null==m?void 0:m.find((e=>e.id===g.team_id));return null!=e&&e.manager?e.manager:null})(),allUsers:c,allTeams:m,allRequests:t,isAdmin:i}))};var $=a(8188);const ee=e=>{let{requests:t,currentUser:a,onEditRequest:s,onCancelRequest:c}=e;const[m,i]=(0,r.useState)("all"),[o,d]=(0,r.useState)("all"),[u,v]=(0,r.useState)(!1),y=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),E=(0,r.useMemo)((()=>{let e=[...t];if("all"!==m){const t=new Date,a=new Date;switch(m){case"current_year":a.setMonth(0,1),a.setHours(0,0,0,0);break;case"last_30_days":a.setDate(t.getDate()-30);break;case"last_90_days":a.setDate(t.getDate()-90)}e=e.filter((e=>new Date(e.submitted_at)>=a))}return"all"!==o&&(e=e.filter((e=>e.status===o))),e.sort(((e,t)=>new Date(t.submitted_at)-new Date(e.submitted_at)))}),[t,m,o]),N=(0,r.useMemo)((()=>({totalRequests:E.length,pendingRequests:E.filter((e=>"pending"===e.status)).length,approvedRequests:E.filter((e=>"approved"===e.status)).length,declinedRequests:E.filter((e=>"declined"===e.status)).length,totalDays:E.filter((e=>"approved"===e.status)).reduce(((e,t)=>e+(t.total_days||0)),0),ptoByType:E.filter((e=>"approved"===e.status)).reduce(((e,t)=>{const a=t.leave_type||"unknown";return e[a]=(e[a]||0)+(t.total_days||0),e}),{})})),[E]);return 0===t.length?r.createElement("div",{className:"requests-container"},r.createElement("div",{className:"card requests-card"},r.createElement("h2",{className:"card-title"},"My PTO Requests"),r.createElement("div",{className:"requests-empty"},r.createElement(l.A,{size:48,className:"requests-empty-icon"}),r.createElement("h3",{className:"requests-empty-title"},"No PTO requests found"),r.createElement("p",null,"You haven't submitted any PTO requests yet."),r.createElement("p",{className:"requests-empty-desc"},"Go to the Calendar tab to submit your first request!")))):r.createElement("div",{className:"requests-container"},r.createElement("div",{className:"requests-header-section"},r.createElement("div",{className:"requests-page-header"},r.createElement("h2",{className:"page-title"},"My PTO Requests"),r.createElement("div",{className:"requests-page-controls"},r.createElement("button",{onClick:()=>v(!u),className:"btn btn-secondary ".concat(u?"active":"")},r.createElement(G.A,{size:16}),"Filters"))),u&&r.createElement("div",{className:"filters-panel"},r.createElement("div",{className:"filters-row"},r.createElement("div",{className:"filter-group"},r.createElement("label",null,"Date Range"),r.createElement("select",{value:m,onChange:e=>i(e.target.value),className:"form-control"},r.createElement("option",{value:"all"},"All Time"),r.createElement("option",{value:"current_year"},"Current Year"),r.createElement("option",{value:"last_90_days"},"Last 90 Days"),r.createElement("option",{value:"last_30_days"},"Last 30 Days"))),r.createElement("div",{className:"filter-group"},r.createElement("label",null,"Status"),r.createElement("select",{value:o,onChange:e=>d(e.target.value),className:"form-control"},r.createElement("option",{value:"all"},"All Status"),r.createElement("option",{value:"pending"},"Pending"),r.createElement("option",{value:"approved"},"Approved"),r.createElement("option",{value:"declined"},"Declined"))))),r.createElement("div",{className:"summary-cards-container"},r.createElement("div",{className:"summary-card stat-blue"},r.createElement("div",{className:"summary-icon"},r.createElement(l.A,{size:24})),r.createElement("div",{className:"summary-content"},r.createElement("div",{className:"summary-value"},N.totalRequests),r.createElement("div",{className:"summary-label"},"Total Requests"))),r.createElement("div",{className:"summary-card stat-yellow"},r.createElement("div",{className:"summary-icon"},r.createElement(n.A,{size:24})),r.createElement("div",{className:"summary-content"},r.createElement("div",{className:"summary-value"},N.pendingRequests),r.createElement("div",{className:"summary-label"},"Pending"))),r.createElement("div",{className:"summary-card stat-green"},r.createElement("div",{className:"summary-icon"},r.createElement(I.A,{size:24})),r.createElement("div",{className:"summary-content"},r.createElement("div",{className:"summary-value"},N.approvedRequests),r.createElement("div",{className:"summary-label"},"Approved"))),r.createElement("div",{className:"summary-card stat-red"},r.createElement("div",{className:"summary-icon"},r.createElement(p.A,{size:24})),r.createElement("div",{className:"summary-content"},r.createElement("div",{className:"summary-value"},N.declinedRequests),r.createElement("div",{className:"summary-label"},"Declined"))),r.createElement("div",{className:"summary-card stat-purple"},r.createElement("div",{className:"summary-icon"},r.createElement(F.A,{size:24})),r.createElement("div",{className:"summary-content"},r.createElement("div",{className:"summary-value"},N.totalDays),r.createElement("div",{className:"summary-label"},"Approved Days"))))),r.createElement("div",{className:"requests-content"},Object.keys(N.ptoByType).length>0&&r.createElement("div",{className:"card pto-breakdown-card"},r.createElement("div",{className:"card-header"},r.createElement("h3",null,"PTO Breakdown by Leave Type")),r.createElement("div",{className:"card-body"},r.createElement("div",{className:"pto-breakdown-grid"},Object.entries(N.ptoByType).map((e=>{let[t,a]=e;return r.createElement("div",{key:t,className:"pto-breakdown-item"},r.createElement("div",{className:"breakdown-icon"},T(t)),r.createElement("div",{className:"breakdown-details"},r.createElement("div",{className:"breakdown-type"},t.charAt(0).toUpperCase()+t.slice(1)),r.createElement("div",{className:"breakdown-days"},a," ",1===a?"day":"days")),r.createElement("div",{className:"breakdown-percentage"},(a/N.totalDays*100).toFixed(1),"%"))}))))),r.createElement("div",{className:"card requests-list-card"},r.createElement("div",{className:"card-header"},r.createElement("h3",null,"Request History"),r.createElement("div",{className:"requests-count"},E.length," ",1===E.length?"request":"requests")),r.createElement("div",{className:"card-body"},0===E.length?r.createElement("div",{className:"no-results"},r.createElement("p",null,"No requests found for the selected filters.")):r.createElement("div",{className:"requests-list"},E.map((e=>{return r.createElement("div",{key:e.id,className:"request-item"},r.createElement("div",{className:"request-main-content"},r.createElement("div",{className:"request-header"},r.createElement("div",{className:"request-type-info"},r.createElement("span",{className:"request-emoji"},T(e.leave_type)),r.createElement("div",{className:"request-title-group"},r.createElement("h4",{className:"request-title"},e.leave_type.charAt(0).toUpperCase()+e.leave_type.slice(1)," Leave"),r.createElement("div",{className:"request-dates"},y(e.start_date)," - ",y(e.end_date)))),r.createElement("div",{className:"request-status-section"},r.createElement(W,{status:e.status}),r.createElement("div",{className:"request-duration"},e.total_days," ",1===e.total_days?"day":"days"))),e.reason&&r.createElement("div",{className:"request-reason"},r.createElement("span",{className:"reason-label"},"Reason:"),r.createElement("span",{className:"reason-text"},e.reason)),r.createElement("div",{className:"request-metadata"},r.createElement("div",{className:"metadata-item"},r.createElement("span",{className:"metadata-label"},"Submitted:"),r.createElement("span",{className:"metadata-value"},(t=e.submitted_at,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})))),"pending"!==e.status&&e.reviewed_at&&r.createElement("div",{className:"metadata-item"},r.createElement("span",{className:"metadata-label"},"approved"===e.status?"Approved:":"Declined:"),r.createElement("span",{className:"metadata-value"},y(e.reviewed_at)))),"pending"!==e.status&&e.reviewer_comments&&r.createElement("div",{className:"request-comments"},r.createElement("div",{className:"comments-header"},"Manager Comments:"),r.createElement("div",{className:"comments-text"},e.reviewer_comments))),r.createElement("div",{className:"request-actions"},(e=>"pending"===e.status&&e.requester_id===a.accountId)(e)&&r.createElement("button",{onClick:()=>s&&s(e),className:"btn btn-sm btn-secondary",title:"Edit Request"},r.createElement($.A,{size:14}),"Edit"),(e=>{if(e.requester_id!==a.accountId)return!1;if("approved"===e.status){const t=new Date(e.end_date),a=new Date;return a.setHours(0,0,0,0),t>=a}return"pending"===e.status})(e)&&r.createElement("button",{onClick:()=>c&&c(e),className:"btn btn-sm btn-danger",title:"Cancel Request"},r.createElement(w.A,{size:14}),"pending"===e.status?"Cancel":"Remove")));var t})))))))};function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(Object(a),!0).forEach((function(t){re(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function re(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const se=()=>{const[e,t]=(0,r.useState)(null),[a,s]=(0,r.useState)(!0),[l,n]=(0,r.useState)(null),[c,m]=(0,r.useState)(0);(0,r.useEffect)((()=>{i()}),[]);const i=async function(){s(!0),n(null);try{var e;console.log("ðŸ” Fetching current user...");let a=await(0,o.invoke)("getCurrentUser");if(a.success||"NETWORK_ERROR"!==(null===(e=a.error)||void 0===e?void 0:e.type)||(console.log("ðŸ”„ Main method failed, trying fallback..."),a=await(0,o.invoke)("getCurrentUserFallback")),!a.success)throw new Error(a.message||"Failed to fetch current user");{console.log("ðŸ‘¤ User data received:",a.data);let e=!1;try{const t=await(0,o.invoke)("checkUserAdminStatus",{accountId:a.data.accountId});e=!!t.success&&t.data.isAdmin}catch(e){console.warn("âš ï¸ Could not check admin status:",e)}const r=ae(ae({},a.data),{},{isAdmin:e});console.log("âœ… Current user loaded:",r.displayName,"isAdmin:",r.isAdmin),t(r),m(0)}}catch(e){if(console.error("âŒ Error fetching current user:",e),n(e.message),e.message.includes("timeout")||e.message.includes("fetch failed")){if(c<3)return console.log("ðŸ”„ Auto-retrying in 5 seconds... (attempt ".concat(c+1,"/3)")),void setTimeout((()=>{m((e=>e+1)),i(!0)}),5e3);n("Network connection failed after multiple attempts. Please check your internet connection and refresh the page.")}}finally{s(!1)}};return{currentUser:e,loading:a,error:l,refreshUser:async()=>{m(0),await i()},testConnectivity:async()=>{try{return await(0,o.invoke)("testConnectivity")}catch(e){return{success:!1,message:"Connectivity test failed: "+e.message}}},isAdmin:(null==e?void 0:e.isAdmin)||!1,retryCount:c}};function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(Object(a),!0).forEach((function(t){ce(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ce(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const me=e=>{const[t,a]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[n,c]=(0,r.useState)(null),m=(0,r.useCallback)((async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e){l(!0),c(null);try{console.log("ðŸ“‹ Fetching PTO requests with filters:",t);const e=await(0,o.invoke)("getPTORequests",t);if(!e.success)throw new Error(e.message||"Failed to fetch PTO requests");var r;a(e.data||[]),console.log("âœ… Loaded ".concat((null===(r=e.data)||void 0===r?void 0:r.length)||0," PTO requests"))}catch(e){c(e.message),console.error("âŒ Error fetching PTO requests:",e)}finally{l(!1)}}}),[e]),i=(0,r.useCallback)((async e=>{l(!0),c(null);try{console.log("ðŸ“ Submitting PTO request:",e);const t=await(0,o.invoke)("storePTORequest",e);if(t.success)return await m(),{success:!0,data:t.data};throw new Error(t.message||"Failed to submit PTO request")}catch(e){return c(e.message),console.error("âŒ Error submitting PTO request:",e),{success:!1,message:e.message}}finally{l(!1)}}),[m]),d=(0,r.useCallback)((async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";l(!0),c(null);try{console.log("âœ… Updating PTO request ".concat(e," to ").concat(t));const s=await(0,o.invoke)("updatePTORequest",{requestId:e,status:t,comment:r});if(s.success)return a((a=>a.map((a=>a.id===e?ne(ne({},a),{},{status:t,reviewer_comments:r,reviewed_at:(new Date).toISOString()}):a)))),{success:!0};throw new Error(s.message||"Failed to update PTO request")}catch(e){return c(e.message),console.error("âŒ Error updating PTO request:",e),{success:!1,message:e.message}}finally{l(!1)}}),[]),u=(0,r.useCallback)((async e=>{l(!0),c(null);try{console.log("ðŸ—‘ï¸ Cancelling PTO request ".concat(e));const t=await(0,o.invoke)("updatePTORequest",{requestId:e,status:"cancelled",comment:"Cancelled by user"});if(t.success)return a((t=>t.filter((t=>t.id!==e)))),{success:!0};throw new Error(t.message||"Failed to cancel PTO request")}catch(e){return c(e.message),console.error("âŒ Error cancelling PTO request:",e),{success:!1,message:e.message}}finally{l(!1)}}),[]),v=(0,r.useCallback)((e=>t.filter((t=>t.requester_id===e))),[t]),p=(0,r.useCallback)((()=>t.filter((e=>"pending"===e.status))),[t]),y=(0,r.useCallback)((e=>t.filter((t=>t.status===e))),[t]),E=(0,r.useCallback)(((e,a)=>t.filter((t=>{const r=new Date(t.start_date),s=new Date(t.end_date),l=new Date(e),n=new Date(a);return r>=l&&r<=n||s>=l&&s<=n||r<=l&&s>=n}))),[t]),N=(0,r.useCallback)((async()=>{if(null==e||!e.emailAddress)return[];try{console.log("ðŸ“‹ Fetching pending requests for manager:",e.emailAddress);const t=await(0,o.invoke)("getPendingRequests",{managerEmail:e.emailAddress});return t.success?t.data||[]:(console.error("Failed to fetch pending requests:",t.message),[])}catch(e){return console.error("âŒ Error fetching pending requests for manager:",e),[]}}),[e]);return(0,r.useEffect)((()=>{e&&m()}),[e,m]),{requests:t,loading:s,error:n,fetchRequests:m,submitRequest:i,updateRequestStatus:d,cancelRequest:u,getUserRequests:v,getPendingRequests:p,getRequestsByStatus:y,getRequestsByDateRange:E,getPendingRequestsForManager:N}},ie=()=>{var e;const[t,a]=(0,r.useState)("calendar"),[s,u]=(0,r.useState)([]),[v,p]=(0,r.useState)(null),[y,E]=(0,r.useState)(!0),[N,g]=(0,r.useState)([]),[b,f]=(0,r.useState)([]),[h,w]=(0,r.useState)([]),{currentUser:D,loading:T,error:O,isAdmin:k}=se(),{requests:_,loading:q,error:S,submitRequest:A,updateRequestStatus:x,cancelRequest:P,fetchRequests:C,getUserRequests:j,getPendingRequests:U}=me(D),[R,I]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{if(D)try{const e=await(0,o.invoke)("getUserTeams",{userId:D.accountId});e.success&&g(e.data||[]);const[t,a]=await Promise.all([(0,o.invoke)("getUsers"),(0,o.invoke)("getTeams")]);if(t.success&&f(t.data||[]),a.success){const e=a.data||[];w(e);const t=e.filter((e=>{var t,a;return(null===(t=e.manager)||void 0===t?void 0:t.accountId)===D.accountId||(null===(a=e.manager)||void 0===a?void 0:a.jira_account_id)===D.accountId}));I(t.length>0||k)}}catch(e){console.error("Error loading additional data:",e)}})()}),[D,k]),(0,r.useEffect)((()=>{(async()=>{E(!0);try{console.log("ðŸ”§ Initializing PTO App with Admin Setup...");const e=await(0,o.invoke)("initializePTODatabaseWithTeamManagement");if(e.success)console.log("âœ… PTO App and Admin initialized:",e.data);else{console.warn("Admin setup failed, trying regular init:",e.message);const t=await(0,o.invoke)("initializePTODatabase");if(!t.success)throw new Error(t.message)}console.log("âœ… PTO App initialization complete")}catch(e){console.error("âŒ App initialization failed:",e),F("Failed to initialize app: "+e.message,"error")}finally{E(!1)}})()}),[]);const F=function(e){p({message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success"}),setTimeout((()=>p(null)),5e3)},z=[{id:"calendar",label:"Calendar",icon:l.A,description:"View and create PTO requests"},{id:"requests",label:"My Requests",icon:n.A,description:"View your PTO request history"},...R?[{id:"manager",label:"Manager",icon:c.A,description:"Manage team PTO requests"}]:[],...k?[{id:"admin",label:"Admin",icon:m.A,description:"Administrative functions"}]:[]],M=j(null==D?void 0:D.accountId),W=U().filter((e=>e.requester_id!==(null==D?void 0:D.accountId)));return y||T?r.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},r.createElement("div",{className:"text-center"},r.createElement("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),r.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"Initializing PTO Management"),r.createElement("p",{className:"text-gray-600"},"Setting up database and admin users..."))):O?r.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},r.createElement("div",{className:"text-center p-8 bg-white rounded-lg shadow-md"},r.createElement("div",{className:"text-red-500 mb-4"},r.createElement("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"}))),r.createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},"Authentication Error"),r.createElement("p",{className:"text-gray-600 mb-4"},"Failed to load user information: ",O),r.createElement("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600"},"Retry"))):D?r.createElement("div",{className:"min-h-screen bg-gray-50"},r.createElement("header",{className:"bg-white shadow-sm border-b"},r.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},r.createElement("div",{className:"flex justify-between items-center h-16"},r.createElement("div",{className:"flex items-center space-x-3"},r.createElement("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center"},r.createElement(l.A,{size:20,className:"text-white"})),r.createElement("div",null,r.createElement("h1",{className:"text-xl font-semibold text-gray-900"},"PTO Management"))),r.createElement("div",{className:"flex items-center space-x-4"},r.createElement("div",{className:"hidden md:flex items-center space-x-4 text-sm text-gray-600"},R&&r.createElement("div",{className:"flex items-center space-x-1"},r.createElement("div",{className:"w-2 h-2 bg-orange-400 rounded-full"}),r.createElement("span",null,W.length," pending approvals")),r.createElement("div",{className:"flex items-center space-x-1"},r.createElement("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),r.createElement("span",null,M.filter((e=>"approved"===e.status)).length," approved")),N.length>0&&r.createElement("div",{className:"flex items-center space-x-1"},r.createElement("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),r.createElement("span",null,N.length," teams"))),r.createElement("div",{className:"flex items-center space-x-2"},r.createElement("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center text-white text-sm font-semibold relative"},(null===(e=D.displayName)||void 0===e?void 0:e.charAt(0))||r.createElement(i.A,{size:16}),k&&r.createElement("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-purple-500 rounded-full flex items-center justify-center"},r.createElement(m.A,{size:8,className:"text-white"})),R&&!k&&r.createElement("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-orange-500 rounded-full flex items-center justify-center"},r.createElement(c.A,{size:8,className:"text-white"}))),r.createElement("div",{className:"hidden sm:block"},r.createElement("div",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1"},r.createElement("span",null,D.displayName),k&&r.createElement(m.A,{size:12,className:"text-purple-600"}),R&&!k&&r.createElement(c.A,{size:12,className:"text-orange-600"})),r.createElement("div",{className:"text-xs text-gray-500"},D.emailAddress))))))),r.createElement("nav",{className:"bg-white border-b"},r.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},r.createElement("div",{className:"flex space-x-8"},z.map((e=>{const s=e.icon,l=t===e.id;return r.createElement("button",{key:e.id,onClick:()=>a(e.id),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ".concat(l?"admin"===e.id?"border-purple-500 text-purple-600":"manager"===e.id?"border-orange-500 text-orange-600":"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),title:e.description},r.createElement(s,{size:16}),r.createElement("span",null,e.label),"manager"===e.id&&W.length>0&&r.createElement("span",{className:"bg-orange-500 text-white text-xs rounded-full px-2 py-0.5 min-w-[20px] text-center"},W.length),"admin"===e.id&&r.createElement("span",{className:"bg-purple-100 text-purple-600 text-xs rounded-full px-2 py-0.5"},"Admin"),"manager"===e.id&&!k&&r.createElement("span",{className:"bg-orange-100 text-orange-600 text-xs rounded-full px-2 py-0.5"},"Manager"))}))))),r.createElement("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},"calendar"===t&&r.createElement(Z,{events:_,onDateSelect:e=>{const t=e.toISOString().split("T")[0];u((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t].sort()))},selectedDates:s,onSubmitPTO:async e=>{try{var t;const a=b.find((e=>e.jira_account_id===(null==D?void 0:D.accountId)||e.email_address===(null==D?void 0:D.emailAddress)));let r=null;if(null!=a&&a.team_id){const e=h.find((e=>e.id===a.team_id));null!=e&&e.manager&&(r=e.manager)}const l={reporter:e.targetUser||D,manager:e.manager||r||{accountId:"manager-default",displayName:"Manager",emailAddress:"manager@company.com"},startDate:e.startDate||s[0],endDate:e.endDate||s[s.length-1],leaveType:e.leaveType||(null===(t=e.dailySchedules)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.leaveType)||"vacation",reason:e.reason||"",dailySchedules:e.dailySchedules||s.map((e=>({date:e,type:"FULL_DAY",leaveType:"vacation"})))},n=await A(l);return n.success?(u([]),F("PTO request submitted successfully!"),{success:!0}):(F(n.message||"Failed to submit PTO request","error"),{success:!1})}catch(e){return console.error("Error submitting PTO request:",e),F("Failed to submit PTO request","error"),{success:!1}}},currentUser:D,allUsers:b,allTeams:h,isAdmin:k}),"requests"===t&&r.createElement(ee,{requests:M,currentUser:D,onEditRequest:e=>{F("Edit functionality will be implemented soon!")},onCancelRequest:async e=>{if(window.confirm("Are you sure you want to cancel this PTO request?"))try{const t=await P(e.id);t.success?F("PTO request cancelled successfully!"):F(t.message||"Failed to cancel PTO request","error")}catch(e){console.error("Error cancelling PTO request:",e),F("Failed to cancel PTO request","error")}}}),"manager"===t&&R&&r.createElement(J,{currentUser:D,isAdmin:k,showNotification:F}),"admin"===t&&k&&r.createElement(L,{currentUser:D,showNotification:F})),(q||y)&&r.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-25 flex items-center justify-center z-50"},r.createElement("div",{className:"bg-white rounded-lg p-6 flex items-center space-x-3"},r.createElement("div",{className:"w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),r.createElement("span",{className:"text-gray-700"},"Processing..."))),v&&r.createElement(d,{message:v.message,type:v.type,onClose:()=>p(null)})):r.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},r.createElement("div",{className:"text-center"},r.createElement("div",{className:"w-16 h-16 border-4 border-gray-300 border-t-blue-500 rounded-full animate-spin mx-auto mb-4"}),r.createElement("p",{className:"text-gray-600"},"Loading user information...")))};console.log("PTO app initializing...");const oe=async()=>{const e=document.getElementById("root");if(!e)return void console.error('Root element not found! Make sure there is a div with id="root" in your HTML.');(0,s.H)(e).render(r.createElement(r.StrictMode,null,r.createElement(ie,null))),console.log("App rendered successfully");try{await o.view.resize(),console.log("Forge iframe resized")}catch(e){console.warn("Unable to resize Forge iframe:",e)}};"complete"===document.readyState||"interactive"===document.readyState?oe():document.addEventListener("DOMContentLoaded",oe)}},a={};function r(e){var s=a[e];if(void 0!==s)return s.exports;var l=a[e]={exports:{}};return t[e](l,l.exports,r),l.exports}r.m=t,e=[],r.O=(t,a,s,l)=>{if(!a){var n=1/0;for(o=0;o<e.length;o++){a=e[o][0],s=e[o][1],l=e[o][2];for(var c=!0,m=0;m<a.length;m++)(!1&l||n>=l)&&Object.keys(r.O).every((e=>r.O[e](a[m])))?a.splice(m--,1):(c=!1,l<n&&(n=l));if(c){e.splice(o--,1);var i=s();void 0!==i&&(t=i)}}return t}l=l||0;for(var o=e.length;o>0&&e[o-1][2]>l;o--)e[o]=e[o-1];e[o]=[a,s,l]},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={792:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var s,l,n=a[0],c=a[1],m=a[2],i=0;if(n.some((t=>0!==e[t]))){for(s in c)r.o(c,s)&&(r.m[s]=c[s]);if(m)var o=m(r)}for(t&&t(a);i<n.length;i++)l=n[i],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(o)},a=self.webpackChunkpto_request_app=self.webpackChunkpto_request_app||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var s=r.O(void 0,[96],(()=>r(3152)));s=r.O(s)})();